<div class="dialog-wrapper">
	<h2 class="dialog-title" mat-dialog-title>
		Create direction
		<button class="close-button" mat-dialog-close mat-icon-button>
			<mat-icon class="close-icon">close</mat-icon>
		</button>
	</h2>

	<section [formGroup]="directionForm">
		<div class="search-wrapper">
			<b2b-ngx-select
				formControlName="type"
				[options]="types"
				bindValue="type"
				bindLabel="name"
				placeholder="Select direction type"
				[theme]="b2bNgxSelectThemeEnum.BACKGROUND_GRAY">
			</b2b-ngx-select>
		</div>

		<div class="search-wrapper" *ngIf="directionForm.controls['type'].value">
			@if (directionForm.controls['type'].value === 'country') {

				<div class="pt-2">
				<b2b-ngx-country-select
					formControlName="country"
					class="admin-article__country"
					placeholder="Select Country"></b2b-ngx-country-select>
				</div>


				<p [@fadeInOut]
					 class="error"
					 *ngIf="directionForm.get('country').errors?.['cityExists']">
					This {{ directionForm.controls['type'].value }} already exist
				</p>

				<div formArrayName="countryNames">
				@for (item of countryNames.controls; let i = $index; track item) {
						<div class="d-flex gap-1 pt-4">
							<input
								[formControlName]="i"
								class="b2b-ngx-input background background-gray"
								placeholder="Input alternative country name" />

							<img b2bNgxIcon (click)="deleteAlternativeName(i)" name="delete" />
						</div>
				}
				</div>


				<div class="d-flex justify-content-end w-100">
					<button type="button" class="add-more bg-white" (click)="addField()">
						+ Add more
					</button>
				</div>

			} @else {
				<b2b-ngx-country-select
					[customOptions]="{value: cityOptions,length: cityOptions.value?.length }"
					formControlName="country"
					class="admin-article__country"
					placeholder="Select city"></b2b-ngx-country-select>
			}
		</div>

		<div class="search-wrapper" *ngIf="showNameInput">
			<input
				formControlName="name"
				class="b2b-ngx-input background background-gray"
				placeholder="Input name of direction" />

			<p
				[@fadeInOut]
				class="error"
				*ngIf="directionForm.get('name').errors?.['cityExists']">
				This {{ directionForm.controls['type'].value }} already exist
			</p>
		</div>

		<b2b-ngx-checkbox
			formControlName="active"
			*ngIf="directionForm.controls['type'].value">
			Active
		</b2b-ngx-checkbox>

		<div class="button-wrapper mt-16">
			<button
				class="b2b-ngx-button background background-black"
				(click)="save()">
				Save
			</button>
		</div>
	</section>
</div>
