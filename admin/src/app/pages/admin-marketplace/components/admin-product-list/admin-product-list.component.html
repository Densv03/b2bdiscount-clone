<div class="product-wrapper">
	<form [formGroup]="form">
		<b2b-categories-dialog
			*ngIf="activeSelectionSource !== visibleListEnum.COMPANIES; else search"
			formControlName="categories[]"></b2b-categories-dialog>

		<ng-template #search>
			<input
				type="text"
				formControlName="q"
				b2bNgxInput
				[theme]="b2bNgxInputThemeEnum.BACKGROUND_WHITE"
				placeholder="Enter name of company" />
		</ng-template>
	</form>

	<ul class="market-products">
		<li
			*ngFor="let product of products$ | async"
			class="product"
			[routerLink]="[
				'/b2bmarket/listing/products/',
				product?.path || product._id
			]">
			<div class="info">
				<div class="info-header">
					<div class="product-title">{{ product.title }}</div>
					<div class="product-status">
						<span *ngIf="!product.productApproved && !product.productRejected"
							>Verification</span
						>
						<span *ngIf="product.productApproved">Approved</span>
						<span *ngIf="product.productRejected">Rejected</span>
					</div>
					<div class="product-views">
						{{ product.views }}
						<img b2bNgxIcon name="eye" />
					</div>
				</div>
			</div>
			<div class="dropdown">
				<b2b-ngx-dropdown [options]="menuOptions" [optionToReturn]="product">
					<button b2bNgxButton class="flex items-center">
						<img b2bNgxIcon name="more" />
					</button>
				</b2b-ngx-dropdown>
			</div>
		</li>
	</ul>

	<b2b-pagination
		[length]="productsLength$ | async"
		[perPage]="PRODUCTS_LIMIT"
		(togglePageNumber)="togglePage($event)"
		[currentPage]="currentPage$ | async"></b2b-pagination>
</div>
