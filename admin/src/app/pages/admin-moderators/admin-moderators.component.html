<div class="moderator">
	<div class="moderator__buttons">
		<button
			(click)="openAddRoleDialog()"
			b2bNgxButton
			[theme]="b2bNgxButtonTheme.BACKGROUND_BLACK">
			Add new Role
		</button>

		<button
			(click)="openAddModeratorDialog()"
			b2bNgxButton
			[theme]="b2bNgxButtonTheme.BACKGROUND_BLACK">
			Add new Moderator
		</button>
	</div>

	<div *ngIf="roles$ | async as roles" class="moderator__roles">
		<div class="moderator__title">Available roles:</div>
		<div class="moderator__roles-table">
			<table mat-table [dataSource]="roles" class="mat-elevation-z8">
				<ng-container matColumnDef="Role name">
					<th mat-header-cell *matHeaderCellDef>Role name</th>
					<td mat-cell *matCellDef="let role">{{ role.name }}</td>
				</ng-container>

				<ng-container matColumnDef="Role api`s">
					<th mat-header-cell *matHeaderCellDef>Role api`s</th>
					<td mat-cell *matCellDef="let role">
						<div class="moderator__roles-types">
							<div
								*ngFor="let type of role.apiTypes"
								class="moderator__roles-type">
								{{ type.name }}
							</div>
						</div>
					</td>
				</ng-container>

				<ng-container matColumnDef="Actions">
					<th mat-header-cell *matHeaderCellDef>Actions</th>
					<td mat-cell *matCellDef="let role">
						<div class="action-buttons">
							<button
								(click)="deleteModeratorRole(role)"
								b2bNgxButton
								[theme]="b2bNgxButtonTheme.BACKGROUND_RED">
								Delete
							</button>
							<button
								(click)="changeModeratorRole(role)"
								b2bNgxButton
								[theme]="b2bNgxButtonTheme.BACKGROUND_BLUE">
								Change
							</button>
						</div>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="rolesTableColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: rolesTableColumns"></tr>
			</table>
		</div>
	</div>

	<div *ngIf="moderators$ | async as moderators" class="moderator__users">
		<div class="moderator__title">Moderators list:</div>
		<div class="moderator__users-table">
			<table mat-table [dataSource]="moderators" class="mat-elevation-z8">
				<ng-container matColumnDef="Name">
					<th mat-header-cell *matHeaderCellDef>Moderator name</th>
					<td mat-cell *matCellDef="let moderator">{{ moderator.fullName }}</td>
				</ng-container>

				<ng-container matColumnDef="Email">
					<th mat-header-cell *matHeaderCellDef>Email</th>
					<td mat-cell *matCellDef="let moderator">{{ moderator.email }}</td>
				</ng-container>
				<ng-container matColumnDef="Role name">
					<th mat-header-cell *matHeaderCellDef>Role name</th>
					<td mat-cell *matCellDef="let moderator">
						{{ moderator.moderatorRole.name }}
					</td>
				</ng-container>

				<ng-container matColumnDef="Actions">
					<th mat-header-cell *matHeaderCellDef>Actions</th>
					<td mat-cell *matCellDef="let moderator">
						<div class="action-buttons">
							<button
								(click)="deleteModerator(moderator)"
								b2bNgxButton
								[theme]="b2bNgxButtonTheme.BACKGROUND_RED">
								Delete
							</button>
						</div>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="moderatorsTableColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: moderatorsTableColumns"></tr>
			</table>
		</div>
	</div>
</div>
