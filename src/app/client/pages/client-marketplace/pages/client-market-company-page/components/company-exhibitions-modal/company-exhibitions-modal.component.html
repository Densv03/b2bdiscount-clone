<div class="company-modal">
	<div [class.d-none]="!modalIsLoaded$">
		@switch (data.modalType) {
			@case ('tradeShow') {
				<ng-container *ngTemplateOutlet="tradeShowTemplate"></ng-container>
			}
			@case ('image') {
				<ng-container *ngTemplateOutlet="imageTemplate"></ng-container>
			}
			@case ('video') {
				<ng-container *ngTemplateOutlet="videoTemplate"></ng-container>
			}
		}
	</div>
	@if (!modalIsLoaded$) {
		<b2b-page-loader></b2b-page-loader>
	}

</div>

<ng-template #videoTemplate>
	<div class="company-modal__header flex items-center justify-content-between">
		<div class="company-modal__title">{{ data.folder.title }}</div>
		<svg mat-dialog-close class="modal__close" width="16" height="16" viewBox="0 0 16 16" fill="none"
				 xmlns="http://www.w3.org/2000/svg">
			<path fill-rule="evenodd" clip-rule="evenodd"
						d="M15.6653 0.334735C16.1116 0.781049 16.1116 1.50467 15.6653 1.95098L9.61625 8L15.6653 14.049C16.1116 14.4953 16.1116 15.219 15.6653 15.6653C15.219 16.1116 14.4953 16.1116 14.049 15.6653L8 9.61624L1.95098 15.6653C1.50467 16.1116 0.781049 16.1116 0.334735 15.6653C-0.111578 15.219 -0.111578 14.4953 0.334735 14.049L6.38376 8L0.334736 1.95098C-0.111578 1.50467 -0.111578 0.781049 0.334736 0.334735C0.781049 -0.111578 1.50467 -0.111578 1.95098 0.334735L8 6.38376L14.049 0.334735C14.4953 -0.111578 15.219 -0.111578 15.6653 0.334735Z"
						fill="#0F0F11"/>
		</svg>
	</div>
	<div class="company-modal__body">
		<div class="video">
			@if (data.folder.videos[0].path) {
				<video
					class="object-cover aspect-square"
					controls
					autoplay
					[src]="getMediaSrc(data.folder.videos[0].path)"
				></video>
			} @else {
				<iframe width="100%"
								height="300px"
								[src]="getSecureEmbedUrl(data.folder.videos[0].link)"
								></iframe>
			}
		</div>
		<div class="company-modal__description mt-3">{{ data.folder.description }}</div>
	</div>
</ng-template>


<ng-template #imageTemplate>
	<div class="company-modal__header flex items-center justify-content-between">
		<div class="company-modal__title">{{ data.folder.title }}</div>
		<svg mat-dialog-close class="modal__close" width="16" height="16" viewBox="0 0 16 16" fill="none"
				 xmlns="http://www.w3.org/2000/svg">
			<path fill-rule="evenodd" clip-rule="evenodd"
						d="M15.6653 0.334735C16.1116 0.781049 16.1116 1.50467 15.6653 1.95098L9.61625 8L15.6653 14.049C16.1116 14.4953 16.1116 15.219 15.6653 15.6653C15.219 16.1116 14.4953 16.1116 14.049 15.6653L8 9.61624L1.95098 15.6653C1.50467 16.1116 0.781049 16.1116 0.334735 15.6653C-0.111578 15.219 -0.111578 14.4953 0.334735 14.049L6.38376 8L0.334736 1.95098C-0.111578 1.50467 -0.111578 0.781049 0.334736 0.334735C0.781049 -0.111578 1.50467 -0.111578 1.95098 0.334735L8 6.38376L14.049 0.334735C14.4953 -0.111578 15.219 -0.111578 15.6653 0.334735Z"
						fill="#0F0F11"/>
		</svg>
	</div>
	<div class="company-modal__body">
		<ng-container [ngTemplateOutlet]="carousel" [ngTemplateOutletContext]="{ data: data.folder.images }"></ng-container>
		<div class="company-modal__description mt-3">{{ data.folder.description }}</div>
	</div>
</ng-template>
<ng-template #tradeShowTemplate>
	<div class="company-modal__header flex items-center justify-content-between">
		<div class="company-modal__title">{{ data.tradeShow.title }}</div>
		<svg mat-dialog-close class="modal__close" width="16" height="16" viewBox="0 0 16 16" fill="none"
				 xmlns="http://www.w3.org/2000/svg">
			<path fill-rule="evenodd" clip-rule="evenodd"
						d="M15.6653 0.334735C16.1116 0.781049 16.1116 1.50467 15.6653 1.95098L9.61625 8L15.6653 14.049C16.1116 14.4953 16.1116 15.219 15.6653 15.6653C15.219 16.1116 14.4953 16.1116 14.049 15.6653L8 9.61624L1.95098 15.6653C1.50467 16.1116 0.781049 16.1116 0.334735 15.6653C-0.111578 15.219 -0.111578 14.4953 0.334735 14.049L6.38376 8L0.334736 1.95098C-0.111578 1.50467 -0.111578 0.781049 0.334736 0.334735C0.781049 -0.111578 1.50467 -0.111578 1.95098 0.334735L8 6.38376L14.049 0.334735C14.4953 -0.111578 15.219 -0.111578 15.6653 0.334735Z"
						fill="#0F0F11"/>
		</svg>
	</div>

	<div class="company-modal__body">
		<div class="company-modal__dates mt-3">
			@if (data.tradeShow.startedAt) {
				{{ data.tradeShow.startedAt | date: 'dd.MM.yyyy' }}
			}
			-
			@if (data.tradeShow.endedAt) {
				{{ data.tradeShow.endedAt | date: 'dd.MM.yyyy' }}
			}
		</div>

		<div class="company-modal__description mt-3">{{ data.tradeShow.description }}</div>

		<ng-container [ngTemplateOutlet]="carousel"
									[ngTemplateOutletContext]="{ data: data.tradeShow.images }"></ng-container>

	</div>
</ng-template>

<ng-template #carousel let-data="data">
	<div #modalSwiperRef class="carousel">
		<div class="swiper-wrapper">
			@for (image of data; track image; let i = $index) {
				<div class="swiper-slide">
					<img [src]="getExhibitionImageUrl(image?.path)"
							 class="exhibitions__item-image object-cover aspect-square">
				</div>
			}
		</div>
		<div class="swiper-pagination swiper-pagination-modal"></div>
		<div
			[class.d-none]="data.length < 2"
			id="prev-button"
			class="swiper-button-prev">
			<svg

				width="40"
				height="40"
				viewBox="0 0 40 40"
				fill="none"
				xmlns="http://www.w3.org/2000/svg">
				<path
					d="M23.3333 10L13.3333 20L23.3333 30"
					stroke="current-color"
					stroke-width="3"
					stroke-linecap="round"
					stroke-linejoin="round"/>
			</svg>
		</div>
		<div
			[class.d-none]="data.length < 2"
			id="next-button"
			class="swiper-button-next">
			<svg
				width="40"
				height="40"
				viewBox="0 0 40 40"
				fill="none"
				xmlns="http://www.w3.org/2000/svg">
				<path
					d="M16.6667 10L26.6667 20L16.6667 30"
					stroke="current-color"
					stroke-width="3"
					stroke-linecap="round"
					stroke-linejoin="round"/>
			</svg>
		</div>

	</div>
</ng-template>
