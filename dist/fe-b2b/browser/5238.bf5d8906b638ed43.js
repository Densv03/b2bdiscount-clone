"use strict";(self.webpackChunkfe_b2b=self.webpackChunkfe_b2b||[]).push([[5238],{46353:(D,_,l)=>{l.d(_,{J:()=>c});var g=l(97582),o=l(5e3),r=l(54968),b=l(44987),f=l(35684),v=l(39300),h=l(69808),p=l(5214),P=l(64062);function x(d,n){if(1&d){const s=o.EpF();o.TgZ(0,"li")(1,"button",6),o.NdJ("click",function(B){const C=o.CHM(s).$implicit,T=o.oxw(2);return o.KtG(T.callOptionFunc(B,C))}),o._UZ(2,"img",7),o.TgZ(3,"span"),o._uU(4),o.qZA()()()}if(2&d){const s=n.$implicit;o.xp6(2),o.Q6J("name",s.icon),o.xp6(1),o.Tol(s.className+" ngx-dropdown-text"),o.xp6(1),o.Oqu(s.label)}}function A(d,n){if(1&d&&(o.TgZ(0,"ul",4),o.YNc(1,x,5,4,"li",5),o.qZA()),2&d){const s=o.oxw();o.xp6(1),o.Q6J("ngForOf",s.options)}}let c=class{constructor(n){this.changeDetection=n,this.isMenuShow=!1,this.toggleOptionClick=new o.vpe}callOptionFunc(n,s){this.isMenuShow=!1,n.preventDefault(),n.stopImmediatePropagation(),s.onClick(this.optionToReturn||s,this.requiredOptionToCheck)}get menuClassName(){return`${this.className} `}subscribeOnClickOutside(n){const s=(0,r.R)(document,"click").pipe((0,f.T)(1),(0,b.t)(this),(0,v.h)(y=>!n.contains(y.target))).subscribe(()=>{this.isMenuShow=!1,this.changeDetection.detectChanges(),s.unsubscribe()})}showMenu(n,s){this.isMenuShow=!this.isMenuShow,n.stopImmediatePropagation(),n.preventDefault(),this.isMenuShow&&this.subscribeOnClickOutside(s)}};c.\u0275fac=function(n){return new(n||c)(o.Y36(o.sBO))},c.\u0275cmp=o.Xpm({type:c,selectors:[["b2b-ngx-dropdown"]],inputs:{options:"options",requiredOptionToCheck:"requiredOptionToCheck",className:"className",optionToReturn:"optionToReturn"},outputs:{toggleOptionClick:"toggleOptionClick"},ngContentSelectors:["*"],decls:5,vars:1,consts:[[1,"ngx-dropdown-container"],["container",""],[3,"click"],["class","ngx-dropdown",4,"ngIf"],[1,"ngx-dropdown"],[4,"ngFor","ngForOf"],["b2bNgxButton","",1,"ngx-dropdown-button",3,"click"],["b2bNgxIcon","",1,"ngx-dropdown-button-icon",3,"name"]],template:function(n,s){if(1&n){const y=o.EpF();o.F$t(),o.TgZ(0,"div",0,1)(2,"div",2),o.NdJ("click",function(O){o.CHM(y);const C=o.MAs(1);return o.KtG(s.showMenu(O,C))}),o.Hsn(3),o.qZA(),o.YNc(4,A,2,1,"ul",3),o.qZA()}2&n&&(o.xp6(4),o.Q6J("ngIf",s.isMenuShow))},dependencies:[h.sg,h.O5,p.f,P.p],styles:[".ngx-dropdown-container[_ngcontent-%COMP%]{position:relative}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]{position:absolute;z-index:2;background:#ffffff;box-shadow:0 2px 12px #0f0f1129;border-radius:4px;width:180px;right:0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px;width:100%}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]:hover{background-color:#eff4fa}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]   .ngx-dropdown-text[_ngcontent-%COMP%]{text-align:left;font-weight:500;font-size:13px;line-height:18px;color:#0f0f11;margin-left:12px}"],changeDetection:0}),c=(0,g.gn)([(0,b.c)()],c)},67090:(D,_,l)=>{l.d(_,{ED:()=>v,Yr:()=>h}),l(46353);var o=l(69808),r=l(59026),b=l(51163),f=l(5e3);let v=(()=>{class p{}return p.\u0275fac=function(x){return new(x||p)},p.\u0275mod=f.oAB({type:p}),p.\u0275inj=f.cJS({imports:[o.ez,r.l,b.w]}),p})();var h=(()=>{return(p=h||(h={})).RESTORE="Restore",p.ARCHIVE="Archive",p.DELETE="Delete",p.EDIT="Edit",h;var p})()},95238:(D,_,l)=>{l.r(_),l.d(_,{AdminBillingModule:()=>F});var g=l(69808),o=l(48966),r=l(93075),b=l(94418),f=l(59026),v=l(67090),h=l(97631),p=l(63807),P=l(50590),x=l(20592),A=l(54004),E=l(70771),c=l(14739),d=l(64309),n=l(5e3),s=l(70159),y=l(5214),B=l(13114);function O(e,a){if(1&e&&(n.ynx(0),n.TgZ(1,"label"),n._uU(2,"Enter amount of quotes"),n.qZA(),n._UZ(3,"input",7),n.BQk()),2&e){const t=n.oxw();n.xp6(3),n.Q6J("theme",t.b2bNgxInputThemeEnum.BACKGROUND_GRAY)}}let C=(()=>{class e{constructor(t,i,m){this.dialogRef=t,this.formBuilder=i,this.data=m,this.b2bNgxInputThemeEnum=E.T,this.b2bNgxButtonThemeEnum=c.n,this.b2bNgxSelectThemeEnum=x.B,this.formGroup=this.getFormGroup(),this.typePlanOptions=this.getTypePlanOptions(),this.isQuotesAmountInputVisible$=this.isQuotesAmountInputVisible()}ngOnInit(){this.data.paymentPlan&&this.formGroup.patchValue(this.data.paymentPlan),this.initFormSettings()}submitForm(t){var i,m;this.dialogRef.close({value:t.value,mode:this.getEditMode(),id:null===(m=null===(i=this.data)||void 0===i?void 0:i.paymentPlan)||void 0===m?void 0:m._id})}getButtonText(){return"add"===this.getEditMode()?"Add payment plan":"Edit payment plan"}initFormSettings(){this.formGroup.get("typePlan").valueChanges.subscribe(t=>{"quotes"===t?this.formGroup.get("amountOfQuotes").setValidators([r.kI.required,(0,d.X)()]):this.formGroup.get("amountOfQuotes").clearValidators(),this.formGroup.get("amountOfQuotes").updateValueAndValidity()})}getFormGroup(){return this.formBuilder.group({typePlan:[null,r.kI.required],title:[null,r.kI.required],price:[null,[r.kI.required,(0,d.X)()]],amountOfQuotes:[null],description:[null,r.kI.required]})}isQuotesAmountInputVisible(){return this.formGroup.get("typePlan").valueChanges.pipe((0,A.U)(t=>"quotes"===t))}getTypePlanOptions(){return[{value:"subscription",label:"Subscription"},{value:"quotes",label:"Quotes"}]}getEditMode(){return this.data.paymentPlan?"edit":"add"}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(o.so),n.Y36(r.qu),n.Y36(o.WI))},e.\u0275cmp=n.Xpm({type:e,selectors:[["b2b-select-billing-method-dialog"]],decls:16,vars:12,consts:[[3,"formGroup","ngSubmit"],["type","text","formControlName","title","b2bNgxInput","","placeholder","Title",1,"select-billing-method-dialog__form-item",3,"theme"],["type","text","formControlName","price","b2bNgxInput","","placeholder","Price",1,"select-billing-method-dialog__form-item",3,"theme"],["type","text","formControlName","description","b2bNgxInput","","placeholder","Description",1,"select-billing-method-dialog__form-item",3,"theme"],["placeholder","Select type of billing plan","bindValue","value","bindLabel","label","formControlName","typePlan",1,"select-billing-method-dialog__form-item__select","select-billing-method-dialog__form-item",3,"options","theme"],[4,"ngIf"],["b2bNgxButton","",1,"select-billing-method-dialog__submit-button",3,"theme","disabled"],["type","text","b2bNgxInput","","placeholder","Amount of quotes","formControlName","amountOfQuotes",1,"select-billing-method-dialog__form-item",3,"theme"]],template:function(t,i){1&t&&(n.TgZ(0,"form",0),n.NdJ("ngSubmit",function(){return i.submitForm(i.formGroup)}),n.TgZ(1,"label"),n._uU(2,"Enter title"),n.qZA(),n._UZ(3,"input",1),n.TgZ(4,"label"),n._uU(5,"Enter price"),n.qZA(),n._UZ(6,"input",2),n.TgZ(7,"label"),n._uU(8,"Enter description"),n.qZA(),n._UZ(9,"input",3),n.TgZ(10,"b2b-ngx-select",4),n._uU(11," Select type of billing plan "),n.qZA(),n.YNc(12,O,4,1,"ng-container",5),n.ALo(13,"async"),n.TgZ(14,"button",6),n._uU(15),n.qZA()()),2&t&&(n.Q6J("formGroup",i.formGroup),n.xp6(3),n.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_GRAY),n.xp6(3),n.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_GRAY),n.xp6(3),n.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_GRAY),n.xp6(1),n.Q6J("options",i.typePlanOptions)("theme",i.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),n.xp6(2),n.Q6J("ngIf",n.lcZ(13,10,i.isQuotesAmountInputVisible$)),n.xp6(2),n.Q6J("theme",i.b2bNgxButtonThemeEnum.BACKGROUND_BLACK)("disabled","VALID"!==i.formGroup.status),n.xp6(1),n.hij(" ",i.getButtonText()," "))},dependencies:[g.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,s.k,y.f,B.B,g.Ov],styles:[".select-billing-method-dialog__form-item[_ngcontent-%COMP%]{margin-bottom:15px}.select-billing-method-dialog__form-item__select[_ngcontent-%COMP%]{display:block}.select-billing-method-dialog__submit-button[_ngcontent-%COMP%]{padding:15px 20px;margin-top:15px}"]}),e})();var T=l(96931),M=l(56913),N=l(61135),S=l(39300);let I=(()=>{class e{constructor(t){this.apiService=t,this.currentPaymentPlans=new N.X([])}getCurrentPaymentPlans(){return this.currentPaymentPlans.asObservable()}updateCurrentPaymentPlans(t){this.apiService.get("authorize-net/get-payment-plan"+(t?`?type=${t}`:"")).pipe((0,S.h)(m=>!!m),(0,P.P)()).subscribe(m=>this.currentPaymentPlans.next(m))}addPaymentPlan(t){return this.apiService.post("authorize-net/add-new-payment-plan",t)}updatePaymentPlanById(t,i){return this.apiService.put("authorize-net/update-payment-plan",{id:t,...i})}deletePaymentPlanById(t){return this.apiService.delete("authorize-net/delete-payment-plan",{body:{id:t}})}getPaymentPlans(t){return this.apiService.get("authorize-net/get-payment-plan"+(t?`?type=${t}`:""))}getQuotesPaymentPlansToDisplay(){return this.apiService.get("authorize-net/get-payment-plan?type=quotes").pipe((0,A.U)(t=>t.length>3?t.slice(0,3):t))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(T.s))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Z(e,a){if(1&e&&(n.TgZ(0,"h3"),n._uU(1),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.hij(" Quotes number: ",t.paymentPlan.amountOfQuotes," ")}}let w=(()=>{class e{constructor(){this.onDelete=new n.vpe,this.onEdit=new n.vpe,this.b2bNgxButtonThemeEnum=c.n}deletePaymentPlan(t,i){i.stopPropagation(),this.onDelete.emit(t)}editPaymentPlan(t){this.onEdit.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["b2b-admin-payment-plan-item"]],inputs:{paymentPlan:"paymentPlan"},outputs:{onDelete:"onDelete",onEdit:"onEdit"},decls:12,vars:6,consts:[[1,"admin-payment-plan-item",3,"click"],[4,"ngIf"],["b2bNgxButton","",3,"theme","click"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0),n.NdJ("click",function(){return i.editPaymentPlan(i.paymentPlan)}),n.TgZ(1,"h2"),n._uU(2),n.qZA(),n.TgZ(3,"h3"),n._uU(4),n.qZA(),n.TgZ(5,"h3"),n._uU(6),n.qZA(),n.TgZ(7,"h3"),n._uU(8),n.qZA(),n.YNc(9,Z,2,1,"h3",1),n.TgZ(10,"button",2),n.NdJ("click",function(u){return i.deletePaymentPlan(i.paymentPlan._id,u)}),n._uU(11," Delete "),n.qZA()()),2&t&&(n.xp6(2),n.Oqu(i.paymentPlan.title),n.xp6(2),n.hij("Payment plan: ",i.paymentPlan.typePlan,""),n.xp6(2),n.hij("Price: ",i.paymentPlan.price,""),n.xp6(2),n.hij("Description: ",i.paymentPlan.description,""),n.xp6(1),n.Q6J("ngIf","quotes"===i.paymentPlan.typePlan),n.xp6(1),n.Q6J("theme",i.b2bNgxButtonThemeEnum.BACKGROUND_BLACK))},dependencies:[g.O5,y.f],styles:[".admin-payment-plan-item[_ngcontent-%COMP%]{background-color:#fff;border:2px solid gray}.admin-payment-plan-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.admin-payment-plan-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-left:20px}.admin-payment-plan-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:90%;height:40px;margin:10px auto}"]}),e})();function U(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"b2b-admin-payment-plan-item",2),n.NdJ("onDelete",function(m){n.CHM(t);const u=n.oxw();return n.KtG(u.deletePaymentPlan(m))})("onEdit",function(m){n.CHM(t);const u=n.oxw();return n.KtG(u.editPaymentPlan(m))}),n.qZA()}2&e&&n.Q6J("paymentPlan",a.$implicit)}let R=(()=>{class e{constructor(){this.onDelete=new n.vpe,this.onEdit=new n.vpe}ngOnInit(){}deletePaymentPlan(t){this.onDelete.emit(t)}editPaymentPlan(t){this.onEdit.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["b2b-admin-payment-plan-list"]],inputs:{paymentPlans:"paymentPlans"},outputs:{onDelete:"onDelete",onEdit:"onEdit"},decls:2,vars:1,consts:[[1,"admin-payment-plan-item-list__container"],["class","admin-payment-plan-item-list__item",3,"paymentPlan","onDelete","onEdit",4,"ngFor","ngForOf"],[1,"admin-payment-plan-item-list__item",3,"paymentPlan","onDelete","onEdit"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0),n.YNc(1,U,1,1,"b2b-admin-payment-plan-item",1),n.qZA()),2&t&&(n.xp6(1),n.Q6J("ngForOf",i.paymentPlans))},dependencies:[g.sg,w],styles:[".admin-payment-plan-item-list__container[_ngcontent-%COMP%]{display:grid;width:90%;margin:0 auto;grid-template-columns:1fr 1fr 1fr;grid-gap:10px}"]}),e})();const G=[{path:"",component:(()=>{class e{constructor(t,i,m,u){this.matDialog=t,this.apiService=i,this.hotToastService=m,this.adminBillingService=u,this.b2bNgxSelectThemeEnum=x.B,this.currentPaymentPlans=this.adminBillingService.getCurrentPaymentPlans()}ngOnInit(){this.adminBillingService.updateCurrentPaymentPlans()}addBillingPlan(){this.matDialog.open(C,{data:{}}).afterClosed().subscribe(t=>{!t||"add"!==t.mode||this.adminBillingService.addPaymentPlan(t.value).pipe(this.hotToastService.observe({loading:"Adding payment plan...",success:"Payment plan added successfully",error:"Error adding payment plan"})).subscribe(()=>{this.adminBillingService.updateCurrentPaymentPlans()})})}deletePaymentPlan(t){this.adminBillingService.deletePaymentPlanById(t).pipe(this.hotToastService.observe({loading:"Deleting payment plan...",success:"Payment plan deleted successfully",error:"Error deleting payment plan"}),(0,P.P)()).subscribe(()=>{this.adminBillingService.updateCurrentPaymentPlans()})}editPaymentPlan(t){this.matDialog.open(C,{data:{paymentPlan:t}}).afterClosed().subscribe(i=>{!i||"edit"!==i.mode||this.adminBillingService.updatePaymentPlanById(i.id,i.value).pipe(this.hotToastService.observe({loading:"Editing payment plan...",success:"Payment plan edited successfully",error:"Error editing payment plan"}),(0,P.P)()).subscribe(()=>{this.adminBillingService.updateCurrentPaymentPlans()})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(o.uw),n.Y36(T.s),n.Y36(M.jE),n.Y36(I))},e.\u0275cmp=n.Xpm({type:e,selectors:[["b2b-admin-billing"]],decls:4,vars:3,consts:[[1,"admin-billing__add-billing-plan",3,"click"],[3,"paymentPlans","onDelete","onEdit"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0),n.NdJ("click",function(){return i.addBillingPlan()}),n._uU(1,"+"),n.qZA(),n.TgZ(2,"b2b-admin-payment-plan-list",1),n.NdJ("onDelete",function(u){return i.deletePaymentPlan(u)})("onEdit",function(u){return i.editPaymentPlan(u)}),n.ALo(3,"async"),n.qZA()),2&t&&(n.xp6(2),n.Q6J("paymentPlans",n.lcZ(3,1,i.currentPaymentPlans)))},dependencies:[R,g.Ov],styles:[".admin-billing__add-billing-plan[_ngcontent-%COMP%]{color:#fff;width:50px;height:50px;display:flex;justify-content:center;align-items:center;font-weight:700;background-color:#000;margin-top:30px;margin-left:30px;margin-bottom:40px}"]}),e})()}];let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[p.Bz.forChild(G),p.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[g.ez,J,o.Is,r.UX,b.r,f.l,v.ED,h.F]}),e})()}}]);