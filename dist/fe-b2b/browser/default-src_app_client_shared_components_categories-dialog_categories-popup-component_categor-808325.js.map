{"version":3,"file":"default-src_app_client_shared_components_categories-dialog_categories-popup-component_categor-808325.js","mappings":"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","sources":["./src/app/client/shared/components/categories-dialog/categories-modal-list/categories-modal-list.component.ts","./src/app/client/shared/components/categories-dialog/categories-modal-list/categories-modal-list.component.html","./src/app/client/shared/components/categories-dialog/categories-popup-component/categories-popup.component.ts","./src/app/client/shared/components/categories-dialog/categories-popup-component/categories-popup.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\n@Component({\n\tselector: \"b2b-categories-modal-list\",\n\ttemplateUrl: \"./categories-modal-list.component.html\",\n\tstyleUrls: [\"./categories-modal-list.component.scss\"],\n})\nexport class CategoriesModalListComponent {\n\t@Input() categoriesList: Array<any>;\n\t@Input() isParentCategoryChecked: boolean = false;\n\t@Input() isMultipleMode: boolean = false;\n\n\t@Output() selectedId: EventEmitter<string> = new EventEmitter<string>();\n\n\tconstructor() {}\n\n\tpublic selectFullCategory(event: boolean): void {\n\t\tif (event) {\n\t\t\tthis.selectedId.emit(this.categoriesList[0].parentId);\n\t\t}\n\t}\n\n\tpublic selectCategory(event: Event, categoryId: string): void {\n\t\tevent.stopPropagation();\n\t\tthis.selectedId.emit(categoryId);\n\t}\n}\n","<ul class=\"categories-list\">\n\t<li *ngIf=\"isMultipleMode\" class=\"select-all\">\n\t\t<div class=\"item-content\">\n\t\t\t<div class=\"category-name\">Select all in category</div>\n\t\t\t<b2b-ngx-toggle\n\t\t\t\t[toggled]=\"isParentCategoryChecked\"\n\t\t\t\t(change)=\"selectFullCategory($event)\"\n\t\t\t\t[emptyLabel]=\"true\"></b2b-ngx-toggle>\n\t\t</div>\n\t</li>\n\t<li *ngFor=\"let category of categoriesList\" class=\"list-item\">\n\t\t<div class=\"item-content\">\n\t\t\t<div class=\"category-name\">\n\t\t\t\t{{ category.text }}\n\t\t\t</div>\n\t\t\t<b2b-ngx-checkbox\n\t\t\t\t*ngIf=\"category.visible\"\n\t\t\t\t(checkboxChange)=\"selectCategory($event, category.value)\"\n\t\t\t\t[checked]=\"category.checked\"></b2b-ngx-checkbox>\n\t\t</div>\n\t</li>\n</ul>\n","import {ChangeDetectionStrategy, Component, Inject, OnInit, ViewChild} from '@angular/core';\nimport {MatTabGroup} from \"@angular/material/tabs\";\nimport {BehaviorSubject, EMPTY, filter, Observable} from \"rxjs\";\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\nimport {map, take} from \"rxjs/operators\";\nimport { SelectCategoryModel } from \"../select-category.model\";\nimport {CategoriesService} from \"../../../../services/categories/categories.service\";\nimport { B2bNgxButtonThemeEnum } from '@b2b/ngx-button';\n\n@Component({\n  selector: 'b2b-categories-popup-component',\n  templateUrl: './categories-popup.component.html',\n  styleUrls: ['./categories-popup.component.scss'],\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class CategoriesPopupComponent implements OnInit {\n\n\tpublic B2bNgxButtonThemeEnum = B2bNgxButtonThemeEnum;\n\tpublic demo1TabIndex = 1;\n\n\tpublic isMultipleMode = this.data.multiple === undefined ? true : this.data.multiple;\n\n\t@ViewChild(\"demo3Tab\", { static: false }) demo3Tab: MatTabGroup | undefined;\n\n\tprivate categoriesSubject: BehaviorSubject<any[]> = new BehaviorSubject<any[]>([]);\n\n\tconstructor(\n\t\t@Inject(MAT_DIALOG_DATA) public data: { selectedCategories: Array<string>; required?: boolean; multiple?: boolean },\n\t\tpublic dialogRef: MatDialogRef<CategoriesPopupComponent>,\n\t\tprivate categoriesService: CategoriesService,\n\t) {}\n\n\tngOnInit(): void {\n\t\tthis.categoriesService\n\t\t\t.getCategories$()\n\t\t\t.pipe(\n\t\t\t\tfilter(data => !!data),\n\t\t\t\tmap((categoriesData) => categoriesData.categories),\n\t\t\t\tmap((categories) =>\n\t\t\t\t\tcategories.map((category: { name: any; _id: any; children: any[]; }) => ({\n\t\t\t\t\t\ttext: category.name,\n\t\t\t\t\t\tvalue: category._id,\n\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\tchildren: category.children.map((level2Category) => ({\n\t\t\t\t\t\t\ttext: level2Category.name,\n\t\t\t\t\t\t\tvalue: level2Category._id,\n\t\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\t\tparentId: category._id,\n\t\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\t})),\n\t\t\t\t\t}))\n\t\t\t\t),\n\t\t\t\ttake(1)\n\t\t\t)\n\t\t\t.subscribe((data) => {\n\t\t\t\tthis.updateCategoriesList(data);\n\t\t\t\tif (this.data) {\n\t\t\t\t\tif (this.data.selectedCategories.length) {\n\t\t\t\t\t\tthis.initDialogValues(this.data.selectedCategories);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tget categories$(): Observable<any> {\n\t\treturn this.categoriesSubject.asObservable();\n\t}\n\n\tpublic updateCategoriesList(categories: any[]): void {\n\t\tthis.categoriesSubject.next(categories);\n\t}\n\n\tpublic save(): void {\n\t\tlet placeholder: any[] = [];\n\n\t\tconst categories: SelectCategoryModel[] = this.categoriesSubject.getValue().reduce((acc, val) => {\n\t\t\tval.children.forEach((item: { checked: any; value: any; text: any; }) => {\n\t\t\t\tif (item.checked) {\n\t\t\t\t\tacc.push({\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t\ttext: item.text,\n\t\t\t\t\t});\n\n\t\t\t\t\tif (placeholder.length < 2) {\n\t\t\t\t\t\tplaceholder.push(item.text);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn acc;\n\t\t}, []);\n\t\tif (this.data.required) {\n\t\t\tcategories.length ? this.dialogRef.close({ categories, placeholder }) : null;\n\t\t} else {\n\t\t\tthis.dialogRef.close({ categories, placeholder });\n\t\t}\n\t}\n\n\tpublic onChangeSelectedId(categoryId: string): void {\n\t\tif (this.isMultipleMode) {\n\t\t\tthis.updateCategoriesSource([categoryId], this.categoriesSubject.getValue());\n\t\t} else {\n\t\t\tthis.updateCategoriesSingleMode(categoryId, this.categoriesSubject.getValue());\n\t\t}\n\t}\n\n\tprivate updateCategoriesSingleMode(id: string, categories: any[]): void {\n\t\tconst necessaryCategory = this.findCategoryById(id, categories);\n\t\tif (necessaryCategory) {\n\t\t\tif (necessaryCategory.checked) {\n\t\t\t\tthis.resetCategories();\n\t\t\t} else {\n\t\t\t\tfor (let parent of categories) {\n\t\t\t\t\tparent.children = parent.children.map((child: { visible: any; value: string; checked: any; }) => {\n\t\t\t\t\t\tif (child.visible !== undefined) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...child,\n\t\t\t\t\t\t\t\tvisible: child.value === id,\n\t\t\t\t\t\t\t\tchecked: child.value === id ? !child.checked : child.checked,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n            else return EMPTY;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.updateCategoriesList(categories);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate findCategoryById(id: string, categories: any[]): any {\n\t\tfor (let parent of categories) {\n\t\t\tconst necessaryChild = parent.children.find((child: { value: string; }) => child.value === id);\n\n\t\t\tif (id === parent.value) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\tif (necessaryChild) {\n\t\t\t\treturn necessaryChild;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate resetCategories(): void {\n\t\tconst categories = this.categoriesSubject.getValue().map((parent) => {\n\t\t\treturn {\n\t\t\t\t...parent,\n\t\t\t\tchildren: parent.children.map((child: { visible: any; }) => {\n\t\t\t\t\tif (child.visible !== undefined) {\n\t\t\t\t\t\treturn { ...child, visible: true, checked: false };\n\t\t\t\t\t}\n\t\t\t\t\treturn child;\n\t\t\t\t}),\n\t\t\t};\n\t\t});\n\n\t\tthis.updateCategoriesList(categories);\n\t}\n\n\tprivate updateCategoriesSource(IDs: string[], categories: any[]): void {\n\t\tfor (let parent of categories) {\n\t\t\tif (IDs.some((id) => id === parent.value)) {\n\t\t\t\tparent.checked = !parent.checked;\n\n\t\t\t\tparent.children = parent.children.map((child: { checked: any; }) => {\n\t\t\t\t\tchild.checked = parent.checked;\n\t\t\t\t\treturn child;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tparent.children = parent.children.map((child: { value: string; checked: boolean; }) => {\n\t\t\t\t\tif (IDs.some((id) => id === child.value)) {\n\t\t\t\t\t\tchild.checked = !child.checked;\n\t\t\t\t\t\tparent.checked = parent.children.every((child: { checked: any; }) => child.checked);\n\t\t\t\t\t}\n\t\t\t\t\treturn child;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tthis.updateCategoriesList(categories);\n\t}\n\n\tprivate initDialogValues(data: string[]): void {\n\t\tif (this.isMultipleMode && data) {\n\t\t\tthis.updateCategoriesSource(data, this.categoriesSubject.getValue());\n\t\t} else if (!this.isMultipleMode && data.length) {\n\t\t\tthis.initCategoriesSingleMode(data[0]);\n\t\t}\n\t}\n\n\tprivate initCategoriesSingleMode(category: string): void {\n\t\tthis.categoriesSubject.next(\n\t\t\tthis.categoriesSubject.getValue().map((parent) => {\n\t\t\t\treturn {\n\t\t\t\t\t...parent,\n\t\t\t\t\tchildren: parent.children.map((child: { visible: any; value: string; }) => {\n\t\t\t\t\t\tif (child.visible !== undefined) {\n\t\t\t\t\t\t\treturn { ...child, visible: child.value === category, checked: child.value === category };\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn child;\n\t\t\t\t\t}),\n\t\t\t\t};\n\t\t\t})\n\t\t);\n\t}\n\n}\n","<div class=\"modal-wrapper\">\n\t<div mat-dialog-actions>\n\t\t<div mat-dialog-close class=\"close-btn\">\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\">\n\t\t\t\t<path\n\t\t\t\t\td=\"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9\n     296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38\n     412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75\n     0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5\n     45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0\n     45.25l-105.4 105.4L310.6 361.4z\" />\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\n\t<div mat-dialog-content>\n\t\t<div mat-dialog-title class=\"title\">Select the product you deal with</div>\n\t\t<div class=\"tab-demo\">\n\t\t\t<mat-tab-group [(selectedIndex)]=\"demo1TabIndex\">\n\t\t\t\t<div *ngFor=\"let category of categories$ | async; let i = index\" class=\"tabs-wrapper\">\n\t\t\t\t\t<mat-tab [label]=\"category.text\">\n\t\t\t\t\t\t<b2b-categories-modal-list\n\t\t\t\t\t\t\t[categoriesList]=\"category.children\"\n\t\t\t\t\t\t\t[isParentCategoryChecked]=\"category.checked\"\n\t\t\t\t\t\t\t[isMultipleMode]=\"isMultipleMode\"\n\t\t\t\t\t\t\t(selectedId)=\"onChangeSelectedId($event)\">\n\t\t\t\t\t\t</b2b-categories-modal-list>\n\t\t\t\t\t</mat-tab>\n\t\t\t\t</div>\n\t\t\t</mat-tab-group>\n\t\t</div>\n\t\t<div class=\"modal-footer\">\n\t\t\t<div class=\"footer-text\">Follow at least 1 product to continue</div>\n\t\t\t<button (click)=\"save()\" b2bNgxButton [theme]=\"B2bNgxButtonThemeEnum.BACKGROUND_BLUE\">Save</button>\n\t\t</div>\n\t</div>\n</div>\n"],"names":["BehaviorSubject","EMPTY","filter","MAT_DIALOG_DATA","map","take","B2bNgxButtonThemeEnum","i0","category_r1","ctx_r0","CategoriesPopupComponent","constructor","data","dialogRef","categoriesService","multiple","undefined","ngOnInit","getCategories$","pipe","categoriesData","categories","category","text","name","value","_id","checked","children","level2Category","parentId","visible","subscribe","updateCategoriesList","selectedCategories","length","initDialogValues","categories$","categoriesSubject","asObservable","next","save","placeholder","getValue","reduce","acc","val","forEach","item","push","required","close","onChangeSelectedId","categoryId","isMultipleMode","updateCategoriesSource","updateCategoriesSingleMode","id","necessaryCategory","findCategoryById","resetCategories","parent","child","necessaryChild","find","IDs","some","every","initCategoriesSingleMode","selectors","viewQuery","ctx"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}