{"version":3,"file":"src_app_auth_pages_auth-google-sign-in-success_auth-google-sign-in-success_module_ts.js","mappings":"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","sources":["./src/app/auth/pages/auth-google-sign-in-success/auth-google-sign-in-success-routing.module.ts","./src/app/auth/pages/auth-google-sign-in-success/auth-google-sign-in-success.module.ts","./src/app/auth/pages/auth-google-sign-in-success/layout/auth-google-sign-in-success.component.ts"],"sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { AuthGoogleSignInSuccessComponent } from \"./layout/auth-google-sign-in-success.component\";\n\nconst routes: Routes = [\n\t{\n\t\tpath: \"\",\n\t\tcomponent: AuthGoogleSignInSuccessComponent,\n\t},\n];\n\n@NgModule({\n\timports: [RouterModule.forChild(routes)],\n\texports: [RouterModule],\n})\nexport class AuthGoogleSignInSuccessRoutingModule {}\n","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { AuthRecoverAccountModule } from \"../auth-recover-account/auth-recover-account.module\";\nimport { AuthGoogleSignInSuccessRoutingModule } from \"./auth-google-sign-in-success-routing.module\";\nimport { AuthGoogleSignInSuccessComponent } from \"./layout/auth-google-sign-in-success.component\";\n\n@NgModule({\n\tdeclarations: [AuthGoogleSignInSuccessComponent],\n\timports: [CommonModule, AuthGoogleSignInSuccessRoutingModule, AuthRecoverAccountModule],\n})\nexport class AuthGoogleSignInSuccessModule {}\n","import { animate, style, transition, trigger } from \"@angular/animations\";\nimport {Component, OnInit} from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { UntilDestroy, untilDestroyed } from \"@ngneat/until-destroy\";\nimport { AuthService } from \"../../../services/auth/auth.service\";\nimport { AuthRecoverAccountComponent } from \"../../auth-recover-account/auth-recover-account.component\";\nimport {MixpanelService} from \"../../../../core/services/mixpanel/mixpanel.service\";\n\n@UntilDestroy()\n@Component({\n\tselector: \"b2b-auth-google-sign-in-success\",\n\ttemplateUrl: \"./auth-google-sign-in-success.component.html\",\n\tstyleUrls: [\"./auth-google-sign-in-success.component.scss\"],\n\tanimations: [\n\t\ttrigger(\"fadeInOut\", [\n\t\t\ttransition(\":enter\", [style({ opacity: 0 }), animate(500, style({ opacity: 1 }))]),\n\t\t\ttransition(\":leave\", [animate(500, style({ opacity: 0 }))]),\n\t\t]),\n\t],\n})\nexport class AuthGoogleSignInSuccessComponent implements OnInit {\n\tconstructor(\n\t\tprivate readonly _activatedRoute: ActivatedRoute,\n\t\tprivate readonly _authService: AuthService,\n\t\tprivate readonly _router: Router,\n    private readonly mixpanelService: MixpanelService\n\t\t// private readonly _dialogService: DialogService\n\t) {\n\t\t// this._activatedRoute.queryParams.pipe(untilDestroyed(this)).subscribe((params) => {\n\t\t// \tconst { token, recovered } = params;\n\t\t// \tconst updatedToken = token.endsWith('/') ? token.slice(0, -1) : token;\n\t\t// \tthis._authService.updateToken(updatedToken);\n\t\t// \tthis._authService.initUser();\n\t\t// \tthis._authService\n\t\t// \t\t.getUser()\n\t\t// \t\t.pipe(untilDestroyed(this))\n\t\t// \t\t.subscribe((user) => {\n\t\t// \t\t\tif (recovered) {\n\t\t// \t\t\t\t// this._dialogService\n\t\t// \t\t\t\t// \t.open(AuthRecoverAccountComponent, {\n\t\t// \t\t\t\t// \t\twidth: \"40vw\",\n\t\t// \t\t\t\t// \t\theight: \"auto\",\n\t\t// \t\t\t\t// \t\tminHeight: \"0\",\n\t\t// \t\t\t\t// \t\twindowClass: \"report-dialog\",\n\t\t// \t\t\t\t// \t})\n\t\t// \t\t\t\t// \t.afterClosed$.pipe(untilDestroyed(this))\n\t\t// \t\t\t\t// \t.subscribe();\n\t\t// \t\t\t}\n\t\t//\n\t\t// \t\t\tconst mixpanel = {\n\t\t// \t\t\t\t'User_id': user?._id,\n\t\t// \t\t\t\t'Account type': user?.rootRole?.displayName,\n\t\t// \t\t\t\t'Company Name': user?.company,\n\t\t// \t\t\t\t'Login Method': user?.socialAuthType\n\t\t// \t\t\t};\n    //       this.mixpanelService.logIn(mixpanel);\n\t\t// \t\t\tthis.mixpanelService.track('Login completed', {'Login Method': 'Email'})\n\t\t// \t\t\tthis._authService.updateToken(updatedToken);\n\t\t// \t\t\tthis._authService.updateRole(user?.role);\n\t\t// \t\t\tthis._router.navigateByUrl(\"/\");\n\t\t// \t\t});\n\t\t// });\n\t}\n\n\tngOnInit() {\n\t\tthis._activatedRoute.queryParams.pipe(untilDestroyed(this)).subscribe((params) => {\n\t\t\tconst { token, recovered } = params;\n\t\t\tconsole.log('TOKEN: ', token)\n\t\t\tconst updatedToken = token.endsWith('/') ? token.slice(0, -1) : token;\n\t\t\tthis._authService.updateToken(updatedToken);\n\t\t\tthis._authService.initUser();\n\t\t\tthis._authService\n\t\t\t\t.getUser()\n\t\t\t\t.pipe(untilDestroyed(this))\n\t\t\t\t.subscribe((user) => {\n\t\t\t\t\tif (recovered) {\n\t\t\t\t\t\t// this._dialogService\n\t\t\t\t\t\t// \t.open(AuthRecoverAccountComponent, {\n\t\t\t\t\t\t// \t\twidth: \"40vw\",\n\t\t\t\t\t\t// \t\theight: \"auto\",\n\t\t\t\t\t\t// \t\tminHeight: \"0\",\n\t\t\t\t\t\t// \t\twindowClass: \"report-dialog\",\n\t\t\t\t\t\t// \t})\n\t\t\t\t\t\t// \t.afterClosed$.pipe(untilDestroyed(this))\n\t\t\t\t\t\t// \t.subscribe();\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.log('AUTH SERVICE GOOGLE SIGN IN')\n\n\t\t\t\t\tconst mixpanel = {\n\t\t\t\t\t\t'User_id': user?._id,\n\t\t\t\t\t\t'Account type': user?.rootRole?.displayName,\n\t\t\t\t\t\t'Company Name': user?.company,\n\t\t\t\t\t\t'Login Method': user?.socialAuthType\n\t\t\t\t\t};\n\t\t\t\t\tthis.mixpanelService.logIn(mixpanel);\n\t\t\t\t\tthis.mixpanelService.track('Login completed', {'Login Method': 'Email'})\n\t\t\t\t\tthis._authService.updateToken(updatedToken);\n\t\t\t\t\tthis._authService.updateRole(user?.role);\n\n\t\t\t\t\tthis._router.navigateByUrl(\"/\");\n\t\t\t\t});\n\t\t});\n\t}\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}