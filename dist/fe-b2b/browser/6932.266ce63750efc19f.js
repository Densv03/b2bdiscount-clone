"use strict";(self.webpackChunkfe_b2b=self.webpackChunkfe_b2b||[]).push([[6932],{93637:(P,u,o)=>{o.d(u,{Q:()=>h});var a=o(5e3),d=o(69808);function C(t,m){if(1&t){const s=a.EpF();a.TgZ(0,"li",2),a.NdJ("click",function(){const l=a.CHM(s).$implicit,x=a.oxw();return a.KtG(x.togglePage(l.value))}),a._uU(1),a.qZA()}if(2&t){const s=m.$implicit,c=a.oxw();a.ekj("active",c.currentPage===s.label),a.xp6(1),a.hij(" ",s.label," ")}}let h=(()=>{class t{constructor(){this.currentPage=1,this.togglePageNumber=new a.vpe,this.currentPage=1,this.togglePage(1)}get options(){return this.length&&this.perPage?new Array(Math.ceil(this.length/this.perPage)).fill(null).map((f,l)=>({label:l+1,value:l+1})):[]}togglePage(s){s!==this.currentPage&&(this.currentPage=s,this.togglePageNumber.emit(s))}togglePrevPage(){1!==this.currentPage&&(this.currentPage=this.currentPage-1,this.togglePageNumber.emit(this.currentPage))}toggleNextPage(){this.currentPage!==this.options.length&&(this.currentPage=this.currentPage+1,this.togglePageNumber.emit(this.currentPage))}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["b2b-ngx-pagination"]],inputs:{length:"length",perPage:"perPage",currentPage:"currentPage"},outputs:{togglePageNumber:"togglePageNumber"},decls:2,vars:1,consts:[[1,"ngx-pagination"],["class","ngx-pagination-item",3,"active","click",4,"ngFor","ngForOf"],[1,"ngx-pagination-item",3,"click"]],template:function(s,c){1&s&&(a.TgZ(0,"ul",0),a.YNc(1,C,2,3,"li",1),a.qZA()),2&s&&(a.xp6(1),a.Q6J("ngForOf",c.options))},dependencies:[d.sg],styles:["[_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#005dff;color:#fff}.ngx-pagination[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:24px;flex-wrap:wrap;row-gap:10px}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;margin:0 4px;border:1px solid #dfe8f5;cursor:pointer}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:hover:not(.active){background-color:#eff4fa}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:active{background:#ffffff}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:first-child{margin-left:0}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:last-child{margin-right:0}"],changeDetection:0}),t})()},56932:(P,u,o)=>{o.r(u),o.d(u,{AdminCompaniesModule:()=>J});var a=o(69808),d=o(63807),C=o(70771),h=o(54004),t=o(5e3),m=o(93075),s=o(61135),c=o(50590),f=o(96931);let l=(()=>{class e{constructor(n){this.apiService=n,this.adminCompaniesListSource=new s.X(null),this.adminCompaniesCountSource=new s.X(0)}get adminCompaniesList$(){return this.adminCompaniesListSource.asObservable()}get adminCompaniesCount$(){return this.adminCompaniesCountSource.asObservable()}updateAdminCompaniesList(n,r){this.getAdminCompaniesList(n,r).pipe((0,c.P)()).subscribe(p=>{this.adminCompaniesCountSource.next(p.totalCount),this.adminCompaniesListSource.next(p.companies)})}getAdminCompaniesList(n,r){return this.apiService.get("products/get-company",{params:{...n,...r}})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.s))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=o(70159),A=o(93637),g=o(32075),y=o(11070),_=o(35077);function v(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Name"),t.qZA())}function D(e,i){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.companyName)}}function b(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Chats count"),t.qZA())}function O(e,i){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.countChats)}}function N(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Products count"),t.qZA())}function T(e,i){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.countProducts)}}function Z(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Registration date"),t.qZA())}function M(e,i){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,n.createdAt))}}function F(e,i){1&e&&t._UZ(0,"tr",19)}function S(e,i){1&e&&t._UZ(0,"tr",20)}function L(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",6),t._uU(2),t.qZA(),t.TgZ(3,"table",7),t.ALo(4,"async"),t.ynx(5,8),t.YNc(6,v,2,0,"th",9),t.YNc(7,D,2,1,"td",10),t.BQk(),t.ynx(8,11),t.YNc(9,b,2,0,"th",9),t.YNc(10,O,2,1,"td",10),t.BQk(),t.ynx(11,12),t.YNc(12,N,2,0,"th",9),t.YNc(13,T,2,1,"td",10),t.BQk(),t.ynx(14,13),t.YNc(15,Z,2,0,"th",9),t.YNc(16,M,3,3,"td",10),t.BQk(),t.YNc(17,F,1,0,"tr",14),t.YNc(18,S,1,0,"tr",15),t.qZA(),t.TgZ(19,"b2b-ngx-pagination",16),t.NdJ("togglePageNumber",function(p){t.CHM(n);const j=t.oxw();return t.KtG(j.togglePage(p))}),t.qZA(),t.BQk()}if(2&e){const n=i.ngIf,r=t.oxw();t.xp6(2),t.hij(" Total companies count: ",n," "),t.xp6(1),t.Q6J("dataSource",t.lcZ(4,6,r.adminCompaniesList$)),t.xp6(14),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("length",n)("perPage",r.productsLimit)}}function w(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1,"No companies found"),t.qZA())}const B=[{path:"",component:(()=>{class e{constructor(n,r){this.fb=n,this.adminCompaniesService=r,this.b2bNgxInputThemeEnum=C.T,this.productsLimit=20,this.filtersForm=this.fb.group({q:null,registrationDate:this.fb.control({startDate:new Date((new Date).setFullYear((new Date).getFullYear()-1)).toISOString(),endDate:new Date(Date.now()).toISOString()}),country:[null]}),this.adminCompaniesCount$=this.adminCompaniesService.adminCompaniesCount$,this.adminCompaniesList$=this.adminCompaniesService.adminCompaniesList$,this.displayedColumns=["companyName","countChats","countProducts","createdAt"],this.currentFilters=null,this.filteredQueryObj={limit:this.productsLimit,offset:0}}ngOnInit(){this.updateCompaniesListOnFiltersChange(),this.filtersForm.get("registrationDate").updateValueAndValidity()}removeFalsyKeysFromObject(n){for(const r in n)n[r]||delete n[r];return n}updateCompaniesListOnFiltersChange(){this.filtersForm.valueChanges.pipe((0,h.U)(n=>{if(n.registrationDate.startDate){const r=new Date(n.registrationDate.startDate);n.registrationDate.startDate=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())).toISOString()}return n.registrationDate.endDate&&(n.registrationDate.endDate=new Date(n.registrationDate.endDate).toISOString()),n.q||delete n.q,n.active=!0,n.dateFrom=n.registrationDate.startDate,n.dateTo=n.registrationDate.endDate,delete n.registrationDate,n})).subscribe(n=>{this.onFiltersChange(),this.adminCompaniesService.updateAdminCompaniesList(this.filteredQueryObj,{...this.removeFalsyKeysFromObject(n)}),this.currentFilters=n})}togglePage(n){this.filteredQueryObj={...this.filteredQueryObj,offset:(n-1)*this.productsLimit},this.adminCompaniesService.updateAdminCompaniesList(this.filteredQueryObj,{...this.currentFilters})}onFiltersChange(){this.filteredQueryObj={limit:this.productsLimit,offset:0},this.currentFilters=null}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.qu),t.Y36(l))},e.\u0275cmp=t.Xpm({type:e,selectors:[["b2b-admin-companies"]],decls:8,vars:8,consts:[[3,"formGroup"],["type","text","b2bNgxInput","","placeholder","Enter company name","label","Company name","formControlName","q",1,"mb-3",3,"theme"],["b2bNgxInput","","ngxDaterangepickerMd","","label","Registration Time","type","text","placeholder","Select range of date","name","daterange","formControlName","registrationDate",1,"mb-3",3,"theme","showClearButton"],["formControlName","country","placeholder","Select Country"],[4,"ngIf","ngIfElse"],["noCompanies",""],[1,"total-count"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4",3,"dataSource"],["matColumnDef","companyName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","countChats"],["matColumnDef","countProducts"],["matColumnDef","createdAt"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","perPage","togglePageNumber"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,r){if(1&n&&(t.TgZ(0,"form",0),t._UZ(1,"input",1)(2,"input",2)(3,"b2b-ngx-country-select",3),t.qZA(),t.YNc(4,L,20,8,"ng-container",4),t.ALo(5,"async"),t.YNc(6,w,2,0,"ng-template",null,5,t.W1O)),2&n){const p=t.MAs(7);t.Q6J("formGroup",r.filtersForm),t.xp6(1),t.Q6J("theme",r.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(1),t.Q6J("theme",r.b2bNgxInputThemeEnum.BACKGROUND_WHITE)("showClearButton",!0),t.xp6(2),t.Q6J("ngIf",t.lcZ(5,6,r.adminCompaniesCount$))("ngIfElse",p)}},dependencies:[a.O5,x.k,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,A.Q,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,y.V,_.SP,a.Ov,a.uU],styles:["[_nghost-%COMP%]   .total-count[_ngcontent-%COMP%]{background:white;padding:15px;margin-top:25px}[_nghost-%COMP%]     th, [_nghost-%COMP%]     td{vertical-align:middle}"]}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(B),d.Bz]}),e})();var U=o(94418),I=o(65297),Y=o(51163),E=o(17354);let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.ez,Q,U.r,m.UX,I.z,Y.w,g.p0,E.N,_.n1.forRoot()]}),e})()}}]);