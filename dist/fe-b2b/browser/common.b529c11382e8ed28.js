"use strict";(self.webpackChunkfe_b2b=self.webpackChunkfe_b2b||[]).push([[2076],{44372:(y,_,t)=>{t.d(_,{j:()=>u});var i=t(38684),h=t(89985);let u=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=h.$C({type:n});static#i=this.\u0275inj=h.G2t({imports:[i.MD]})}return n})()},75215:(y,_,t)=>{t.d(_,{i:()=>n});var i=t(38684),h=t(70884),u=t(89985);let n=(()=>{class c{static#t=this.\u0275fac=function(a){return new(a||c)};static#e=this.\u0275mod=u.$C({type:c});static#i=this.\u0275inj=u.G2t({imports:[i.MD,h.b]})}return c})()},68999:(y,_,t)=>{t.d(_,{u:()=>c});var i=t(38684),h=t(70884),u=t(3470),n=t(89985);let c=(()=>{class p{static#t=this.\u0275fac=function(m){return new(m||p)};static#e=this.\u0275mod=n.$C({type:p});static#i=this.\u0275inj=n.G2t({imports:[i.MD,h.b,u.F]})}return p})()},78478:(y,_,t)=>{t.d(_,{Aq:()=>u,G1:()=>i,TK:()=>h,g9:()=>n});const i=["1-5M","5-10M","10-50M","50-100M"],h=["1-5","5-10","10-50","50-100","> 100"];function u(c){return c.map(p=>({id:p,value:p}))}const n={loading:"Updating company information...",success:"Company information successfully updated.",error:"Company information updating failed"}},70948:(y,_,t)=>{t.d(_,{w:()=>o});var i=t(82575),h=t(78593),u=t(39129),n=t(22699),c=t(46295),p=t(17574),r=t(54066),a=t(27492),m=t(78478),C=t(87366),b=t.n(C),l=t(10508),v=t(83065),g=t(89985),D=t(53154),P=t(52454),E=t(38341),R=t(24797),e=t(36542);let o=(()=>{class O{constructor(s,d,f,M,T,A){this.fb=s,this.authService=d,this.userService=f,this.sourcingRequestService=M,this.hotToastService=T,this.mixpanelService=A,this.isAdmin="admin"===this.userService.getUser()?.role?.name,this.form=this.initForm(),this.rootRoles$=new r.B,this.subRoles=[],this.yearOfFoundationList=this.getFoundationYear(),this.isSubmit=!1}get company(){return this.authService.company}set company(s){this.authService.updateCompany(s)}initForm(){return this.fb.group({companyName:["",[i.k0.required,(0,v.r)()]],businessType:["",[i.k0.required]],country:["",[i.k0.required]],yearOfFoundation:["",[i.k0.required]],employeesNumber:["",[i.k0.required]],annualRevenue:["",[i.k0.required]],address:["",[i.k0.required,(0,v.r)()]],website:["",[(0,h.q7)()]],companyDescription:["",[i.k0.required,i.k0.minLength(40),(0,v.r)()]],logo:[null],banner:[null],socialMedia:this.fb.group({facebook:["",(0,u.o)()],instagram:["",(0,u.o)()],linkedin:["",(0,u.o)()],twitter:["",(0,u.o)()]})})}initDefault(){this.getRoles(),this.getFoundationYear()}onSubmit(s){this.isSubmit=!1;const d=s.socialMedia,f=(0,l.t)({...s,...d});try{s.banner||this.sourcingRequestService.deleteBanner().subscribe(),s.logo||this.sourcingRequestService.deleteLogo().subscribe(),this.updateCompany(f,s,d)}catch(M){console.log(M)}this.isSubmit=!0}updateCompany(s,d,f){this.sourcingRequestService.updateCompanyInfo(s).pipe((0,n.$)(),this.hotToastService.observe(m.g9),(0,a.M)(()=>{this.mixpanelChangeUser(d),this.trackWebsiteChange(d),f&&this.trackSocialMediaLinksChange(f),this.trackCompanyChange()})).subscribe(M=>{this.authService.updateCompany(M)})}mixpanelChangeUser(s){const d=this.authService.user;this.mixpanelService.set({distinctId:this.userService.getUser()._id,properties:{"Account Type":d.rootRole,"Company Name":s.companyName,Name:s.companyName}})}getRoles(){return this.authService.getRootRoles().pipe((0,c.p)(s=>!!s.length),(0,p.s)(1)).subscribe(s=>{this.rootRoles$.next(s),this.subRoles="supplier"===this.authService.user.rootRole.name?s.find(d=>"supplier"===d.name).subRoles:s.find(d=>"buyer"===d.name).subRoles})}getFoundationYear(){const s=[],d=new Date(Date.now()).getFullYear();for(let f=d;f>d-150;f--)s.push(f.toString());return(0,m.Aq)(s)}trackWebsiteChange(s){s?.website!==this.company?.website&&(this.company.website=s?.website,this.mixpanelService.track("Website Link added",{Link:s?.website}))}trackSocialMediaLinksChange(s){const d=b().omitBy(this.company?.socialMedia,M=>b().isUndefined(M)||b().isNull(M)||""===M||" "===M),f=b().pick(s,["facebook","instagram","linkedin","twitter"]);b().isEqual(f,d)||(this.mixpanelService.track("Social Media Link added",{"Social Media Type":f}),this.company={...this.company,socialMedia:f})}trackCompanyChange(){const s=["companyName","businessType","country","employeesNumber","yearOfFoundation","annualRevenue","companyDescription","address","position"],d=b().omitBy(b().pick(this.company,s),A=>b().isUndefined(A)||b().isNull(A)||""===A),f=b().pick(this.company,s),M=Object.keys(d);b().isEqual(M.sort(),s.sort())&&!b().isEqual(d,f)&&(this.mixpanelService.track("Company information completed",{"Account Type":this.userService.getUser().rootRole?.name}),this.company={...this.company,...d})}static#t=this.\u0275fac=function(d){return new(d||O)(g.KVO(i.ok),g.KVO(D.u),g.KVO(P.D),g.KVO(E.$),g.KVO(R.U_),g.KVO(e.U))};static#e=this.\u0275prov=g.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()},60718:(y,_,t)=>{t.d(_,{c:()=>P});var i=t(39229),h=t(20005),u=t(29348),n=t(76999),c=t(22699),p=t(27492),r=t(83883),a=t(10508),m=t(89985),C=t(20559),b=t(51186),l=t(35285);let g=class B extends b.il{constructor(){super({homepage:null,authorInfo:null,authorBlogs:null})}static#t=this.\u0275fac=function(e){return new(e||B)};static#e=this.\u0275prov=m.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})};g=(0,l.Cg)([(0,b.g7)({name:"blog"})],g);let D=(()=>{class E extends b.XK{constructor(e){super(e),this.store=e,this.homepage$=this.select("homepage"),this.authorInfo$=this.select("authorInfo"),this.authorBlogs$=this.select("authorBlogs")}static#t=this.\u0275fac=function(o){return new(o||E)(m.KVO(g))};static#e=this.\u0275prov=m.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),P=(()=>{class E{constructor(e,o,O){this.apiService=e,this.blogQuery=o,this.blogStore=O,this.articleTypeSource=new i.t(null),this.articleType$=this.articleTypeSource.asObservable(),this.blogSource$=new i.t([]),this.blogLength=new i.t(0),this._articlesBehaviourSubject=new i.t([]),this._articles$=this._articlesBehaviourSubject.asObservable(),this._endpoint="blogs/"}setArticleType(e){this.articleTypeSource.next(e)}getTags(e){return this.apiService.get(`tags?q=${e}`)}getTagByName(e){return this.apiService.get(`tags?q=${e}`).pipe((0,n.T)(o=>o[0]))}createBlog(e){return this.apiService.post("blog/create",e)}uploadImage(e,o){return this.apiService.put(`blog/${o}/upload-image`,e)}updateBlog(e,o){return this.apiService.put(`blog/${e}/update`,o)}createArticle(e){return this.apiService.post("blog/create",e)}getComments(e){return this.apiService.get(`comment/${e}`)}updateArticle(e,o){return this.apiService.put(`blog/${e}/update`,o)}createComment(e,o){return this.apiService.post("comment/create",{post:e,text:o})}getArticleById(e){return this.apiService.get(`blog/${e}`)}getNewArticleById(e){return this.apiService.get(`new-blog/${e}`)}updateNewArticle(e,o){return this.apiService.put(`new-blog/update/${e}`,(0,a.t)(o))}get blog$(){return this.blogSource$.asObservable()}get blogLength$(){return this.blogLength.asObservable()}getArticles(e){return this.apiService.get(`blogs${e}`)}updateBlogList(e="&limit=7&"){this.getArticles(e).pipe((0,c.$)()).subscribe(o=>{this.blogSource$.next(o.posts),this.blogLength.next(o.totalCount)})}getAuthorBlogs(e,o){const{limit:O,offset:S}=o;return this.apiService.get(`new-blog/author/${e}`,{params:{limit:O,offset:S}}).pipe((0,h.t)(),(0,p.M)(s=>this.updateAuthorStore(s)))}getAuthorInfo(){return this.blogQuery.authorInfo$}getHomePage(){const{homepage:e}=this.blogQuery.getValue();return e?(0,u.of)(e):this.apiService.get("new-blogs/homepage").pipe((0,p.M)(o=>this.updateHomepage(o)))}deleteArticleById(e){return this.apiService.delete(`blog/${e}/delete`)}getAuthorList$(e=20,o=0){return this.apiService.get("new-blog/authors",{params:{limit:e,offset:o}})}createNewBlog(e){return this.apiService.post("new-blog/create",(0,a.t)(e))}getNewArticles(e=0,o,O,S,s=10){const d={},f={offset:e,type:o,status:O,limit:s,tags:S};for(const M in f)null!=f[M]&&(d[M]=f[M]);return this.apiService.get("new-blogs",{params:{...d}})}deleteNewArticle(e){return this.apiService.delete(`new-blog/delete/${e}`)}createAuthor(e){return this.apiService.post("new-blog/author/create",(0,a.t)(e))}updateAuthor(e,o){return this.apiService.put(`new-blog/author/${o}`,(0,a.t)(e))}deleteAuthor(e){return this.apiService.delete(`new-blog/author/${e}`)}getArticlesByType(e,o,O,S,s){let d=new r.Nl;return d=d.append("limit",o).append("offset",e).append("type",O),S&&d.append("status",S),s?.length>0&&s.forEach(f=>d.append("tags",f)),this.apiService.get("new-blogs",{params:d})}updateAuthorStore(e){if(e){const{author:o,blogs:O,count:S}=e;this.blogStore.update({authorInfo:o,authorBlogs:{count:S,blogs:O}})}else this.blogStore.update({authorBlogs:null,authorInfo:null})}updateHomepage(e){this.blogStore.update({homepage:e})}static#t=this.\u0275fac=function(o){return new(o||E)(m.KVO(C.G),m.KVO(D),m.KVO(g))};static#e=this.\u0275prov=m.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},4865:(y,_,t)=>{t.d(_,{m:()=>n});var i=t(76999),h=t(89985),u=t(20559);let n=(()=>{class c{constructor(r){this._apiService=r}getChatById(r){return this._apiService.get(`my/chat/${r}`).pipe((0,i.T)(a=>Array.isArray(a)?a[0]:a),(0,i.T)(a=>({...a,offer:Array.isArray(a.offer)?a.offer[0]:a.offer})))}static#t=this.\u0275fac=function(a){return new(a||c)(h.KVO(u.G))};static#e=this.\u0275prov=h.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},26343:(y,_,t)=>{t.d(_,{z:()=>u});var i=t(89985),h=t(49134);let u=(()=>{class n{constructor(p){this.matDialog=p}showExplanationModal(){this.matDialog.open(this.explanationModal)}static#t=this.\u0275fac=function(r){return new(r||n)(i.rXU(h.bZ))};static#e=this.\u0275cmp=i.VBU({type:n,selectors:[["b2b-explanation-banner"]],inputs:{title:"title",subtitle:"subtitle",explanationModal:"explanationModal"},decls:7,vars:2,consts:[[1,"banner"],[1,"banner__title"],[1,"banner__subtitle"],[1,"banner__button",3,"click"]],template:function(r,a){1&r&&(i.j41(0,"div",0)(1,"span",1),i.EFF(2),i.k0s(),i.j41(3,"span",2),i.EFF(4),i.k0s(),i.j41(5,"span",3),i.bIt("click",function(){return a.showExplanationModal()}),i.EFF(6,"Show more"),i.k0s()()),2&r&&(i.R7$(2),i.JRh(a.title),i.R7$(2),i.SpI(" ",a.subtitle," "))},styles:["[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #d3dfff;box-shadow:0 0 10px #0000001a;background:#d3dfff;max-width:1170px;margin:auto;text-align:center;padding:8px 0}@media (max-width: 75em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{background:#d3dfff;max-width:95%}}@media (max-width: 36em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{max-width:90%}}[_nghost-%COMP%]   .banner__title[_ngcontent-%COMP%]{color:#000;font-size:16px;font-weight:700;letter-spacing:.18px}[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{font-size:13.6px;font-weight:400;letter-spacing:.14px;margin-left:8px}@media (max-width: 75em){[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{text-decoration:underline;color:#005dff;font-weight:400;margin-left:16px;cursor:pointer}@media (max-width: 36em){[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{display:block}}"]})}return n})()},61302:(y,_,t)=>{t.d(_,{q:()=>u});var i=t(38684),h=t(89985);let u=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=h.$C({type:n});static#i=this.\u0275inj=h.G2t({imports:[i.MD]})}return n})()},10508:(y,_,t)=>{t.d(_,{t:()=>u});var i=t(31239),h=function(n){return n.instagram="instagram",n.linkedin="linkedin",n.twitter="twitter",n.fb="facebook",n}(h||{});function u(n){const c=Object.values(h).filter(r=>"string"==typeof r),p=new FormData;return Object.entries(n).filter(([r,a])=>c.includes(r)?null!==a:!!a).forEach(([r,a])=>{if("documents"===r)a.forEach(m=>{p.append(r,m)});else if("uploadedDocs"===r)p.append(r,JSON.stringify(a));else if(Array.isArray(a))a.filter(m=>!!m).forEach(m=>{p.append(r,m)});else if("object"==typeof a&&a)for(const m in a){const C=`${r}${(0,i.Z)(m)}`;p.append(C,a[m])}else p.append(r,a)}),c.forEach(r=>{null===n[r]&&p.append(r,"")}),p}},34116:(y,_,t)=>{function i(){const h=/.{1,} .{1,}/;return u=>u.value?h.test(String(u.value).toLowerCase())?null:{fullName:!0}:null}t.d(_,{f:()=>i})},78593:(y,_,t)=>{t.d(_,{q7:()=>u});const h=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-zA-Z0-9]+([-.]{1}[a-zA-Z0-9]+)*\.[a-zA-Z]{2,}(\/.*)?$/;function u(){return n=>n.value?h.test(n.value.trim())?null:{siteError:!0}:null}},39129:(y,_,t)=>{function i(){const u=/(?:https?:)?\/\/(?:[A-z]+\.)?(twitter|linkedin|instagram|facebook)\.com/;return n=>{if(!n.value)return null;const c=n.value.replace(/\s/g,"");return u.test(String(c).toLowerCase())?null:{socialError:!0}}}function h(){return u=>u.value?/^(https?:\/\/)?(www\.youtube\.com|youtu\.?be|m\.youtube\.com)\/.+$/.test(u.value)?null:{invalidYoutubeLink:!0}:null}t.d(_,{o:()=>i,q:()=>h})},67231:(y,_,t)=>{t.d(_,{B:()=>m});var i=t(38684),h=t(9063),u=t(46295),n=t(27492),c=t(93744),p=t(39229),r=t(89985),a=t(39765);let m=(()=>{class C{constructor(l,v,g,D,P,E,R){this.rendererFactory=l,this.doc=v,this.locationService=g,this.router=D,this.route=P,this.title=E,this.meta=R,this.marketListingMetaSource=new p.t(null),this.renderer2=this.rendererFactory.createRenderer(null,null)}get marketListingMetaTags$(){return this.marketListingMetaSource.asObservable()}updateMarketListingMeta(l){this.marketListingMetaSource.next(l)}addBlogMicroMarkup(l,v,g,D,P,E,R,e){const o=this.renderer2.createElement("script");o.type="application/ld+json",o.id="micro-markup",o.text=`\n            {\n\t\t\t\t\t\t\t"@context": "https://schema.org",\n\t\t\t\t\t\t\t"@type": "NewsArticle",\n\t\t\t\t\t\t\t"mainEntityOfPage": {\n\t\t\t\t\t\t\t\t"@type": "WebPage",\n\t\t\t\t\t\t\t\t"@id": "${(c.c.apiUrl.includes("dev")?c.c.devUrl:c.c.prodUrl)+this.locationService.path()}"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t"headline": "${g}",\n\t\t\t\t\t\t\t"image": "[${E}]",\n\n\t\t\t\t\t\t\t"datePublished": "${this.getDateForBlogMarkup(D)}",\n\t\t\t\t\t\t\t"dateModified": "${this.getDateForBlogMarkup(P)}",\n\t\t\t\t\t\t\t"author": {\n   \t\t\t\t\t\t"@type": "Person",\n  \t\t\t\t\t\t"name": "${R}"\n  \t\t\t\t\t},\n   \t\t\t\t\t "publisher": {\n \t\t\t\t\t\t\t"@type": "Organization",\n\t\t\t\t\t\t  "name": "",\n \t\t\t\t\t\t  "url" : "${(c.c.apiUrl.includes("dev")?c.c.devUrl:c.c.prodUrl)+this.locationService.path()}",\n \t\t\t\t\t\t\t"logo": {\n \t\t\t\t\t\t\t "@type": "ImageObject",\n \t\t\t\t\t\t   "url": "${E[2]}"\n \t\t\t\t\t\t  }\n\t\t\t\t\t\t },\n\t\t\t\t\t\t"description": "${e}"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n        `,this.renderer2.appendChild(this.doc.body,o)}addCanonicalRef(){this.initCanonicalRef(),this.router.events.pipe((0,u.p)(l=>l instanceof h.wF),(0,n.M)(()=>{this.removeCanonicalRefs(),this.initCanonicalRef()})).subscribe()}setTitle(l){this.title.setTitle(l)}setDescription(l){this.meta.updateTag({name:"description",content:l})}initRobotsMetaTag(){this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag(),this.router.events.pipe((0,u.p)(l=>l instanceof h.wF),(0,n.M)(()=>{this.removeRobotsMetaTag(),this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag()})).subscribe()}isNoIndexUrl(l){return/sourcing-request\/listing\/.+/i.test(l)}addRobotsMetaTag(l=!0,v=!0){const g=this.doc.createElement("meta");g.setAttribute("name","robots"),g.setAttribute("content",`${l?"index":"noindex"}, ${v?"follow":"nofollow"}`),this.doc.head.appendChild(g)}removeRobotsMetaTag(){const l=this.doc.querySelector('meta[name="robots"]');l&&l.remove()}initCanonicalRef(){let l=this.doc.createElement("link");const v=this.doc.URL.indexOf("?");let g=-1!==v?this.doc.URL.substring(0,v):this.doc.URL;l.setAttribute("rel","canonical"),this.doc.head.appendChild(l),l.setAttribute("href",this.replaceCanonicalLink(g))}replaceCanonicalLink(l){switch(c.c.apiUrl){case"https://api.globy.com/":return l.replace(`http://${c.c.baseUrl}/`,c.c.prodUrl);case"https://api-dev.globy.com/":return l.replace(`http://${c.c.baseUrl}/`,c.c.devUrl);case"https://api-staging.globy.com/":return l.replace(`http://${c.c.baseUrl}/`,c.c.stagingUrl);default:return l}}removeCanonicalRefs(){const l=this.doc.getElementsByTagName("head")[0],v=l.getElementsByTagName("link");for(let g=0;g<v.length;g++){const D=v[g];"canonical"===D.rel&&this.renderer2.removeChild(l,D)}}getDateForBlogMarkup(l){"string"==typeof l&&(l=new Date);const v=l.toISOString();return v.slice(0,10)+"T"+v.slice(11,19)+"+08:00"}static#t=this.\u0275fac=function(v){return new(v||C)(r.KVO(r._9s),r.KVO(i.qQ),r.KVO(i.aZ),r.KVO(h.Ix),r.KVO(h.nX),r.KVO(a.hE),r.KVO(a.W8))};static#e=this.\u0275prov=r.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})()}}]);