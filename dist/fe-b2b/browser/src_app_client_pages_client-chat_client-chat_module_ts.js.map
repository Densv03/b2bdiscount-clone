{"version":3,"file":"src_app_client_pages_client-chat_client-chat_module_ts.js","mappings":";;;;;;;;;;;;;;;;AACuD;AACc;;;AAErE,MAAM,MAAM,GAAW;IACtB;QACC,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,8EAAmB;KAC9B;CACD,CAAC;AAMK,MAAM,uBAAuB;;8FAAvB,uBAAuB;oHAAvB,uBAAuB;wHAHzB,kEAAqB,CAAC,MAAM,CAAC,EAC7B,yDAAY;mIAEV,uBAAuB,oFAFzB,yDAAY;;;;;;;;;;;;;;;;;;;;;;;;;ACZwB;AAEU;AACJ;AACF;AACF;AACI;AACgB;AACE;AACnB;;AAe7C,MAAM,gBAAgB;;gFAAhB,gBAAgB;6GAAhB,gBAAgB;iHAV3B,yDAAY;QACZ,gFAAuB;QACvB,+DAAmB;QACnB,mEAAoB;QACpB,+DAAkB;QAClB,6DAAiB;QACjB,2DAAgB;QAChB,gEAAe;mIAGJ,gBAAgB,mBAZb,8EAAmB,aAEjC,yDAAY;QACZ,gFAAuB;QACvB,+DAAmB;QACnB,mEAAoB;QACpB,+DAAkB;QAClB,6DAAiB;QACjB,2DAAgB;QAChB,gEAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBjB;AASA;AAEA;AAEA;AACA;AAIA;AAEA;;;;;;;;;;;;;;;;;;;;;;ICCKa,6DAAAA,cAA6F,CAA7F,EAA6F,GAA7F,EAA6F,EAA7F,EAA6F,CAA7F,EAA6F,MAA7F,EAA6F,EAA7F;IAE4DA,qDAAAA;IAA4BA,2DAAAA;IACtFA,6DAAAA;IAA0DA,qDAAAA;;IAA8BA,2DAAAA;IAEzFA,6DAAAA;IACCA,qDAAAA;IACDA,2DAAAA;;;;;IAL2DA,wDAAAA;IAAAA,gEAAAA;IACAA,wDAAAA;IAAAA,gEAAAA,CAAAA,0DAAAA;IAG1DA,wDAAAA;IAAAA,iEAAAA;;;;;;IAGFA,6DAAAA;IACCA,qDAAAA;;IACDA,2DAAAA;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;IAqCFA,6DAAAA;IACCA,qDAAAA;;IACDA,2DAAAA;;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;IAGDA,6DAAAA;IACCA,qDAAAA;;IACDA,2DAAAA;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;IAMDA,6DAAAA;IACCA,qDAAAA;;IACDA,2DAAAA;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;IAMDA,6DAAAA;IACCA,qDAAAA;;IACDA,2DAAAA;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;IA1BFA,6DAAAA,eAAqG,CAArG,EAAqG,GAArG,EAAqG,EAArG;IAEEA,qDAAAA;IACDA,2DAAAA;IACAA,6DAAAA,aAAgD,CAAhD,EAAgD,MAAhD;IACOA,qDAAAA;IAAkCA,2DAAAA;IAEzCA,yDAAAA;IAIAA,yDAAAA;IAGAA,6DAAAA;IACCA,qDAAAA;IACDA,2DAAAA;IAEAA,yDAAAA;IAGAA,6DAAAA;IACCA,qDAAAA;IACDA,2DAAAA;IAEAA,yDAAAA;IAGAA,6DAAAA;IACCA,qDAAAA;IACDA,2DAAAA;;;;;IA5BCA,wDAAAA;IAAAA,iEAAAA;IAGMA,wDAAAA;IAAAA,iEAAAA;IAEyCA,wDAAAA;IAAAA,yDAAAA;IAIEA,wDAAAA;IAAAA,yDAAAA;IAIjDA,wDAAAA;IAAAA,iEAAAA;IAGiDA,wDAAAA;IAAAA,yDAAAA;IAIjDA,wDAAAA;IAAAA,iEAAAA;IAG+CA,wDAAAA;IAAAA,yDAAAA;IAI/CA,wDAAAA;IAAAA,iEAAAA;;;;;;IAIDA,6DAAAA;IACCA,qDAAAA;;IACDA,2DAAAA;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;;;IAEDA,6DAAAA;IAAsDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,2BAAT;IAA0B,CAA1B;IACrDA,qDAAAA;;IACDA,2DAAAA;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;;;IAEDA,6DAAAA;IAAmDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,wBAAT;IAAuB,CAAvB;IAClDA,qDAAAA;;IACDA,2DAAAA;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;;;IAEDA,6DAAAA;IAAoDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,yBAAT;IAAwB,CAAxB;IACnDA,qDAAAA;;IACDA,2DAAAA;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;;;;;IAtGJA,6DAAAA,cAAuE,CAAvE,EAAuE,MAAvE,EAAuE,CAAvE;IAEEA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,8BAAjB;IAAqC,CAArC,EAAsC,UAAtC,EAAsC;MAAAA,4DAAAA;MAAA;MAAA,OAE1BA,0DAAAA,qBAAYC,sBAAc,SAAd,EAAwBC,KAApC,EAF0B;IAEiB,CAFvD;IAIAF,6DAAAA,YAA2C,CAA3C,EAA2C,GAA3C,EAA2C,CAA3C;;IACiEA,qDAAAA;;IAAyCA,2DAAAA;IACzGA,6DAAAA;;IAA0EA,qDAAAA;;IAAmCA,2DAAAA;IAC7GA,6DAAAA;;IACEA,qDAAAA;IACFA,2DAAAA;IAGDA,6DAAAA;IAAqCA,qDAAAA;IAA0BA,2DAAAA;IAC/DA,6DAAAA;IAAuCA,qDAAAA;;;IAAsEA,2DAAAA;IAE7GA,6DAAAA,eAA0C,EAA1C,EAA0C,IAA1C,EAA0C,EAA1C,EAA0C,EAA1C;IAEEA,yDAAAA;;IASAA,yDAAAA;;IAGDA,2DAAAA;IAGDA,wDAAAA;;IAMAA,6DAAAA,gBAAyC,EAAzC,EAAyC,QAAzC,EAAyC,EAAzC,EAAyC,EAAzC,EAAyC,MAAzC;IAMQA,qDAAAA;;IAAgCA,2DAAAA;IACtCA,wDAAAA;IACDA,2DAAAA;IAIFA,6DAAAA,gBAAiG,EAAjG,EAAiG,KAAjG,EAAiG,EAAjG;IAEEA,wDAAAA;IACAA,6DAAAA;IAAmBA,qDAAAA;IAAOA,2DAAAA;IAI3BA,yDAAAA;IAgCAA,6DAAAA;IACCA,yDAAAA;IAGAA,yDAAAA;IAGAA,yDAAAA;IAGAA,yDAAAA;IAGDA,2DAAAA;;;;;;;;;;IArGAA,wDAAAA;IAAAA,yDAAAA;IAIIA,wDAAAA;IAAAA,yDAAAA,eAAAA,0DAAAA;IAA6DA,wDAAAA;IAAAA,gEAAAA,CAAAA,0DAAAA;IAC7DA,wDAAAA;IAAAA,yDAAAA,eAAAA,0DAAAA;IAAuEA,wDAAAA;IAAAA,iEAAAA,KAAAA,0DAAAA;IACvEA,wDAAAA;IAAAA,yDAAAA,eAAAA,0DAAAA;IACDA,wDAAAA;IAAAA,iEAAAA;IAIkCA,wDAAAA;IAAAA,gEAAAA;IACEA,wDAAAA;IAAAA,iEAAAA,KAAAA,0DAAAA,qCAAAA,0DAAAA;IAIbA,wDAAAA;IAAAA,yDAAAA,YAAAA,0DAAAA;IASnBA,wDAAAA;IAAAA,yDAAAA,uBAAAA,0DAAAA;IAQNA,wDAAAA;IAAAA,yDAAAA,gBAAAA,0DAAAA;IAQCA,wDAAAA;IAAAA,yDAAAA;IAEMA,wDAAAA;IAAAA,gEAAAA,CAAAA,0DAAAA;IAa+CA,wDAAAA;IAAAA,yDAAAA,kCAA4B,UAA5B,EAA4BG,GAA5B;IAiCpBH,wDAAAA;IAAAA,yDAAAA;IAGVA,wDAAAA;IAAAA,yDAAAA;IAGAA,wDAAAA;IAAAA,yDAAAA;IAGAA,wDAAAA;IAAAA,yDAAAA;;;;;;IAS3BA,6DAAAA;IACCA,qDAAAA;;IACDA,2DAAAA;;;;IADCA,wDAAAA;IAAAA,iEAAAA,MAAAA,0DAAAA;;;;ID3EWI,mBAAmB,SAAnBA,mBAAmB;EA2B/BC,YACkBC,eADlB,EAEkBC,OAFlB,EAGkBC,YAHlB,EAIkBC,aAJlB,EAKkBC,aALlB,EAMkBC,cANlB,EAOkBC,YAPlB,EAQkBC,YARlB,EASkBC,cATlB,EAUkBC,gBAVlB,EAWQC,iBAXR,EAYiBC,iBAZjB,EAakBC,gBAblB,EAcoBC,eAdpB,EAeoBC,iBAfpB,EAewD;IAdtC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACV;IACS;IACC;IACE;IACA;IAEnB,KAAKC,qBAAL,GAA6BhC,mEAA7B;IACA,KAAKiC,SAAL,GAAiB,KAAKV,YAAL,CAAkBW,KAAlB,CAAwB;MACxCC,OAAO,EAAE;IAD+B,CAAxB,CAAjB;IAIA,KAAKC,gCAAL,GAAwC,IAAIjC,kDAAJ,CAAyB,EAAzB,CAAxC;IACA,KAAKkC,iBAAL,GAAyB,KAAKD,gCAAL,CAAsCE,YAAtC,EAAzB;IAEA,KAAKC,wBAAL,GAAgC,IAAIpC,kDAAJ,CAAyB,EAAzB,CAAhC;IACA,KAAKqC,SAAL,GAAiB,KAAKD,wBAAL,CAA8BD,YAA9B,EAAjB;IAEA,KAAKG,yBAAL,GAAiC,IAAItC,kDAAJ,CAAyB,IAAzB,CAAjC;IACA,KAAKuC,UAAL,GAAkB,KAAKD,yBAAL,CAA+BH,YAA/B,EAAlB;IAEA,KAAKK,SAAL,GAAiB,KAAKC,WAAL,EAAjB;IACA,KAAKC,SAAL,GAAiB,KAAKC,WAAL,EAAjB;EACA;;EAEMF,WAAW;IACjB,OAAO,KAAKpB,YAAL,CAAkBuB,OAAlB,GAA4BC,IAA5B,CACN3C,uDAAM,CAAE4C,IAAD,IAAU,CAAC,CAACA,IAAb,CADA,EAEN1C,0DAAS,CAAE0C,IAAD,IAAS;MAClB,OAAO,KAAKP,UAAL,CAAgBM,IAAhB,CACN3C,uDAAM,CAAE6C,QAAD,IAAc,CAAC,CAACA,QAAjB,CADA,EAEN5C,oDAAG,CAAE4C,QAAD,IAAa;;;QAChB,MAAMC,YAAY,GACjB,eAAQ,CAACC,KAAT,MAAc,IAAd,IAAcC,aAAd,GAAc,MAAd,GAAcA,GAAEC,GAAhB,OAAwBL,IAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAEK,GAA9B,IACG,KAAKzB,gBAAL,CAAsB0B,OAAtB,CAA8B,aAA9B,CADH,GAEG,KAAK1B,gBAAL,CAAsB0B,OAAtB,CAA8B,YAA9B,CAHJ;QAIA,MAAMC,WAAW,GAChBL,YAAY,KAAK,KAAKtB,gBAAL,CAAsB0B,OAAtB,CAA8B,aAA9B,CAAjB,GACG,cAAQ,CAACE,KAAT,MAAc,IAAd,IAAcC,aAAd,GAAc,MAAd,GAAcA,GAAEC,OADnB,GAEGT,QAAQ,CAACE,KAHb;QAIA,MAAMQ,MAAM,GACX,YAAW,SAAX,eAAW,WAAX,GAAW,MAAX,cAAW,CAAEC,QAAb,MACAL,WAAW,SAAX,eAAW,WAAX,GAAW,MAAX,cAAW,CAAEM,UADb,KAEA,GAAG,KAAKjC,gBAAL,CAAsB0B,OAAtB,CAA8B,aAA9B,CAA4C,OAAO,cAAQ,CAACE,KAAT,MAAc,IAAd,IAAcM,aAAd,GAAc,MAAd,GAAcA,GAAEC,KAAK,EAH5E;QAKA,OAAO,EACN,GAAGd,QADG;UAENM,WAAW,EAAE,EACZ,GAAGA,WADS;YAEZS,IAAI,EAAEd,YAFM;YAGZS;UAHY;QAFP,CAAP;MAQA,CAtBE,CAFG,CAAP;IA0BA,CA3BQ,CAFH,CAAP;EA+BA;;EAEMd,WAAW;IACjB,MAAMoB,KAAK,GAAG,KAAK1C,YAAL,CAAkBuB,OAAlB,EAAd;;IACA,MAAMoB,KAAK,GAAG,KAAKlD,eAAL,CAAqBmD,QAArB,CAA8BpB,IAA9B,CACb1C,oDAAG,CAAE8D,QAAD,IAAcA,QAAQ,CAACC,GAAT,CAAa,IAAb,CAAf,CADU,EAEb9D,0DAAS,CAAE+D,EAAD,IAAQ,KAAKnD,YAAL,CAAkBoD,WAAlB,CAA8BD,EAA9B,CAAT,CAFI,CAAd;;IAKA,OAAOlE,oDAAa,CAAC,CAAC8D,KAAD,EAAQC,KAAR,CAAD,CAAb,CAA8BnB,IAA9B,CACN3C,uDAAM,CAAC,CAAC,CAAC4C,IAAD,EAAOuB,IAAP,CAAD,KAAkB,CAAC,CAACvB,IAAF,IAAU,CAAC,CAACuB,IAA/B,CADA,EAENjE,0DAAS,CAAC,CAAC,CAAC0C,IAAD,EAAOuB,IAAP,CAAD,KACT,KAAKnC,iBAAL,CAAuBW,IAAvB,CACCxC,oDAAG,CAAC,MAAK;MACRiE,UAAU,CAAC,MAAK;;;QACf,KAAKC,aAAL,CAAmBC,aAAnB,CAAiCC,SAAjC,GAA6C,WAAKF,aAAL,CAAmBC,aAAnB,MAAgC,IAAhC,IAAgCtB,aAAhC,GAAgC,MAAhC,GAAgCA,GAAEwB,YAA/E;MACA,CAFS,EAEP,CAFO,CAAV;IAGA,CAJE,CADJ,EAMCvE,oDAAG,CAAEwE,QAAD,IACHA,QAAQ,CAACxE,GAAT,CAAc6B,OAAD,IAAiB;;;MAC7B,MAAMgB,YAAY,GACjB,WAAI,CAAC4B,MAAL,MAAW,IAAX,IAAW1B,aAAX,GAAW,MAAX,GAAWA,GAAEC,GAAb,OAAqBnB,OAAO,SAAP,WAAO,WAAP,GAAO,MAAP,UAAO,CAAEyB,MAA9B,IACG,KAAK/B,gBAAL,CAAsB0B,OAAtB,CAA8B,aAA9B,CADH,GAEG,KAAK1B,gBAAL,CAAsB0B,OAAtB,CAA8B,YAA9B,CAHJ;MAIA,MAAMC,WAAW,GAChBL,YAAY,KAAK,KAAKtB,gBAAL,CAAsB0B,OAAtB,CAA8B,aAA9B,CAAjB,GAAgE,UAAI,CAACE,KAAL,MAAU,IAAV,IAAUC,aAAV,GAAU,MAAV,GAAUA,GAAEC,OAA5E,GAAsFa,IAAI,CAACpB,KAD5F;MAEA,MAAMQ,MAAM,GACX,YAAW,SAAX,eAAW,WAAX,GAAW,MAAX,cAAW,CAAEC,QAAb,MACAL,WAAW,SAAX,eAAW,WAAX,GAAW,MAAX,cAAW,CAAEM,UADb,KAEA,GAAG,KAAKjC,gBAAL,CAAsB0B,OAAtB,CAA8B,aAA9B,CAA4C,OAAO,UAAI,CAACE,KAAL,MAAU,IAAV,IAAUM,aAAV,GAAU,MAAV,GAAUA,GAAEC,KAAK,EAHxE;MAKA,OAAO,EACN,GAAG7B,OADG;QAENwB,OAAO,EAAE,EACR,GAAGH,WADK;UAERI,MAFQ;UAGRK,IAAI,EAAET;QAHE;MAFH,CAAP;IAQA,CApBD,CADE,CANJ,CADQ,CAFH,CAAP;EAmCA;;EAEMwB,YAAY,CAACC,KAAD,EAAa;IAC/B,KAAKC,WAAL,CAAiB,KAAKjD,SAAL,CAAeoC,GAAf,CAAmB,SAAnB,EAA8BxD,KAA/C;IACAoE,KAAK,CAACE,cAAN;EACA;;EAEYD,WAAW,CAACE,IAAD,EAAa;IAAA;;IAAA;MACpC,IAAI,CAACA,IAAL,EAAW;QACV;MACA;;MAED,KAAI,CAACzC,SAAL,CAAeK,IAAf,CAAoB9C,sEAAc,CAAC,KAAD,CAAlC,EAA0CmF,SAA1C,CAAqDnC,QAAD,IAAa;;;QAChE,MAAMD,IAAI,GAAG,KAAI,CAAC5B,aAAL,CAAmB0B,OAAnB,EAAb;;QACA,KAAI,CAACuC,OAAL,CAAaC,IAAb,CAAkB,SAAlB,EAA6B;UAC5BC,IAAI,EAAE,MADsB;UAE5BJ,IAF4B;UAG5BK,MAAM,EAAExC,IAAI,CAACK,GAAL,MAAa,cAAQ,CAACF,KAAT,MAAc,IAAd,IAAcC,aAAd,GAAc,MAAd,GAAcA,GAAEC,GAA7B,IAAmCJ,QAAQ,CAAC6B,MAAT,CAAgBzB,GAAnD,GAAyD,cAAQ,CAACF,KAAT,MAAc,IAAd,IAAcM,aAAd,GAAc,MAAd,GAAcA,GAAEJ,GAHrD;UAI5BoC,OAAO,EAAExC,QAAQ,CAACO,KAAT,CAAeH;QAJI,CAA7B;MAMA,CARD;;MAUA,KAAI,CAACrB,SAAL,CAAeoC,GAAf,CAAmB,SAAnB,EAA8BsB,KAA9B;IAfoC;EAgBpC;;EAEMC,kBAAkB;IACxB,OAAO,KAAKN,OAAL,CAAaO,EAAb,CAAgB,SAAhB,EAA4B1D,OAAD,IAAiB;MAClD,MAAM2D,OAAO,GAAG,KAAK1D,gCAAL,CAAsC2D,QAAtC,EAAhB;;MACA,KAAK3D,gCAAL,CAAsC4D,IAAtC,CAA2C,CAAC,GAAGF,OAAJ,EAAa3D,OAAb,CAA3C;IACA,CAHM,CAAP;EAIA;;EAEM8D,mBAAmB;IACzB,OAAO,KAAKX,OAAL,CAAaO,EAAb,CAAgB,WAAhB,EAA8B3C,QAAD,IAAkB;MACrD,KAAKzB,cAAL,CAAoByE,YAApB,CAAiChD,QAAQ,CAACiD,mBAA1C;;MACA,KAAK1D,yBAAL,CAA+BuD,IAA/B,CAAoC9C,QAApC;IACA,CAHM,CAAP;EAIA;;EAEMkD,yBAAyB;IAC/B,OAAO,KAAKd,OAAL,CAAaO,EAAb,CAAgB,iBAAhB,EAAoCQ,eAAD,IAAyB;MAClE,KAAKjE,gCAAL,CAAsC4D,IAAtC,CAA2CK,eAA3C;IACA,CAFM,CAAP;EAGA;;EAEDC,cAAc,CAACC,KAAD,EAAc;IAC3B,IAAI,KAAKjB,OAAT,EAAkB;MACjB,KAAKA,OAAL,CAAakB,UAAb;IACA;;IAED,KAAKlB,OAAL,GAAe7E,oDAAE,CAACC,yEAAD,EAAqB;MACrCgG,IAAI,EAAE,OAD+B;MAErCC,IAAI,EAAE;QACLJ;MADK;IAF+B,CAArB,CAAjB;EAMA;;EAEDK,QAAQ;IACP,MAAMtC,EAAE,GAAG,KAAKrD,eAAL,CAAqB4F,QAArB,CAA8BC,MAA9B,CAAqC,IAArC,CAAX,CADO,CAEP;;IAEA,MAAMC,MAAM,GAAG,KAAK1F,aAAL,CAAmB2F,SAAnB,EAAf;;IACA,MAAM9C,KAAK,GAAG,KAAK7C,aAAL,CAAmB4F,QAAnB,EAAd;;IACA,MAAM9C,KAAK,GAAG,KAAKlD,eAAL,CAAqBmD,QAArB,CAA8BpB,IAA9B,CACb1C,oDAAG,CAAE8D,QAAD,IAAcA,QAAQ,CAACC,GAAT,CAAa,IAAb,CAAf,CADU,EAEb9D,0DAAS,CAAE+D,EAAD,IAAQ,KAAKnD,YAAL,CAAkBoD,WAAlB,CAA8BD,EAA9B,CAAT,CAFI,CAAd;;IAKAlE,oDAAa,CAAC,CAAC+D,KAAD,EAAQ4C,MAAR,EAAgB7C,KAAhB,CAAD,CAAb,CACElB,IADF,CACO9C,sEAAc,CAAC,IAAD,CADrB,EAEEmF,SAFF,CAEY,CAAC,CAACb,IAAD,EAAO+B,KAAP,EAActD,IAAd,CAAD,KAA6B;;;MACvC,MAAMG,KAAK,GAAG8D,KAAK,CAACC,OAAN,CAAc3C,IAAI,CAACpB,KAAnB,IAA4BoB,IAAI,CAACpB,KAAL,CAAW,CAAX,CAA5B,GAA4CoB,IAAI,CAACpB,KAA/D;MACA,MAAM2B,MAAM,GAAGmC,KAAK,CAACC,OAAN,CAAc3C,IAAI,CAACO,MAAnB,IAA6BP,IAAI,CAACO,MAAL,CAAY,CAAZ,CAA7B,GAA8CP,IAAI,CAACO,MAAlE,CAFuC,CAIvC;MACA;;MAEA,KAAKuB,cAAL,CAAoBC,KAApB;MAEA,KAAKH,yBAAL;MACA,KAAKH,mBAAL;MACA,KAAKL,kBAAL;MAEA,MAAM3B,IAAI,GAAGhB,IAAI,CAACK,GAAL,MAAaF,KAAK,SAAL,SAAK,WAAL,GAAK,MAAL,QAAK,CAAEE,GAApB,IAA0B,OAA1B,GAAoC,QAAjD;MACA,MAAM8D,SAAS,GAAGnD,IAAI,KAAK,QAAT,GAAoBb,KAApB,GAA4B2B,MAA9C;MAEA,KAAKsC,qBAAL,GAA6B,UAAI,CAAC5D,KAAL,MAAU,IAAV,IAAUJ,aAAV,GAAU,MAAV,GAAUA,GAAEiE,SAAF,CAAYC,QAAZ,CAAqBnE,KAAK,CAACE,GAA3B,CAAvC;MAEA,KAAKkE,wBAAL,GAAgChD,IAAI,CAACiD,iBAAL,IAA0B,CAAC,KAAKJ,qBAAhE;MACA,KAAKK,sBAAL,GACCzD,IAAI,KAAK,OAAT,IACA,CAAC,KAAKoD,qBADN,IAEA,CAAC,KAAKG,wBAFN,KAGC,EAAC,UAAI,CAAC/D,KAAL,MAAU,IAAV,IAAUC,aAAV,GAAU,MAAV,GAAUA,GAAEiE,UAAF,CAAaC,KAAxB,KAAiC,EAAC,UAAI,CAACnE,KAAL,MAAU,IAAV,IAAUM,aAAV,GAAU,MAAV,GAAUA,GAAE4D,UAAF,CAAaE,KAAxB,CAHlC,CADD,CAnBuC,CAwBvC;;MACA,KAAKC,mBAAL,GAA2B7D,IAAI,KAAK,QAAT,IAAqB,CAAC,KAAKoD,qBAA3B,IAAoD7C,IAAI,CAACiD,iBAApF;MACA,KAAKM,oBAAL,GAA4B9D,IAAI,KAAK,QAAT,IAAqB,CAAC,KAAKoD,qBAA3B,IAAoD7C,IAAI,CAACiD,iBAArF;MAEA,KAAKjD,IAAL,GAAYA,IAAZ;;MAEA,KAAKc,OAAL,CAAaC,IAAb,CAAkB,YAAlB,EAAgC;QAC/BE,MAAM,EAAE2B,SAAS,SAAT,aAAS,WAAT,GAAS,MAAT,YAAS,CAAE9D,GADY;QAE/BoC,OAAO,EAAE,UAAI,CAACjC,KAAL,MAAU,IAAV,IAAUuE,aAAV,GAAU,MAAV,GAAUA,GAAE1E;MAFU,CAAhC;IAIA,CApCF;EAqCA;;EAGD2E,eAAe;IACd,KAAK7G,aAAL,CACE6G,eADF,CACkB,KAAKzD,IADvB,EAEExB,IAFF,CAGE9C,sEAAc,CAAC,IAAD,CAHhB,EAIE,KAAKwB,gBAAL,CAAsBwG,OAAtB,CAA8B;MAC7BC,OAAO,EAAE,wBADoB;MAE7BC,OAAO,EAAE,kCAFoB;MAG7BC,KAAK,EAAE;IAHsB,CAA9B,CAJF,EAUEhD,SAVF,CAUY,MAAK;MACf,KAAKmC,wBAAL,GAAgC,KAAhC;MACA,KAAKE,sBAAL,GAA8B,KAA9B;MACA,KAAK/F,iBAAL,CAAuB2G,aAAvB;IACA,CAdF;EAeA;;EAEDC,YAAY;IACX,KAAKnH,aAAL,CAAmBoH,YAAnB,CAAgC,KAAKhE,IAAL,CAAUf,KAA1C,EAAiD,KAAKe,IAAL,CAAUpB,KAAV,CAAgBE,GAAjE,EADW,CAEX;;;IAEA,KAAKlC,aAAL,CACEmH,YADF,CACe,KAAK/D,IAAL,CAAUf,KADzB,EACgC,KAAKe,IAAL,CAAUpB,KAAV,CAAgBE,GADhD,EAEEN,IAFF,CAGE9C,sEAAc,CAAC,IAAD,CAHhB,EAIE,KAAKwB,gBAAL,CAAsBwG,OAAtB,CAA8B;MAC7BC,OAAO,EAAE,qBADoB;MAE7BC,OAAO,EAAE,+BAFoB;MAG7BC,KAAK,EAAE;IAHsB,CAA9B,CAJF,EAUEhD,SAVF,CAUY,MAAK;MACf,KAAKyC,mBAAL,GAA2B,KAA3B;MACA,KAAKC,oBAAL,GAA4B,IAA5B;MACA,KAAKV,qBAAL,GAA6B,IAA7B;MACA,KAAKG,wBAAL,GAAgC,KAAhC;MACA,KAAK7F,iBAAL,CAAuB2G,aAAvB;IACA,CAhBF;EAiBA;;EAEDG,aAAa;IACZ,KAAKrH,aAAL,CACEqH,aADF,CACgB,KAAKjE,IAAL,CAAUf,KAAV,CAAgBH,GADhC,EACqC,KAAKkB,IAAL,CAAUpB,KAAV,CAAgBE,GADrD,EAEEN,IAFF,CAGE9C,sEAAc,CAAC,IAAD,CAHhB,EAIE,KAAKwB,gBAAL,CAAsBwG,OAAtB,CAA8B;MAC7BC,OAAO,EAAE,qBADoB;MAE7BC,OAAO,EAAE,+BAFoB;MAG7BC,KAAK,EAAE;IAHsB,CAA9B,CAJF,EAUEhD,SAVF,CAUY,MAAK;MACf,KAAKyC,mBAAL,GAA2B,KAA3B;MACA,KAAKC,oBAAL,GAA4B,KAA5B;MACA,KAAKV,qBAAL,GAA6B,KAA7B;MACA,KAAKG,wBAAL,GAAgC,KAAhC;MACA,KAAK7F,iBAAL,CAAuB2G,aAAvB;IACA,CAhBF;EAiBA;;EAEDI,WAAW;IACV,IAAI,KAAKpD,OAAT,EAAkB;MACjB,KAAKA,OAAL,CAAakB,UAAb;IACA;EACD;;AAxT8B;;;mBAAnBzF,qBAAmBJ,gEAAAA,CAAAA,4DAAAA,GAAAA,gEAAAA,CAAAA,oDAAAA,GAAAA,gEAAAA,CAAAA,oEAAAA,GAAAA,gEAAAA,CAAAA,uEAAAA,GAAAA,gEAAAA,CAAAA,mFAAAA,GAAAA,gEAAAA,CAAAA,0EAAAA,GAAAA,gEAAAA,CAAAA,wDAAAA,GAAAA,gEAAAA,CAAAA,yEAAAA,GAAAA,gEAAAA,CAAAA,0EAAAA,GAAAA,gEAAAA,CAAAA,+DAAAA,GAAAA,gEAAAA,CAAAA,6DAAAA,GAAAA,gEAAAA,CAAAA,6DAAAA,GAAAA,gEAAAA,CAAAA,kEAAAA,GAAAA,gEAAAA,CAAAA,qFAAAA,GAAAA,gEAAAA,CAAAA,uFAAAA;AAAA;;;QAAnBI;EAAmB4H;EAAAC;IAAA;;;;;;;;;;;;;;;MCtChCjI,6DAAAA;MAECA,yDAAAA;;MA2GDA,2DAAAA;MAEAA,yDAAAA,8EAAAA,qEAAAA;;;;MA7GmCA,wDAAAA;MAAAA,yDAAAA,SAAAA,0DAAAA;;;;;;;ADoCtBI,mBAAmB,uDAP/Bd,oEAAY,EAOmB,GAAnBc,mBAAmB,CAAnB;;;;;;;;;;;;;;;;;;;;;AEpCgC;AACH;;;;;AASnC,MAAM,iBAAiB;IAG7B,YACkB,WAAuB,EACvB,gBAAiC,EACjC,gBAAiC;QAFjC,gBAAW,GAAX,WAAW,CAAY;QACvB,qBAAgB,GAAhB,gBAAgB,CAAiB;QACjC,qBAAgB,GAAhB,gBAAgB,CAAiB;QAElD,IAAI,CAAC,QAAQ,GAAG,aAAa,CAAC;QAC9B,IAAI,CAAC,cAAc,EAAE,CAAC;IACvB,CAAC;IAEM,cAAc;;QACpB,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;QACxD,IAAI,CAAC,iBAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,UAAU,0CAAE,MAAM,KAAI,CAAC,WAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,UAAU,GAAE;YAC/D,IAAI,CAAC,WAAW;iBACd,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;iBAClB,SAAS,CAAC,CAAC,UAAe,EAAE,EAAE;gBAC9B,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC;oBAC5B,UAAU;iBACV,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;SACJ;QAED,OAAO,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,CAAC;IAChD,CAAC;IAEM,aAAa;QACnB,MAAM,EAAC,UAAU,EAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;QACtD,IAAI,CAAC,UAAU,EAAE;YAChB,OAAO,EAAE,CAAC;SACV;QACD,OAAO,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;IACzC,CAAC;IAEM,cAAc,CAAC,EAAO,EAAE,IAAS,EAAE,IAAS;QAClD,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,YAAY,EAAE,SAAS,EAAE;YACpD,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YACzB,IAAI;SACJ,CAAC,CAAC;IACJ,CAAC;IAEM,cAAc,CAAC,cAAmB,EAAE,cAAmB,EAAE,cAAmB;QAClF,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,iBAAiB,EAAE;YAC/C,QAAQ,EAAE;gBACT,GAAG,cAAc;gBACjB,QAAQ,EAAE;oBACT,GAAG,cAAc;oBACjB,QAAQ,EAAE,cAAc;iBACxB;aACD;SACD,CAAC,CAAC;IACJ,CAAC;IAEM,kBAAkB,CAAC,EAAO,EAAE,IAAS,EAAE,IAAS;QACtD,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,gBAAgB,EAAE,SAAS,EAAE;YACxD,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YACzB,IAAI,EAAE,CAAC,IAAI;SACX,CAAC,CAAC;IACJ,CAAC;IAEM,kBAAkB,CAAC,cAAmB,EAAE,cAAmB;QACjE,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,qBAAqB,EAAE;YACnD,QAAQ,EAAE;gBACT,GAAG,cAAc;gBACjB,QAAQ,EAAE,cAAc;aACxB;SACD,CAAC,CAAC;IACJ,CAAC;IAEM,iBAAiB;QACvB,MAAM,EAAE,cAAc,EAAE,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC;QAE5D,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE;YAC3B,IAAI,CAAC,WAAW;iBACd,GAAG,CAAC,eAAe,CAAC;iBACpB,SAAS,CAAC,CAAC,QAAa,EAAE,EAAE;gBAC5B,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC;oBAC5B,cAAc,EAAE,QAAQ;iBACxB,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;SACJ;QAED,OAAO,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC;IACpD,CAAC;IAEM,mBAAmB,CAAC,UAAkB;QAC5C,OAAO,IAAI,CAAC,cAAc,EAAE,CAAC,IAAI,CAChC,+CAAS,CAAC,CAAC,EAAE,UAAU,EAAE,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC,EACvD,mDAAG,CAAC,CAAC,EAAE,UAAU,EAAE,EAAE,EAAE;YACtB,KAAK,MAAM,cAAc,IAAI,UAAU,EAAE;gBACxC,IAAI,cAAc,CAAC,GAAG,KAAK,UAAU,EAAE;oBACtC,OAAO,cAAc,CAAC,IAAI;iBAC1B;gBACD,KAAK,MAAM,aAAa,IAAI,cAAc,CAAC,QAAQ,EAAE;oBACpD,IAAI,aAAa,CAAC,GAAG,KAAK,UAAU,EAAE;wBACrC,OAAO,aAAa,CAAC,IAAI,CAAC;qBAC1B;iBACD;aACD;QACF,CAAC,CAAC,CACF,CAAC;IACH,CAAC;;kFAtGW,iBAAiB;kHAAjB,iBAAiB,WAAjB,iBAAiB,mBAFjB,MAAM;;;;;;;;;;;;;;;;;;;;;;;ACT8B;AACE;;;;;AAKnD,SAAS,eAAe,CAAC,KAAU;IAClC,OAAO,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;AACxE,CAAC;AAED,kBAAkB;AAIX,MAAM,aAAa;IASzB,YACkB,WAAuB,EACvB,YAAyB,EACzB,YAAyB;QAFzB,gBAAW,GAAX,WAAW,CAAY;QACvB,iBAAY,GAAZ,YAAY,CAAa;QACzB,iBAAY,GAAZ,YAAY,CAAa;QATnC,iBAAY,GAA2B,IAAI,iDAAe,CAAQ,EAAE,CAAC,CAAC;QACtE,sBAAiB,GAA2B,IAAI,iDAAe,CAAQ,EAAE,CAAC,CAAC;QAE3E,iBAAY,GAA4B,IAAI,iDAAe,CAAS,CAAC,CAAC,CAAC;QACvE,sBAAiB,GAA4B,IAAI,iDAAe,CAAS,CAAC,CAAC,CAAC;QAOnF,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC5B,CAAC;IAED,IAAI,OAAO;QACV,OAAO,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;IACzC,CAAC;IACD,IAAI,YAAY;QACf,OAAO,IAAI,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC;IAC9C,CAAC;IAED,IAAI,aAAa;QAChB,OAAO,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;IACzC,CAAC;IAED,IAAI,kBAAkB;QACrB,OAAO,IAAI,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC;IAC9C,CAAC;IAEM,eAAe;QACrB,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;IACjD,CAAC;IAEM,oBAAoB,CAAC,KAAU;QACrC,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,sBAAsB,KAAK,EAAE,CAAC,CAAC;IAC5D,CAAC;IAEM,iBAAiB;QACvB,OAAO,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC;IAChD,CAAC;IAEM,WAAW;QACjB,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;QAElD,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;YACrB,IAAI,CAAC,WAAW;iBACd,GAAG,CAAC,UAAU,CAAC;gBAChB,8BAA8B;iBAC7B,SAAS,CAAC,CAAC,QAAQ,EAAE,EAAE;gBACvB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;oBACxB,QAAQ,EAAE,QAAQ;iBAClB,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC;SACJ;QAED,OAAO,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC;IAC1C,CAAC;IAEM,UAAU,CAAC,EAAU;QAC3B,IAAI,CAAC,WAAW;aACd,IAAI,CAAC,SAAS,EAAE,gBAAgB,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;aACrD,IAAI;QACJ,wBAAwB;QACxB,kCAAkC;QAClC,wCAAwC;QACxC,kDAAkD;QAClD,2CAA2C;QAC3C,KAAK;SACL;aACA,SAAS,EAAE,CAAC;IACf,CAAC;IAEM,SAAS,CAAC,EAAU;QAC1B,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;IACtD,CAAC;IAEM,WAAW,CAAC,EAAU;QAC5B,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,EAAE,EAAE,CAAC,CAAC;IACxD,CAAC;IAEM,cAAc,CAAC,EAAU;QAC/B,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,EAAE,CAAC,CAAC;IAC3D,CAAC;IAEM,gBAAgB,CAAC,EAAU;QACjC,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,cAAc,EAAE,EAAE,CAAC,CAAC;IAC7D,CAAC;IAEM,cAAc,CAAC,EAAU;QAC/B,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;IACtD,CAAC;IACM,SAAS,CAAC,EAAU;QAC1B,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,2BAA2B,EAAE,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IACtF,CAAC;IACM,eAAe,CAAC,EAAU,EAAE,IAAS;QAC3C,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;QAC3D,8BAA8B;QAC9B,qBAAqB;QACrB,8BAA8B;QAC9B,6FAA6F;QAC7F,OAAO;QACP,MAAM;IACP,CAAC;IAEM,YAAY,CAAC,EAAU;QAC7B,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,IAAI,CAC/C,mDAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;YAChB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;gBACxB,KAAK,EAAE,QAAQ;aACf,CAAC,CAAC;QACJ,CAAC,CAAC,CACF,CAAC;IACH,CAAC;IAEM,WAAW;QACjB,IAAI,CAAC,WAAW;aACd,GAAG,CAAC,mBAAmB,CAAC;aACxB,SAAS,CAAC,CAAC,QAAa,EAAE,EAAE;YAC5B,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;gBACxB,QAAQ,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAY,EAAE,EAAE,CAAC,CAAC;oBACzC,GAAG,OAAO;oBACV,YAAY,EAAE,eAAe,CAAC,OAAO,CAAC;iBACtC,CAAC,CAAC;aACH,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEJ,OAAO,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC;IAC1C,CAAC;IAEM,SAAS,CAAC,cAAsB,EAAE;QACxC,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,SAAS,GAAG,WAAW,CAAC,CAAC,IAAI;QACxD,wBAAwB;QACxB,mDAAG,CAAC,CAAC,QAAa,EAAE,EAAE;YACrB,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,QAAQ,CAAC;YAExC,MAAM,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,KAAU,EAAE,EAAE;gBAC3C,OAAO;oBACN,GAAG,KAAK;oBACR,YAAY,EAAE,eAAe,CAAC,KAAK,CAAC;iBACpC,CAAC;YACH,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;gBACxB,SAAS;gBACT,cAAc,EAAE,UAAU;aAC1B,CAAC,CAAC;YAEH,OAAO,CAAC,GAAG,SAAS,CAAC,CAAC;QACvB,CAAC,CAAC,CACF,CAAC;IACH,CAAC;IAEM,eAAe;QACrB,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC,IAAI;QACvD,wBAAwB;QACxB,mDAAG,CAAC,CAAC,QAAa,EAAE,EAAE;YACrB,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,QAAQ,CAAC;YAExC,MAAM,SAAS,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,KAAU,EAAE,EAAE;gBAC3C,OAAO;oBACN,GAAG,KAAK;oBACR,YAAY,EAAE,eAAe,CAAC,KAAK,CAAC;iBACpC,CAAC;YACH,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;gBACxB,SAAS;gBACT,cAAc,EAAE,UAAU;aAC1B,CAAC,CAAC;YAEH,OAAO,CAAC,GAAG,SAAS,CAAC,CAAC;QACvB,CAAC,CAAC,CACF,CAAC;IACH,CAAC;IAEM,cAAc;QACpB,MAAM,GAAG,GAAG,sBAAsB,CAAC;QACnC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,WAAkB,EAAE,EAAE;YACjE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;gBACxB,WAAW,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;oBAC7C,GAAG,UAAU;oBACb,YAAY,EAAE,eAAe,CAAC,UAAU,CAAC;iBACzC,CAAC,CAAC;aACH,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QACH,OAAO,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC;IAC7C,CAAC;IAEM,WAAW,CAAC,aAAkB;QACpC,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,EAAE,aAAa,CAAC,CAAC;IAC7D,CAAC;IAEM,WAAW,CAAC,aAAkB,EAAE,EAAO;QAC7C,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,aAAa,CAAC,CAAC;IAClE,CAAC;IAEM,gBAAgB,CAAC,EAAU;QACjC,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,mBAAmB,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,IAAI,CACjE,mDAAG,CAAC,GAAG,EAAE;YACR,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;gBACxB,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,KAAU,EAAE,EAAE,CAAC,CAAC;oBACtE,GAAG,KAAK;oBACR,OAAO,EAAE,KAAK,CAAC,GAAG,KAAK,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO;iBAChD,CAAC,CAAC;aACH,CAAC,CAAC;QACJ,CAAC,CAAC,CACF,CAAC;IACH,CAAC;IAEM,mBAAmB,CAAC,EAAU;QACpC,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,mBAAmB,EAAE,SAAS,CAAC,CAAC,IAAI,CAClE,mDAAG,CAAC,GAAG,EAAE;YACR,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;YAEhE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;gBACxB,WAAW,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC,UAAe,EAAE,EAAE,CAAC,UAAU,CAAC,GAAG,KAAK,EAAE,CAAC;gBAC3E,SAAS,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC,KAAU,EAAE,EAAE,CAAC,CAAC;oBACzC,GAAG,KAAK;oBACR,OAAO,EAAE,KAAK,CAAC,GAAG,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO;iBACjD,CAAC,CAAC;aACH,CAAC,CAAC;QACJ,CAAC,CAAC,CACF,CAAC;IACH,CAAC;IAEM,YAAY,CAAC,EAAU;QAC7B,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,qBAAqB,EAAE,EAAE,CAAC,CAAC;IACpE,CAAC;IAEM,YAAY,CAAC,EAAU;QAC7B,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,sBAAsB,EAAE,EAAE,CAAC,CAAC;IACrE,CAAC;IACM,gBAAgB,CAAC,WAAmB;QAC1C,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC;aACzB,IAAI,CAAC,qDAAK,EAAE,CAAC;aACb,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YACnB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACrC,8CAA8C;QAC/C,CAAC,CAAC,CAAC;IACL,CAAC;;0EAhPW,aAAa;8GAAb,aAAa,WAAb,aAAa,mBAFb,MAAM;;;;;;;;;;;;;;;;;;ACZqB;;;AAKjC,MAAM,eAAgB,SAAQ,kDAAsB;IAG1D,YAA+B,KAAsB;QACpD,KAAK,CAAC,KAAK,CAAC,CAAC;QADiB,UAAK,GAAL,KAAK,CAAiB;QAGpD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QACnD,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;IAC5D,CAAC;;8EARW,eAAe;gHAAf,eAAe,WAAf,eAAe,mBADF,MAAM;;;;;;;;;;;;;;;;;;;;ACJqB;;AAO9C,SAAS,kBAAkB;IACjC,OAAO;QACN,UAAU,EAAE;YACX,UAAU,EAAE,EAAE;YACd,UAAU,EAAE,CAAC;SACb;QACD,cAAc,EAAE,EAAE;KAClB,CAAC;AACH,CAAC;IAIY,eAAe,SAAf,eAAgB,SAAQ,kDAAsB;IAC1D;QACC,KAAK,CAAC,kBAAkB,EAAE,CAAC,CAAC;IAC7B,CAAC;CACD;8EAJY,eAAe;gHAAf,eAAe,WAAf,eAAe,mBAFF,MAAM;AAEnB,eAAe;IAD3B,4DAAW,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;GACvB,eAAe,CAI3B;AAJ2B;;;;;;;;;;;;;;;;;;ACnBY;;;AAKjC,MAAM,WAAY,SAAQ,kDAAkB;IAQlD,YAA+B,KAAkB;QAChD,KAAK,CAAC,KAAK,CAAC,CAAC;QADiB,UAAK,GAAL,KAAK,CAAa;QAGhD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;QACjD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QAC/C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACzC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QACrD,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;QAC3D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;IAChD,CAAC;;sEAjBW,WAAW;4GAAX,WAAW,WAAX,WAAW,mBADE,MAAM;;;;;;;;;;;;;;;;;;;;ACJqB;;AAW9C,SAAS,kBAAkB;IACjC,OAAO;QACN,SAAS,EAAE,EAAE;QACb,QAAQ,EAAE,EAAE;QACZ,KAAK,EAAE,IAAI;QACX,WAAW,EAAE,EAAE;QACf,cAAc,EAAE,CAAC;QACjB,QAAQ,EAAE,EAAE;KACZ,CAAC;AACH,CAAC;IAIY,WAAW,SAAX,WAAY,SAAQ,kDAAkB;IAClD;QACC,KAAK,CAAC,kBAAkB,EAAE,CAAC,CAAC;IAC7B,CAAC;CACD;sEAJY,WAAW;4GAAX,WAAW,WAAX,WAAW,mBAFE,MAAM;AAEnB,WAAW;IADvB,4DAAW,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;GACnB,WAAW,CAIvB;AAJuB","sources":["./src/app/client/pages/client-chat/client-chat-routing.module.ts","./src/app/client/pages/client-chat/client-chat.module.ts","./src/app/client/pages/client-chat/layout/client-chat.component.ts","./src/app/client/pages/client-chat/layout/client-chat.component.html","./src/app/client/services/categories/categories.service.ts","./src/app/client/services/offers/offers.service.ts","./src/app/client/state/categories/categories.query.ts","./src/app/client/state/categories/categories.store.ts","./src/app/client/state/offers/offers.query.ts","./src/app/client/state/offers/offers.store.ts"],"sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { ClientChatComponent } from \"./layout/client-chat.component\";\n\nconst routes: Routes = [\n\t{\n\t\tpath: \"\",\n\t\tcomponent: ClientChatComponent,\n\t},\n];\n\n@NgModule({\n\timports: [RouterModule.forChild(routes)],\n\texports: [RouterModule],\n})\nexport class ClientChatRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\n\nimport { B2bNgxTextareaModule } from \"@b2b/ngx-textarea\";\nimport { B2bNgxButtonModule } from \"@b2b/ngx-button\";\nimport { B2bNgxImageModule } from \"@b2b/ngx-image\";\nimport { B2bNgxIconModule } from \"@b2b/ngx-icon\";\nimport { ReactiveFormsModule } from \"@angular/forms\";\nimport { ClientChatComponent } from \"./layout/client-chat.component\";\nimport { ClientChatRoutingModule } from \"./client-chat-routing.module\";\nimport {TranslateModule} from \"@ngx-translate/core\";\n\n@NgModule({\n\tdeclarations: [ClientChatComponent],\n\timports: [\n\t\tCommonModule,\n\t\tClientChatRoutingModule,\n\t\tReactiveFormsModule,\n\t\tB2bNgxTextareaModule,\n\t\tB2bNgxButtonModule,\n\t\tB2bNgxImageModule,\n\t\tB2bNgxIconModule,\n\t\tTranslateModule,\n\t],\n})\nexport class ClientChatModule {}\n","import {\n\tChangeDetectionStrategy,\n\tChangeDetectorRef,\n\tComponent,\n\tElementRef,\n\tOnDestroy,\n\tOnInit,\n\tViewChild,\n} from \"@angular/core\";\nimport { B2bNgxButtonThemeEnum} from \"@b2b/ngx-button\";\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport { UntilDestroy, untilDestroyed } from \"@ngneat/until-destroy\";\nimport { ChatService} from \"../../../services/chat/chat.service\";\nimport { BehaviorSubject, combineLatest, Observable } from \"rxjs\";\nimport {filter, map, switchMap, take, tap} from \"rxjs/operators\";\nimport { UserService} from \"../../client-profile/services/user/user.service\";\nimport { OffersService} from \"../../../services/offers/offers.service\";\nimport { FormBuilder, FormGroup } from \"@angular/forms\";\nimport { io } from \"socket.io-client\";\nimport { AuthService } from \"../../../../auth/services/auth/auth.service\";\nimport { environment } from \"../../../../../environments/environment\";\nimport { SocketService } from \"../../../services/socket/socket.service\";\nimport { ChatsService } from \"../../../services/chats/chats.service\";\nimport { HotToastService } from \"@ngneat/hot-toast\";\nimport { B2bNgxLinkService } from \"@b2b/ngx-link\";\nimport {MixpanelService} from \"../../../../core/services/mixpanel/mixpanel.service\";\nimport mixpanel from \"mixpanel-browser\";\nimport {CategoriesService} from \"../../../services/categories/categories.service\";\nimport {getName} from \"country-list\";\nimport {TranslateService} from \"@ngx-translate/core\";\n\n@UntilDestroy()\n@Component({\n\tselector: \"b2b-client-chat\",\n\ttemplateUrl: \"./client-chat.component.html\",\n\tstyleUrls: [\"./client-chat.component.scss\"],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ClientChatComponent implements OnInit, OnDestroy {\n\t@ViewChild(\"chatContainer\") chatContainer: ElementRef;\n\n\tpublic readonly formGroup: FormGroup;\n\tpublic readonly b2bNgxButtonThemeEnum: typeof B2bNgxButtonThemeEnum;\n\n\tpublic readonly messages$: Observable<any>;\n\tpublic readonly chatInfo$: Observable<any>;\n\n\tprivate readonly _messagesHistoryBehaviourSubject: BehaviorSubject<any>;\n\tprivate readonly _messagesHistory$: Observable<any>;\n\n\tprivate readonly _messageBehaviourSubject: BehaviorSubject<any>;\n\tprivate readonly _message$: Observable<any>;\n\n\tprivate readonly _chatInfoBehaviourSubject: BehaviorSubject<any>;\n\tprivate readonly _chatInfo$: Observable<any>;\n\n\tpublic chat: any;\n\tpublic displayRequestContacts: boolean;\n\tpublic displayOpenContacts: boolean;\n\tpublic displayCloseContacts: boolean;\n\tpublic displayContactsRequested: boolean;\n\tpublic displayContactsOpened: boolean;\n\n\tprivate _socket: any;\n\n\tconstructor(\n\t\tprivate readonly _activatedRoute: ActivatedRoute,\n\t\tprivate readonly _router: Router,\n\t\tprivate readonly _chatService: ChatService,\n\t\tprivate readonly _chatsService: ChatsService,\n\t\tprivate readonly _usersService: UserService,\n\t\tprivate readonly _offersService: OffersService,\n\t\tprivate readonly _formBuilder: FormBuilder,\n\t\tprivate readonly _authService: AuthService,\n\t\tprivate readonly _socketService: SocketService,\n\t\tprivate readonly _hotToastService: HotToastService,\n\t\tpublic changeDetectorRef: ChangeDetectorRef,\n\t\tpublic readonly b2bNgxLinkService: B2bNgxLinkService,\n\t\tprivate readonly translateService: TranslateService,\n    private readonly mixpanelService: MixpanelService,\n    private readonly categoriesService: CategoriesService\n\t) {\n\t\tthis.b2bNgxButtonThemeEnum = B2bNgxButtonThemeEnum;\n\t\tthis.formGroup = this._formBuilder.group({\n\t\t\tmessage: \"\",\n\t\t});\n\n\t\tthis._messagesHistoryBehaviourSubject = new BehaviorSubject<any>([]);\n\t\tthis._messagesHistory$ = this._messagesHistoryBehaviourSubject.asObservable();\n\n\t\tthis._messageBehaviourSubject = new BehaviorSubject<any>([]);\n\t\tthis._message$ = this._messageBehaviourSubject.asObservable();\n\n\t\tthis._chatInfoBehaviourSubject = new BehaviorSubject<any>(null);\n\t\tthis._chatInfo$ = this._chatInfoBehaviourSubject.asObservable();\n\n\t\tthis.chatInfo$ = this.getChatInfo();\n\t\tthis.messages$ = this.getMessages();\n\t}\n\n\tpublic getChatInfo() {\n\t\treturn this._authService.getUser().pipe(\n\t\t\tfilter((user) => !!user),\n\t\t\tswitchMap((user) => {\n\t\t\t\treturn this._chatInfo$.pipe(\n\t\t\t\t\tfilter((chatInfo) => !!chatInfo),\n\t\t\t\t\tmap((chatInfo) => {\n\t\t\t\t\t\tconst dispayInfoOf =\n\t\t\t\t\t\t\tchatInfo.buyer?._id === user?._id\n\t\t\t\t\t\t\t\t? this.translateService.instant(\"CHAT.SELLER\")\n\t\t\t\t\t\t\t\t: this.translateService.instant(\"CHAT.BUYER\");\n\t\t\t\t\t\tconst displayInfo =\n\t\t\t\t\t\t\tdispayInfoOf === this.translateService.instant(\"CHAT.SELLER\")\n\t\t\t\t\t\t\t\t? chatInfo.offer?.contact\n\t\t\t\t\t\t\t\t: chatInfo.buyer;\n\t\t\t\t\t\tconst author =\n\t\t\t\t\t\t\tdisplayInfo?.fullName ||\n\t\t\t\t\t\t\tdisplayInfo?.personName ||\n\t\t\t\t\t\t\t`${this.translateService.instant(\"CHAT.SELLER\")} of ${chatInfo.offer?.title}`;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...chatInfo,\n\t\t\t\t\t\t\tdisplayInfo: {\n\t\t\t\t\t\t\t\t...displayInfo,\n\t\t\t\t\t\t\t\trole: dispayInfoOf,\n\t\t\t\t\t\t\t\tauthor,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic getMessages() {\n\t\tconst user$ = this._authService.getUser();\n\t\tconst chat$ = this._activatedRoute.paramMap.pipe(\n\t\t\tmap((paramMap) => paramMap.get(\"id\")),\n\t\t\tswitchMap((id) => this._chatService.getChatById(id))\n\t\t);\n\n\t\treturn combineLatest([user$, chat$]).pipe(\n\t\t\tfilter(([user, chat]) => !!user && !!chat),\n\t\t\tswitchMap(([user, chat]) =>\n\t\t\t\tthis._messagesHistory$.pipe(\n\t\t\t\t\ttap(() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.chatContainer.nativeElement.scrollTop = this.chatContainer.nativeElement?.scrollHeight;\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}),\n\t\t\t\t\tmap((messages) =>\n\t\t\t\t\t\tmessages.map((message: any) => {\n\t\t\t\t\t\t\tconst dispayInfoOf =\n\t\t\t\t\t\t\t\tchat.seller?._id === message?.author\n\t\t\t\t\t\t\t\t\t? this.translateService.instant(\"CHAT.SELLER\")\n\t\t\t\t\t\t\t\t\t: this.translateService.instant(\"CHAT.BUYER\");\n\t\t\t\t\t\t\tconst displayInfo =\n\t\t\t\t\t\t\t\tdispayInfoOf === this.translateService.instant(\"CHAT.SELLER\") ? chat.offer?.contact : chat.buyer;\n\t\t\t\t\t\t\tconst author =\n\t\t\t\t\t\t\t\tdisplayInfo?.fullName ||\n\t\t\t\t\t\t\t\tdisplayInfo?.personName ||\n\t\t\t\t\t\t\t\t`${this.translateService.instant(\"CHAT.SELLER\")} of ${chat.offer?.title}`;\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...message,\n\t\t\t\t\t\t\t\tcontact: {\n\t\t\t\t\t\t\t\t\t...displayInfo,\n\t\t\t\t\t\t\t\t\tauthor,\n\t\t\t\t\t\t\t\t\trole: displayInfo,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n\n\tpublic enterPressed(event: Event) {\n\t\tthis.sendMessage(this.formGroup.get(\"message\").value);\n\t\tevent.preventDefault();\n\t}\n\n\tpublic async sendMessage(body: string) {\n\t\tif (!body) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.chatInfo$.pipe(untilDestroyed(this)).subscribe((chatInfo) => {\n\t\t\tconst user = this._usersService.getUser();\n\t\t\tthis._socket.emit(\"message\", {\n\t\t\t\ttype: \"text\",\n\t\t\t\tbody,\n\t\t\t\tuserId: user._id === chatInfo.buyer?._id ? chatInfo.seller._id : chatInfo.buyer?._id,\n\t\t\t\tofferId: chatInfo.offer._id,\n\t\t\t});\n\t\t});\n\n\t\tthis.formGroup.get(\"message\").reset();\n\t}\n\n\tpublic subscribeOnMessage() {\n\t\treturn this._socket.on(\"message\", (message: any) => {\n\t\t\tconst history = this._messagesHistoryBehaviourSubject.getValue();\n\t\t\tthis._messagesHistoryBehaviourSubject.next([...history, message]);\n\t\t});\n\t}\n\n\tpublic subscribeOnChatInfo() {\n\t\treturn this._socket.on(\"chat_info\", (chatInfo: any) => {\n\t\t\tthis._socketService.readMessages(chatInfo.unreadMessagesCount);\n\t\t\tthis._chatInfoBehaviourSubject.next(chatInfo);\n\t\t});\n\t}\n\n\tpublic subscribeOnMessageHistory() {\n\t\treturn this._socket.on(\"message_history\", (message_history: any) => {\n\t\t\tthis._messagesHistoryBehaviourSubject.next(message_history);\n\t\t});\n\t}\n\n\topenConnection(token: string) {\n\t\tif (this._socket) {\n\t\t\tthis._socket.disconnect();\n\t\t}\n\n\t\tthis._socket = io(environment.apiUrl, {\n\t\t\tpath: \"/chat\",\n\t\t\tauth: {\n\t\t\t\ttoken,\n\t\t\t},\n\t\t});\n\t}\n\n\tngOnInit() {\n\t\tconst id = this._activatedRoute.snapshot.params['id'];\n\t\t// this._router.navigate(['/profile/your-workspace/b2bmarket/chat', id]);\n\n\t\tconst token$ = this._usersService.getToken$();\n\t\tconst user$ = this._usersService.getUser$();\n\t\tconst chat$ = this._activatedRoute.paramMap.pipe(\n\t\t\tmap((paramMap) => paramMap.get(\"id\")),\n\t\t\tswitchMap((id) => this._chatService.getChatById(id))\n\t\t);\n\n\t\tcombineLatest([chat$, token$, user$])\n\t\t\t.pipe(untilDestroyed(this))\n\t\t\t.subscribe(([chat, token, user]: any) => {\n\t\t\t\tconst buyer = Array.isArray(chat.buyer) ? chat.buyer[0] : chat.buyer;\n\t\t\t\tconst seller = Array.isArray(chat.seller) ? chat.seller[0] : chat.seller;\n\n\t\t\t\t// if (!buyer || !seller) {\n\t\t\t\t// }\n\n\t\t\t\tthis.openConnection(token);\n\n\t\t\t\tthis.subscribeOnMessageHistory();\n\t\t\t\tthis.subscribeOnChatInfo();\n\t\t\t\tthis.subscribeOnMessage();\n\n\t\t\t\tconst role = user._id === buyer?._id ? \"buyer\" : \"seller\";\n\t\t\t\tconst contactTo = role === \"seller\" ? buyer : seller;\n\n\t\t\t\tthis.displayContactsOpened = chat.offer?.openedFor.includes(buyer._id);\n\n\t\t\t\tthis.displayContactsRequested = chat.contactsRequested && !this.displayContactsOpened;\n\t\t\t\tthis.displayRequestContacts =\n\t\t\t\t\trole === \"buyer\" &&\n\t\t\t\t\t!this.displayContactsOpened &&\n\t\t\t\t\t!this.displayContactsRequested &&\n\t\t\t\t\t(!chat.offer?.visibility.email || !chat.offer?.visibility.phone);\n\t\t\t\t// Object.values(chat.offer.visibility).some((visibility) => !visibility);\n\t\t\t\tthis.displayOpenContacts = role === \"seller\" && !this.displayContactsOpened && chat.contactsRequested;\n\t\t\t\tthis.displayCloseContacts = role === \"seller\" && !this.displayContactsOpened && chat.contactsRequested;\n\n\t\t\t\tthis.chat = chat;\n\n\t\t\t\tthis._socket.emit(\"start_chat\", {\n\t\t\t\t\tuserId: contactTo?._id,\n\t\t\t\t\tofferId: chat.offer?._id,\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\n\trequestContacts() {\n\t\tthis._chatsService\n\t\t\t.requestContacts(this.chat)\n\t\t\t.pipe(\n\t\t\t\tuntilDestroyed(this),\n\t\t\t\tthis._hotToastService.observe({\n\t\t\t\t\tloading: \"Contacts requesting...\",\n\t\t\t\t\tsuccess: \"Contacts requested successfully!\",\n\t\t\t\t\terror: \"Contacts requesting failed!\",\n\t\t\t\t})\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.displayContactsRequested = false;\n\t\t\t\tthis.displayRequestContacts = false;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\topenContacts() {\n\t\tthis._chatsService.sendContacts(this.chat.offer, this.chat.buyer._id);\n\t\t// this._hotToastService.success(\"Contacts sent successfully!\");\n\n\t\tthis._chatsService\n\t\t\t.openContacts(this.chat.offer, this.chat.buyer._id)\n\t\t\t.pipe(\n\t\t\t\tuntilDestroyed(this),\n\t\t\t\tthis._hotToastService.observe({\n\t\t\t\t\tloading: \"Contacts opening...\",\n\t\t\t\t\tsuccess: \"Contacts opened successfully!\",\n\t\t\t\t\terror: \"Contacts opening failed!\",\n\t\t\t\t})\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.displayOpenContacts = false;\n\t\t\t\tthis.displayCloseContacts = true;\n\t\t\t\tthis.displayContactsOpened = true;\n\t\t\t\tthis.displayContactsRequested = false;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\tcloseContacts() {\n\t\tthis._chatsService\n\t\t\t.closeContacts(this.chat.offer._id, this.chat.buyer._id)\n\t\t\t.pipe(\n\t\t\t\tuntilDestroyed(this),\n\t\t\t\tthis._hotToastService.observe({\n\t\t\t\t\tloading: \"Contacts closing...\",\n\t\t\t\t\tsuccess: \"Contacts closed successfully!\",\n\t\t\t\t\terror: \"Contacts closing failed!\",\n\t\t\t\t})\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.displayOpenContacts = false;\n\t\t\t\tthis.displayCloseContacts = false;\n\t\t\t\tthis.displayContactsOpened = false;\n\t\t\t\tthis.displayContactsRequested = false;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tif (this._socket) {\n\t\t\tthis._socket.disconnect();\n\t\t}\n\t}\n}\n","<div class=\"client-profile-chat-wrapper\">\n\n\t<div class=\"client-profile-chat\" *ngIf=\"chatInfo$ | async as chatInfo\">\n\t\t<form\n\t\t\t(keydown.enter)=\"enterPressed($event)\"\n\t\t\t[formGroup]=\"formGroup\"\n\t\t\t(ngSubmit)=\"sendMessage(formGroup.get('message').value)\"\n\t\t\tclass=\"client-profile-chat-container\">\n\t\t\t<p class=\"client-profile-chat-breadcrumbs\">\n\t\t\t\t<a [routerLink]=\"b2bNgxLinkService.getLink('/profile') | async\">{{ (\"PAGES.PROFILE\" | translate) + \" \" }}</a>\n\t\t\t\t<a [routerLink]=\"b2bNgxLinkService.getLink('/profile/my-offers') | async\">{{ \"PAGES.MY_CHATS\" | translate }} </a>\n\t\t\t\t<a [routerLink]=\"b2bNgxLinkService.getLink('/profile/my-offers' + chatInfo.offer._id) | async\"\n\t\t\t\t\t>{{ chatInfo.offer.title }}\n\t\t\t\t</a>\n\t\t\t</p>\n\n\t\t\t<p class=\"client-profile-chat-title\">{{ chatInfo.offer.title }}</p>\n\t\t\t<p class=\"client-profile-chat-started\">{{ \"CHAT.CHAT_STARTED\" | translate }}: {{ chatInfo.createdAt | date }}</p>\n\n\t\t\t<div class=\"client-profile-chat-messages\">\n\t\t\t\t<ul class=\"client-profile-chat-messages-list\" #chatContainer>\n\t\t\t\t\t<li *ngFor=\"let message of messages$ | async\" class=\"client-profile-chat-messages-list-item\">\n\t\t\t\t\t\t<p class=\"client-profile-chat-messages-list-item-info\">\n\t\t\t\t\t\t\t<span class=\"client-profile-chat-messages-list-item-from\">{{ message.contact.author }}</span>\n\t\t\t\t\t\t\t<span class=\"client-profile-chat-messages-list-item-date\">{{ message.createdAt | date }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class=\"client-profile-chat-messages-list-item-message\">\n\t\t\t\t\t\t\t{{ message.body }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li *ngIf=\"!(messages$ | async)?.length\" class=\"client-profile-chat-no-messages\">\n\t\t\t\t\t\t{{ \"CHAT.NO_MESSAGES\" | translate }}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<textarea\n\t\t\t\tformControlName=\"message\"\n\t\t\t\t[placeholder]=\"'PLACEHOLDERS.ENTER_TO_SEND' | translate\"\n\t\t\t\tclass=\"client-profile-chat-textarea\"\n\t\t\t\trows=\"5\"></textarea>\n\n\t\t\t<div class=\"client-profile-chat-actions\">\n\t\t\t\t<button\n\t\t\t\t\tb2bNgxButton\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t[theme]=\"b2bNgxButtonThemeEnum.BACKGROUND_BLACK\"\n\t\t\t\t\tclass=\"client-profile-chat-actions-send-button\">\n\t\t\t\t\t<span>{{ \"BUTTONS.SEND\" | translate }}</span>\n\t\t\t\t\t<img b2bNgxIcon name=\"chat\" class=\"client-profile-chat-actions-send-button-icon\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\n\t\t<div routerLink=\"/profile/your-workspace/unclaimed-cargo\" class=\"client-profile-chat-buyer-info\">\n\t\t\t<div class=\"go-back\">\n\t\t\t\t<img b2bNgxIcon name=\"arrow-l\" alt=\"icon\">\n\t\t\t\t<div class=\"label\">Go back</div>\n\t\t\t</div>\n\n\n\t\t\t<div class=\"client-profile-chat-buyer-info-container\" *ngIf=\"chatInfo.displayInfo; else userDeleted\">\n\t\t\t\t<p class=\"client-profile-chat-buyer-info-text\">\n\t\t\t\t\t{{ chatInfo.displayInfo.role }}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"client-profile-chat-buyer-info-title\">\n\t\t\t\t\t<span>{{ chatInfo.displayInfo.author }} </span>\n\t\t\t\t</p>\n\t\t\t\t<p class=\"client-profile-chat-buyer-info-from\" *ngIf=\"chatInfo.displayInfo.country\">\n\t\t\t\t\t{{ \"LABELS.FROM\" | translate }} {{ chatInfo.displayInfo.country }}\n\t\t\t\t</p>\n\n\t\t\t\t<p class=\"client-profile-chat-buyer-email-title\" *ngIf=\"chatInfo.displayInfo.email\">\n\t\t\t\t\t{{ \"LABELS.EMAIL\" | translate }}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"client-profile-chat-buyer-email\">\n\t\t\t\t\t{{ chatInfo.displayInfo.email }}\n\t\t\t\t</p>\n\n\t\t\t\t<p class=\"client-profile-chat-buyer-phone-title\" *ngIf=\"chatInfo.displayInfo.phone?.e164Number\">\n\t\t\t\t\t{{ \"LABELS.PHONE\" | translate }}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"client-profile-chat-buyer-phone\">\n\t\t\t\t\t{{ chatInfo.displayInfo.phone?.e164Number }}\n\t\t\t\t</p>\n\n\t\t\t\t<p class=\"client-profile-chat-buyer-web-title\" *ngIf=\"chatInfo.displayInfo.site\">\n\t\t\t\t\t{{ \"LABELS.WEB\" | translate }}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"client-profile-chat-buyer-web\">\n\t\t\t\t\t{{ chatInfo.displayInfo.site }}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class=\"client-profile-chat-buyer-info-media\">\n\t\t\t\t<button class=\"my-btn requested\" *ngIf=\"displayContactsOpened\">\n\t\t\t\t\t{{ \"CHAT.CONTACTS_OPENED\" | translate }}\n\t\t\t\t</button>\n\t\t\t\t<button class=\"my-btn\" *ngIf=\"displayRequestContacts\" (click)=\"requestContacts()\">\n\t\t\t\t\t{{ \"CHAT.REQUEST_CONTACTS\" | translate }}\n\t\t\t\t</button>\n\t\t\t\t<button class=\"my-btn\" *ngIf=\"displayOpenContacts\" (click)=\"openContacts()\">\n\t\t\t\t\t{{ \"CHAT.OPEN_CONTACTS\" | translate }}\n\t\t\t\t</button>\n\t\t\t\t<button class=\"my-btn\" *ngIf=\"displayCloseContacts\" (click)=\"closeContacts()\">\n\t\t\t\t\t{{ \"CHAT.CLOSE_CONTACTS\" | translate }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<ng-template #userDeleted>\n\t<p class=\"user-deleted\">\n\t\t{{ \"CHAT.USER_DELETED\" | translate }}\n\t</p>\n</ng-template>\n","import { Injectable } from \"@angular/core\";\n\nimport { Observable, takeWhile } from \"rxjs\";\nimport {first, map} from \"rxjs/operators\";\n\nimport {ApiService} from \"../../../core/services/api/api.service\";\nimport {CategoriesQuery} from \"../../state/categories/categories.query\";\nimport {CategoriesStore} from \"../../state/categories/categories.store\";\n\n@Injectable({\n\tprovidedIn: \"root\",\n})\nexport class CategoriesService {\n\tpublic readonly endpoint: string;\n\n\tconstructor(\n\t\tprivate readonly _apiService: ApiService,\n\t\tprivate readonly _categoriesStore: CategoriesStore,\n\t\tprivate readonly _categoriesQuery: CategoriesQuery\n\t) {\n\t\tthis.endpoint = \"categories/\";\n\t\tthis.getCategories$();\n\t}\n\n\tpublic getCategories$(): Observable<any> {\n\t\tconst { categories } = this._categoriesQuery.getValue();\n\t\tif (!categories?.categories?.length || !categories?.totalCount) {\n\t\t\tthis._apiService\n\t\t\t\t.get(this.endpoint)\n\t\t\t\t.subscribe((categories: any) => {\n\t\t\t\t\tthis._categoriesStore.update({\n\t\t\t\t\t\tcategories\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\treturn this._categoriesQuery.selectCategories$;\n\t}\n\n\tpublic getCategories(): any {\n\t\tconst {categories} = this._categoriesQuery.getValue();\n\t\tif (!categories) {\n\t\t\treturn [];\n\t\t}\n\t\treturn this._categoriesQuery.getValue();\n\t}\n\n\tpublic updateCategory(id: any, name: any, hide: any) {\n\t\treturn this._apiService.put(`category/${id}/update`, {\n\t\t\t...(name ? { name } : {}),\n\t\t\thide,\n\t\t});\n\t}\n\n\tpublic createCategory(level1Category: any, level2Category: any, level3Category: any) {\n\t\treturn this._apiService.post(`category/create`, {\n\t\t\tcategory: {\n\t\t\t\t...level1Category,\n\t\t\t\tcategory: {\n\t\t\t\t\t...level2Category,\n\t\t\t\t\tcategory: level3Category,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic updateWikiCategory(id: any, name: any, hide: any) {\n\t\treturn this._apiService.put(`categoryPost/${id}/update`, {\n\t\t\t...(name ? { name } : {}),\n\t\t\thide: !hide,\n\t\t});\n\t}\n\n\tpublic createWikiCategory(level1Category: any, level2Category: any) {\n\t\treturn this._apiService.post(`categoryPost/create`, {\n\t\t\tcategory: {\n\t\t\t\t...level1Category,\n\t\t\t\tcategory: level2Category,\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic getWikiCategories() {\n\t\tconst { wikiCategories } = this._categoriesQuery.getValue();\n\n\t\tif (!wikiCategories.length) {\n\t\t\tthis._apiService\n\t\t\t\t.get(\"categoryPosts\")\n\t\t\t\t.subscribe((response: any) => {\n\t\t\t\t\tthis._categoriesStore.update({\n\t\t\t\t\t\twikiCategories: response,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\treturn this._categoriesQuery.selectWikiCategories$;\n\t}\n\n\tpublic getCategoryNameById(categoryId: string): Observable<string> {\n\t\treturn this.getCategories$().pipe(\n\t\t\ttakeWhile(({ categories }) => !categories.length, true),\n\t\t\tmap(({ categories }) => {\n\t\t\t\tfor (const parentCategory of categories) {\n\t\t\t\t\tif (parentCategory._id === categoryId) {\n\t\t\t\t\t\treturn parentCategory.name\n\t\t\t\t\t}\n\t\t\t\t\tfor (const childCategory of parentCategory.children) {\n\t\t\t\t\t\tif (childCategory._id === categoryId) {\n\t\t\t\t\t\t\treturn childCategory.name;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n}\n","import { Injectable } from \"@angular/core\";\nimport { first, map, tap } from \"rxjs/operators\";\nimport { BehaviorSubject, Observable } from \"rxjs\";\nimport { ApiService } from \"../../../core/services/api/api.service\";\nimport { OffersQuery } from \"../../state/offers/offers.query\";\nimport { OffersStore } from \"../../state/offers/offers.store\";\n\nfunction getPreviewPhoto(offer: any) {\n\treturn offer.photos && offer.photos.length ? offer.photos[0].lg : null;\n}\n\n// @UntilDestroy()\n@Injectable({\n\tprovidedIn: \"root\",\n})\nexport class OffersService {\n\tpublic readonly _endpoint: string;\n\n\tprivate offersSource: BehaviorSubject<any[]> = new BehaviorSubject<any[]>([]);\n\tprivate savedOffersSource: BehaviorSubject<any[]> = new BehaviorSubject<any[]>([]);\n\n\tprivate offersLength: BehaviorSubject<number> = new BehaviorSubject<number>(0);\n\tprivate savedOffersLength: BehaviorSubject<number> = new BehaviorSubject<number>(0);\n\n\tconstructor(\n\t\tprivate readonly _apiService: ApiService,\n\t\tprivate readonly _offersQuery: OffersQuery,\n\t\tprivate readonly _offersStore: OffersStore,\n\t) {\n\t\tthis._endpoint = \"offers/\";\n\t}\n\n\tget offers$(): Observable<any> {\n\t\treturn this.offersSource.asObservable();\n\t}\n\tget savedOffers$(): Observable<any> {\n\t\treturn this.savedOffersSource.asObservable();\n\t}\n\n\tget offersLength$(): Observable<any> {\n\t\treturn this.offersLength.asObservable();\n\t}\n\n\tget savedOffersLength$(): Observable<any> {\n\t\treturn this.savedOffersLength.asObservable();\n\t}\n\n\tpublic removeAllOffers() {\n\t\treturn this._apiService.delete(\"offers/delete\");\n\t}\n\n\tpublic getContainerLocation(query: any) {\n\t\treturn this._apiService.get(`container/location?${query}`);\n\t}\n\n\tpublic getAllOffersCount() {\n\t\treturn this._offersQuery.selectAllOffersCount$;\n\t}\n\n\tpublic getSeaLines() {\n\t\tconst { seaLines } = this._offersQuery.getValue();\n\n\t\tif (!seaLines.length) {\n\t\t\tthis._apiService\n\t\t\t\t.get(\"seaLines\")\n\t\t\t\t// .pipe(untilDestroyed(this))\n\t\t\t\t.subscribe((response) => {\n\t\t\t\t\tthis._offersStore.update({\n\t\t\t\t\t\tseaLines: response,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\n\t\treturn this._offersQuery.selectSeaLines$;\n\t}\n\n\tpublic markAsSold(id: string) {\n\t\tthis._apiService\n\t\t\t.post(`offer/${id}/status/update`, { status: \"sold\" })\n\t\t\t.pipe(\n\t\t\t\t// untilDestroyed(this),\n\t\t\t\t// this._hotToastService.observe({\n\t\t\t\t// \tloading: \"Offer status updating...\",\n\t\t\t\t// \tsuccess: \"Offer status updated successfully!\",\n\t\t\t\t// \terror: \"Offer status updating failed!\",\n\t\t\t\t// })\n\t\t\t)\n\t\t\t.subscribe();\n\t}\n\n\tpublic hideOffer(id: string) {\n\t\treturn this._apiService.post(`offer/${id}/hide`, {});\n\t}\n\n\tpublic unHideOffer(id: string) {\n\t\treturn this._apiService.post(`offer/${id}/unHide`, {});\n\t}\n\n\tpublic adminHideOffer(id: string) {\n\t\treturn this._apiService.post(`offer/${id}/adminHide`, {});\n\t}\n\n\tpublic adminUnHideOffer(id: string) {\n\t\treturn this._apiService.post(`offer/${id}/adminUnHide`, {});\n\t}\n\n\tpublic deleteOfferSub(id: string) {\n\t\treturn this._apiService.delete(`offer/${id}/delete`);\n\t}\n\tpublic deleteRfq(id: string) {\n\t\treturn this._apiService.delete(`tradeBid/delete-rfq-admin`, { body: { rfqId: id } });\n\t}\n\tpublic deleteOfferById(id: string, body: any) {\n\t\treturn this._apiService.delete(`offer/${id}/delete`, body);\n\t\t// .pipe(untilDestroyed(this))\n\t\t// .subscribe(() => {\n\t\t// \tthis._offersStore.update({\n\t\t// \t\tmyOffers: this._offersQuery.getValue().myOffers.filter((myOffer) => myOffer._id !== id),\n\t\t// \t});\n\t\t// });\n\t}\n\n\tpublic getOfferById(id: string): Observable<any> {\n\t\treturn this._apiService.get(`offer/${id}/`).pipe(\n\t\t\ttap((response) => {\n\t\t\t\tthis._offersStore.update({\n\t\t\t\t\toffer: response,\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic getMyOffers(): Observable<any> {\n\t\tthis._apiService\n\t\t\t.get(\"my/offers?limit=1\")\n\t\t\t.subscribe((myOffers: any) => {\n\t\t\t\tthis._offersStore.update({\n\t\t\t\t\tmyOffers: myOffers.map((myOffer: any) => ({\n\t\t\t\t\t\t...myOffer,\n\t\t\t\t\t\tpreviewPhoto: getPreviewPhoto(myOffer),\n\t\t\t\t\t})),\n\t\t\t\t});\n\t\t\t});\n\n\t\treturn this._offersQuery.selectMyOffers$;\n\t}\n\n\tpublic getOffers(queryString: string = \"\"): Observable<any> {\n\t\treturn this._apiService.get(\"offers/\" + queryString).pipe(\n\t\t\t// untilDestroyed(this),\n\t\t\tmap((response: any) => {\n\t\t\t\tconst { offers, totalCount } = response;\n\n\t\t\t\tconst allOffers = offers.map((offer: any) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...offer,\n\t\t\t\t\t\tpreviewPhoto: getPreviewPhoto(offer),\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tthis._offersStore.update({\n\t\t\t\t\tallOffers,\n\t\t\t\t\tallOffersCount: totalCount,\n\t\t\t\t});\n\n\t\t\t\treturn [...allOffers];\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic getActiveOffers(): Observable<any> {\n\t\treturn this._apiService.get(\"offers?hideSold=true\").pipe(\n\t\t\t// untilDestroyed(this),\n\t\t\tmap((response: any) => {\n\t\t\t\tconst { offers, totalCount } = response;\n\n\t\t\t\tconst allOffers = offers.map((offer: any) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...offer,\n\t\t\t\t\t\tpreviewPhoto: getPreviewPhoto(offer),\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tthis._offersStore.update({\n\t\t\t\t\tallOffers,\n\t\t\t\t\tallOffersCount: totalCount,\n\t\t\t\t});\n\n\t\t\t\treturn [...allOffers];\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic getSavedOffers(): Observable<any> {\n\t\tconst url = \"my/offers/favourites\";\n\t\tthis._apiService.get<any[]>(url).subscribe((savedOffers: any[]) => {\n\t\t\tthis._offersStore.update({\n\t\t\t\tsavedOffers: savedOffers.map((savedOffer) => ({\n\t\t\t\t\t...savedOffer,\n\t\t\t\t\tpreviewPhoto: getPreviewPhoto(savedOffer),\n\t\t\t\t})),\n\t\t\t});\n\t\t});\n\t\treturn this._offersQuery.selectSavedOffers$;\n\t}\n\n\tpublic createOffer(offerToCreate: any) {\n\t\treturn this._apiService.post(\"offer/create\", offerToCreate);\n\t}\n\n\tpublic updateOffer(offerToUpdate: any, id: any) {\n\t\treturn this._apiService.put(`offer/${id}/update`, offerToUpdate);\n\t}\n\n\tpublic addFavoriteOffer(id: string) {\n\t\treturn this._apiService.post(`user/favourites/${id}/add`, {}).pipe(\n\t\t\ttap(() => {\n\t\t\t\tthis._offersStore.update({\n\t\t\t\t\tallOffers: this._offersStore.getValue().allOffers.map((offer: any) => ({\n\t\t\t\t\t\t...offer,\n\t\t\t\t\t\tisSaved: offer._id === id ? true : offer.isSaved,\n\t\t\t\t\t})),\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic removeFavoriteOffer(id: string) {\n\t\treturn this._apiService.delete(`user/favourites/${id}/remove`).pipe(\n\t\t\ttap(() => {\n\t\t\t\tconst { savedOffers, allOffers } = this._offersQuery.getValue();\n\n\t\t\t\tthis._offersStore.update({\n\t\t\t\t\tsavedOffers: savedOffers.filter((savedOffer: any) => savedOffer._id !== id),\n\t\t\t\t\tallOffers: allOffers.map((offer: any) => ({\n\t\t\t\t\t\t...offer,\n\t\t\t\t\t\tisSaved: offer._id === id ? false : offer.isSaved,\n\t\t\t\t\t})),\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic approveOffer(id: string) {\n\t\treturn this._apiService.post(`offer/${id}/adminApprovalOffer`, {});\n\t}\n\n\tpublic declineOffer(id: string) {\n\t\treturn this._apiService.post(`offer/${id}/adminRejectionOffer`, {});\n\t}\n\tpublic updateOffersList(queryString: string): void {\n\t\tthis.getOffers(queryString)\n\t\t\t.pipe(first())\n\t\t\t.subscribe((data) => {\n\t\t\t\tthis.offersSource.next(data.rfqList);\n\t\t\t\t// this.rfqManageLength.next(data.totalCount);\n\t\t\t});\n\t}\n}\n","import { Injectable } from \"@angular/core\";\nimport { Query } from \"@datorama/akita\";\nimport { Observable } from \"rxjs\";\nimport {CategoriesState, CategoriesStore} from \"./categories.store\";\n\n@Injectable({ providedIn: \"root\" })\nexport class CategoriesQuery extends Query<CategoriesState> {\n\tpublic readonly selectCategories$: Observable<any>;\n\tpublic readonly selectWikiCategories$: Observable<any>;\n\tconstructor(protected override store: CategoriesStore) {\n\t\tsuper(store);\n\n\t\tthis.selectCategories$ = this.select(\"categories\");\n\t\tthis.selectWikiCategories$ = this.select(\"wikiCategories\");\n\t}\n}\n","import { Injectable } from \"@angular/core\";\nimport { Store, StoreConfig } from \"@datorama/akita\";\n\nexport interface CategoriesState {\n\tcategories: any;\n\twikiCategories: any;\n}\n\nexport function createInitialState(): CategoriesState {\n\treturn {\n\t\tcategories: {\n\t\t\tcategories: [],\n\t\t\ttotalCount: 0,\n\t\t},\n\t\twikiCategories: [],\n\t};\n}\n\n@Injectable({ providedIn: \"root\" })\n@StoreConfig({ name: \"categories\" })\nexport class CategoriesStore extends Store<CategoriesState> {\n\tconstructor() {\n\t\tsuper(createInitialState());\n\t}\n}\n","import { Injectable } from \"@angular/core\";\nimport { Query } from \"@datorama/akita\";\nimport { Observable } from \"rxjs\";\nimport {OffersState, OffersStore} from \"./offers.store\";\n\n@Injectable({ providedIn: \"root\" })\nexport class OffersQuery extends Query<OffersState> {\n\tpublic readonly selectAllOffers$: Observable<any>;\n\tpublic readonly selectMyOffers$: Observable<any>;\n\tpublic readonly selectOffer$: Observable<any>;\n\tpublic readonly selectSavedOffers$: Observable<any>;\n\tpublic readonly selectAllOffersCount$: Observable<any>;\n\tpublic readonly selectSeaLines$: Observable<any>;\n\n\tconstructor(protected override store: OffersStore) {\n\t\tsuper(store);\n\n\t\tthis.selectAllOffers$ = this.select(\"allOffers\");\n\t\tthis.selectMyOffers$ = this.select(\"myOffers\");\n\t\tthis.selectOffer$ = this.select(\"offer\");\n\t\tthis.selectSavedOffers$ = this.select(\"savedOffers\");\n\t\tthis.selectAllOffersCount$ = this.select(\"allOffersCount\");\n\t\tthis.selectSeaLines$ = this.select(\"seaLines\");\n\t}\n}\n","import { Injectable } from \"@angular/core\";\nimport { Store, StoreConfig } from \"@datorama/akita\";\n\nexport interface OffersState {\n\tallOffers: any;\n\tmyOffers: any;\n\toffer: any;\n\tsavedOffers: any;\n\tallOffersCount: number;\n\tseaLines: any;\n}\n\nexport function createInitialState(): OffersState {\n\treturn {\n\t\tallOffers: [],\n\t\tmyOffers: [],\n\t\toffer: null,\n\t\tsavedOffers: [],\n\t\tallOffersCount: 0,\n\t\tseaLines: [],\n\t};\n}\n\n@Injectable({ providedIn: \"root\" })\n@StoreConfig({ name: \"offers\" })\nexport class OffersStore extends Store<OffersState> {\n\tconstructor() {\n\t\tsuper(createInitialState());\n\t}\n}\n"],"names":["ChangeDetectorRef","ElementRef","B2bNgxButtonThemeEnum","UntilDestroy","untilDestroyed","BehaviorSubject","combineLatest","filter","map","switchMap","tap","io","environment","i0","ctx_r27","value","_r1","ClientChatComponent","constructor","_activatedRoute","_router","_chatService","_chatsService","_usersService","_offersService","_formBuilder","_authService","_socketService","_hotToastService","changeDetectorRef","b2bNgxLinkService","translateService","mixpanelService","categoriesService","b2bNgxButtonThemeEnum","formGroup","group","message","_messagesHistoryBehaviourSubject","_messagesHistory$","asObservable","_messageBehaviourSubject","_message$","_chatInfoBehaviourSubject","_chatInfo$","chatInfo$","getChatInfo","messages$","getMessages","getUser","pipe","user","chatInfo","dispayInfoOf","buyer","_a","_id","instant","displayInfo","offer","_b","contact","author","fullName","personName","_c","title","role","user$","chat$","paramMap","get","id","getChatById","chat","setTimeout","chatContainer","nativeElement","scrollTop","scrollHeight","messages","seller","enterPressed","event","sendMessage","preventDefault","body","subscribe","_socket","emit","type","userId","offerId","reset","subscribeOnMessage","on","history","getValue","next","subscribeOnChatInfo","readMessages","unreadMessagesCount","subscribeOnMessageHistory","message_history","openConnection","token","disconnect","apiUrl","path","auth","ngOnInit","snapshot","params","token$","getToken$","getUser$","Array","isArray","contactTo","displayContactsOpened","openedFor","includes","displayContactsRequested","contactsRequested","displayRequestContacts","visibility","email","phone","displayOpenContacts","displayCloseContacts","_d","requestContacts","observe","loading","success","error","detectChanges","openContacts","sendContacts","closeContacts","ngOnDestroy","selectors","viewQuery"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}