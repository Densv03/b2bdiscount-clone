"use strict";(self.webpackChunkfe_b2b=self.webpackChunkfe_b2b||[]).push([[2076],{83172:(M,p,t)=>{t.d(p,{j:()=>o});var n=t(60177),c=t(54438);let o=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=c.$C({type:r});static#n=this.\u0275inj=c.G2t({imports:[n.MD]})}return r})()},93983:(M,p,t)=>{t.d(p,{i:()=>r});var n=t(60177),c=t(41108),o=t(54438);let r=(()=>{class a{static#t=this.\u0275fac=function(l){return new(l||a)};static#e=this.\u0275mod=o.$C({type:a});static#n=this.\u0275inj=o.G2t({imports:[n.MD,c.b]})}return a})()},15575:(M,p,t)=>{t.d(p,{u:()=>a});var n=t(60177),c=t(41108),o=t(24318),r=t(54438);let a=(()=>{class h{static#t=this.\u0275fac=function(E){return new(E||h)};static#e=this.\u0275mod=r.$C({type:h});static#n=this.\u0275inj=r.G2t({imports:[n.MD,c.b,o.F]})}return h})()},76382:(M,p,t)=>{t.d(p,{Aq:()=>o,G1:()=>n,TK:()=>c,g9:()=>r});const n=["1-5M","5-10M","10-50M","50-100M"],c=["1-5","5-10","10-50","50-100","> 100"];function o(a){return a.map(h=>({id:h,value:h}))}const r={loading:"Updating company information...",success:"Company information successfully updated.",error:"Company information updating failed"}},64660:(M,p,t)=>{t.d(p,{w:()=>P});var n=t(89417),c=t(74993),o=t(54153),r=t(61594),a=t(5964),h=t(96697),i=t(21413),l=t(88141),E=t(76382),D=t(67376),b=t.n(D),s=t(5019),m=t(34633),_=t(54438),f=t(15890),S=t(31126),e=t(65397),d=t(72558),C=t(37409);let P=(()=>{class y{constructor(u,g,v,O,L,A){this.fb=u,this.authService=g,this.userService=v,this.sourcingRequestService=O,this.hotToastService=L,this.mixpanelService=A,this.isAdmin="admin"===this.userService.getUser()?.role?.name,this.form=this.initForm(),this.rootRoles$=new i.B,this.subRoles=[],this.yearOfFoundationList=this.getFoundationYear(),this.isSubmit=!1}get company(){return this.authService.company}set company(u){this.authService.updateCompany(u)}initForm(){return this.fb.group({companyName:["",[n.k0.required,(0,m.r)()]],businessType:["",[n.k0.required]],country:["",[n.k0.required]],yearOfFoundation:["",[n.k0.required]],employeesNumber:["",[n.k0.required]],annualRevenue:["",[n.k0.required]],address:["",[n.k0.required,(0,m.r)()]],website:["",[(0,c.q7)()]],companyDescription:["",[n.k0.required,n.k0.minLength(40),(0,m.r)()]],logo:[null],banner:[null],socialMedia:this.fb.group({facebook:["",(0,o.o)()],instagram:["",(0,o.o)()],linkedin:["",(0,o.o)()],twitter:["",(0,o.o)()]})})}initDefault(){this.getRoles(),this.getFoundationYear()}onSubmit(u){this.isSubmit=!1;const g=u.socialMedia,v=(0,s.t)({...u,...g});try{u.banner||this.sourcingRequestService.deleteBanner().subscribe(),u.logo||this.sourcingRequestService.deleteLogo().subscribe(),this.updateCompany(v,u,g)}catch(O){console.log(O)}this.isSubmit=!0}updateCompany(u,g,v){this.sourcingRequestService.updateCompanyInfo(u).pipe((0,r.$)(),this.hotToastService.observe(E.g9),(0,l.M)(()=>{this.mixpanelChangeUser(g),this.trackWebsiteChange(g),v&&this.trackSocialMediaLinksChange(v),this.trackCompanyChange()})).subscribe(O=>{this.authService.updateCompany(O)})}mixpanelChangeUser(u){const g=this.authService.user;this.mixpanelService.set({distinctId:this.userService.getUser()._id,properties:{"Account Type":g.rootRole,"Company Name":u.companyName,Name:u.companyName}})}getRoles(){return this.authService.getRootRoles().pipe((0,a.p)(u=>!!u.length),(0,h.s)(1)).subscribe(u=>{this.rootRoles$.next(u),this.subRoles="supplier"===this.authService.user.rootRole.name?u.find(g=>"supplier"===g.name).subRoles:u.find(g=>"buyer"===g.name).subRoles})}getFoundationYear(){const u=[],g=new Date(Date.now()).getFullYear();for(let v=g;v>g-150;v--)u.push(v.toString());return(0,E.Aq)(u)}trackWebsiteChange(u){u?.website!==this.company?.website&&(this.company.website=u?.website,this.mixpanelService.track("Website Link added",{Link:u?.website}))}trackSocialMediaLinksChange(u){const g=b().omitBy(this.company?.socialMedia,O=>b().isUndefined(O)||b().isNull(O)||""===O||" "===O),v=b().pick(u,["facebook","instagram","linkedin","twitter"]);b().isEqual(v,g)||(this.mixpanelService.track("Social Media Link added",{"Social Media Type":v}),this.company={...this.company,socialMedia:v})}trackCompanyChange(){const u=["companyName","businessType","country","employeesNumber","yearOfFoundation","annualRevenue","companyDescription","address","position"],g=b().omitBy(b().pick(this.company,u),A=>b().isUndefined(A)||b().isNull(A)||""===A),v=b().pick(this.company,u),O=Object.keys(g);b().isEqual(O.sort(),u.sort())&&!b().isEqual(g,v)&&(this.mixpanelService.track("Company information completed",{"Account Type":this.userService.getUser().rootRole?.name}),this.company={...this.company,...g})}static#t=this.\u0275fac=function(g){return new(g||y)(_.KVO(n.ok),_.KVO(f.u),_.KVO(S.D),_.KVO(e.$),_.KVO(d.U_),_.KVO(C.U))};static#e=this.\u0275prov=_.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},145:(M,p,t)=>{t.d(p,{c:()=>_});var n=t(84412),c=t(7673),o=t(61594),r=t(88141),a=t(21626),h=t(5019),i=t(54438),l=t(40735),E=t(70148),D=t(31635);let s=class U extends E.il{constructor(){super({homepage:null})}static#t=this.\u0275fac=function(e){return new(e||U)};static#e=this.\u0275prov=i.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})};s=(0,D.Cg)([(0,E.g7)({name:"blog"})],s);let m=(()=>{class f extends E.XK{constructor(e){super(e),this.store=e,this.homepage$=this.select("homepage")}static#t=this.\u0275fac=function(d){return new(d||f)(i.KVO(s))};static#e=this.\u0275prov=i.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})(),_=(()=>{class f{constructor(e,d,C){this.apiService=e,this.blogQuery=d,this.blogStore=C,this.blogSource$=new n.t([]),this.blogLength=new n.t(0),this._articlesBehaviourSubject=new n.t([]),this._articles$=this._articlesBehaviourSubject.asObservable(),this._endpoint="blogs/"}getTags(e){return this.apiService.get(`tags?q=${e}`)}createBlog(e){return this.apiService.post("blog/create",e)}uploadImage(e,d){return this.apiService.put(`blog/${d}/upload-image`,e)}updateBlog(e,d){return this.apiService.put(`blog/${e}/update`,d)}createArticle(e){return this.apiService.post("blog/create",e)}getComments(e){return this.apiService.get(`comment/${e}`)}updateArticle(e,d){return this.apiService.put(`blog/${e}/update`,d)}createComment(e,d){return this.apiService.post("comment/create",{post:e,text:d})}getArticleById(e){return this.apiService.get(`blog/${e}`)}getNewArticleById(e){return this.apiService.get(`new-blog/${e}`)}updateNewArticle(e,d){return this.apiService.put(`new-blog/update/${e}`,(0,h.t)(d))}get blog$(){return this.blogSource$.asObservable()}get blogLength$(){return this.blogLength.asObservable()}getArticles(e){return this.apiService.get(`blogs${e}`)}updateBlogList(e="&limit=7&"){this.getArticles(e).pipe((0,o.$)()).subscribe(d=>{this.blogSource$.next(d.posts),this.blogLength.next(d.totalCount)})}getHomePage(){const{homepage:e}=this.blogQuery.getValue();return e?(0,c.of)(e):this.apiService.get("new-blogs/homepage").pipe((0,r.M)(d=>this.updateHomepage(d)))}deleteArticleById(e){return this.apiService.delete(`blog/${e}/delete`)}getAuthorList$(e=20,d=0){return this.apiService.get("new-blog/authors",{params:{limit:e,offset:d}})}createNewBlog(e){return this.apiService.post("new-blog/create",(0,h.t)(e))}getNewArticles(e=0,d="News",C="published",P=10){return this.apiService.get("new-blogs",{params:{limit:P,offset:e,type:d,status:C}})}deleteNewArticle(e){return this.apiService.delete(`new-blog/delete/${e}`)}createAuthor(e){return this.apiService.post("new-blog/author/create",(0,h.t)(e))}updateAuthor(e,d){return this.apiService.put(`new-blog/author/${d}`,(0,h.t)(e))}deleteAuthor(e){return this.apiService.delete(`new-blog/author/${e}`)}getArticlesByType(e,d,C,P,y){let R=new a.Nl;return R=R.append("limit",d).append("offset",e).append("type",C),P&&R.append("status",P),y?.length>0&&y.forEach(u=>R.append("tags",u)),this.apiService.get("new-blogs",{params:R})}updateHomepage(e){this.blogStore.update({homepage:e})}static#t=this.\u0275fac=function(d){return new(d||f)(i.KVO(l.G),i.KVO(m),i.KVO(s))};static#e=this.\u0275prov=i.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},49681:(M,p,t)=>{t.d(p,{m:()=>r});var n=t(96354),c=t(54438),o=t(40735);let r=(()=>{class a{constructor(i){this._apiService=i}getChatById(i){return this._apiService.get(`my/chat/${i}`).pipe((0,n.T)(l=>Array.isArray(l)?l[0]:l),(0,n.T)(l=>({...l,offer:Array.isArray(l.offer)?l.offer[0]:l.offer})))}static#t=this.\u0275fac=function(l){return new(l||a)(c.KVO(o.G))};static#e=this.\u0275prov=c.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},13879:(M,p,t)=>{t.d(p,{z:()=>o});var n=t(54438),c=t(34006);let o=(()=>{class r{constructor(h){this.matDialog=h}showExplanationModal(){this.matDialog.open(this.explanationModal)}static#t=this.\u0275fac=function(i){return new(i||r)(n.rXU(c.bZ))};static#e=this.\u0275cmp=n.VBU({type:r,selectors:[["b2b-explanation-banner"]],inputs:{title:"title",subtitle:"subtitle",explanationModal:"explanationModal"},decls:7,vars:2,consts:[[1,"banner"],[1,"banner__title"],[1,"banner__subtitle"],[1,"banner__button",3,"click"]],template:function(i,l){1&i&&(n.j41(0,"div",0)(1,"span",1),n.EFF(2),n.k0s(),n.j41(3,"span",2),n.EFF(4),n.k0s(),n.j41(5,"span",3),n.bIt("click",function(){return l.showExplanationModal()}),n.EFF(6,"Show more"),n.k0s()()),2&i&&(n.R7$(2),n.JRh(l.title),n.R7$(2),n.SpI(" ",l.subtitle," "))},styles:["[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #d3dfff;box-shadow:0 0 10px #0000001a;background:#d3dfff;max-width:1170px;margin:auto;text-align:center;padding:8px 0}@media (max-width: 75em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{background:#d3dfff;max-width:95%}}@media (max-width: 36em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{max-width:90%}}[_nghost-%COMP%]   .banner__title[_ngcontent-%COMP%]{color:#000;font-size:16px;font-weight:700;letter-spacing:.18px}[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{font-size:13.6px;font-weight:400;letter-spacing:.14px;margin-left:8px}@media (max-width: 75em){[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{text-decoration:underline;color:#005dff;font-weight:400;margin-left:16px;cursor:pointer}@media (max-width: 36em){[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{display:block}}"]})}return r})()},14438:(M,p,t)=>{t.d(p,{q:()=>o});var n=t(60177),c=t(54438);let o=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=c.$C({type:r});static#n=this.\u0275inj=c.G2t({imports:[n.MD]})}return r})()},5019:(M,p,t)=>{t.d(p,{t:()=>o});var n=t(75575),c=function(r){return r.instagram="instagram",r.linkedin="linkedin",r.twitter="twitter",r.fb="facebook",r}(c||{});function o(r){const a=Object.values(c).filter(i=>"string"==typeof i),h=new FormData;return Object.entries(r).filter(([i,l])=>a.includes(i)?null!==l:!!l).forEach(([i,l])=>{if("documents"===i)l.forEach(E=>{h.append(i,E)});else if("uploadedDocs"===i)h.append(i,JSON.stringify(l));else if(Array.isArray(l))l.filter(E=>!!E).forEach(E=>{h.append(i,E)});else if("object"==typeof l&&l)for(const E in l){const D=`${i}${(0,n.Z)(E)}`;h.append(D,l[E])}else h.append(i,l)}),a.forEach(i=>{null===r[i]&&h.append(i,"")}),h}},52052:(M,p,t)=>{function n(){const c=/.{1,} .{1,}/;return o=>o.value?c.test(String(o.value).toLowerCase())?null:{fullName:!0}:null}t.d(p,{f:()=>n})},74993:(M,p,t)=>{t.d(p,{q7:()=>o});const c=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-zA-Z0-9]+([-.]{1}[a-zA-Z0-9]+)*\.[a-zA-Z]{2,}(\/.*)?$/;function o(){return r=>r.value?c.test(r.value.trim())?null:{siteError:!0}:null}},54153:(M,p,t)=>{function n(){const o=/(?:https?:)?\/\/(?:[A-z]+\.)?(twitter|linkedin|instagram|facebook)\.com/;return r=>{if(!r.value)return null;const a=r.value.replace(/\s/g,"");return o.test(String(a).toLowerCase())?null:{socialError:!0}}}function c(){return o=>o.value?/^(https?:\/\/)?(www\.youtube\.com|youtu\.?be|m\.youtube\.com)\/.+$/.test(o.value)?null:{invalidYoutubeLink:!0}:null}t.d(p,{o:()=>n,q:()=>c})},30895:(M,p,t)=>{t.d(p,{B:()=>E});var n=t(60177),c=t(52168),o=t(5964),r=t(88141),a=t(45312),h=t(84412),i=t(54438),l=t(345);let E=(()=>{class D{constructor(s,m,_,f,S,e,d){this.rendererFactory=s,this.doc=m,this.locationService=_,this.router=f,this.route=S,this.title=e,this.meta=d,this.marketListingMetaSource=new h.t(null),this.renderer2=this.rendererFactory.createRenderer(null,null)}get marketListingMetaTags$(){return this.marketListingMetaSource.asObservable()}updateMarketListingMeta(s){this.marketListingMetaSource.next(s)}addBlogMicroMarkup(s,m,_,f,S,e,d,C){const P=this.renderer2.createElement("script");P.type="application/ld+json",P.id="micro-markup",P.text=`\n            {\n\t\t\t\t\t\t\t"@context": "https://schema.org",\n\t\t\t\t\t\t\t"@type": "NewsArticle",\n\t\t\t\t\t\t\t"mainEntityOfPage": {\n\t\t\t\t\t\t\t\t"@type": "WebPage",\n\t\t\t\t\t\t\t\t"@id": "${(a.c.apiUrl.includes("dev")?a.c.devUrl:a.c.prodUrl)+this.locationService.path()}"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t"headline": "${_}",\n\t\t\t\t\t\t\t"image": "[${e}]",\n\n\t\t\t\t\t\t\t"datePublished": "${this.getDateForBlogMarkup(f)}",\n\t\t\t\t\t\t\t"dateModified": "${this.getDateForBlogMarkup(S)}",\n\t\t\t\t\t\t\t"author": {\n   \t\t\t\t\t\t"@type": "Person",\n  \t\t\t\t\t\t"name": "${d}"\n  \t\t\t\t\t},\n   \t\t\t\t\t "publisher": {\n \t\t\t\t\t\t\t"@type": "Organization",\n\t\t\t\t\t\t  "name": "",\n \t\t\t\t\t\t  "url" : "${(a.c.apiUrl.includes("dev")?a.c.devUrl:a.c.prodUrl)+this.locationService.path()}",\n \t\t\t\t\t\t\t"logo": {\n \t\t\t\t\t\t\t "@type": "ImageObject",\n \t\t\t\t\t\t   "url": "${e[2]}"\n \t\t\t\t\t\t  }\n\t\t\t\t\t\t },\n\t\t\t\t\t\t"description": "${C}"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n        `,this.renderer2.appendChild(this.doc.body,P)}addCanonicalRef(){this.initCanonicalRef(),this.router.events.pipe((0,o.p)(s=>s instanceof c.wF),(0,r.M)(()=>{this.removeCanonicalRefs(),this.initCanonicalRef()})).subscribe()}setTitle(s){this.title.setTitle(s)}setDescription(s){this.meta.updateTag({name:"description",content:s})}initRobotsMetaTag(){this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag(),this.router.events.pipe((0,o.p)(s=>s instanceof c.wF),(0,r.M)(()=>{this.removeRobotsMetaTag(),this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag()})).subscribe()}isNoIndexUrl(s){return/sourcing-request\/listing\/.+/i.test(s)}addRobotsMetaTag(s=!0,m=!0){const _=this.doc.createElement("meta");_.setAttribute("name","robots"),_.setAttribute("content",`${s?"index":"noindex"}, ${m?"follow":"nofollow"}`),this.doc.head.appendChild(_)}removeRobotsMetaTag(){const s=this.doc.querySelector('meta[name="robots"]');s&&s.remove()}initCanonicalRef(){let s=this.doc.createElement("link");const m=this.doc.URL.indexOf("?");let _=-1!==m?this.doc.URL.substring(0,m):this.doc.URL;s.setAttribute("rel","canonical"),this.doc.head.appendChild(s),s.setAttribute("href",this.replaceCanonicalLink(_))}replaceCanonicalLink(s){switch(a.c.apiUrl){case"https://api.globy.com/":return s.replace(`http://${a.c.baseUrl}/`,a.c.prodUrl);case"https://api-dev.globy.com/":return s.replace(`http://${a.c.baseUrl}/`,a.c.devUrl);case"https://api-staging.globy.com/":return s.replace(`http://${a.c.baseUrl}/`,a.c.stagingUrl);default:return s}}removeCanonicalRefs(){const s=this.doc.getElementsByTagName("head")[0],m=s.getElementsByTagName("link");for(let _=0;_<m.length;_++){const f=m[_];"canonical"===f.rel&&this.renderer2.removeChild(s,f)}}getDateForBlogMarkup(s){"string"==typeof s&&(s=new Date);const m=s.toISOString();return m.slice(0,10)+"T"+m.slice(11,19)+"+08:00"}static#t=this.\u0275fac=function(m){return new(m||D)(i.KVO(i._9s),i.KVO(n.qQ),i.KVO(n.aZ),i.KVO(c.Ix),i.KVO(c.nX),i.KVO(l.hE),i.KVO(l.W8))};static#e=this.\u0275prov=i.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})()},64508:(M,p,t)=>{t.d(p,{S:()=>c});var n=t(54438);const c=new n.nKC("REQUEST");new n.nKC("RESPONSE")}}]);