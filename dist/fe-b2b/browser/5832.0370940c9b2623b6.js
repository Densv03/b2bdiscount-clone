"use strict";(self.webpackChunkfe_b2b=self.webpackChunkfe_b2b||[]).push([[5832],{55832:(oe,c,i)=>{i.r(c),i.d(c,{AdminManagerModule:()=>ie});var g=i(69808),p=i(63807),_=i(97582),C=i(14739),b=i(70771),o=i(93075),f=i(44987),x=i(64309),M=i(1218),e=i(5e3),A=i(69287),N=i(56913),T=i(96931);let y=(()=>{class n{constructor(t){this.apiService=t}addManager(t,r,d){return this.apiService.post("managers/add-new-manager",{firstName:t,lastName:r,url:d})}getUsersByRefId(t){return this.apiService.get(`statistics/get-users-list?refId=${t}`)}deleteManagerById(t){return this.apiService.delete(`managers/delete-manager?refId=${t}`)}getManagers(t){return this.apiService.get(t?`managers/get-managers?refId=${t}`:"managers/get-managers")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.s))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=i(70159),Z=i(5214),m=i(32075),I=i(64062);function U(n,a){1&n&&(e.TgZ(0,"th",26),e._uU(1,"Ref Id"),e.qZA())}function B(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",27),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.copyLink(s.link))}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.refId," ")}}function D(n,a){1&n&&(e.TgZ(0,"th",28),e._uU(1,"First Name"),e.qZA())}function k(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.firstName)}}function O(n,a){1&n&&(e.TgZ(0,"th",30),e._uU(1,"Last Name"),e.qZA())}function R(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.lastName)}}function L(n,a){1&n&&e._UZ(0,"th",28)}function Y(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",29)(1,"button",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.deleteManager(s.refId))}),e._uU(2," Delete "),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("theme",t.b2bNgxButtonThemeEnum.BACKGROUND_RED)}}function J(n,a){1&n&&e._UZ(0,"tr",32)}function S(n,a){1&n&&e._UZ(0,"tr",33)}function P(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Total count: ",t.userList.length,"")}}function Q(n,a){1&n&&(e.TgZ(0,"th",28),e._uU(1,"Email"),e.qZA())}function w(n,a){1&n&&e._UZ(0,"img",41),2&n&&e.Q6J("name","check-blue")}function E(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.YNc(2,w,1,1,"img",40),e.qZA()),2&n){const t=a.$implicit,r=e.oxw(2);e.xp6(1),e.hij(" ",t.email," "),e.xp6(1),e.Q6J("ngIf",(null==t.products?null:t.products.length)&&r.isApproved(t.products))}}function G(n,a){1&n&&(e.TgZ(0,"th",28),e._uU(1," Registration type "),e.qZA())}function j(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.typeRegistration," ")}}function H(n,a){1&n&&(e.TgZ(0,"th",28),e._uU(1,"Country"),e.qZA())}function K(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit,r=e.oxw(2);e.xp6(1),e.hij(" ",r.getCountryNameByCode(null==t.userData[0]||null==t.userData[0].phone?null:t.userData[0].phone.countryCode)," ")}}function q(n,a){1&n&&(e.TgZ(0,"th",28),e._uU(1," Registration date "),e.qZA())}function $(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t.userData[0]?null:t.userData[0].createdAt,"MM/d/yy")," ")}}function z(n,a){1&n&&(e.TgZ(0,"th",28),e._uU(1," Company name "),e.qZA())}function F(n,a){if(1&n&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t||null==t.userData[0]?null:t.userData[0].company," ")}}function W(n,a){1&n&&e._UZ(0,"tr",32)}function X(n,a){1&n&&e._UZ(0,"tr",33)}function V(n,a){if(1&n&&(e.TgZ(0,"table",34),e.ynx(1,35),e.YNc(2,Q,2,0,"th",15),e.YNc(3,E,3,2,"td",16),e.BQk(),e.ynx(4,36),e.YNc(5,G,2,0,"th",15),e.YNc(6,j,2,1,"td",16),e.BQk(),e.ynx(7,37),e.YNc(8,H,2,0,"th",15),e.YNc(9,K,2,1,"td",16),e.BQk(),e.ynx(10,38),e.YNc(11,q,2,0,"th",15),e.YNc(12,$,3,4,"td",16),e.BQk(),e.ynx(13,39),e.YNc(14,z,2,0,"th",15),e.YNc(15,F,2,1,"td",16),e.BQk(),e.YNc(16,W,1,0,"tr",20),e.YNc(17,X,1,0,"tr",21),e.qZA()),2&n){const t=e.oxw();e.Q6J("dataSource",t.userList),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumnsUsers),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsUsers)}}let l=class{constructor(a,t,r,d,s){this.formBuilder=a,this.clipboard=t,this.hotToastService=r,this.adminManagerService=d,this.changeDetectionRef=s,this.b2bNgxInputThemeEnum=b.T,this.b2bNgxButtonThemeEnum=C.n,this.managersList=[],this.userList=[],this.displayedColumnsManagers=["refId","firstName","lastName","delete"],this.displayedColumnsUsers=["email","registrationType","country","registrationDate","company"],this.generatedLink="",this.formGroup=this.formBuilder.group({firstName:[null,o.kI.required],lastName:[null,o.kI.required],url:[null,o.kI.required]}),this.usersByRefIdGroup=this.formBuilder.group({refId:[null,[o.kI.required,(0,x.X)()]]})}ngOnInit(){this.updateManagerList()}generateLink(a){!a.valid||(this.adminManagerService.addManager(a.value.firstName,a.value.lastName,a.value.url).pipe((0,f.t)(this)).subscribe(t=>{this.generatedLink=t.link,this.updateManagerList(),this.changeDetectionRef.detectChanges()}),this.formGroup.reset(),this.updateManagerList())}getUsersByRefId(a){!a.valid||this.adminManagerService.getUsersByRefId(parseInt(a.value.refId)).subscribe(t=>{t.length||this.hotToastService.show("There's no users found with current refId",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0}),this.userList=t[0].users,this.changeDetectionRef.detectChanges()})}isApproved(a){return a.some(t=>t.productApproved)}copyLink(a=this.generatedLink){this.clipboard.copy(a),this.hotToastService.show("Link copied to clipboard",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0})}deleteManager(a){this.adminManagerService.deleteManagerById(a).subscribe(()=>this.updateManagerList())}getCountryNameByCode(a){return a?(0,M.oY)(a):""}updateManagerList(){this.adminManagerService.getManagers().subscribe(a=>{this.managersList=a,this.changeDetectionRef.detectChanges()})}};l.\u0275fac=function(a){return new(a||l)(e.Y36(o.qu),e.Y36(A.TU),e.Y36(N.jE),e.Y36(y),e.Y36(e.sBO))},l.\u0275cmp=e.Xpm({type:l,selectors:[["b2b-admin-manager"]],decls:35,vars:17,consts:[[1,"admin-manager"],[1,"admin-manager__form-group",3,"formGroup","ngSubmit"],[1,"admin-manager__form-group__container"],["type","text","b2bNgxInput","","formControlName","firstName","placeholder","First name","label","Enter first name",3,"theme"],["type","text","b2bNgxInput","","formControlName","lastName","placeholder","Second name","label","Enter second name",3,"theme"],["type","text","b2bNgxInput","","formControlName","url","placeholder","https://b2b.discount/blog","label","Enter the link for which the ref will be generated",1,"mb-3",3,"theme"],["b2bNgxButton","",3,"theme"],[1,"admin-manager__generated-link"],["b2bNgxInput","","disabled","","placeholder","Here will be generated link",3,"ngModel","theme","ngModelChange"],["b2bNgxButton","",3,"theme","disabled","click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","refId"],["class","th-id","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","firstName"],["class","th-firstName","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["class","th-lastName","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"admin-manager__generated-link",3,"formGroup","ngSubmit"],["type","text","b2bNgxInput","","formControlName","refId","placeholder","Ref id",3,"theme"],[4,"ngIf"],["mat-table","","class","mat-elevation-z8 w-100",3,"dataSource",4,"ngIf"],["mat-header-cell","",1,"th-id"],["mat-cell","",3,"click"],["mat-header-cell","",1,"th-firstName"],["mat-cell",""],["mat-header-cell","",1,"th-lastName"],["b2bNgxButton","",1,"delete-btn",3,"theme","click"],["mat-header-row",""],["mat-row",""],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","email"],["matColumnDef","registrationType"],["matColumnDef","country"],["matColumnDef","registrationDate"],["matColumnDef","company"],["b2bNgxIcon","",3,"name",4,"ngIf"],["b2bNgxIcon","",3,"name"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return t.generateLink(t.formGroup)}),e.TgZ(2,"div",2)(3,"div"),e._UZ(4,"input",3),e.qZA(),e.TgZ(5,"div"),e._UZ(6,"input",4),e.qZA()(),e._UZ(7,"input",5),e.TgZ(8,"button",6),e._uU(9," Generate Link "),e.qZA()(),e.TgZ(10,"div",7)(11,"input",8),e.NdJ("ngModelChange",function(d){return t.generatedLink=d}),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return t.copyLink()}),e._uU(13," Copy URL "),e.qZA()(),e.TgZ(14,"table",10),e.ynx(15,11),e.YNc(16,U,2,0,"th",12),e.YNc(17,B,2,1,"td",13),e.BQk(),e.ynx(18,14),e.YNc(19,D,2,0,"th",15),e.YNc(20,k,2,1,"td",16),e.BQk(),e.ynx(21,17),e.YNc(22,O,2,0,"th",18),e.YNc(23,R,2,1,"td",16),e.BQk(),e.ynx(24,19),e.YNc(25,L,1,0,"th",15),e.YNc(26,Y,3,1,"td",16),e.BQk(),e.YNc(27,J,1,0,"tr",20),e.YNc(28,S,1,0,"tr",21),e.qZA(),e.TgZ(29,"form",22),e.NdJ("ngSubmit",function(){return t.getUsersByRefId(t.usersByRefIdGroup)}),e._UZ(30,"input",23),e.TgZ(31,"button",6),e._uU(32," Submit "),e.qZA()(),e.YNc(33,P,2,1,"div",24),e.YNc(34,V,18,3,"table",25),e.qZA()),2&a&&(e.xp6(1),e.Q6J("formGroup",t.formGroup),e.xp6(3),e.Q6J("theme",t.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(2),e.Q6J("theme",t.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(1),e.Q6J("theme",t.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(1),e.Q6J("theme",t.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),e.xp6(3),e.Q6J("ngModel",t.generatedLink)("theme",t.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(1),e.Q6J("theme",t.b2bNgxButtonThemeEnum.BACKGROUND_BLACK)("disabled",!t.generatedLink),e.xp6(2),e.Q6J("dataSource",t.managersList),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumnsManagers),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsManagers),e.xp6(1),e.Q6J("formGroup",t.usersByRefIdGroup),e.xp6(1),e.Q6J("theme",t.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(1),e.Q6J("theme",t.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),e.xp6(2),e.Q6J("ngIf",t.userList.length),e.xp6(1),e.Q6J("ngIf",null==t.userList?null:t.userList.length))},dependencies:[g.O5,v.k,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,Z.f,o.On,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,I.p,g.uU],styles:[".admin-manager[_ngcontent-%COMP%]{padding:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:49%}.admin-manager__form-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px}.admin-manager__generated-link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-manager__generated-link[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%}.admin-manager__generated-link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:15%}[_nghost-%COMP%]  table{width:65%;margin-top:50px;background-color:#fff}[_nghost-%COMP%]  th.mat-header-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  th.mat-header-cell:last-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:last-of-type{padding-right:0}[_nghost-%COMP%]  .th-id{width:10%;text-align:center;background-color:#000;color:#fff;padding-top:18px}[_nghost-%COMP%]  .th-firstName{text-align:center;padding-left:0}[_nghost-%COMP%]  .th-lastName{text-align:center;padding-left:0}[_nghost-%COMP%]  .cdk-column-refId{text-align:center;background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:10%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8;cursor:pointer}[_nghost-%COMP%]  .cdk-column-lastName, [_nghost-%COMP%]  .cdk-column-email, [_nghost-%COMP%]  .cdk-column-registrationType, [_nghost-%COMP%]  .cdk-column-firstName, [_nghost-%COMP%]  .cdk-column-registrationDate, [_nghost-%COMP%]  .cdk-column-country, [_nghost-%COMP%]  .cdk-column-company{background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:40%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .cdk-column-email>img{width:20px}[_nghost-%COMP%]  .cdk-column-company{width:50%;padding:5px}[_nghost-%COMP%]  .cdk-column-delete{background-color:#fff;height:65px;width:10%;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .delete-btn{width:100%;height:100%;transform:translateY(-17%)}"]}),l=(0,_.gn)([(0,f.c)()],l);const ee=[{path:"",component:l}];let te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(ee),p.Bz]}),n})();var h=i(94418),ne=i(59026),ae=i(51163);let ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,te,h.r,o.UX,ne.l,o.u5,h.r,m.p0,ae.w]}),n})()}}]);