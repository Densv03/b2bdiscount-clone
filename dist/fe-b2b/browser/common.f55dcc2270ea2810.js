"use strict";(self.webpackChunkfe_b2b=self.webpackChunkfe_b2b||[]).push([[8592],{26262:(E,u,t)=>{t.d(u,{E:()=>o});var n=t(96814),r=t(19212);let o=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=r.oAB({type:i});static#n=this.\u0275inj=r.cJS({imports:[n.ez]})}return i})()},48589:(E,u,t)=>{t.d(u,{_:()=>i});var n=t(96814),r=t(86461),o=t(19212);let i=(()=>{class c{static#t=this.\u0275fac=function(e){return new(e||c)};static#e=this.\u0275mod=o.oAB({type:c});static#n=this.\u0275inj=o.cJS({imports:[n.ez,r.A]})}return c})()},30536:(E,u,t)=>{t.d(u,{V:()=>c});var n=t(96814),r=t(86461),o=t(98653),i=t(19212);let c=(()=>{class _{static#t=this.\u0275fac=function(d){return new(d||_)};static#e=this.\u0275mod=i.oAB({type:_});static#n=this.\u0275inj=i.cJS({imports:[n.ez,r.A,o.w]})}return _})()},78533:(E,u,t)=>{t.d(u,{Ad:()=>o,S5:()=>r,r_:()=>i,t8:()=>c});const r=["1-5M","5-10M","10-50M","50-100M"],o=["1-5","5-10","10-50","50-100","> 100"];function i(_){return _.map(s=>({id:s,value:s}))}const c={loading:"Updating company information...",success:"Company information successfully updated.",error:"Company information updating failed"}},6975:(E,u,t)=>{t.d(u,{v:()=>D});var n=t(56223),r=t(76119),o=t(87446),i=t(81374),c=t(32181),_=t(48180),s=t(78645),e=t(99397),d=t(78533),v=t(6990),f=t.n(v),a=t(88814),g=t(72315),h=t(19212),O=t(77247),b=t(17706),P=t(81559),C=t(58133),R=t(69019);let D=(()=>{class L{constructor(l,p,m,M,S,y){this.fb=l,this.authService=p,this.userService=m,this.sourcingRequestService=M,this.hotToastService=S,this.mixpanelService=y,this.isAdmin="admin"===this.userService.getUser()?.role?.name,this.form=this.initForm(),this.rootRoles$=new s.x,this.subRoles=[],this.yearOfFoundationList=this.getFoundationYear(),this.isSubmit=!1}get company(){return this.authService.company}set company(l){this.authService.updateCompany(l)}initForm(){return this.fb.group({companyName:["",[n.kI.required,(0,g.w)()]],businessType:["",[n.kI.required]],country:["",[n.kI.required]],yearOfFoundation:["",[n.kI.required]],employeesNumber:["",[n.kI.required]],annualRevenue:["",[n.kI.required]],address:["",[n.kI.required,(0,g.w)()]],website:["",[(0,r.$j)()]],companyDescription:["",[n.kI.required,n.kI.minLength(40),(0,g.w)()]],logo:[null],banner:[null],socialMedia:this.fb.group({facebook:["",(0,o.n)()],instagram:["",(0,o.n)()],linkedin:["",(0,o.n)()],twitter:["",(0,o.n)()]})})}initDefault(){this.getRoles(),this.getFoundationYear()}onSubmit(l){this.isSubmit=!1;const p=l.socialMedia,m=(0,a.z)({...l,...p});try{l.banner||this.sourcingRequestService.deleteBanner().subscribe(),l.logo||this.sourcingRequestService.deleteLogo().subscribe(),this.updateCompany(m,l,p)}catch(M){console.log(M)}this.isSubmit=!0}updateCompany(l,p,m){this.sourcingRequestService.updateCompanyInfo(l).pipe((0,i.P)(),this.hotToastService.observe(d.t8),(0,e.b)(()=>{this.mixpanelChangeUser(p),this.trackWebsiteChange(p),m&&this.trackSocialMediaLinksChange(m),this.trackCompanyChange()})).subscribe(M=>{this.authService.updateCompany(M)})}mixpanelChangeUser(l){const p=this.authService.user;this.mixpanelService.set({distinctId:this.userService.getUser()._id,properties:{"Account Type":p.rootRole,"Company Name":l.companyName,Name:l.companyName}})}getRoles(){return this.authService.getRootRoles().pipe((0,c.h)(l=>!!l.length),(0,_.q)(1)).subscribe(l=>{this.rootRoles$.next(l),this.subRoles=l.flatMap(p=>p.subRoles)})}getFoundationYear(){const l=[],p=new Date(Date.now()).getFullYear();for(let m=p;m>p-150;m--)l.push(m.toString());return(0,d.r_)(l)}trackWebsiteChange(l){l?.website!==this.company?.website&&(this.company.website=l?.website,this.mixpanelService.track("Website Link added",{Link:l?.website}))}trackSocialMediaLinksChange(l){const p=f().omitBy(this.company?.socialMedia,M=>f().isUndefined(M)||f().isNull(M)||""===M||" "===M),m=f().pick(l,["facebook","instagram","linkedin","twitter"]);f().isEqual(m,p)||(this.mixpanelService.track("Social Media Link added",{"Social Media Type":m}),this.company={...this.company,socialMedia:m})}trackCompanyChange(){const l=["companyName","businessType","country","employeesNumber","yearOfFoundation","annualRevenue","companyDescription","address","position"],p=f().omitBy(f().pick(this.company,l),y=>f().isUndefined(y)||f().isNull(y)||""===y),m=f().pick(this.company,l),M=Object.keys(p);f().isEqual(M.sort(),l.sort())&&!f().isEqual(p,m)&&(this.mixpanelService.track("Company information completed",{"Account Type":this.userService.getUser().rootRole?.name}),this.company={...this.company,...p})}static#t=this.\u0275fac=function(p){return new(p||L)(h.LFG(n.qu),h.LFG(O.e),h.LFG(b.K),h.LFG(P.N),h.LFG(C.jE),h.LFG(R.h))};static#e=this.\u0275prov=h.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"})}return L})()},66358:(E,u,t)=>{t.d(u,{Z:()=>c});var n=t(65619),r=t(81374),o=t(19212),i=t(87588);let c=(()=>{class _{constructor(e){this.apiService=e,this.blogSource$=new n.X([]),this.blogLength=new n.X(0),this._articlesBehaviourSubject=new n.X([]),this._articles$=this._articlesBehaviourSubject.asObservable(),this._endpoint="blogs/"}getTags(e){return this.apiService.get(`tags?q=${e}`)}createBlog(e){return this.apiService.post("blog/create",e)}uploadImage(e,d){return this.apiService.put(`blog/${d}/upload-image`,e)}updateBlog(e,d){return this.apiService.put(`blog/${e}/update`,d)}createArticle(e){return this.apiService.post("blog/create",e)}getComments(e){return this.apiService.get(`comment/${e}`)}updateArticle(e,d){return this.apiService.put(`blog/${e}/update`,d)}createComment(e,d){return this.apiService.post("comment/create",{post:e,text:d})}getArticleById(e){return this.apiService.get(`blog/${e}`)}get blog$(){return this.blogSource$.asObservable()}get blogLength$(){return this.blogLength.asObservable()}getArticles(e){return this.apiService.get(`blogs${e}`)}updateBlogList(e="&limit=7&"){this.getArticles(e).pipe((0,r.P)()).subscribe(d=>{this.blogSource$.next(d.posts),this.blogLength.next(d.totalCount)})}deleteArticleById(e){return this.apiService.delete(`blog/${e}/delete`)}static#t=this.\u0275fac=function(d){return new(d||_)(o.LFG(i.s))};static#e=this.\u0275prov=o.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},62506:(E,u,t)=>{t.d(u,{a:()=>i});var n=t(37398),r=t(19212),o=t(87588);let i=(()=>{class c{constructor(s){this._apiService=s}getChatById(s){return this._apiService.get(`my/chat/${s}`).pipe((0,n.U)(e=>Array.isArray(e)?e[0]:e),(0,n.U)(e=>({...e,offer:Array.isArray(e.offer)?e.offer[0]:e.offer})))}static#t=this.\u0275fac=function(e){return new(e||c)(r.LFG(o.s))};static#e=this.\u0275prov=r.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},42961:(E,u,t)=>{t.d(u,{m:()=>o});var n=t(19212),r=t(19347);let o=(()=>{class i{constructor(_){this.matDialog=_}showExplanationModal(){this.matDialog.open(this.explanationModal)}static#t=this.\u0275fac=function(s){return new(s||i)(n.Y36(r.uw))};static#e=this.\u0275cmp=n.Xpm({type:i,selectors:[["b2b-explanation-banner"]],inputs:{title:"title",subtitle:"subtitle",explanationModal:"explanationModal"},decls:7,vars:2,consts:[[1,"banner"],[1,"banner__title"],[1,"banner__subtitle"],[1,"banner__button",3,"click"]],template:function(s,e){1&s&&(n.TgZ(0,"div",0)(1,"span",1),n._uU(2),n.qZA(),n.TgZ(3,"span",2),n._uU(4),n.qZA(),n.TgZ(5,"span",3),n.NdJ("click",function(){return e.showExplanationModal()}),n._uU(6,"Show more"),n.qZA()()),2&s&&(n.xp6(2),n.Oqu(e.title),n.xp6(2),n.hij(" ",e.subtitle," "))},styles:["[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #d3dfff;box-shadow:0 0 10px #0000001a;background:#d3dfff;max-width:1170px;margin:auto;text-align:center;padding:8px 0}@media (max-width: 75em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{background:#d3dfff;max-width:95%}}@media (max-width: 36em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{max-width:90%}}[_nghost-%COMP%]   .banner__title[_ngcontent-%COMP%]{color:#000;font-size:16px;font-weight:700;letter-spacing:.18px}[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{font-size:13.6px;font-weight:400;letter-spacing:.14px;margin-left:8px}@media (max-width: 75em){[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{text-decoration:underline;color:#005dff;font-weight:400;margin-left:16px;cursor:pointer}@media (max-width: 36em){[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{display:block}}"]})}return i})()},54674:(E,u,t)=>{t.d(u,{S:()=>o});var n=t(96814),r=t(19212);let o=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=r.oAB({type:i});static#n=this.\u0275inj=r.cJS({imports:[n.ez]})}return i})()},88814:(E,u,t)=>{t.d(u,{z:()=>o});var n=t(16481),r=function(i){return i.instagram="instagram",i.linkedin="linkedin",i.twitter="twitter",i.fb="facebook",i}(r||{});function o(i){const c=Object.values(r).filter(s=>"string"==typeof s),_=new FormData;return Object.entries(i).filter(([s,e])=>c.includes(s)?null!==e:!!e).forEach(([s,e])=>{if("documents"===s)e.forEach(d=>{_.append(s,d)});else if("uploadedDocs"===s)_.append(s,JSON.stringify(e));else if(Array.isArray(e))e.filter(d=>!!d).forEach(d=>{_.append(s,d)});else if("object"==typeof e&&e)for(const d in e){const v=`${s}${(0,n.f)(d)}`;_.append(v,e[d])}else _.append(s,e)}),c.forEach(s=>{null===i[s]&&_.append(s,"")}),_}},45682:(E,u,t)=>{function n(){const r=/.{1,} .{1,}/;return o=>o.value?r.test(String(o.value).toLowerCase())?null:{fullName:!0}:null}t.d(u,{v:()=>n})},76119:(E,u,t)=>{t.d(u,{$j:()=>o});const r=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-zA-Z0-9]+([-.]{1}[a-zA-Z0-9]+)*\.[a-zA-Z]{2,}(\/.*)?$/;function o(){return i=>i.value?r.test(i.value.trim())?null:{siteError:!0}:null}},87446:(E,u,t)=>{function n(){const r=/(?:https?:)?\/\/(?:[A-z]+\.)?(twitter|linkedin|instagram|facebook)\.com/;return o=>{if(!o.value)return null;const i=o.value.replace(/\s/g,"");return r.test(String(i).toLowerCase())?null:{socialError:!0}}}t.d(u,{n:()=>n})},19637:(E,u,t)=>{t.d(u,{v:()=>d});var n=t(96814),r=t(44112),o=t(32181),i=t(99397),c=t(20553),_=t(65619),s=t(19212),e=t(6593);let d=(()=>{class v{constructor(a,g,h,O,b,P,C){this.rendererFactory=a,this.doc=g,this.locationService=h,this.router=O,this.route=b,this.title=P,this.meta=C,this.marketListingMetaSource=new _.X(null),this.renderer2=this.rendererFactory.createRenderer(null,null)}get marketListingMetaTags$(){return this.marketListingMetaSource.asObservable()}updateMarketListingMeta(a){this.marketListingMetaSource.next(a)}addBlogMicroMarkup(a,g,h,O,b,P,C,R){const D=this.renderer2.createElement("script");D.type="application/ld+json",D.id="micro-markup",D.text=`\n            {\n\t\t\t\t\t\t\t"@context": "https://schema.org",\n\t\t\t\t\t\t\t"@type": "NewsArticle",\n\t\t\t\t\t\t\t"mainEntityOfPage": {\n\t\t\t\t\t\t\t\t"@type": "WebPage",\n\t\t\t\t\t\t\t\t"@id": "${(c.N.apiUrl.includes("dev")?c.N.devUrl:c.N.prodUrl)+this.locationService.path()}"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t"headline": "${h}",\n\t\t\t\t\t\t\t"image": "[${P}]",\n\n\t\t\t\t\t\t\t"datePublished": "${this.getDateForBlogMarkup(O)}",\n\t\t\t\t\t\t\t"dateModified": "${this.getDateForBlogMarkup(b)}",\n\t\t\t\t\t\t\t"author": {\n   \t\t\t\t\t\t"@type": "Person",\n  \t\t\t\t\t\t"name": "${C}"\n  \t\t\t\t\t},\n   \t\t\t\t\t "publisher": {\n \t\t\t\t\t\t\t"@type": "Organization",\n\t\t\t\t\t\t  "name": "",\n \t\t\t\t\t\t  "url" : "${(c.N.apiUrl.includes("dev")?c.N.devUrl:c.N.prodUrl)+this.locationService.path()}",\n \t\t\t\t\t\t\t"logo": {\n \t\t\t\t\t\t\t "@type": "ImageObject",\n \t\t\t\t\t\t   "url": "${P[2]}"\n \t\t\t\t\t\t  }\n\t\t\t\t\t\t },\n\t\t\t\t\t\t"description": "${R}"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n        `,this.renderer2.appendChild(this.doc.body,D)}addCanonicalRef(){this.initCanonicalRef(),this.router.events.pipe((0,o.h)(a=>a instanceof r.m2),(0,i.b)(()=>{this.removeCanonicalRefs(),this.initCanonicalRef()})).subscribe()}setTitle(a){this.title.setTitle(a)}setDescription(a){this.meta.updateTag({name:"description",content:a})}initRobotsMetaTag(){this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag(),this.router.events.pipe((0,o.h)(a=>a instanceof r.m2),(0,i.b)(()=>{this.removeRobotsMetaTag(),this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag()})).subscribe()}isNoIndexUrl(a){return/sourcing-request\/listing\/.+/i.test(a)}addRobotsMetaTag(a=!0,g=!0){const h=this.doc.createElement("meta");h.setAttribute("name","robots"),h.setAttribute("content",`${a?"index":"noindex"}, ${g?"follow":"nofollow"}`),this.doc.head.appendChild(h)}removeRobotsMetaTag(){const a=this.doc.querySelector('meta[name="robots"]');a&&a.remove()}initCanonicalRef(){let a=this.doc.createElement("link");const g=this.doc.URL.indexOf("?");let h=-1!==g?this.doc.URL.substring(0,g):this.doc.URL;a.setAttribute("rel","canonical"),this.doc.head.appendChild(a),a.setAttribute("href",this.replaceCanonicalLink(h))}replaceCanonicalLink(a){switch(c.N.apiUrl){case"https://api.globy.com/":return a.replace(`http://${c.N.baseUrl}/`,c.N.prodUrl);case"https://api-dev.globy.com/":return a.replace(`http://${c.N.baseUrl}/`,c.N.devUrl);case"https://api-staging.globy.com/":return a.replace(`http://${c.N.baseUrl}/`,c.N.stagingUrl);default:return a}}removeCanonicalRefs(){const a=this.doc.getElementsByTagName("head")[0],g=a.getElementsByTagName("link");for(let h=0;h<g.length;h++){const O=g[h];"canonical"===O.rel&&this.renderer2.removeChild(a,O)}}getDateForBlogMarkup(a){"string"==typeof a&&(a=new Date);const g=a.toISOString();return g.slice(0,10)+"T"+g.slice(11,19)+"+08:00"}static#t=this.\u0275fac=function(g){return new(g||v)(s.LFG(s.FYo),s.LFG(n.K0),s.LFG(n.Ye),s.LFG(r.F0),s.LFG(r.gz),s.LFG(e.Dx),s.LFG(e.h_))};static#e=this.\u0275prov=s.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},48667:(E,u,t)=>{t.d(u,{Z:()=>r});var n=t(19212);const r=new n.OlP("REQUEST");new n.OlP("RESPONSE")}}]);