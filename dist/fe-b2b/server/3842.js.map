{"version":3,"file":"3842.js","mappings":"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","sources":["./src/app/client/pages/client-profile/pages/client-profile-tradebid/client-profile-tradebid-rfq/components/client-chat/client-chat-routing.module.ts","./src/app/client/pages/client-profile/pages/client-profile-tradebid/client-profile-tradebid-rfq/components/client-chat/client-chat.module.ts","./src/app/client/pages/client-profile/pages/client-profile-tradebid/client-profile-tradebid-rfq/components/client-chat/layout/client-chat.component.ts","./src/app/client/pages/client-profile/pages/client-profile-tradebid/client-profile-tradebid-rfq/components/client-chat/layout/client-chat.component.html","./src/app/client/services/chat/chat.service.ts"],"sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { ClientChatComponent } from \"./layout/client-chat.component\";\n\nconst routes: Routes = [\n\t{\n\t\tpath: \"\",\n\t\tcomponent: ClientChatComponent,\n\t},\n];\n\n@NgModule({\n\timports: [RouterModule.forChild(routes)],\n\texports: [RouterModule],\n})\nexport class ClientChatRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\n\nimport { B2bNgxTextareaModule } from \"@b2b/ngx-textarea\";\nimport { B2bNgxButtonModule } from \"@b2b/ngx-button\";\nimport { B2bNgxImageModule } from \"@b2b/ngx-image\";\nimport { B2bNgxIconModule } from \"@b2b/ngx-icon\";\nimport { ReactiveFormsModule } from \"@angular/forms\";\nimport { ClientChatComponent } from \"./layout/client-chat.component\";\nimport { ClientChatRoutingModule } from \"./client-chat-routing.module\";\nimport { B2bNgxFileModule } from \"@b2b/ngx-file\";\nimport {TranslateModule} from \"@ngx-translate/core\";\n\n@NgModule({\n\tdeclarations: [ClientChatComponent],\n\timports: [\n\t\tCommonModule,\n\t\tClientChatRoutingModule,\n\t\tReactiveFormsModule,\n\t\tB2bNgxTextareaModule,\n\t\tB2bNgxButtonModule,\n\t\tB2bNgxImageModule,\n\t\tB2bNgxIconModule,\n\t\tB2bNgxFileModule,\n\t\tTranslateModule,\n\t],\n})\nexport class ClientChatModule {}\n","import {\n\tChangeDetectionStrategy,\n\tChangeDetectorRef,\n\tComponent,\n\tElementRef,\n\tOnDestroy,\n\tOnInit,\n\tViewChild,\n} from \"@angular/core\";\nimport { B2bNgxButtonThemeEnum } from \"@b2b/ngx-button\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { UntilDestroy, untilDestroyed } from \"@ngneat/until-destroy\";\nimport { ChatService } from \"../../../../../../../../services/chat/chat.service\";\nimport { BehaviorSubject, combineLatest, Observable } from \"rxjs\";\nimport {filter, map, switchMap, take, tap} from \"rxjs/operators\";\nimport { UserService } from \"../../../../../../services/user/user.service\";\nimport { OffersService } from \"../../../../../../../../services/offers/offers.service\";\nimport { FormBuilder, FormGroup } from \"@angular/forms\";\nimport { io } from \"socket.io-client\";\nimport { AuthService } from \"../../../../../../../../../auth/services/auth/auth.service\";\nimport { environment } from \"../../../../../../../../../../environments/environment\";\nimport { SocketService } from \"../../../../../../../../services/socket/socket.service\";\nimport { ChatsService } from \"../../../../../../../../services/chats/chats.service\";\nimport { HotToastService } from \"@ngneat/hot-toast\";\nimport { B2bNgxLinkService } from \"@b2b/ngx-link\";\nimport * as countryList from 'country-list';\nimport { TradebidService } from \"../../../../../../../client-tradebid/tradebid.service\";\nimport mixpanel from \"mixpanel-browser\";\nimport {MixpanelService} from \"../../../../../../../../../core/services/mixpanel/mixpanel.service\";\nimport {CategoriesService} from \"../../../../../../../../services/categories/categories.service\";\nimport {getName} from \"country-list\";\nimport {TranslateService} from \"@ngx-translate/core\";\n\n@UntilDestroy()\n@Component({\n\tselector: \"b2b-client-chat\",\n\ttemplateUrl: \"./client-chat.component.html\",\n\tstyleUrls: [\"./client-chat.component.scss\"],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ClientChatComponent implements OnInit, OnDestroy {\n\t@ViewChild(\"chatContainer\") chatContainer: ElementRef;\n\tpublic buyerContacts: any;\n\tpublic buyerStatus: boolean;\n\tpublic rfqInfo: any;\n\n\tpublic readonly formGroup: FormGroup;\n\tpublic readonly b2bNgxButtonThemeEnum: typeof B2bNgxButtonThemeEnum;\n\n\tpublic readonly messages$: Observable<any>;\n\tpublic readonly chatInfo$: Observable<any>;\n\n\tprivate readonly _messagesHistoryBehaviourSubject: BehaviorSubject<any>;\n\tprivate readonly _messagesHistory$: Observable<any>;\n\n\tprivate readonly _messageBehaviourSubject: BehaviorSubject<any>;\n\tprivate readonly _message$: Observable<any>;\n\n\tprivate readonly _chatInfoBehaviourSubject: BehaviorSubject<any>;\n\tprivate readonly _chatInfo$: Observable<any>;\n\n\tpublic chat: any;\n\tpublic displayRequestContacts: boolean;\n\tpublic displayOpenContacts: boolean;\n\tpublic displayCloseContacts: boolean;\n\tpublic displayContactsRequested: boolean;\n\tpublic displayContactsOpened: boolean = true;\n\n\tprivate _socket: any;\n\n\tconstructor(\n\t\tprivate readonly _activatedRoute: ActivatedRoute,\n\t\tprivate readonly _chatService: ChatService,\n\t\tprivate readonly _chatsService: ChatsService,\n\t\tprivate readonly _usersService: UserService,\n\t\tprivate readonly _offersService: OffersService,\n\t\tprivate readonly _formBuilder: FormBuilder,\n\t\tprivate readonly _authService: AuthService,\n\t\tprivate readonly _socketService: SocketService,\n\t\tprivate readonly _hotToastService: HotToastService,\n\t\tpublic changeDetectorRef: ChangeDetectorRef,\n\t\tpublic readonly b2bNgxLinkService: B2bNgxLinkService,\n\t\tprivate readonly translateService: TranslateService\n\t) {\n\t\tthis.b2bNgxButtonThemeEnum = B2bNgxButtonThemeEnum;\n\t\tthis.formGroup = this._formBuilder.group({\n\t\t\tmessage: \"\",\n\t\t});\n\n\t\tthis._messagesHistoryBehaviourSubject = new BehaviorSubject<any>([]);\n\t\tthis._messagesHistory$ = this._messagesHistoryBehaviourSubject.asObservable();\n\n\t\tthis._messageBehaviourSubject = new BehaviorSubject<any>([]);\n\t\tthis._message$ = this._messageBehaviourSubject.asObservable();\n\n\t\tthis._chatInfoBehaviourSubject = new BehaviorSubject<any>(null);\n\t\tthis._chatInfo$ = this._chatInfoBehaviourSubject.asObservable();\n\n\t\tthis.chatInfo$ = this.getChatInfo();\n\t\tthis.messages$ = this.getMessages();\n\t}\n\n\tpublic getChatInfo(): Observable<any> {\n\t\treturn this._authService.getUser().pipe(\n\t\t\tfilter((user) => !!user),\n\t\t\tswitchMap((user) => {\n\t\t\t\treturn this._chatInfo$.pipe(\n\t\t\t\t\tfilter((chatInfo) => !!chatInfo),\n\t\t\t\t\tmap((chatInfo) => {\n\t\t\t\t\t\tthis.buyerContacts = chatInfo.buyer;\n\t\t\t\t\t\tthis.rfqInfo = chatInfo;\n\t\t\t\t\t\tthis.buyerStatus = chatInfo.isActive;\n\t\t\t\t\t\tconst displayInfoOf =\n\t\t\t\t\t\t\tchatInfo.buyer?._id === user?._id\n\t\t\t\t\t\t\t\t? this.translateService.instant(\"CHAT.SELLER\")\n\t\t\t\t\t\t\t\t: this.translateService.instant(\"CHAT.BUYER\");\n\t\t\t\t\t\tconst displayInfo =\n\t\t\t\t\t\t\tdisplayInfoOf === this.translateService.instant(\"CHAT.SELLER\") ? chatInfo.seller : chatInfo.buyer;\n\t\t\t\t\t\tconst author =\n\t\t\t\t\t\t\tdisplayInfo?.fullName ||\n\t\t\t\t\t\t\tdisplayInfo?.personName ||\n\t\t\t\t\t\t\t`${this.translateService.instant(\"CHAT.SELLER\")} of ${chatInfo.offer?.title}`;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...chatInfo,\n\t\t\t\t\t\t\tdisplayInfo: {\n\t\t\t\t\t\t\t\t...displayInfo,\n\t\t\t\t\t\t\t\trole: displayInfoOf,\n\t\t\t\t\t\t\t\tauthor,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic getMessages() {\n\t\tconst user$ = this._authService.getUser();\n\t\tconst chat$ = this._activatedRoute.paramMap.pipe(\n\t\t\tmap((paramMap) => paramMap.get(\"id\")),\n\t\t\tswitchMap((id) => this._chatService.getChatById(id))\n\t\t);\n\n\t\treturn combineLatest([user$, chat$]).pipe(\n\t\t\tfilter(([user, chat]) => !!user && !!chat),\n\t\t\tswitchMap(([user, chat]) =>\n\t\t\t\tthis._messagesHistory$.pipe(\n\t\t\t\t\ttap(() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.chatContainer.nativeElement.scrollTop = this.chatContainer.nativeElement.scrollHeight;\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}),\n\t\t\t\t\tmap((messages) =>\n\t\t\t\t\t\tmessages.map((message: { author: any; }) => {\n\t\t\t\t\t\t\tconst dispayInfoOf =\n\t\t\t\t\t\t\t\tchat.seller?._id === message?.author\n\t\t\t\t\t\t\t\t\t? this.translateService.instant(\"CHAT.SELLER\")\n\t\t\t\t\t\t\t\t\t: this.translateService.instant(\"CHAT.BUYER\");\n\t\t\t\t\t\t\tconst displayInfo =\n\t\t\t\t\t\t\t\tdispayInfoOf === this.translateService.instant(\"CHAT.SELLER\") ? chat.offer?.contact : chat.buyer;\n\t\t\t\t\t\t\tconst author = displayInfo?.fullName || displayInfo?.personName || chat.seller.fullName;\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...message,\n\t\t\t\t\t\t\t\tcontact: {\n\t\t\t\t\t\t\t\t\t...displayInfo,\n\t\t\t\t\t\t\t\t\tauthor,\n\t\t\t\t\t\t\t\t\trole: displayInfo,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n\n\tpublic enterPressed(event: { preventDefault: () => void; }) {\n\t\tthis.sendMessage(this.formGroup.get(\"message\").value);\n\t\tevent.preventDefault();\n\t}\n\n\tpublic async sendMessage(body: any) {\n\t\tif (!body) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.chatInfo$.pipe(untilDestroyed(this)).subscribe((chatInfo) => {\n\t\t\tconst user = this._usersService.getUser();\n\t\t\tconst rfqId = typeof chatInfo.rfq === \"string\" ? chatInfo.rfq : chatInfo.rfq._id;\n\t\t\tthis._socket.emit(\"message\", {\n\t\t\t\ttype: \"text\",\n\t\t\t\tbody,\n\t\t\t\tuserId: user._id === chatInfo.buyer?._id ? chatInfo.seller._id : chatInfo.buyer?._id,\n\t\t\t\trfqId,\n\t\t\t\ttypeRoom: \"rfq\",\n\t\t\t});\n\t\t});\n\n\t\tthis.formGroup.get(\"message\").reset();\n\t}\n\n\tpublic subscribeOnMessage() {\n\t\treturn this._socket.on(\"message\", (message: any) => {\n\t\t\tconst history = this._messagesHistoryBehaviourSubject.getValue();\n\t\t\tthis._messagesHistoryBehaviourSubject.next([...history, message]);\n\t\t});\n\t}\n\n\tpublic subscribeOnChatInfo() {\n\t\treturn this._socket.on(\"chat_info\", (chatInfo: { unreadMessagesCount: number; }) => {\n\t\t\tthis._socketService.readMessages(chatInfo.unreadMessagesCount);\n\t\t\tthis._chatInfoBehaviourSubject.next(chatInfo);\n\t\t});\n\t}\n\n\tpublic subscribeOnMessageHistory() {\n\t\treturn this._socket.on(\"message_history\", (message_history: any) => {\n\t\t\tthis._messagesHistoryBehaviourSubject.next(message_history);\n\t\t});\n\t}\n\n\topenConnection(token: any) {\n\t\tif (this._socket) {\n\t\t\tthis._socket.disconnect();\n\t\t}\n\n\t\tthis._socket = io(environment.apiUrl, {\n\t\t\tpath: \"/chat\",\n\t\t\tauth: {\n\t\t\t\ttoken,\n\t\t\t},\n\t\t});\n\t}\n\n\tngOnInit() {\n\t\tconst token$ = this._usersService.getToken$();\n\t\tconst user$ = this._usersService.getUser$();\n\t\tconst chat$ = this._activatedRoute.paramMap.pipe(\n\t\t\tmap((paramMap) => paramMap.get(\"id\")),\n\t\t\tswitchMap((id) => this._chatService.getChatById(id))\n\t\t);\n\n\t\tcombineLatest([chat$, token$, user$])\n\t\t\t.pipe(untilDestroyed(this))\n\t\t\t.subscribe(([chat, token, user]: any) => {\n\t\t\t\tconst buyer = Array.isArray(chat.buyer) ? chat.buyer[0] : chat.buyer;\n\t\t\t\tconst seller = Array.isArray(chat.seller) ? chat.seller[0] : chat.seller;\n\n\t\t\t\tthis.openConnection(token);\n\n\t\t\t\tthis.subscribeOnMessageHistory();\n\t\t\t\tthis.subscribeOnChatInfo();\n\t\t\t\tthis.subscribeOnMessage();\n\n\t\t\t\tconst role = user._id === buyer?._id ? \"buyer\" : \"seller\";\n\t\t\t\tconst contactTo = role === \"seller\" ? buyer : seller;\n\n\t\t\t\tthis.displayContactsRequested = chat.contactsRequested && !this.displayContactsOpened;\n\t\t\t\tthis.displayRequestContacts =\n\t\t\t\t\trole === \"buyer\" &&\n\t\t\t\t\t!this.displayContactsOpened &&\n\t\t\t\t\t!this.displayContactsRequested &&\n\t\t\t\t\t(!chat.offer.visibility.email || !chat.offer.visibility.phone);\n\t\t\t\tthis.displayOpenContacts = role === \"seller\" && !this.displayContactsOpened && chat.contactsRequested;\n\t\t\t\tthis.displayCloseContacts = role === \"seller\" && !this.displayContactsOpened && chat.contactsRequested;\n\n\t\t\t\tthis.chat = chat;\n\t\t\t\tthis._socket.emit(\"start_chat\", {\n\t\t\t\t\tuserId: contactTo?._id,\n\t\t\t\t\trfqId: chat.rfq,\n\t\t\t\t\ttypeRoom: \"rfq\",\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tpublic getDestination(): string {\n\t\treturn this.rfqInfo?.rfq?.destination?.to ? countryList.getName(this.rfqInfo?.rfq?.destination?.to) : \"\";\n\t}\n\n\tpublic ngOnDestroy() {\n\t\tif (this._socket) {\n\t\t\tthis._socket.disconnect();\n\t\t}\n\t}\n}\n","<div class=\"client-profile-chat-wrapper\">\n\t<div class=\"rfq-info\">\n\t\t<h2>RFQ: {{ rfqInfo?.offerTitle }}</h2>\n\t\t<div class=\"rfq-params\">\n\t\t\t<span>Destination to: {{ getDestination() }}</span>\n\t\t</div>\n\t</div>\n\t<div class=\"client-profile-chat\" *ngIf=\"chatInfo$ | async as chatInfo\">\n\t\t<form\n\t\t\t(keydown.enter)=\"enterPressed($event)\"\n\t\t\t[formGroup]=\"formGroup\"\n\t\t\t(ngSubmit)=\"sendMessage(formGroup.get('message').value)\"\n\t\t\tclass=\"client-profile-chat-container\">\n\t\t\t<p class=\"client-profile-chat-started\">{{ \"CHAT.CHAT_STARTED\" | translate }}: {{ chatInfo.createdAt | date }}</p>\n\n\t\t\t<div class=\"client-profile-chat-messages\">\n\t\t\t\t<ul class=\"client-profile-chat-messages-list\" #chatContainer>\n\t\t\t\t\t<li *ngFor=\"let message of messages$ | async\" class=\"client-profile-chat-messages-list-item\">\n\t\t\t\t\t\t<p class=\"client-profile-chat-messages-list-item-info\">\n\t\t\t\t\t\t\t<span class=\"client-profile-chat-messages-list-item-from\">{{ message.contact.author }}</span>\n\t\t\t\t\t\t\t<span class=\"client-profile-chat-messages-list-item-date\">{{ message.createdAt | date }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class=\"client-profile-chat-messages-list-item-message\">\n\t\t\t\t\t\t\t{{ message.body }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li *ngIf=\"!(messages$ | async)?.length\" class=\"client-profile-chat-no-messages\">\n\t\t\t\t\t\t{{ \"CHAT.NO_MESSAGES\" | translate }}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<textarea\n\t\t\t\tformControlName=\"message\"\n\t\t\t\t[placeholder]=\"'PLACEHOLDERS.ENTER_TO_SEND' | translate\"\n\t\t\t\tclass=\"client-profile-chat-textarea\"\n\t\t\t\trows=\"5\"></textarea>\n\t\t\t<div class=\"client-profile-chat-actions\">\n\t\t\t\t<div class=\"chat-actions-item-icons\">\n\t\t\t\t\t<div class=\"icon-wrapper\">\n\t\t\t\t\t\t<svg width=\"12\" height=\"16\" viewBox=\"0 0 12 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td=\"M10.3257 7.99998C11.3462 7.1743 12 5.9121 12 4.49997C12 2.01855 9.98142 0\n\t\t\t\t\t\t7.49997 0H0V2.00001H0.999989V14H0V16H7.5C9.98145 16 12 13.9815 12 11.5C12 10.0879\n\t\t\t\t\t\t11.3462 8.82566 10.3257 7.99998ZM7.49997 14H2.99997V9.00001H7.49997C8.8784 9.00001\n\t\t\t\t\t\t9.99996 10.1216 9.99996 11.5C9.99996 12.8784 8.8784 14 7.49997 14ZM7.49997\n\t\t\t\t\t\t6.99999H2.99997V2.00001H7.49997C8.8784 2.00001 9.99996 3.1216 9.99996\n\t\t\t\t\t\t4.5C9.99996 5.87841 8.8784 6.99999 7.49997 6.99999Z\"\n\t\t\t\t\t\t\t\tfill=\"#9FA4BB\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"icon-wrapper\">\n\t\t\t\t\t\t<svg width=\"12\" height=\"16\" viewBox=\"0 0 12 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\td=\"M12 2.00001V0H5.99997V2.00001H7.48355L2.34073 14H0V16H6V14H4.51642L9.65921 2.00001H12Z\"\n\t\t\t\t\t\t\t\tfill=\"#9FA4BB\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<rect width=\"32\" height=\"32\" rx=\"4\" fill=\"white\" />\n\t\t\t\t\t\t<g clip-path=\"url(#clip0_1026_5781)\">\n\t\t\t\t\t\t\t<path d=\"M11.585 15.1309H24.1564V17.4166H11.585V15.1309Z\" fill=\"#9FA4BB\" />\n\t\t\t\t\t\t\t<path d=\"M11.585 21.0405H24.1564V23.3263H11.585V21.0405Z\" fill=\"#9FA4BB\" />\n\t\t\t\t\t\t\t<path d=\"M11.585 9.22119H24.1564V11.5069H11.585V9.22119Z\" fill=\"#9FA4BB\" />\n\t\t\t\t\t\t\t<path d=\"M8.03906 9.22119H10.3248V11.5069H8.03906V9.22119Z\" fill=\"#9FA4BB\" />\n\t\t\t\t\t\t\t<path d=\"M8.03906 15.1309H10.3248V17.4166H8.03906V15.1309Z\" fill=\"#9FA4BB\" />\n\t\t\t\t\t\t\t<path d=\"M8.03906 21.0405H10.3248V23.3263H8.03906V21.0405Z\" fill=\"#9FA4BB\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t<clipPath id=\"clip0_1026_5781\">\n\t\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(8 8)\" />\n\t\t\t\t\t\t\t</clipPath>\n\t\t\t\t\t\t</defs>\n\t\t\t\t\t</svg>\n\n\t\t\t\t\t<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<rect width=\"32\" height=\"32\" rx=\"4\" fill=\"white\" />\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M16 8C11.5817 8 8 11.5817 8 16C8 20.4183 11.5817 24 16 24C20.4183 24 24 20.4183 24 16C23.9953 11.5837 20.4163 8.00472 16 8ZM16 22.8571C12.2129 22.8571 9.14285 19.7871 9.14285 16C9.14285 12.2129 12.2129 9.14285 16 9.14285C19.7871 9.14285 22.8571 12.2129 22.8571 16C22.853 19.7854 19.7854 22.853 16 22.8571Z\"\n\t\t\t\t\t\t\tfill=\"#9FA4BB\"\n\t\t\t\t\t\t\tstroke=\"#9FA4BB\"\n\t\t\t\t\t\t\tstroke-width=\"0.6\" />\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M13.1428 16C13.774 16 14.2857 15.4884 14.2857 14.8572C14.2857 14.226 13.774 13.7144 13.1428 13.7144C12.5117 13.7144 12 14.226 12 14.8572C12 15.4884 12.5117 16 13.1428 16Z\"\n\t\t\t\t\t\t\tfill=\"#9FA4BB\"\n\t\t\t\t\t\t\tstroke=\"#9FA4BB\"\n\t\t\t\t\t\t\tstroke-width=\"0.6\" />\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M18.8572 16C19.4884 16 20 15.4884 20 14.8572C20 14.226 19.4884 13.7144 18.8572 13.7144C18.226 13.7144 17.7144 14.226 17.7144 14.8572C17.7144 15.4884 18.226 16 18.8572 16Z\"\n\t\t\t\t\t\t\tfill=\"#9FA4BB\"\n\t\t\t\t\t\t\tstroke=\"#9FA4BB\"\n\t\t\t\t\t\t\tstroke-width=\"0.6\" />\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M18.1881 17.9314C17.9994 17.6784 17.6413 17.6264 17.3884 17.8152C17.3775 17.8233 17.3669 17.8319 17.3565 17.8408C16.5484 18.431 15.4514 18.431 14.6433 17.8408C14.4046 17.6344 14.0437 17.6607 13.8374 17.8995C13.631 18.1382 13.6573 18.4991 13.896 18.7055C13.9063 18.7144 13.917 18.7229 13.9279 18.7311C15.1511 19.666 16.8488 19.666 18.0719 18.7311C18.3249 18.5423 18.3769 18.1843 18.1881 17.9314Z\"\n\t\t\t\t\t\t\tfill=\"#9FA4BB\"\n\t\t\t\t\t\t\tstroke=\"#9FA4BB\"\n\t\t\t\t\t\t\tstroke-width=\"0.6\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"chat-actions-item-buttons\">\n\t\t\t\t\t<div class=\"chat-actions-item-block\">\n\t\t\t\t\t\t<b2b-ngx-file [isPhoto]=\"false\" label=\"\"></b2b-ngx-file>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"chat-actions-item-block\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tb2bNgxButton\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t[theme]=\"b2bNgxButtonThemeEnum.BACKGROUND_BLACK\"\n\t\t\t\t\t\t\tclass=\"client-profile-chat-actions-send-button\">\n\t\t\t\t\t\t\t<span>{{ \"BUTTONS.SEND\" | translate }}</span>\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\tclass=\"client-profile-chat-actions-send-button-icon\"\n\t\t\t\t\t\t\t\twidth=\"16\"\n\t\t\t\t\t\t\t\theight=\"16\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\td=\"M15.832 7.26899C15.6676 6.92953 15.3935 6.65544 15.0541 6.49106L2.407 0.371217C1.57387\n\t\t\t\t\t\t -0.0324159 0.571319 0.315791 0.167686 1.14892C-0.0379446 1.57341 -0.0552305 2.06491 0.120117\n\t\t\t\t\t\t  2.50279L2.31929 7.99965L0.120117 13.4971C-0.222426 14.3594 0.198984 15.3362 1.06135 15.6787C1.25634\n\t\t\t\t\t\t  15.7562 1.46413 15.7964 1.67395 15.7974C1.92781 15.7974 2.17839 15.7401 2.407 15.6298L15.054\n\t\t\t\t\t\t  9.50824C15.8872 9.10471 16.2355 8.10216 15.832 7.26899ZM1.92034 14.6224C1.64259 14.7568 1.30843 14.6407\n\t\t\t\t\t\t  1.17397 14.3629C1.10545 14.2214 1.09975 14.0576 1.15822 13.9116L3.29929 8.55837H14.4523L1.92034 14.6224ZM3.29932\n\t\t\t\t\t\t  7.4409L1.15826 2.08763C1.06914 1.87424 1.12447 1.62782 1.29625 1.47303C1.46253 1.31101 1.7136 1.273 1.92034\n\t\t\t\t\t\t  1.37861L14.4523 7.4409H3.29932Z\"\n\t\t\t\t\t\t\t\t\tfill=\"#9FA4BB\" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\n\t\t<div class=\"client-profile-chat-buyer-info\">\n\t\t\t<div class=\"buyer-info-profile\">\n\t\t\t\t<div class=\"buyer-info-title\">{{ chatInfo.displayInfo.role }} info</div>\n\t\t\t\t<div class=\"buyer-info-header\">\n\t\t\t\t\t<div class=\"buyer-info-header-name\">{{ chatInfo.displayInfo.fullName }}</div>\n\t\t\t\t</div>\n\t\t\t\t<!--\t\t\t<div class=\"buyer-info-country\">from </div>-->\n\t\t\t\t<div class=\"buyer-info-block\">\n\t\t\t\t\t<div class=\"subtitle\">Email</div>\n\t\t\t\t\t<div class=\"subtext\">{{ chatInfo.displayInfo.email }}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"buyer-info-block\">\n\t\t\t\t\t<div class=\"subtitle\">Phone</div>\n\t\t\t\t\t<div class=\"subtext\">{{ chatInfo.displayInfo.phone.e164Number }}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"buyer-info-product\">\n\t\t\t\t<div class=\"buyer-info-product-title\">Media</div>\n\t\t\t</div>\n\t\t\t<div class=\"buyer-info-warning\">\n\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M7.119 1.77272C7.49724 1.07443 8.49934 1.07443 8.87758 1.77272L14.9665 13.0137C15.3274 13.68 14.8449 14.49 14.0872 14.49H1.90941C1.15164 14.49 0.669209 13.68 1.03012 13.0137L7.119 1.77272Z\"\n\t\t\t\t\t\tstroke=\"#9FA4BB\"\n\t\t\t\t\t\tstroke-width=\"1.6\"\n\t\t\t\t\t\tstroke-linejoin=\"round\" />\n\t\t\t\t</svg>\n\t\t\t\t<div class=\"buyer-info-warning-link\">\n\t\t\t\t\t<a href=\"\">Report this buyer</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<ng-template #userDeleted>\n\t<p class=\"user-deleted\">\n\t\t{{ \"CHAT.USER_DELETED\" | translate }}\n\t</p>\n</ng-template>\n","import { Injectable } from \"@angular/core\";\nimport { map } from \"rxjs/operators\";\nimport { ApiService } from \"../../../core/services/api/api.service\";\n\n@Injectable({\n\tprovidedIn: \"root\",\n})\nexport class ChatService {\n\tconstructor(private readonly _apiService: ApiService) {}\n\n\tpublic getChatById(id: string) {\n\t\treturn this._apiService.get(`my/chat/${id}`).pipe(\n\t\t\tmap((chat: any) => (Array.isArray(chat) ? chat[0] : chat)),\n\t\t\tmap((chat) => ({\n\t\t\t\t...chat,\n\t\t\t\toffer: Array.isArray(chat.offer) ? chat.offer[0] : chat.offer,\n\t\t\t}))\n\t\t);\n\t}\n}\n"],"names":["ChangeDetectorRef","ElementRef","B2bNgxButtonThemeEnum","UntilDestroy","untilDestroyed","BehaviorSubject","combineLatest","filter","map","switchMap","tap","io","environment","countryList","i0","ctx_r10","value","ClientChatComponent","constructor","_activatedRoute","_chatService","_chatsService","_usersService","_offersService","_formBuilder","_authService","_socketService","_hotToastService","changeDetectorRef","b2bNgxLinkService","translateService","b2bNgxButtonThemeEnum","formGroup","group","message","_messagesHistoryBehaviourSubject","_messagesHistory$","asObservable","_messageBehaviourSubject","_message$","_chatInfoBehaviourSubject","_chatInfo$","chatInfo$","getChatInfo","messages$","getMessages","getUser","pipe","user","chatInfo","buyerContacts","buyer","rfqInfo","buyerStatus","isActive","displayInfoOf","_a","_id","instant","displayInfo","seller","author","fullName","personName","offer","_b","title","role","user$","chat$","paramMap","get","id","getChatById","chat","setTimeout","chatContainer","nativeElement","scrollTop","scrollHeight","messages","dispayInfoOf","contact","enterPressed","event","sendMessage","preventDefault","body","subscribe","rfqId","rfq","_socket","emit","type","userId","typeRoom","reset","subscribeOnMessage","on","history","getValue","next","subscribeOnChatInfo","readMessages","unreadMessagesCount","subscribeOnMessageHistory","message_history","openConnection","token","disconnect","apiUrl","path","auth","ngOnInit","token$","getToken$","getUser$","Array","isArray","contactTo","displayContactsRequested","contactsRequested","displayContactsOpened","displayRequestContacts","visibility","email","phone","displayOpenContacts","displayCloseContacts","getDestination","destination","_c","to","getName","_d","_e","_f","ngOnDestroy","selectors","viewQuery"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}