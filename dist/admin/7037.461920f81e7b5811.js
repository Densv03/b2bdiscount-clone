"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7037],{35716:(ot,u,r)=>{r.r(u),r.d(u,{AdminManagerModule:()=>it});var g=r(96814),p=r(44112),_=r(97582),C=r(48530),b=r(66027),m=r(56223),h=r(51791),x=r(24411),M=r(67028),t=r(65879),N=r(70342),A=r(58133),T=r(87588);let y=(()=>{class e{constructor(n){this.apiService=n}addManager(n,o,i){return this.apiService.post("managers/add-new-manager",{firstName:n,lastName:o,url:i})}getUsersByRefId(n){return this.apiService.get(`statistics/get-users-list?refId=${n}`)}deleteManagerById(n){return this.apiService.delete(`managers/delete-manager?refId=${n}`)}getManagers(n){return this.apiService.get(n?`managers/get-managers?refId=${n}`:"managers/get-managers")}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(T.s))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Z=r(17856),v=r(83498),l=r(25313),I=r(53803);function U(e,a){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Ref Id"),t.qZA())}function B(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"td",27),t.NdJ("click",function(){const d=t.CHM(n).$implicit,s=t.oxw();return t.KtG(s.copyLink(d.link))}),t._uU(1),t.qZA()}if(2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.refId," ")}}function D(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"First Name"),t.qZA())}function k(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(n.firstName)}}function O(e,a){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Last Name"),t.qZA())}function L(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Oqu(n.lastName)}}function R(e,a){1&e&&t._UZ(0,"th",28)}function Y(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"td",29)(1,"button",31),t.NdJ("click",function(){const d=t.CHM(n).$implicit,s=t.oxw();return t.KtG(s.deleteManager(d.refId))}),t._uU(2," Delete "),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("theme",n.b2bNgxButtonThemeEnum.BACKGROUND_RED)}}function J(e,a){1&e&&t._UZ(0,"tr",32)}function P(e,a){1&e&&t._UZ(0,"tr",33)}function Q(e,a){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij("Total count: ",n.userList.length,"")}}function S(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Email"),t.qZA())}function w(e,a){1&e&&t._UZ(0,"img",41),2&e&&t.Q6J("name","check-blue")}function E(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.YNc(2,w,1,1,"img",40),t.qZA()),2&e){const n=a.$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",n.email," "),t.xp6(1),t.Q6J("ngIf",(null==n.products?null:n.products.length)&&o.isApproved(n.products))}}function G(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1," Registration type "),t.qZA())}function j(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n.typeRegistration," ")}}function H(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Country"),t.qZA())}function K(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=a.$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.getCountryNameByCode(null==n.userData[0]||null==n.userData[0].phone?null:n.userData[0].phone.countryCode)," ")}}function q(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1," Registration date "),t.qZA())}function $(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==n.userData[0]?null:n.userData[0].createdAt,"MM/d/yy")," ")}}function z(e,a){1&e&&(t.TgZ(0,"th",28),t._uU(1," Company name "),t.qZA())}function F(e,a){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",null==n||null==n.userData[0]?null:n.userData[0].company," ")}}function W(e,a){1&e&&t._UZ(0,"tr",32)}function X(e,a){1&e&&t._UZ(0,"tr",33)}function V(e,a){if(1&e&&(t.TgZ(0,"table",34),t.ynx(1,35),t.YNc(2,S,2,0,"th",15),t.YNc(3,E,3,2,"td",16),t.BQk(),t.ynx(4,36),t.YNc(5,G,2,0,"th",15),t.YNc(6,j,2,1,"td",16),t.BQk(),t.ynx(7,37),t.YNc(8,H,2,0,"th",15),t.YNc(9,K,2,1,"td",16),t.BQk(),t.ynx(10,38),t.YNc(11,q,2,0,"th",15),t.YNc(12,$,3,4,"td",16),t.BQk(),t.ynx(13,39),t.YNc(14,z,2,0,"th",15),t.YNc(15,F,2,1,"td",16),t.BQk(),t.YNc(16,W,1,0,"tr",20),t.YNc(17,X,1,0,"tr",21),t.qZA()),2&e){const n=t.oxw();t.Q6J("dataSource",n.userList),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumnsUsers),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumnsUsers)}}const tt=[{path:"",component:(()=>{let e=class c{constructor(n,o,i,d,s){this.formBuilder=n,this.clipboard=o,this.hotToastService=i,this.adminManagerService=d,this.changeDetectionRef=s,this.b2bNgxInputThemeEnum=b.T,this.b2bNgxButtonThemeEnum=C.n,this.managersList=[],this.userList=[],this.displayedColumnsManagers=["refId","firstName","lastName","delete"],this.displayedColumnsUsers=["email","registrationType","country","registrationDate","company"],this.generatedLink="",this.formGroup=this.formBuilder.group({firstName:[null,m.kI.required],lastName:[null,m.kI.required],url:[null,m.kI.required]}),this.usersByRefIdGroup=this.formBuilder.group({refId:[null,[m.kI.required,(0,x.X)()]]})}ngOnInit(){this.updateManagerList()}generateLink(n){n.valid&&(this.adminManagerService.addManager(n.value.firstName,n.value.lastName,n.value.url).pipe((0,h.t)(this)).subscribe(o=>{this.generatedLink=o.link,this.updateManagerList(),this.changeDetectionRef.detectChanges()}),this.formGroup.reset(),this.updateManagerList())}getUsersByRefId(n){n.valid&&this.adminManagerService.getUsersByRefId(parseInt(n.value.refId)).subscribe(o=>{o.length||this.hotToastService.show("There's no users found with current refId",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0}),this.userList=o[0].users,this.changeDetectionRef.detectChanges()})}isApproved(n){return n.some(o=>o.productApproved)}copyLink(n=this.generatedLink){this.clipboard.copy(n),this.hotToastService.show("Link copied to clipboard",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0})}deleteManager(n){this.adminManagerService.deleteManagerById(n).subscribe(()=>this.updateManagerList())}getCountryNameByCode(n){return n?(0,M.oY)(n):""}updateManagerList(){this.adminManagerService.getManagers().subscribe(n=>{this.managersList=n,this.changeDetectionRef.detectChanges()})}static#t=this.\u0275fac=function(o){return new(o||c)(t.Y36(m.qu),t.Y36(N.TU),t.Y36(A.jE),t.Y36(y),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["b2b-admin-manager"]],decls:35,vars:17,consts:[[1,"admin-manager"],[1,"admin-manager__form-group",3,"formGroup","ngSubmit"],[1,"admin-manager__form-group__container"],["type","text","b2bNgxInput","","formControlName","firstName","placeholder","First name","label","Enter first name",3,"theme"],["type","text","b2bNgxInput","","formControlName","lastName","placeholder","Second name","label","Enter second name",3,"theme"],["type","text","b2bNgxInput","","formControlName","url","placeholder","https://b2b.discount/blog","label","Enter the link for which the ref will be generated",1,"mb-3",3,"theme"],["b2bNgxButton","",3,"theme"],[1,"admin-manager__generated-link"],["b2bNgxInput","","disabled","","placeholder","Here will be generated link",3,"ngModel","theme","ngModelChange"],["b2bNgxButton","",3,"theme","disabled","click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","refId"],["class","th-id","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","firstName"],["class","th-firstName","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["class","th-lastName","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"admin-manager__generated-link",3,"formGroup","ngSubmit"],["type","text","b2bNgxInput","","formControlName","refId","placeholder","Ref id",3,"theme"],[4,"ngIf"],["mat-table","","class","mat-elevation-z8 w-100",3,"dataSource",4,"ngIf"],["mat-header-cell","",1,"th-id"],["mat-cell","",3,"click"],["mat-header-cell","",1,"th-firstName"],["mat-cell",""],["mat-header-cell","",1,"th-lastName"],["b2bNgxButton","",1,"delete-btn",3,"theme","click"],["mat-header-row",""],["mat-row",""],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","email"],["matColumnDef","registrationType"],["matColumnDef","country"],["matColumnDef","registrationDate"],["matColumnDef","company"],["b2bNgxIcon","",3,"name",4,"ngIf"],["b2bNgxIcon","",3,"name"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return i.generateLink(i.formGroup)}),t.TgZ(2,"div",2)(3,"div"),t._UZ(4,"input",3),t.qZA(),t.TgZ(5,"div"),t._UZ(6,"input",4),t.qZA()(),t._UZ(7,"input",5),t.TgZ(8,"button",6),t._uU(9," Generate Link "),t.qZA()(),t.TgZ(10,"div",7)(11,"input",8),t.NdJ("ngModelChange",function(s){return i.generatedLink=s}),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return i.copyLink()}),t._uU(13," Copy URL "),t.qZA()(),t.TgZ(14,"table",10),t.ynx(15,11),t.YNc(16,U,2,0,"th",12),t.YNc(17,B,2,1,"td",13),t.BQk(),t.ynx(18,14),t.YNc(19,D,2,0,"th",15),t.YNc(20,k,2,1,"td",16),t.BQk(),t.ynx(21,17),t.YNc(22,O,2,0,"th",18),t.YNc(23,L,2,1,"td",16),t.BQk(),t.ynx(24,19),t.YNc(25,R,1,0,"th",15),t.YNc(26,Y,3,1,"td",16),t.BQk(),t.YNc(27,J,1,0,"tr",20),t.YNc(28,P,1,0,"tr",21),t.qZA(),t.TgZ(29,"form",22),t.NdJ("ngSubmit",function(){return i.getUsersByRefId(i.usersByRefIdGroup)}),t._UZ(30,"input",23),t.TgZ(31,"button",6),t._uU(32," Submit "),t.qZA()(),t.YNc(33,Q,2,1,"div",24),t.YNc(34,V,18,3,"table",25),t.qZA()),2&o&&(t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(3),t.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(2),t.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(1),t.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(1),t.Q6J("theme",i.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.xp6(3),t.Q6J("ngModel",i.generatedLink)("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(1),t.Q6J("theme",i.b2bNgxButtonThemeEnum.BACKGROUND_BLACK)("disabled",!i.generatedLink),t.xp6(2),t.Q6J("dataSource",i.managersList),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayedColumnsManagers),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumnsManagers),t.xp6(1),t.Q6J("formGroup",i.usersByRefIdGroup),t.xp6(1),t.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(1),t.Q6J("theme",i.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.xp6(2),t.Q6J("ngIf",i.userList.length),t.xp6(1),t.Q6J("ngIf",null==i.userList?null:i.userList.length))},dependencies:[g.O5,Z.k,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,v.f,m.On,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,I.p,g.uU],styles:[".admin-manager[_ngcontent-%COMP%]{padding:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:49%}.admin-manager__form-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px}.admin-manager__generated-link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-manager__generated-link[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%}.admin-manager__generated-link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:15%}[_nghost-%COMP%]  table{width:65%;margin-top:50px;background-color:#fff}[_nghost-%COMP%]  th.mat-mdc-header-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  th.mat-mdc-header-cell:last-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:last-of-type{padding-right:0}[_nghost-%COMP%]  .th-id{width:10%;text-align:center;background-color:#000;color:#fff;padding-top:18px}[_nghost-%COMP%]  .th-firstName{text-align:center;padding-left:0}[_nghost-%COMP%]  .th-lastName{text-align:center;padding-left:0}[_nghost-%COMP%]  .cdk-column-refId{text-align:center;background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:10%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8;cursor:pointer}[_nghost-%COMP%]  .cdk-column-lastName, [_nghost-%COMP%]  .cdk-column-email, [_nghost-%COMP%]  .cdk-column-registrationType, [_nghost-%COMP%]  .cdk-column-firstName, [_nghost-%COMP%]  .cdk-column-registrationDate, [_nghost-%COMP%]  .cdk-column-country, [_nghost-%COMP%]  .cdk-column-company{background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:40%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .cdk-column-email>img{width:20px}[_nghost-%COMP%]  .cdk-column-company{width:50%;padding:5px}[_nghost-%COMP%]  .cdk-column-delete{background-color:#fff;height:65px;width:10%;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .delete-btn{width:100%;height:100%;transform:translateY(-17%)}"]})};return e=(0,_.gn)([(0,h.c)()],e),e})()}];let et=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(tt),p.Bz]})}return e})();var f=r(82242),nt=r(43377),at=r(98653);let it=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[g.ez,et,f.r,m.UX,nt.l,m.u5,f.r,l.p0,at.w]})}return e})()}}]);