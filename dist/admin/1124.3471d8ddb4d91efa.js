"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1124],{61124:(P,d,o)=>{o.r(d),o.d(d,{AdminCompaniesModule:()=>Y});var a=o(60177),u=o(52168),f=o(79601),p=o(96354),t=o(54438),m=o(89417),s=o(84412),g=o(61594),h=o(40735);let C=(()=>{class e{constructor(n){this.apiService=n,this.adminCompaniesListSource=new s.t(null),this.adminCompaniesCountSource=new s.t(0)}get adminCompaniesList$(){return this.adminCompaniesListSource.asObservable()}get adminCompaniesCount$(){return this.adminCompaniesCountSource.asObservable()}updateAdminCompaniesList(n,i){this.getAdminCompaniesList(n,i).pipe((0,g.$)()).subscribe(l=>{this.adminCompaniesCountSource.next(l.totalCount),this.adminCompaniesListSource.next(l.companies)})}getAdminCompaniesList(n,i){return this.apiService.get("products/get-company",{params:{...n,...i}})}static#t=this.\u0275fac=function(i){return new(i||e)(t.KVO(h.G))};static#n=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var x=o(36529),b=o(2196),c=o(9159),y=o(25232),D=o(39090);function v(e,r){1&e&&(t.j41(0,"th",17),t.EFF(1,"Name"),t.k0s())}function F(e,r){if(1&e&&(t.j41(0,"td",18),t.EFF(1),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.JRh(n.companyName)}}function O(e,r){1&e&&(t.j41(0,"th",17),t.EFF(1,"Chats count"),t.k0s())}function N(e,r){if(1&e&&(t.j41(0,"td",18),t.EFF(1),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.JRh(n.countChats)}}function E(e,r){1&e&&(t.j41(0,"th",17),t.EFF(1,"Products count"),t.k0s())}function A(e,r){if(1&e&&(t.j41(0,"td",18),t.EFF(1),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.JRh(n.countProducts)}}function M(e,r){1&e&&(t.j41(0,"th",17),t.EFF(1,"Registration date"),t.k0s())}function R(e,r){if(1&e&&(t.j41(0,"td",18),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.JRh(t.bMT(2,1,n.createdAt))}}function T(e,r){1&e&&t.nrm(0,"tr",19)}function j(e,r){1&e&&t.nrm(0,"tr",20)}function $(e,r){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"div",6),t.EFF(2),t.k0s(),t.j41(3,"table",7),t.nI1(4,"async"),t.qex(5,8),t.DNE(6,v,2,0,"th",9)(7,F,2,1,"td",10),t.bVm(),t.qex(8,11),t.DNE(9,O,2,0,"th",9)(10,N,2,1,"td",10),t.bVm(),t.qex(11,12),t.DNE(12,E,2,0,"th",9)(13,A,2,1,"td",10),t.bVm(),t.qex(14,13),t.DNE(15,M,2,0,"th",9)(16,R,3,3,"td",10),t.bVm(),t.DNE(17,T,1,0,"tr",14)(18,j,1,0,"tr",15),t.k0s(),t.j41(19,"b2b-ngx-pagination",16),t.bIt("togglePageNumber",function(l){t.eBV(n);const _=t.XpG();return t.Njj(_.togglePage(l))}),t.k0s(),t.bVm()}if(2&e){const n=r.ngIf,i=t.XpG();t.R7$(2),t.SpI(" Total companies count: ",n," "),t.R7$(),t.Y8G("dataSource",t.bMT(4,6,i.adminCompaniesList$)),t.R7$(14),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(),t.Y8G("length",n)("perPage",i.productsLimit)}}function I(e,r){1&e&&(t.j41(0,"h3"),t.EFF(1,"No companies found"),t.k0s())}const S=[{path:"",component:(()=>{class e{constructor(n,i){this.fb=n,this.adminCompaniesService=i,this.b2bNgxInputThemeEnum=f.Q,this.productsLimit=20,this.filtersForm=this.fb.group({q:null,registrationDate:this.fb.control({startDate:new Date((new Date).setFullYear((new Date).getFullYear()-1)).toISOString(),endDate:new Date(Date.now()).toISOString()}),country:[null]}),this.adminCompaniesCount$=this.adminCompaniesService.adminCompaniesCount$,this.adminCompaniesList$=this.adminCompaniesService.adminCompaniesList$,this.displayedColumns=["companyName","countChats","countProducts","createdAt"],this.currentFilters=null,this.filteredQueryObj={limit:this.productsLimit,offset:0}}ngOnInit(){this.updateCompaniesListOnFiltersChange(),this.filtersForm.get("registrationDate").updateValueAndValidity()}removeFalsyKeysFromObject(n){for(const i in n)n[i]||delete n[i];return n}updateCompaniesListOnFiltersChange(){this.filtersForm.valueChanges.pipe((0,p.T)(n=>{if(n.registrationDate.startDate){const i=new Date(n.registrationDate.startDate);n.registrationDate.startDate=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())).toISOString()}return n.registrationDate.endDate&&(n.registrationDate.endDate=new Date(n.registrationDate.endDate).toISOString()),n.q||delete n.q,n.active=!0,n.dateFrom=n.registrationDate.startDate,n.dateTo=n.registrationDate.endDate,delete n.registrationDate,n})).subscribe(n=>{this.onFiltersChange(),this.adminCompaniesService.updateAdminCompaniesList(this.filteredQueryObj,{...this.removeFalsyKeysFromObject(n)}),this.currentFilters=n})}togglePage(n){this.filteredQueryObj={...this.filteredQueryObj,offset:(n-1)*this.productsLimit},this.adminCompaniesService.updateAdminCompaniesList(this.filteredQueryObj,{...this.currentFilters})}onFiltersChange(){this.filteredQueryObj={limit:this.productsLimit,offset:0},this.currentFilters=null}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(m.ok),t.rXU(C))};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["b2b-admin-companies"]],decls:8,vars:8,consts:[["noCompanies",""],[3,"formGroup"],["type","text","b2bNgxInput","","placeholder","Enter company name","label","Company name","formControlName","q",1,"mb-3",3,"theme"],["b2bNgxInput","","ngxDaterangepickerMd","","label","Registration Time","type","text","placeholder","Select range of date","name","daterange","formControlName","registrationDate",1,"mb-3",3,"theme","showClearButton"],["formControlName","country","placeholder","Select Country"],[4,"ngIf","ngIfElse"],[1,"total-count"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4",3,"dataSource"],["matColumnDef","companyName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","countChats"],["matColumnDef","countProducts"],["matColumnDef","createdAt"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"togglePageNumber","length","perPage"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,l){if(1&i&&(t.j41(0,"form",1),t.nrm(1,"input",2)(2,"input",3)(3,"b2b-ngx-country-select",4),t.k0s(),t.DNE(4,$,20,8,"ng-container",5),t.nI1(5,"async"),t.DNE(6,I,2,0,"ng-template",null,0,t.C5r)),2&i){const _=t.sdS(7);t.Y8G("formGroup",l.filtersForm),t.R7$(),t.Y8G("theme",l.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",l.b2bNgxInputThemeEnum.BACKGROUND_WHITE)("showClearButton",!0),t.R7$(2),t.Y8G("ngIf",t.bMT(5,6,l.adminCompaniesCount$))("ngIfElse",_)}},dependencies:[a.bT,x.b,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,b.p,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,y.z,D.jR,a.Jj,a.vh],styles:["[_nghost-%COMP%]   .total-count[_ngcontent-%COMP%]{background:#fff;padding:15px;margin-top:25px}[_nghost-%COMP%]     th, [_nghost-%COMP%]     td{vertical-align:middle}"]})}return e})()}];let L=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#n=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[u.iI.forChild(S),u.iI]})}return e})();var B=o(42944),G=o(69388),w=o(24318),V=o(11058);let Y=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#n=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[a.MD,L,B.E,m.X1,G.O,w.F,c.tP,V.o,D.kF.forRoot()]})}return e})()},2196:(P,d,o)=>{o.d(d,{p:()=>p});var a=o(54438),u=o(60177);function f(t,m){if(1&t){const s=a.RV6();a.j41(0,"li",2),a.bIt("click",function(){const h=a.eBV(s).$implicit,C=a.XpG();return a.Njj(C.togglePage(h.value))}),a.EFF(1),a.k0s()}if(2&t){const s=m.$implicit,g=a.XpG();a.AVh("active",g.currentPage===s.label),a.R7$(),a.SpI(" ",s.label," ")}}let p=(()=>{class t{constructor(){this.currentPage=1,this.togglePageNumber=new a.bkB,this.currentPage=1,this.togglePage(1)}get options(){return this.length&&this.perPage?new Array(Math.ceil(this.length/this.perPage)).fill(null).map((h,C)=>({label:C+1,value:C+1})):[]}togglePage(s){s!==this.currentPage&&(this.currentPage=s,this.togglePageNumber.emit(s))}togglePrevPage(){1!==this.currentPage&&(this.currentPage=this.currentPage-1,this.togglePageNumber.emit(this.currentPage))}toggleNextPage(){this.currentPage!==this.options.length&&(this.currentPage=this.currentPage+1,this.togglePageNumber.emit(this.currentPage))}static#t=this.\u0275fac=function(g){return new(g||t)};static#n=this.\u0275cmp=a.VBU({type:t,selectors:[["b2b-ngx-pagination"]],inputs:{length:"length",perPage:"perPage",currentPage:"currentPage"},outputs:{togglePageNumber:"togglePageNumber"},decls:2,vars:1,consts:[[1,"ngx-pagination"],["class","ngx-pagination-item",3,"active","click",4,"ngFor","ngForOf"],[1,"ngx-pagination-item",3,"click"]],template:function(g,h){1&g&&(a.j41(0,"ul",0),a.DNE(1,f,2,3,"li",1),a.k0s()),2&g&&(a.R7$(),a.Y8G("ngForOf",h.options))},dependencies:[u.Sq],styles:["[_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#005dff;color:#fff}.ngx-pagination[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:24px;flex-wrap:wrap;row-gap:10px}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;margin:0 4px;border:1px solid #dfe8f5;cursor:pointer}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:hover:not(.active){background-color:#eff4fa}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:active{background:#fff}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:first-child{margin-left:0}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:last-child{margin-right:0}"],changeDetection:0})}return t})()},69388:(P,d,o)=>{o.d(d,{O:()=>f});var a=o(60177),u=o(54438);let f=(()=>{class p{static#t=this.\u0275fac=function(s){return new(s||p)};static#n=this.\u0275mod=u.$C({type:p});static#e=this.\u0275inj=u.G2t({imports:[a.MD]})}return p})()}}]);