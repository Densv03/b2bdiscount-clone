"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9087],{69087:(F,f,a)=>{a.r(f),a.d(f,{AdminLogisticModule:()=>Et});var m=a(38684),h=a(9063),_=a(35285),r=a(82575),p=a(49134),t=a(89985),d=a(7040),C=a(50442),y=a(22821),D=a(74725),E=a(87472),T=a(12819);function $(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",19),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.removeEmail(n))}),t.j41(1,"div",20),t.EFF(2),t.k0s(),t.j41(3,"button",21),t.EFF(4,"Delete"),t.k0s()()}if(2&o){const e=s.$implicit;t.R7$(2),t.JRh(e)}}function V(o,s){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"b2b-ngx-checkbox",22),t.bIt("checkboxChange",function(n){const c=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.setTransportType(n,c.value))}),t.EFF(2),t.k0s()()}if(2&o){const e=s.$implicit;t.R7$(),t.Y8G("checked",e.checked),t.R7$(),t.SpI(" ",e.label," ")}}let S=(()=>{class o{constructor(e,i){this.dialogData=e,this.dialogRef=i,this.transportTypes=["Sea","Air"].map(n=>({value:n,label:n,checked:!1})),this.selectedTransportTypes=[],this.emailsList=[]}ngOnInit(){this.setFormGroup(),this.emailsList=this.dialogData.email instanceof Array?this.dialogData.email:[this.dialogData.email]}addEmail(){this.profileForm.get("email").valid&&this.profileForm.get("email").value.trim()&&(this.emailsList.push(this.profileForm.value.email),this.profileForm.get("email").reset())}removeEmail(e){this.emailsList=this.emailsList.filter(i=>i!==e)}save(){this.dialogRef.close({...this.profileForm.value,emails:this.emailsList})}setTransportType(e,i){if(e.target.checked)this.selectedTransportTypes.push(i);else{const n=this.selectedTransportTypes.indexOf(i);this.selectedTransportTypes.splice(n,1)}this.profileForm.patchValue({transportType:this.selectedTransportTypes},{emitEvent:!1})}setFormGroup(){this.profileForm=new r.gE({name:new r.MJ(this.dialogData?.name||null,r.k0.required),country:new r.MJ(this.dialogData?.country?.toLowerCase()||null,r.k0.required),email:new r.MJ(null,[r.k0.required,r.k0.email]),phone:new r.MJ(this.dialogData?.phone||null,r.k0.required),transportType:new r.MJ(this.dialogData?.transportType||null,r.k0.required)}),this.dialogData?.transportType&&(this.transportTypes.map(e=>e.checked=this.dialogData.transportType.includes(e.value)),this.selectedTransportTypes=[...this.dialogData.transportType])}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(p.Vh),t.rXU(p.CP))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["b2b-add-logistic-profile-dialog"]],decls:32,vars:13,consts:[[1,"dialog-wrapper"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-close","","mat-icon-button","",1,"close-button"],[1,"close-icon"],[3,"formGroup"],["type","text","placeholder","Enter company name","label","Company name","formControlName","name",1,"b2b-ngx-input","background","background-gray"],[1,"two-in-row","mt-16"],["formControlName","country","placeholder","Select Country"],[1,"mt-16","d-flex","email-wrapper"],["for","email",1,"b2b-ngx-input-label"],["id","email","autocomplete","new-email","formControlName","email",1,"b2b-ngx-input","background","background-gray","grow-1",3,"placeholder"],["mat-raised-button","","color","primary",3,"click"],[1,"mt-16","emails-list"],[1,"d-flex","list-item","justify-between"],[1,"mt-16"],["formControlName","phone",3,"errors"],[4,"ngFor","ngForOf"],[1,"button-wrapper","mt-16"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"d-flex","list-item","justify-between",3,"click"],[1,"email"],["mat-raised-button","","color","warn"],[3,"checkboxChange","checked"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2),t.j41(3,"button",2)(4,"mat-icon",3),t.EFF(5,"close"),t.k0s()()(),t.j41(6,"section",4),t.nrm(7,"input",5),t.j41(8,"div",6)(9,"div"),t.nrm(10,"b2b-ngx-country-select",7),t.k0s()(),t.j41(11,"div",8)(12,"div")(13,"label",9),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.nrm(16,"input",10),t.nI1(17,"translate"),t.k0s(),t.j41(18,"button",11),t.bIt("click",function(){return n.addEmail()}),t.EFF(19,"Add Email"),t.k0s()(),t.j41(20,"div",12),t.Z7z(21,$,5,1,"div",13,t.fX1),t.k0s(),t.j41(23,"div",14)(24,"b2b-ngx-tel",15),t.EFF(25),t.nI1(26,"translate"),t.k0s()(),t.j41(27,"div",6),t.DNE(28,V,3,2,"div",16),t.k0s()(),t.j41(29,"div",17)(30,"button",18),t.bIt("click",function(){return n.save()}),t.EFF(31," Save "),t.k0s()()()),2&i&&(t.R7$(2),t.SpI(" ",n.dialogData?"Edit "+n.dialogData.name:"Add profile"," "),t.R7$(4),t.Y8G("formGroup",n.profileForm),t.R7$(8),t.SpI(" ",t.bMT(15,7,"LABELS.EMAIL")," "),t.R7$(2),t.Y8G("placeholder",t.bMT(17,9,"PLACEHOLDERS.YOUR_EMAIL")),t.R7$(5),t.Dyx(n.emailsList),t.R7$(3),t.Y8G("errors",null==n.profileForm.controls.phone?null:n.profileForm.controls.phone.errors),t.R7$(),t.SpI(" ",t.bMT(26,11,"LABELS.PHONE")," "),t.R7$(3),t.Y8G("ngForOf",n.transportTypes))},dependencies:[m.Sq,d.z,r.me,r.BC,r.cb,r.j4,r.JD,p.tx,p.BI,C.$z,C.iY,y.An,D.s,E.k,T.D9],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}section[_ngcontent-%COMP%]   .two-in-row[_ngcontent-%COMP%]{display:flex;align-items:end;gap:16px}section[_ngcontent-%COMP%]   .two-in-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 50%}.mt-16[_ngcontent-%COMP%]{margin-top:16px}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7.5px 15px}.email-wrapper[_ngcontent-%COMP%]{align-items:flex-end;justify-content:space-between;gap:10px}.email-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-grow:1}.emails-list[_ngcontent-%COMP%]{max-height:200px;overflow:auto;display:flex;flex-direction:column;gap:10px}.emails-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;align-items:center}.emails-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{width:80%}"]})}return o})();var u=a(19825),x=a(39229),M=a(51983),v=a(95656),P=a(46295),G=a(10424),b=a(24892);const k=(o,s=!1)=>e=>e.value&&o.some(n=>(s?n?.toLowerCase():n.name?.toLowerCase())===e.value.toLowerCase())?{cityExists:!0}:null;var R=a(27936),A=a(76492);const Y=(o,s)=>({value:o,length:s});function B(o,s){if(1&o&&(t.j41(0,"p",18),t.EFF(1),t.k0s()),2&o){const e=t.XpG(3);t.Y8G("@fadeInOut",void 0),t.R7$(),t.SpI(" This ",e.directionForm.controls.type.value," already exist ")}}function J(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",15),t.nrm(1,"input",19),t.j41(2,"img",20),t.bIt("click",function(){const n=t.eBV(e).$index,c=t.XpG(3);return t.Njj(c.deleteAlternativeName(n))}),t.k0s()()}if(2&o){const e=s.$index;t.R7$(),t.Y8G("formControlName",e)}}function X(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",11),t.nrm(1,"b2b-ngx-country-select",12),t.k0s(),t.DNE(2,B,2,2,"p",13),t.j41(3,"div",14),t.Z7z(4,J,3,1,"div",15,t.fX1),t.k0s(),t.j41(6,"div",16)(7,"button",17),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.addField())}),t.EFF(8," + Add more "),t.k0s()()}if(2&o){let e;const i=t.XpG(2);t.R7$(2),t.Y8G("ngIf",null==(e=i.directionForm.get("country").errors)?null:e.cityExists),t.R7$(2),t.Dyx(i.countryNames.controls)}}function U(o,s){if(1&o&&t.nrm(0,"b2b-ngx-country-select",21),2&o){const e=t.XpG(2);t.Y8G("customOptions",t.l_i(1,Y,e.cityOptions,null==e.cityOptions.value?null:e.cityOptions.value.length))}}function z(o,s){if(1&o&&(t.j41(0,"div",5),t.DNE(1,X,9,1)(2,U,1,4),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.vxM(1,"country"===e.directionForm.controls.type.value?1:2)}}function H(o,s){if(1&o&&(t.j41(0,"p",18),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.Y8G("@fadeInOut",void 0),t.R7$(),t.SpI(" This ",e.directionForm.controls.type.value," already exist ")}}function K(o,s){if(1&o&&(t.j41(0,"div",5),t.nrm(1,"input",22),t.DNE(2,H,2,2,"p",13),t.k0s()),2&o){let e;const i=t.XpG();t.R7$(2),t.Y8G("ngIf",null==(e=i.directionForm.get("name").errors)?null:e.cityExists)}}function W(o,s){1&o&&(t.j41(0,"b2b-ngx-checkbox",23),t.EFF(1," Active "),t.k0s())}let Q=(()=>{let o=class j{constructor(e,i){this.dialogRef=e,this.changeDetectorRef=i,this.types=["Country","City","Port","Airport"].map(n=>({type:n.toLowerCase(),name:n})),this.showNameInput=!1,this.b2bNgxSelectThemeEnum=G.E,this.directionCountryOptions=new x.t(null),this.countryOptions=new x.t(null)}get countryNames(){return this.directionForm?.get("countryNames")}ngOnInit(){this.setForm()}deleteAlternativeName(e){this.countryNames.removeAt(e)}addField(){this.countryNames.push(new r.MJ(null))}save(){if(this.directionForm.invalid)return void this.directionForm.markAllAsTouched();const{type:e,country:i,active:c}=this.directionForm.value,l={type:e,name:"country"!==e?this.directionForm.value.name:(0,v.mG)(i),active:c};"city"===e&&(l.countryId=i),("port"===e||"airport"===e)&&(l.cityId=i),"country"===e&&this.countryNames.length>0&&(l.countryNames=this.countryNames.value),this.dialogRef.close(l)}setForm(){this.directionForm=new r.gE({type:new r.MJ(null,r.k0.required),country:new r.MJ(null),name:new r.MJ(null),city:new r.MJ(null),active:new r.MJ(!1),countryNames:new r.Yp([new r.MJ(null)])});const e=this.directionForm.get("country"),i=this.directionForm.get("name"),n=this.directionForm.get("city");this.directionForm.controls.type.valueChanges.pipe((0,u.s)(this)).subscribe(c=>{i.reset(),e.reset(),i.clearValidators(),e.clearValidators(),n.clearValidators(),i.setErrors(null),e.setErrors(null),n.setErrors(null),"country"!==c?(this.countryOptions=this.directionCountryOptions,e.setValidators([r.k0.required]),i.setValidators([r.k0.required]),this.showNameInput=!0,"port"===c||"airport"===c?n.setValidators([r.k0.required]):i.disable()):(this.countryOptions=null,this.showNameInput=!1,e.setValidators(k(this.directions.map(l=>(0,v.QC)(l.name)),!0))),this.directionForm.updateValueAndValidity(),this.changeDetectorRef.detectChanges()}),e.valueChanges.pipe((0,P.p)(c=>!!c),(0,u.s)(this)).subscribe(c=>{if("city"===this.directionForm.controls.type.value)i.enable(),i.setValidators(k(this.directions.find(l=>l._id===c).cities)),this.directionForm.updateValueAndValidity(),this.changeDetectorRef.detectChanges();else{let l=null;this.directions.some(O=>O.cities.some(w=>w._id===c&&(l="port"===this.directionForm.controls.type.value?w.ports:w.airports,!0))),i.enable(),i.setValidators(k(l)),this.directionForm.updateValueAndValidity(),this.changeDetectorRef.detectChanges()}})}static#t=this.\u0275fac=function(i){return new(i||j)(t.rXU(p.CP),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:j,selectors:[["b2b-create-direction-dialog"]],decls:15,vars:6,consts:[[1,"dialog-wrapper"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-close","","mat-icon-button","",1,"close-button"],[1,"close-icon"],[3,"formGroup"],[1,"search-wrapper"],["formControlName","type","bindValue","type","bindLabel","name","placeholder","Select direction type",3,"options","theme"],["class","search-wrapper",4,"ngIf"],["formControlName","active",4,"ngIf"],[1,"button-wrapper","mt-16"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"pt-2"],["formControlName","country","placeholder","Select Country",1,"admin-article__country"],["class","error",4,"ngIf"],["formArrayName","countryNames"],[1,"d-flex","gap-1","pt-4"],[1,"d-flex","justify-content-end","w-100"],["type","button",1,"add-more","bg-white",3,"click"],[1,"error"],["placeholder","Input alternative country name",1,"b2b-ngx-input","background","background-gray",3,"formControlName"],["b2bNgxIcon","","name","delete",3,"click"],["formControlName","country","placeholder","Select city",1,"admin-article__country",3,"customOptions"],["formControlName","name","placeholder","Input name of direction",1,"b2b-ngx-input","background","background-gray"],["formControlName","active"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2," Create direction "),t.j41(3,"button",2)(4,"mat-icon",3),t.EFF(5,"close"),t.k0s()()(),t.j41(6,"section",4)(7,"div",5),t.nrm(8,"b2b-ngx-select",6),t.k0s(),t.DNE(9,z,3,1,"div",7)(10,K,3,1,"div",7)(11,W,2,0,"b2b-ngx-checkbox",8),t.j41(12,"div",9)(13,"button",10),t.bIt("click",function(){return n.save()}),t.EFF(14," Save "),t.k0s()()()()),2&i&&(t.R7$(6),t.Y8G("formGroup",n.directionForm),t.R7$(2),t.Y8G("options",n.types)("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.R7$(),t.Y8G("ngIf",n.directionForm.controls.type.value),t.R7$(),t.Y8G("ngIf",n.showNameInput),t.R7$(),t.Y8G("ngIf",n.directionForm.controls.type.value))},dependencies:[m.bT,d.z,r.me,r.BC,r.cb,r.j4,r.JD,r.v8,p.tx,p.BI,C.iY,y.An,E.k,R.P,A.i],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mt-16[_ngcontent-%COMP%]{margin-top:16px}section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;min-height:300px}section[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}section[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7.5px 15px}.add-more[_ngcontent-%COMP%]{margin-top:24px;border-radius:4px;padding:8px 18px;border:1px solid black}.error[_ngcontent-%COMP%]{font-size:14px;color:#e63d3d;margin-top:7px;margin-bottom:0}"],data:{animation:[(0,b.hZ)("fadeInOut",[(0,b.kY)(":enter",[(0,b.iF)({opacity:0}),(0,b.i0)(500,(0,b.iF)({opacity:1}))]),(0,b.kY)(":leave",[(0,b.i0)(500,(0,b.iF)({opacity:0}))])])]}})};return o=(0,_.Cg)([(0,u.d)()],o),o})();var I=a(92578),L=a(3470);const Z=(o,s)=>({value:o,length:s});function q(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",7),t.nrm(1,"input",12),t.j41(2,"img",13),t.bIt("click",function(){const n=t.eBV(e).$index,c=t.XpG();return t.Njj(c.deleteAlternativeName(n))}),t.k0s()()}if(2&o){const e=s.$index;t.R7$(),t.Y8G("formControlName",e)}}let tt=(()=>{class o{constructor(e){this.dialogRef=e,this.directionCountryOptions=new x.t(null),this.countryOptions$=this.directionCountryOptions.asObservable()}get countryNames(){return this.directionForm?.get("countryNames")}ngOnInit(){this.setForm()}addField(){this.countryNames.push(new r.MJ(null))}deleteAlternativeName(e){this.countryNames.removeAt(e)}save(){this.directionForm.invalid?this.directionForm.markAllAsTouched():this.dialogRef.close({id:this.directionCountryOptions.value.find(e=>e.icon?.toLowerCase()===this.directionForm.value.name).code,model:{...this.directionForm.value,name:(0,v.mG)(this.directionForm.value.name)}})}setForm(){this.directionForm=new r.gE({type:new r.MJ("country"),name:new r.MJ(null),active:new r.MJ(!0),countryNames:new r.Yp([new r.MJ(null)])}),this.directionForm.controls.name.valueChanges.subscribe(e=>{this.countryNames.clear();const i=this.directionCountryOptions.value.find(n=>n?.icon?.toLowerCase()===e);i?.countryNames?.length>0&&i.countryNames.forEach(n=>{this.addField(),this.countryNames.patchValue(i.countryNames)})})}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(p.CP))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-edit-direction-dialog"]],standalone:!0,features:[t.aNF],decls:18,vars:7,consts:[[1,"dialog-wrapper"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-close","","mat-icon-button","",1,"close-button"],[1,"close-icon"],[3,"formGroup"],["formControlName","name","placeholder","Select Country",1,"admin-article__country",3,"customOptions"],["formArrayName","countryNames"],[1,"d-flex","gap-1","pt-4"],[1,"d-flex","justify-content-end","w-100"],["type","button",1,"add-more","bg-white",3,"click"],[1,"button-wrapper","mt-16"],[1,"b2b-ngx-button","background","background-black",3,"click"],["placeholder","Input alternative country name",1,"b2b-ngx-input","background","background-gray",3,"formControlName"],["b2bNgxIcon","","name","delete",3,"click"]],template:function(i,n){if(1&i&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2," Add country names "),t.j41(3,"button",2)(4,"mat-icon",3),t.EFF(5,"close"),t.k0s()()(),t.j41(6,"section",4),t.nrm(7,"b2b-ngx-country-select",5),t.nI1(8,"async"),t.j41(9,"div",6),t.Z7z(10,q,3,1,"div",7,t.fX1),t.k0s(),t.j41(12,"div",8)(13,"button",9),t.bIt("click",function(){return n.addField()}),t.EFF(14," + Add more "),t.k0s()(),t.j41(15,"div",10)(16,"button",11),t.bIt("click",function(){return n.save()}),t.EFF(17," Save "),t.k0s()()()()),2&i){let c;t.R7$(6),t.Y8G("formGroup",n.directionForm),t.R7$(),t.Y8G("customOptions",t.l_i(4,Z,n.countryOptions$,null==(c=t.bMT(8,2,n.countryOptions$))?null:c.length)),t.R7$(3),t.Dyx(n.countryNames.controls)}},dependencies:[p.tx,p.BI,y.An,C.iY,I.o,d.z,r.X1,r.me,r.BC,r.cb,r.j4,r.JD,r.v8,m.Jj,L.F,A.i],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mt-16[_ngcontent-%COMP%]{margin-top:16px}section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;min-height:300px}section[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}section[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7.5px 15px}.add-more[_ngcontent-%COMP%]{margin-top:24px;border-radius:4px;padding:8px 18px;border:1px solid black}.error[_ngcontent-%COMP%]{font-size:14px;color:#e63d3d;margin-top:7px;margin-bottom:0}"]})}return o})();var et=a(53648),nt=a(24797),g=a(86311),ot=a(34176),it=a(11373);const rt=()=>["Port","Airport"],ct=(o,s)=>({value:o,length:s});function at(o,s){if(1&o&&(t.j41(0,"div",12)(1,"b2b-ngx-select",18),t.EFF(2),t.k0s()()),2&o){const e=t.XpG();t.R7$(),t.Y8G("placeholder","Port"===e.pointsGroup.controls.type.value?"Select port":"Select airport")("options",e.itemOptions)("theme",e.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.R7$(),t.SpI(" ","Port"===e.pointsGroup.controls.type.value?"Select port":"Select airport"," ")}}function st(o,s){1&o&&(t.j41(0,"th",31),t.EFF(1,"Name"),t.k0s())}function lt(o,s){if(1&o&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&o){const e=s.$implicit;t.R7$(),t.JRh(e.name)}}function pt(o,s){1&o&&(t.j41(0,"th",31),t.EFF(1,"Country"),t.k0s())}function mt(o,s){if(1&o&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&o){const e=s.$implicit,i=t.XpG(2);t.R7$(),t.SpI(" ",i.getName(e.country)," ")}}function dt(o,s){1&o&&(t.j41(0,"th",31),t.EFF(1,"Email"),t.k0s())}function ut(o,s){if(1&o&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&o){const e=s.$implicit;t.R7$(),t.JRh(e.email)}}function gt(o,s){1&o&&(t.j41(0,"th",31),t.EFF(1,"Phone"),t.k0s())}function ht(o,s){if(1&o&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&o){const e=s.$implicit;t.R7$(),t.SpI(" ",e.phone.internationalNumber," ")}}function _t(o,s){1&o&&(t.j41(0,"th",31),t.EFF(1,"Transport type"),t.k0s())}function ft(o,s){if(1&o&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&o){const e=s.$implicit;t.R7$(),t.JRh(e.transportType)}}function Ct(o,s){1&o&&(t.j41(0,"th",31),t.EFF(1,"Actions"),t.k0s())}function bt(o,s){if(1&o){const e=t.RV6();t.j41(0,"td",32)(1,"div",33)(2,"button",34),t.bIt("click",function(n){const c=t.eBV(e).$implicit,l=t.XpG(2);return n.stopPropagation(),t.Njj(l.addLogisticProfile(c))}),t.j41(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()(),t.j41(5,"button",34),t.bIt("click",function(n){const c=t.eBV(e).$implicit,l=t.XpG(2);return n.stopPropagation(),t.Njj(l.deleteLogisticProfile(c))}),t.j41(6,"mat-icon"),t.EFF(7,"delete"),t.k0s()()()()}}function yt(o,s){1&o&&t.nrm(0,"tr",35)}function vt(o,s){if(1&o){const e=t.RV6();t.j41(0,"tr",36),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.openProfileDetails(n._id))}),t.k0s()}}function Ot(o,s){if(1&o){const e=t.RV6();t.qex(0),t.j41(1,"table",19),t.qex(2,20),t.DNE(3,st,2,0,"th",21)(4,lt,2,1,"td",22),t.bVm(),t.qex(5,23),t.DNE(6,pt,2,0,"th",21)(7,mt,2,1,"td",22),t.bVm(),t.qex(8,24),t.DNE(9,dt,2,0,"th",21)(10,ut,2,1,"td",22),t.bVm(),t.qex(11,25),t.DNE(12,gt,2,0,"th",21)(13,ht,2,1,"td",22),t.bVm(),t.qex(14,26),t.DNE(15,_t,2,0,"th",21)(16,ft,2,1,"td",22),t.bVm(),t.qex(17,27),t.DNE(18,Ct,2,0,"th",21)(19,bt,8,0,"td",22),t.bVm(),t.DNE(20,yt,1,0,"tr",28)(21,vt,1,0,"tr",29),t.k0s(),t.j41(22,"b2b-pagination",30),t.bIt("togglePageNumber",function(n){t.eBV(e);const c=t.XpG();return t.Njj(c.togglePage(n))}),t.k0s(),t.bVm()}if(2&o){const e=t.XpG();t.R7$(),t.Y8G("dataSource",e.dataSource),t.R7$(19),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("currentPage",e.currentPage)("length",e.totalCount)("perPage",e.productsLimit)}}function xt(o,s){1&o&&(t.j41(0,"h3"),t.EFF(1,"No companies found"),t.k0s())}const Pt=[{path:"",component:(()=>{let o=class N{constructor(e,i,n,c,l){this.dialog=e,this.router=i,this.adminLogisticService=n,this.hotToastService=c,this.changeDetectorRef=l,this.displayedColumns=["name","country","email","phone","transportType","actions"],this.transportTypes=["Sea","Air"].map(O=>({_id:O.toLowerCase(),name:O})),this.b2bNgxSelectThemeEnum=G.E,this.productsLimit=20,this.currentPage=1,this.countryOptions=new x.t(null),this.cityOptions=new x.t(null),this.filteredQueryObj={limit:this.productsLimit,offset:0},this.getName=v.mG}ngOnInit(){this.getDirectionOptions(),this.fetchData(),this.setFormGroup()}addLogisticProfile(e){this.dialog.open(S,{width:"500px",data:e}).afterClosed().pipe((0,P.p)(n=>!!n),(0,M.n)(n=>{const c={...n,contactPhoneNumber:n.phone.number,contactPhoneInternationalNumber:n.phone.internationalNumber,contactPhoneNationalNumber:n.phone.nationalNumber,contactPhoneE164Number:n.phone.e164Number,contactPhoneCountryCode:n.phone.countryCode,contactPhoneDialCode:n.phone.dialCode};return delete c.email,e?this.adminLogisticService.updateCompanyProfile(c,e._id):this.adminLogisticService.createCompanyProfile(c)}),(0,u.s)(this)).subscribe(()=>{this.fetchData(),this.hotToastService.success(e?"Profile was successfully updated":"New profile was successfully created")})}createDirection(){const e=this.dialog.open(Q,{width:"500px",minHeight:"400px"});e.componentInstance.directionCountryOptions=this.countryOptions,e.componentInstance.cityOptions=this.cityOptions,e.componentInstance.directions=this.directions,e.afterClosed().pipe((0,P.p)(i=>!!i),(0,M.n)(i=>this.adminLogisticService.createDirection(i)),(0,u.s)(this)).subscribe(()=>{this.countryOptions.next(null),this.getDirectionOptions(),this.hotToastService.success("Direction was successfully created")})}editDirection(){const e=this.dialog.open(tt,{width:"500px",minHeight:"400px"});e.componentInstance.directionCountryOptions=this.countryOptions,e.afterClosed().pipe((0,P.p)(i=>!!i),(0,M.n)(i=>this.adminLogisticService.editDirection(i.id,i.model)),(0,u.s)(this)).subscribe(()=>{this.countryOptions.next(null),this.getDirectionOptions(),this.hotToastService.success("Direction was successfully created")})}deleteLogisticProfile(e){this.adminLogisticService.deleteCompanyProfile(e._id).pipe((0,u.s)(this)).subscribe(()=>{this.hotToastService.success("Profile was successfully deleted"),this.fetchData()})}togglePage(e){this.filteredQueryObj={...this.filteredQueryObj,offset:(e-1)*this.productsLimit},this.currentPage=e,this.fetchData()}openProfileDetails(e){this.router.navigate(["/logistic",e])}setNullableValue(e,i){"searchGroup"===e?this.searchGroup.patchValue(i&&"type"===i?{type:null}:{country:null},{emitEvent:!1}):this.pointsGroup.patchValue({countryId:null},{emitEvent:!1})}radioDisable(e){e.target.id.slice(0,-1)===this.pointsGroup.controls.type.value&&this.pointsGroup.controls.type.reset()}fetchData(e){this.adminLogisticService.getCompanies(this.filteredQueryObj.limit,this.filteredQueryObj.offset,e).pipe((0,u.s)(this)).subscribe(i=>{this.totalCount=i.totalCount,this.dataSource=i.companies,this.changeDetectorRef.detectChanges()},i=>this.hotToastService.error(i.error.message))}setFormGroup(){this.searchGroup=new r.gE({name:new r.MJ(null),country:new r.MJ(null),type:new r.MJ(null),q:new r.MJ(null)}),this.pointsGroup=new r.gE({countryId:new r.MJ(null),items:new r.MJ(null),type:new r.MJ(null)}),this.searchGroup.valueChanges.pipe((0,u.s)(this)).subscribe(e=>{const i={};for(const n in e)null!=e[n]&&(i[n]=e[n]);this.fetchData(i),this.changeDetectorRef.detectChanges()}),this.pointsGroup.valueChanges.pipe((0,P.p)(e=>!!e.countryId),(0,M.n)(e=>this.adminLogisticService.getDirection(e.countryId)),(0,u.s)(this)).subscribe(e=>{const i=e.data.map("Port"===this.pointsGroup.controls.type.value?n=>n.cities.filter(c=>!!c.ports&&c.ports.length>0).map(c=>c.ports):n=>n.cities.filter(c=>!!c.airports&&c.airports.length>0).map(c=>c.airports));this.itemOptions=i.flatMap(n=>n.flat())})}getDirectionOptions(){this.adminLogisticService.getDirection().pipe((0,u.s)(this)).subscribe(e=>{this.countryOptions.next(e.data.map(i=>({label:i.name,icon:(0,v.QC)(i.name),code:i._id,countryNames:i?.countryNames}))),this.directions=e.data,this.cityOptions.next(e.data.map(i=>i.cities.map(n=>({label:n.name,code:n._id,icon:(0,v.QC)(i.name)}))).flatMap(i=>i.flat()))})}static#t=this.\u0275fac=function(i){return new(i||N)(t.rXU(p.bZ),t.rXU(h.Ix),t.rXU(et.n),t.rXU(nt.U_),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:N,selectors:[["b2b-admin-logistic"]],decls:33,vars:27,consts:[["noProfiles",""],[1,"logistic-wrapper"],[1,"point-actions",3,"formGroup"],[1,"logistic-header-wrapper"],["formControlName","type",3,"click","options"],[1,"search-wrapper","country-wrapper"],["formControlName","countryId","placeholder","Select Country",3,"customOptions","theme"],[3,"click"],["class","search-wrapper",4,"ngIf"],[1,"logistic-header-wrapper",3,"formGroup"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"b2b-ngx-button","background","background-black",3,"click","disabled"],[1,"search-wrapper"],["formControlName","name","placeholder","Search by name",1,"b2b-ngx-input","background","background-white"],["formControlName","country","placeholder","Select Country",3,"theme"],["formControlName","type","placeholder","Search by transport type","bindValue","_id","bindLabel","name",3,"options","theme"],["formControlName","q","label","Search","placeholder","Search",1,"b2b-ngx-input","background","background-white"],[4,"ngIf","ngIfElse"],["formControlName","items","bindValue","_id","bindLabel","name",3,"placeholder","options","theme"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","country"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","transportType"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"togglePageNumber","currentPage","length","perPage"],["mat-header-cell",""],["mat-cell",""],[1,"actions-block"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,n){if(1&i){const c=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"b2b-ngx-radio",4),t.bIt("click",function(O){return t.eBV(c),t.Njj(n.radioDisable(O))}),t.k0s(),t.j41(4,"div",5)(5,"b2b-ngx-country-select",6),t.EFF(6,"Select country for ports or airports"),t.k0s(),t.j41(7,"mat-icon",7),t.bIt("click",function(){return t.eBV(c),t.Njj(n.setNullableValue("pointsGroup"))}),t.EFF(8,"close"),t.k0s()(),t.DNE(9,at,3,4,"div",8),t.k0s()(),t.j41(10,"div",9)(11,"button",10),t.bIt("click",function(){return t.eBV(c),t.Njj(n.addLogisticProfile())}),t.EFF(12," Add logistic profile "),t.k0s(),t.j41(13,"button",11),t.nI1(14,"async"),t.bIt("click",function(){return t.eBV(c),t.Njj(n.createDirection())}),t.EFF(15," Create direction "),t.k0s(),t.j41(16,"button",11),t.nI1(17,"async"),t.bIt("click",function(){return t.eBV(c),t.Njj(n.editDirection())}),t.EFF(18," Edit country "),t.k0s(),t.j41(19,"div",12),t.nrm(20,"input",13),t.k0s(),t.j41(21,"div",5),t.nrm(22,"b2b-ngx-country-select",14),t.j41(23,"mat-icon",7),t.bIt("click",function(){return t.eBV(c),t.Njj(n.setNullableValue("searchGroup"))}),t.EFF(24,"close"),t.k0s()(),t.j41(25,"div",5),t.nrm(26,"b2b-ngx-select",15),t.j41(27,"mat-icon",7),t.bIt("click",function(){return t.eBV(c),t.Njj(n.setNullableValue("searchGroup","type"))}),t.EFF(28,"close"),t.k0s()(),t.nrm(29,"input",16),t.k0s(),t.DNE(30,Ot,23,6,"ng-container",17)(31,xt,2,0,"ng-template",null,0,t.C5r),t.k0s()}if(2&i){const c=t.sdS(32);t.R7$(),t.Y8G("formGroup",n.pointsGroup),t.R7$(2),t.Y8G("options",t.lJ4(23,rt)),t.R7$(2),t.Y8G("customOptions",t.l_i(24,ct,n.countryOptions,null==n.countryOptions.value?null:n.countryOptions.value.length))("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.R7$(2),t.AVh("show",null==n.pointsGroup?null:n.pointsGroup.controls.countryId.value),t.R7$(2),t.Y8G("ngIf",n.pointsGroup.controls.countryId.value&&n.pointsGroup.controls.type.value),t.R7$(),t.Y8G("formGroup",n.searchGroup),t.R7$(3),t.Y8G("disabled",!t.bMT(14,19,n.countryOptions)),t.R7$(3),t.Y8G("disabled",!t.bMT(17,21,n.countryOptions)),t.R7$(6),t.Y8G("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.R7$(),t.AVh("show",n.searchGroup.controls.country.value),t.R7$(3),t.Y8G("options",n.transportTypes)("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.R7$(),t.AVh("show",n.searchGroup.controls.type.value),t.R7$(3),t.Y8G("ngIf",n.totalCount)("ngIfElse",c)}},dependencies:[m.bT,d.z,r.me,r.BC,r.cb,r.j4,r.JD,C.iY,y.An,g.Zl,g.tL,g.ji,g.cC,g.YV,g.iL,g.KS,g.$R,g.YZ,g.NB,R.P,ot.K,it.e,m.Jj],styles:[".logistic-wrapper[_ngcontent-%COMP%]{padding:30px}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]{padding-bottom:24px;margin-bottom:24px;border-bottom:1px solid lightgray}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{align-items:center}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:24px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .b2b-ngx-button[_ngcontent-%COMP%]{padding:7.5px 15px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:48%}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]{position:relative}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon.show[_ngcontent-%COMP%]{display:initial;position:absolute;top:16px;left:-19px;color:gray;font-size:15px;width:12px;height:12px;cursor:pointer}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:max-content}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:16px;padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#add8e6}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%]{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{text-align:end;padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px;padding:5px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;background:#add8e6;border-radius:5px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;line-height:13px;color:#fff}.logistic-wrapper[_ngcontent-%COMP%]   table.no-background[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:initial;background:transparent}.logistic-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}  input.datepicker{height:64px;border:none;border-radius:14px;padding:0 16px;width:100%;max-width:191px}  input.datepicker::placeholder{padding-left:20px}.error-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:500px;padding:16px;border-radius:8px;background:#fff;max-width:50%;margin-top:24px}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:15px;line-height:22px;padding-bottom:12px;font-weight:400}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]:first-of-type{color:gray}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{min-width:50%;font-weight:600}"]})};return o=(0,_.Cg)([(0,u.d)()],o),o})()}];let Mt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#n=this.\u0275inj=t.G2t({imports:[h.iI.forChild(Pt),h.iI]})}return o})();var Ft=a(97572),Dt=a(6790),kt=a(45596),wt=a(59076),jt=a(24262),Nt=a(12208);let Et=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#n=this.\u0275inj=t.G2t({imports:[m.MD,Mt,I.o,r.X1,p.hM,C.Hl,y.m_,T.h,Ft.f,Dt.n,kt.O,g.tP,wt._,jt.$,Nt.x,L.F]})}return o})()},45596:(F,f,a)=>{a.d(f,{O:()=>_});var m=a(38684),h=a(89985);let _=(()=>{class r{static#t=this.\u0275fac=function(d){return new(d||r)};static#e=this.\u0275mod=h.$C({type:r});static#n=this.\u0275inj=h.G2t({imports:[m.MD]})}return r})()},24262:(F,f,a)=>{a.d(f,{$:()=>p});var m=a(38684),h=a(82575),_=a(3470),r=a(89985);let p=(()=>{class d{static#t=this.\u0275fac=function(D){return new(D||d)};static#e=this.\u0275mod=r.$C({type:d});static#n=this.\u0275inj=r.G2t({imports:[m.MD,h.X1,_.F]})}return d})();a(34176)},12208:(F,f,a)=>{a.d(f,{x:()=>r});var m=a(38684),h=a(3470),_=a(89985);let r=(()=>{class p{static#t=this.\u0275fac=function(C){return new(C||p)};static#e=this.\u0275mod=_.$C({type:p});static#n=this.\u0275inj=_.G2t({imports:[m.MD,h.F]})}return p})()}}]);