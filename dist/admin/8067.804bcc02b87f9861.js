"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8067],{48067:(S,A,e)=>{e.r(A),e.d(A,{AdminArticleModule:()=>k});var s=e(96814),v=e(44112),g=e(97582),b=e(83620),_=e(93997),y=e(27921),O=e(94664),m=e(32181),Z=e(37398),r=e(87046),c=e(56223),h=e(48530),f=e(78791),L=e(52572),N=e(16481),p=e(86825),t=e(19212),U=e(6255),G=e(27171),I=e(58133),R=e(34624),D=e(96506),J=e(88657),j=e(83498),K=e(62033),V=e(61796),T=e(89515);function F(a,B){1&a&&(t.TgZ(0,"p",17),t._uU(1," This field is required "),t.qZA()),2&a&&t.Q6J("@fadeInOut",void 0)}function E(a,B,o){Object.entries(B).forEach(([i,n])=>{if(Array.isArray(n))n.filter(l=>!!l).forEach(l=>{a.append(i,l)});else if("image"===i)Array.from(n).forEach(l=>{a.append(i,l)});else if("object"==typeof n&&null!==n)E(a,n,i);else{const l=o?`${o}${(0,N.f)(i)}`:i;a.append(l,n)}})}const Y=[{path:"",component:(()=>{let a=class P{constructor(o,i,n,l,u){this._formBuilder=o,this._categoriesService=i,this._wikiService=n,this._hotToastService=l,this._activatedRoute=u,this.searchControl=new c.NI,this.b2bNgxSelectThemeEnum=r.B,this.b2bNgxButtonThemeEnum=h.n,this.formGroup=this.getFormGroup(),this.level1Categories=[],this.level2Categories=[],this.searchedOptions$=this.getSearchedOptions()}getSearchedOptions(){return this.searchControl.valueChanges.pipe((0,b.b)(1e3),(0,_.x)(),(0,y.O)(""),(0,O.w)(o=>this._wikiService.getTags(o)))}setSearch(o){this.searchControl.setValue(o)}setLevel1Categories(){this._categoriesService.getWikiCategories().pipe((0,f.t)(this)).subscribe(o=>{this.level1Categories=o})}setLevel2Categories(){this.formGroup.get("level1Category").valueChanges.pipe((0,f.t)(this),(0,m.h)(o=>!!o)).subscribe(o=>{this.level2Categories=this.level1Categories.find(i=>i._id===o)?.children})}updateArticle(){const o=this._activatedRoute.paramMap.pipe((0,Z.U)(n=>n.get("id")),(0,m.h)(n=>!!n),(0,O.w)(n=>this._wikiService.getArticleById(n))),i=this._categoriesService.getWikiCategories();(0,L.a)([o,i]).pipe((0,f.t)(this)).subscribe(([n,l])=>{const u=n.category?._id,M=l.find(x=>x?.children.find(d=>d._id===u))?._id;this.formGroup.patchValue({...n,image:[n.image],level1Category:M,level2Category:u})})}ngOnInit(){this.updateArticle(),this.setLevel1Categories(),this.setLevel2Categories()}getFormGroup(){return this._formBuilder.group({_id:null,title:["",c.kI.required],description:"",author:"",image:"",country:[null],tags:[[]],level1Category:[null],level2Category:[null]})}onSubmit(o){if("INVALID"===this.formGroup.status)return;const i=new FormData,{_id:n,level1Category:l,level2Category:u,tags:M,...x}=o,d={...x,category:u??l,tags:M.map(C=>C._id||C.name)};for(const C in d)(!d[C]||Array.isArray(d[C])&&!d[C].length)&&delete d[C];d.image=d.image[0],n?this._wikiService.updateArticle(n,d).pipe((0,f.t)(this),this._hotToastService.observe({loading:"Article updating...",success:"Article updated successfully!",error:"Article updating failed!"})).subscribe(()=>{}):(E(i,d),this._wikiService.createArticle(i).pipe((0,f.t)(this),this._hotToastService.observe({loading:"Article creating...",success:"Article created successfully!",error:"Article creation failed!"})).subscribe(()=>{}))}static#t=this.\u0275fac=function(i){return new(i||P)(t.Y36(c.qu),t.Y36(U.G),t.Y36(G.t),t.Y36(I.jE),t.Y36(v.gz))};static#e=this.\u0275cmp=t.Xpm({type:P,selectors:[["b2b-admin-article"]],decls:25,vars:19,consts:[[1,"admin-article",3,"formGroup","ngSubmit"],[1,"admin-article__label"],["formControlName","image",1,"admin-article__image"],[1,"admin-article__main"],["formControlName","title","placeholder","Enter article label",1,"admin-article__input",3,"label"],["class","error",4,"ngIf"],["formControlName","author","placeholder","Enter article author",1,"admin-article__input",3,"label"],[1,"admin-article__categories"],[1,"admin-article__category"],["formControlName","level1Category","placeholder","Select category","bindValue","_id","bindLabel","name",3,"options","theme"],[1,"admin-article__sub-category"],["formControlName","level2Category","placeholder","Select subcategory","bindValue","_id","bindLabel","name",3,"options","theme"],[1,"admin-article__additional"],["formControlName","country","placeholder","Select Country",1,"admin-article__country",3,"theme"],[1,"admin-article__tags"],["formControlName","tags",3,"searchedOptions","searched"],["b2bNgxButton","",1,"admin-article__button",3,"theme"],[1,"error"]],template:function(i,n){1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit(n.formGroup.value)}),t.TgZ(1,"p",1),t._uU(2),t.qZA(),t.TgZ(3,"b2b-ngx-file",2),t._uU(4,"Image"),t.qZA(),t.TgZ(5,"div",3)(6,"div"),t._UZ(7,"b2b-ngx-input",4),t.ALo(8,"translate"),t.YNc(9,F,2,1,"p",5),t.qZA(),t.TgZ(10,"div"),t._UZ(11,"b2b-ngx-input",6),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"div",7)(14,"div",8),t._UZ(15,"b2b-ngx-select",9),t.qZA(),t.TgZ(16,"div",10),t._UZ(17,"b2b-ngx-select",11),t.qZA()(),t.TgZ(18,"div",12),t._UZ(19,"b2b-ngx-country-select",13),t.TgZ(20,"div",14)(21,"b2b-ngx-chips",15),t.NdJ("searched",function(u){return n.setSearch(u)}),t.ALo(22,"async"),t.qZA()()(),t.TgZ(23,"button",16),t._uU(24),t.qZA()()),2&i&&(t.Q6J("formGroup",n.formGroup),t.xp6(2),t.hij(" ",n.formGroup.get("_id").value?"Edit an article":"Add an article"," "),t.xp6(5),t.Q6J("label",t.lcZ(8,13,"LABELS.ARTICLE_LABEL")),t.xp6(2),t.Q6J("ngIf",null==n.formGroup.get("title").errors?null:n.formGroup.get("title").errors.required),t.xp6(2),t.Q6J("label",t.lcZ(12,15,"LABELS.ARTICLE_AUTHOR")),t.xp6(4),t.Q6J("options",n.level1Categories)("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.xp6(2),t.Q6J("options",n.level2Categories)("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.xp6(2),t.Q6J("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.xp6(2),t.Q6J("searchedOptions",t.lcZ(22,17,n.searchedOptions$)),t.xp6(2),t.Q6J("theme",n.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.xp6(),t.hij(" ",n.formGroup.get("_id").value?"Update an article":"Create an article"," "))},dependencies:[s.O5,R.F,D.d,J.B,j.f,K.V,c._Y,c.JJ,c.JL,c.sg,c.u,V.L,s.Ov,T.X$],styles:[".admin-article[_ngcontent-%COMP%]{display:block;margin:30px;background-color:#fff;padding:60px}.admin-article[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-size:14px;color:#e63d3d;margin-top:7px;margin-bottom:0}.admin-article[_ngcontent-%COMP%]   .admin-article__image[_ngcontent-%COMP%]{display:block;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__label[_ngcontent-%COMP%]{font-weight:700;font-size:32px;color:#0f0f11}.admin-article[_ngcontent-%COMP%]   .admin-article__input[_ngcontent-%COMP%]{display:block;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__main[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.admin-article[_ngcontent-%COMP%]   .admin-article__main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:49%}.admin-article[_ngcontent-%COMP%]   .admin-article__main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .admin-article__input[_ngcontent-%COMP%]{width:100%}.admin-article[_ngcontent-%COMP%]   .admin-article__additional[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__additional[_ngcontent-%COMP%]   .admin-article__country[_ngcontent-%COMP%], .admin-article[_ngcontent-%COMP%]   .admin-article__additional[_ngcontent-%COMP%]   .admin-article__tags[_ngcontent-%COMP%]{width:49%}.admin-article[_ngcontent-%COMP%]   .admin-article__categories[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__categories[_ngcontent-%COMP%]   .admin-article__category[_ngcontent-%COMP%], .admin-article[_ngcontent-%COMP%]   .admin-article__categories[_ngcontent-%COMP%]   .admin-article__sub-category[_ngcontent-%COMP%]{width:49%}.admin-article[_ngcontent-%COMP%]   .admin-article__button[_ngcontent-%COMP%]{margin-top:30px;padding:15px 40px}  .angular-editor-textarea img{max-width:100%}  .angular-editor-textarea p{line-height:24px}  .admin-article__description{display:block;margin-top:30px;overflow:hidden;line-height:24px}  .admin-article__description span,   .admin-article__description p{line-height:24px}  .admin-article__description ul,   .admin-article__description li{list-style:disc!important}  .admin-article__description ul{padding-left:30px}  .admin-article__description strong,   .admin-article__description b{font-weight:700!important}  .admin-article__description img{width:100%}"],data:{animation:[(0,p.X$)("fadeInOut",[(0,p.eR)(":enter",[(0,p.oB)({opacity:0}),(0,p.jt)(500,(0,p.oB)({opacity:1}))]),(0,p.eR)(":leave",[(0,p.jt)(500,(0,p.oB)({opacity:0}))])])]},changeDetection:0})};return a=(0,g.gn)([(0,f.c)()],a),a})()}];let Q=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[v.Bz.forChild(Y),v.Bz]})}return a})();var W=e(82242),$=e(28514),z=e(74027),X=e(43377),H=e(80150),w=e(38625);let k=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[s.ez,Q,W.r,$.y,z.F,X.l,H.N,c.UX,w.v,T.aw]})}return a})()},34624:(S,A,e)=>{e.d(A,{F:()=>O});var s=e(19212),v=e(14016),g=e(56223),b=e(66027),_=e(56878),y=e(17856);let O=(()=>{class m{get inputClass(){return this.version===_.O.B2B?"b2b-ngx-input":"globy-ngx-input"}constructor(r){this._changeDetectionRef=r,this.label="",this.errors="",this.version=_.O.B2B,this.NgxInputVersionEnum=_.O,this.type="input",this.placeholder="",this.theme=b.T.BACKGROUND_GRAY,this.onChange=()=>null,this.onTouched=()=>null,this.formControl=new g.NI(""),this.id=(0,v.U)(),this.id="id"}ngOnChanges(r){r.errors&&this.formControl.setErrors(r.errors)}ngOnInit(){this.subscribeOnValueChanges()}validate(){return this.formControl.errors}subscribeOnValueChanges(){this.formControl.valueChanges.pipe().subscribe(r=>{this.onChange(r)})}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}writeValue(r){this.formControl.setValue(r)}setDisabledState(r){r?this.formControl.disable():this.formControl.enable()}static#t=this.\u0275fac=function(c){return new(c||m)(s.Y36(s.sBO))};static#e=this.\u0275cmp=s.Xpm({type:m,selectors:[["b2b-ngx-input"]],inputs:{type:"type",placeholder:"placeholder",theme:"theme",label:"label",errors:"errors",version:"version"},features:[s._Bn([{provide:g.JU,useExisting:(0,s.Gpc)(()=>m),multi:!0},{provide:g.Cf,useExisting:(0,s.Gpc)(()=>m),multi:!0}]),s.TTD],decls:1,vars:7,consts:[["b2bNgxInput","",3,"theme","formControl","type","id","placeholder"]],template:function(c,h){1&c&&s._UZ(0,"input",0),2&c&&(s.Tol(h.inputClass),s.Q6J("theme",h.theme)("formControl",h.formControl)("type",h.type)("id",h.id)("placeholder",h.placeholder))},dependencies:[g.Fj,g.JJ,g.oH,y.k],changeDetection:0})}return m})()}}]);