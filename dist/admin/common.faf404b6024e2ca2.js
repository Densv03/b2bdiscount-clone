"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8592],{71042:(M,h,t)=>{t.d(h,{d:()=>E});var i=t(69862),o=t(19212),p=t(87588),s=t(70275),c=t(22096),l=t(97582);let e=class A extends s.yh{constructor(){super({companies:[]})}static#t=this.\u0275fac=function(n){return new(n||A)};static#e=this.\u0275prov=o.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})};e=(0,l.gn)([(0,s.yC)({name:"companies"})],e);var u=t(30395);let O=(()=>{class r extends s.AE{constructor(n,d){super(n),this.store=n,this.platformService=d,this.selectedProfiles$=this.platformService.isServer?(0,c.of)(null):this.select("companies")}static#t=this.\u0275fac=function(d){return new(d||r)(o.LFG(e),o.LFG(u.m))};static#e=this.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),E=(()=>{class r{constructor(n,d,m){this.apiService=n,this.adminLogisticQuery=d,this.adminLogisticStore=m,this.endpoint="freightCalculation/"}getCompanies(n,d,m){let P=new i.LE;P=P.append("limit",n).append("offset",d);for(const D in m)null!=m[D]&&""!==m[D]&&(P=P.append(D,m[D]));return this.adminLogisticQuery.getValue(),this.apiService.get(`${this.endpoint}companies`,{params:P})}createCompanyProfile(n){return this.apiService.post(`${this.endpoint}companies/create`,n)}updateCompanyProfile(n,d){return this.apiService.patch(`${this.endpoint}companies/${d}/update`,n)}deleteCompanyProfile(n){return this.apiService.delete(`${this.endpoint}companies/${n}/delete`)}getSeaTariffs(n){let d=(new i.LE).append("type","sea");for(let m of Object.keys(n))n[m]&&(d=d.append(m,n[m]));return this.apiService.get(`${this.endpoint}tariffsByCompany`,{params:d})}getAirTariffs(n){let d=(new i.LE).append("type","air");for(let m of Object.keys(n))n[m]&&(d=d.append(m,n[m]));return this.apiService.get(`${this.endpoint}tariffsByCompany`,{params:d})}uploadSeaTariff(n,d){return this.apiService.post(`${this.endpoint}tariffs/${n}/updateSeaTariffs`,d)}uploadAirTariff(n,d){return this.apiService.post(`${this.endpoint}tariffs/${n}/updateAviaTariffs`,d)}createDirection(n){return this.apiService.post(`${this.endpoint}directions/create`,n)}deleteTariff(n,d){return this.apiService.delete(`${this.endpoint}tariffs/${n}/delete?type=${d}`)}getDirection(n){let d=(new i.LE).append("nocache",!0);return n&&(d=d.append("countryId",n)),this.apiService.get(`${this.endpoint}directions`,{params:d})}static#t=this.\u0275fac=function(d){return new(d||r)(o.LFG(p.s),o.LFG(O),o.LFG(e))};static#e=this.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},48589:(M,h,t)=>{t.d(h,{_:()=>s});var i=t(96814),o=t(86461),p=t(19212);let s=(()=>{class c{static#t=this.\u0275fac=function(e){return new(e||c)};static#e=this.\u0275mod=p.oAB({type:c});static#i=this.\u0275inj=p.cJS({imports:[i.ez,o.A]})}return c})()},30536:(M,h,t)=>{t.d(h,{V:()=>c});var i=t(96814),o=t(86461),p=t(98653),s=t(19212);let c=(()=>{class l{static#t=this.\u0275fac=function(u){return new(u||l)};static#e=this.\u0275mod=s.oAB({type:l});static#i=this.\u0275inj=s.cJS({imports:[i.ez,o.A,p.w]})}return l})()},78533:(M,h,t)=>{t.d(h,{Ad:()=>p,S5:()=>o,r_:()=>s,t8:()=>c});const o=["1-5M","5-10M","10-50M","50-100M"],p=["1-5","5-10","10-50","50-100","> 100"];function s(l){return l.map(a=>({id:a,value:a}))}const c={loading:"Updating company information...",success:"Company information successfully updated.",error:"Company information updating failed"}},6975:(M,h,t)=>{t.d(h,{v:()=>y});var i=t(56223),o=t(76119),p=t(87446),s=t(81374),c=t(32181),l=t(48180),a=t(78645),e=t(99397),u=t(78533),O=t(6990),E=t.n(O),r=t(88814),f=t(72315),n=t(19212),d=t(77247),m=t(17706),P=t(81559),S=t(58133),D=t(69019);let y=(()=>{class L{constructor(_,g,v,C,R,b){this.fb=_,this.authService=g,this.userService=v,this.sourcingRequestService=C,this.hotToastService=R,this.mixpanelService=b,this.isAdmin="admin"===this.userService.getUser()?.role?.name,this.form=this.initForm(),this.rootRoles$=new a.x,this.subRoles=[],this.yearOfFoundationList=this.getFoundationYear(),this.isSubmit=!1}get company(){return this.authService.company}set company(_){this.authService.updateCompany(_)}initForm(){return this.fb.group({companyName:["",[i.kI.required,(0,f.w)()]],businessType:["",[i.kI.required]],country:["",[i.kI.required]],yearOfFoundation:["",[i.kI.required]],employeesNumber:["",[i.kI.required]],annualRevenue:["",[i.kI.required]],address:["",[i.kI.required,(0,f.w)()]],website:["",[(0,o.$j)()]],companyDescription:["",[i.kI.required,i.kI.minLength(40),(0,f.w)()]],logo:[null],banner:[null],socialMedia:this.fb.group({facebook:["",(0,p.n)()],instagram:["",(0,p.n)()],linkedin:["",(0,p.n)()],twitter:["",(0,p.n)()]})})}initDefault(){this.getRoles(),this.getFoundationYear()}onSubmit(_){this.isSubmit=!1;const g=_.socialMedia,v=(0,r.z)({..._,...g});try{_.banner||this.sourcingRequestService.deleteBanner().subscribe(),_.logo||this.sourcingRequestService.deleteLogo().subscribe(),this.updateCompany(v,_,g)}catch(C){console.log(C)}this.isSubmit=!0}updateCompany(_,g,v){this.sourcingRequestService.updateCompanyInfo(_).pipe((0,s.P)(),this.hotToastService.observe(u.t8),(0,e.b)(()=>{this.mixpanelChangeUser(g),this.trackWebsiteChange(g),v&&this.trackSocialMediaLinksChange(v),this.trackCompanyChange()})).subscribe(C=>{this.authService.updateCompany(C)})}mixpanelChangeUser(_){const g=this.authService.user;this.mixpanelService.set({distinctId:this.userService.getUser()._id,properties:{"Account Type":g.rootRole,"Company Name":_.companyName,Name:_.companyName}})}getRoles(){return this.authService.getRootRoles().pipe((0,c.h)(_=>!!_.length),(0,l.q)(1)).subscribe(_=>{this.rootRoles$.next(_),this.subRoles=_.flatMap(g=>g.subRoles)})}getFoundationYear(){const _=[],g=new Date(Date.now()).getFullYear();for(let v=g;v>g-150;v--)_.push(v.toString());return(0,u.r_)(_)}trackWebsiteChange(_){_?.website!==this.company?.website&&(this.company.website=_?.website,this.mixpanelService.track("Website Link added",{Link:_?.website}))}trackSocialMediaLinksChange(_){const g=E().omitBy(this.company?.socialMedia,C=>E().isUndefined(C)||E().isNull(C)||""===C||" "===C),v=E().pick(_,["facebook","instagram","linkedin","twitter"]);E().isEqual(v,g)||(this.mixpanelService.track("Social Media Link added",{"Social Media Type":v}),this.company={...this.company,socialMedia:v})}trackCompanyChange(){const _=["companyName","businessType","country","employeesNumber","yearOfFoundation","annualRevenue","companyDescription","address","position"],g=E().omitBy(E().pick(this.company,_),b=>E().isUndefined(b)||E().isNull(b)||""===b),v=E().pick(this.company,_),C=Object.keys(g);E().isEqual(C.sort(),_.sort())&&!E().isEqual(g,v)&&(this.mixpanelService.track("Company information completed",{"Account Type":this.userService.getUser().rootRole?.name}),this.company={...this.company,...g})}static#t=this.\u0275fac=function(g){return new(g||L)(n.LFG(i.qu),n.LFG(d.e),n.LFG(m.K),n.LFG(P.N),n.LFG(S.jE),n.LFG(D.h))};static#e=this.\u0275prov=n.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"})}return L})()},66358:(M,h,t)=>{t.d(h,{Z:()=>c});var i=t(65619),o=t(81374),p=t(19212),s=t(87588);let c=(()=>{class l{constructor(e){this.apiService=e,this.blogSource$=new i.X([]),this.blogLength=new i.X(0),this._articlesBehaviourSubject=new i.X([]),this._articles$=this._articlesBehaviourSubject.asObservable(),this._endpoint="blogs/"}getTags(e){return this.apiService.get(`tags?q=${e}`)}createBlog(e){return this.apiService.post("blog/create",e)}uploadImage(e,u){return this.apiService.put(`blog/${u}/upload-image`,e)}updateBlog(e,u){return this.apiService.put(`blog/${e}/update`,u)}createArticle(e){return this.apiService.post("blog/create",e)}getComments(e){return this.apiService.get(`comment/${e}`)}updateArticle(e,u){return this.apiService.put(`blog/${e}/update`,u)}createComment(e,u){return this.apiService.post("comment/create",{post:e,text:u})}getArticleById(e){return this.apiService.get(`blog/${e}`)}get blog$(){return this.blogSource$.asObservable()}get blogLength$(){return this.blogLength.asObservable()}getArticles(e){return this.apiService.get(`blogs${e}`)}updateBlogList(e="&limit=7&"){this.getArticles(e).pipe((0,o.P)()).subscribe(u=>{this.blogSource$.next(u.posts),this.blogLength.next(u.totalCount)})}deleteArticleById(e){return this.apiService.delete(`blog/${e}/delete`)}static#t=this.\u0275fac=function(u){return new(u||l)(p.LFG(s.s))};static#e=this.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},62506:(M,h,t)=>{t.d(h,{a:()=>s});var i=t(37398),o=t(19212),p=t(87588);let s=(()=>{class c{constructor(a){this._apiService=a}getChatById(a){return this._apiService.get(`my/chat/${a}`).pipe((0,i.U)(e=>Array.isArray(e)?e[0]:e),(0,i.U)(e=>({...e,offer:Array.isArray(e.offer)?e.offer[0]:e.offer})))}static#t=this.\u0275fac=function(e){return new(e||c)(o.LFG(p.s))};static#e=this.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},27171:(M,h,t)=>{t.d(h,{t:()=>c});var i=t(65619),o=t(22096),p=t(19212),s=t(87588);let c=(()=>{class l{constructor(e){this._apiService=e,this._articlesBehaviourSubject=new i.X([]),this._articles$=this._articlesBehaviourSubject.asObservable(),this._endpoint="posts/"}getTags(e){return this._apiService.get(`tags?q=${e}`)}createArticle(e){return this._apiService.post("post/create",e)}getComments(e){return this._apiService.get(`comment/${e}`)}updateArticle(e,u){return this._apiService.put(`post/${e}/update`,u)}createComment(e,u){return this._apiService.post("comment/create",{post:e,text:u})}getArticleById(e){const O=this._articlesBehaviourSubject.getValue().find(E=>E.id===e);return O?(0,o.of)(O):this._apiService.get(`post/${e}`)}getArticles(e){return this._apiService.get(`posts${e}`)}deleteArticleById(e){return this._apiService.delete(`post/${e}/delete`)}static#t=this.\u0275fac=function(u){return new(u||l)(p.LFG(s.s))};static#e=this.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},42961:(M,h,t)=>{t.d(h,{m:()=>p});var i=t(19212),o=t(19347);let p=(()=>{class s{constructor(l){this.matDialog=l}showExplanationModal(){this.matDialog.open(this.explanationModal)}static#t=this.\u0275fac=function(a){return new(a||s)(i.Y36(o.uw))};static#e=this.\u0275cmp=i.Xpm({type:s,selectors:[["b2b-explanation-banner"]],inputs:{title:"title",subtitle:"subtitle",explanationModal:"explanationModal"},decls:7,vars:2,consts:[[1,"banner"],[1,"banner__title"],[1,"banner__subtitle"],[1,"banner__button",3,"click"]],template:function(a,e){1&a&&(i.TgZ(0,"div",0)(1,"span",1),i._uU(2),i.qZA(),i.TgZ(3,"span",2),i._uU(4),i.qZA(),i.TgZ(5,"span",3),i.NdJ("click",function(){return e.showExplanationModal()}),i._uU(6,"Show more"),i.qZA()()),2&a&&(i.xp6(2),i.Oqu(e.title),i.xp6(2),i.hij(" ",e.subtitle," "))},styles:["[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #d3dfff;box-shadow:0 0 10px #0000001a;background:#d3dfff;max-width:1170px;margin:auto;text-align:center;padding:8px 0}@media (max-width: 75em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{background:#d3dfff;max-width:95%}}@media (max-width: 36em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{max-width:90%}}[_nghost-%COMP%]   .banner__title[_ngcontent-%COMP%]{color:#000;font-size:16px;font-weight:700;letter-spacing:.18px}[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{font-size:13.6px;font-weight:400;letter-spacing:.14px;margin-left:8px}@media (max-width: 75em){[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{text-decoration:underline;color:#005dff;font-weight:400;margin-left:16px;cursor:pointer}@media (max-width: 36em){[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{display:block}}"]})}return s})()},54674:(M,h,t)=>{t.d(h,{S:()=>p});var i=t(96814),o=t(19212);let p=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275mod=o.oAB({type:s});static#i=this.\u0275inj=o.cJS({imports:[i.ez]})}return s})()},88814:(M,h,t)=>{t.d(h,{z:()=>p});var i=t(16481),o=function(s){return s.instagram="instagram",s.linkedin="linkedin",s.twitter="twitter",s.fb="facebook",s}(o||{});function p(s){const c=Object.values(o).filter(a=>"string"==typeof a),l=new FormData;return Object.entries(s).filter(([a,e])=>c.includes(a)?null!==e:!!e).forEach(([a,e])=>{if("documents"===a)e.forEach(u=>{l.append(a,u)});else if("uploadedDocs"===a)l.append(a,JSON.stringify(e));else if(Array.isArray(e))e.filter(u=>!!u).forEach(u=>{l.append(a,u)});else if("object"==typeof e&&e)for(const u in e){const O=`${a}${(0,i.f)(u)}`;l.append(O,e[u])}else l.append(a,e)}),c.forEach(a=>{null===s[a]&&l.append(a,"")}),l}},76119:(M,h,t)=>{t.d(h,{$j:()=>p});const o=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-zA-Z0-9]+([-.]{1}[a-zA-Z0-9]+)*\.[a-zA-Z]{2,}(\/.*)?$/;function p(){return s=>s.value?o.test(s.value.trim())?null:{siteError:!0}:null}},87446:(M,h,t)=>{function i(){const o=/(?:https?:)?\/\/(?:[A-z]+\.)?(twitter|linkedin|instagram|facebook)\.com/;return p=>{if(!p.value)return null;const s=p.value.replace(/\s/g,"");return o.test(String(s).toLowerCase())?null:{socialError:!0}}}t.d(h,{n:()=>i})},19637:(M,h,t)=>{t.d(h,{v:()=>u});var i=t(96814),o=t(44112),p=t(32181),s=t(99397),c=t(20553),l=t(65619),a=t(19212),e=t(6593);let u=(()=>{class O{constructor(r,f,n,d,m,P,S){this.rendererFactory=r,this.doc=f,this.locationService=n,this.router=d,this.route=m,this.title=P,this.meta=S,this.marketListingMetaSource=new l.X(null),this.renderer2=this.rendererFactory.createRenderer(null,null)}get marketListingMetaTags$(){return this.marketListingMetaSource.asObservable()}updateMarketListingMeta(r){this.marketListingMetaSource.next(r)}addBlogMicroMarkup(r,f,n,d,m,P,S,D){const y=this.renderer2.createElement("script");y.type="application/ld+json",y.id="micro-markup",y.text=`\n            {\n\t\t\t\t\t\t\t"@context": "https://schema.org",\n\t\t\t\t\t\t\t"@type": "NewsArticle",\n\t\t\t\t\t\t\t"mainEntityOfPage": {\n\t\t\t\t\t\t\t\t"@type": "WebPage",\n\t\t\t\t\t\t\t\t"@id": "${(c.N.apiUrl.includes("dev")?c.N.devUrl:c.N.prodUrl)+this.locationService.path()}"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t"headline": "${n}",\n\t\t\t\t\t\t\t"image": "[${P}]",\n\n\t\t\t\t\t\t\t"datePublished": "${this.getDateForBlogMarkup(d)}",\n\t\t\t\t\t\t\t"dateModified": "${this.getDateForBlogMarkup(m)}",\n\t\t\t\t\t\t\t"author": {\n   \t\t\t\t\t\t"@type": "Person",\n  \t\t\t\t\t\t"name": "${S}"\n  \t\t\t\t\t},\n   \t\t\t\t\t "publisher": {\n \t\t\t\t\t\t\t"@type": "Organization",\n\t\t\t\t\t\t  "name": "",\n \t\t\t\t\t\t  "url" : "${(c.N.apiUrl.includes("dev")?c.N.devUrl:c.N.prodUrl)+this.locationService.path()}",\n \t\t\t\t\t\t\t"logo": {\n \t\t\t\t\t\t\t "@type": "ImageObject",\n \t\t\t\t\t\t   "url": "${P[2]}"\n \t\t\t\t\t\t  }\n\t\t\t\t\t\t },\n\t\t\t\t\t\t"description": "${D}"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n        `,this.renderer2.appendChild(this.doc.body,y)}addCanonicalRef(){this.initCanonicalRef(),this.router.events.pipe((0,p.h)(r=>r instanceof o.m2),(0,s.b)(()=>{this.removeCanonicalRefs(),this.initCanonicalRef()})).subscribe()}setTitle(r){this.title.setTitle(r)}setDescription(r){this.meta.updateTag({name:"description",content:r})}initRobotsMetaTag(){this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag(),this.router.events.pipe((0,p.h)(r=>r instanceof o.m2),(0,s.b)(()=>{this.removeRobotsMetaTag(),this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag()})).subscribe()}isNoIndexUrl(r){return/sourcing-request\/listing\/.+/i.test(r)}addRobotsMetaTag(r=!0,f=!0){const n=this.doc.createElement("meta");n.setAttribute("name","robots"),n.setAttribute("content",`${r?"index":"noindex"}, ${f?"follow":"nofollow"}`),this.doc.head.appendChild(n)}removeRobotsMetaTag(){const r=this.doc.querySelector('meta[name="robots"]');r&&r.remove()}initCanonicalRef(){let r=this.doc.createElement("link");const f=this.doc.URL.indexOf("?");let n=-1!==f?this.doc.URL.substring(0,f):this.doc.URL;r.setAttribute("rel","canonical"),this.doc.head.appendChild(r),r.setAttribute("href",this.replaceCanonicalLink(n))}replaceCanonicalLink(r){switch(c.N.apiUrl){case"https://api.globy.com/":return r.replace(`http://${c.N.baseUrl}/`,c.N.prodUrl);case"https://api-dev.globy.com/":return r.replace(`http://${c.N.baseUrl}/`,c.N.devUrl);case"https://api-staging.globy.com/":return r.replace(`http://${c.N.baseUrl}/`,c.N.stagingUrl);default:return r}}removeCanonicalRefs(){const r=this.doc.getElementsByTagName("head")[0],f=r.getElementsByTagName("link");for(let n=0;n<f.length;n++){const d=f[n];"canonical"===d.rel&&this.renderer2.removeChild(r,d)}}getDateForBlogMarkup(r){"string"==typeof r&&(r=new Date);const f=r.toISOString();return f.slice(0,10)+"T"+f.slice(11,19)+"+08:00"}static#t=this.\u0275fac=function(f){return new(f||O)(a.LFG(a.FYo),a.LFG(i.K0),a.LFG(i.Ye),a.LFG(o.F0),a.LFG(o.gz),a.LFG(e.Dx),a.LFG(e.h_))};static#e=this.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()},48667:(M,h,t)=>{t.d(h,{Z:()=>o});var i=t(19212);const o=new i.OlP("REQUEST");new i.OlP("RESPONSE")},69384:(M,h,t)=>{t.d(h,{G:()=>p});var i=t(79360),o=t(8251);function p(){return(0,i.e)((s,c)=>{let l,a=!1;s.subscribe((0,o.x)(c,e=>{const u=l;l=e,a&&c.next([u,e]),a=!0}))})}}}]);