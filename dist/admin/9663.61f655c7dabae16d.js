"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9663],{69663:(D,_,o)=>{o.r(_),o.d(_,{AdminManagerModule:()=>mt});var h=o(38684),g=o(9063),C=o(35285),b=o(22001),f=o(28225),l=o(82575),M=o(19825),d=o(57223),c=o(95656),s=o(39229),t=o(89985),u=o(71860),x=o(24797),T=o(83883),I=o(20559);let R=(()=>{class n{constructor(e){this.apiService=e}addManager(e,a,i){return this.apiService.post("managers/add-new-manager",{firstName:e,lastName:a,url:i})}getUsersByRefId(e,a,i){let m=new T.Nl;return a&&(m=m.append("offset",a)),i&&(m=m.append("limit",i)),this.apiService.get(`statistics/get-users-list?refId=${e}`,{params:m})}deleteManagerById(e){return this.apiService.delete(`managers/delete-manager?refId=${e}`)}getManagers(e){return this.apiService.get(e?`managers/get-managers?refId=${e}`:"managers/get-managers")}static#t=this.\u0275fac=function(a){return new(a||n)(t.KVO(I.G))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var E=o(6113),k=o(61553),p=o(86311),A=o(76492),O=o(11373);function P(n,r){1&n&&(t.j41(0,"th",24),t.EFF(1,"Ref Id"),t.k0s())}function F(n,r){if(1&n){const e=t.RV6();t.j41(0,"td",25),t.bIt("click",function(){const i=t.eBV(e).$implicit,m=t.XpG();return t.Njj(m.copyLink(i.link))}),t.EFF(1),t.k0s()}if(2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.refId," ")}}function B(n,r){1&n&&(t.j41(0,"th",26),t.EFF(1,"First Name"),t.k0s())}function G(n,r){if(1&n&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.firstName)}}function j(n,r){1&n&&(t.j41(0,"th",28),t.EFF(1,"Last Name"),t.k0s())}function $(n,r){if(1&n&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.lastName)}}function S(n,r){1&n&&t.nrm(0,"th",26)}function L(n,r){if(1&n){const e=t.RV6();t.j41(0,"td",27)(1,"button",29),t.bIt("click",function(){const i=t.eBV(e).$implicit,m=t.XpG();return t.Njj(m.deleteManager(i.refId))}),t.EFF(2," Delete "),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("theme",e.b2bNgxButtonThemeEnum.BACKGROUND_RED)}}function U(n,r){1&n&&t.nrm(0,"tr",30)}function Y(n,r){1&n&&t.nrm(0,"tr",31)}function K(n,r){1&n&&(t.j41(0,"th",26),t.EFF(1,"Email"),t.k0s())}function w(n,r){1&n&&t.nrm(0,"img",40),2&n&&t.Y8G("name","check-blue")}function V(n,r){if(1&n&&(t.j41(0,"td",27),t.EFF(1),t.DNE(2,w,1,1,"img",39),t.k0s()),2&n){const e=r.$implicit,a=t.XpG(2);t.R7$(),t.SpI(" ",e.email," "),t.R7$(),t.Y8G("ngIf",(null==e.products?null:e.products.length)&&a.isApproved(e.products))}}function H(n,r){1&n&&(t.j41(0,"th",26),t.EFF(1," Registration type "),t.k0s())}function X(n,r){if(1&n&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.typeRegistration," ")}}function W(n,r){1&n&&(t.j41(0,"th",26),t.EFF(1,"Country"),t.k0s())}function Z(n,r){if(1&n&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&n){const e=r.$implicit,a=t.XpG(2);t.R7$(),t.SpI(" ",a.getCountryNameByCode(null==e.userData[0]||null==e.userData[0].phone?null:e.userData[0].phone.countryCode)," ")}}function z(n,r){1&n&&(t.j41(0,"th",26),t.EFF(1," Registration date "),t.k0s())}function J(n,r){if(1&n&&(t.j41(0,"td",27),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,null==e.userData[0]?null:e.userData[0].createdAt,"MM/d/yy")," ")}}function Q(n,r){1&n&&(t.j41(0,"th",26),t.EFF(1," Company name "),t.k0s())}function q(n,r){if(1&n&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",null==e||null==e.userData[0]?null:e.userData[0].company," ")}}function tt(n,r){1&n&&t.nrm(0,"tr",30)}function et(n,r){1&n&&t.nrm(0,"tr",31)}function nt(n,r){if(1&n){const e=t.RV6();t.j41(0,"div"),t.EFF(1),t.nI1(2,"async"),t.k0s(),t.j41(3,"div")(4,"table",32),t.qex(5,33),t.DNE(6,K,2,0,"th",15)(7,V,3,2,"td",16),t.bVm(),t.qex(8,34),t.DNE(9,H,2,0,"th",15)(10,X,2,1,"td",16),t.bVm(),t.qex(11,35),t.DNE(12,W,2,0,"th",15)(13,Z,2,1,"td",16),t.bVm(),t.qex(14,36),t.DNE(15,z,2,0,"th",15)(16,J,3,4,"td",16),t.bVm(),t.qex(17,37),t.DNE(18,Q,2,0,"th",15)(19,q,2,1,"td",16),t.bVm(),t.DNE(20,tt,1,0,"tr",20)(21,et,1,0,"tr",21),t.k0s(),t.j41(22,"b2b-pagination",38),t.nI1(23,"async"),t.bIt("togglePageNumber",function(i){t.eBV(e);const m=t.XpG();return t.Njj(m.togglePage(i))}),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.SpI("Total count: ",t.bMT(2,8,e.totalCount$),""),t.R7$(3),t.Y8G("dataSource",e.userList),t.R7$(16),t.Y8G("matHeaderRowDef",e.displayedColumnsUsers),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumnsUsers),t.R7$(),t.Y8G("length",t.bMT(23,10,e.totalCount$))("perPage",e.limit)("shouldScroll",!1)("currentPage",e.currentPage)}}const it=[{path:"",component:(()=>{let n=class v{constructor(e,a,i,m,y){this.formBuilder=e,this.clipboard=a,this.hotToastService=i,this.adminManagerService=m,this.changeDetectionRef=y,this.limit=25,this.currentPage=1,this.offset=0,this.b2bNgxInputThemeEnum=f.Q,this.b2bNgxButtonThemeEnum=b.a,this.managersList=[],this.userList=[],this.displayedColumnsManagers=["refId","firstName","lastName","delete"],this.displayedColumnsUsers=["email","registrationType","country","registrationDate","company"],this.generatedLink="",this.formGroup=this.formBuilder.group({firstName:[null,l.k0.required],lastName:[null,l.k0.required],url:[null,l.k0.required]}),this.usersByRefIdGroup=this.formBuilder.group({refId:[null,[l.k0.required,(0,d._)()]]}),this.totalCountSource=new s.t(0),this.totalCount$=this.totalCountSource.asObservable()}ngOnInit(){this.updateManagerList()}generateLink(e){e.valid&&(this.adminManagerService.addManager(e.value.firstName,e.value.lastName,e.value.url).pipe((0,M.s)(this)).subscribe(a=>{this.generatedLink=a.link,this.updateManagerList(),this.changeDetectionRef.detectChanges()}),this.formGroup.reset(),this.updateManagerList())}getUsersByRefId(e){e.valid&&this.adminManagerService.getUsersByRefId(parseInt(e.value.refId),this.offset,this.limit).subscribe(a=>{a.length||this.hotToastService.show("There's no users found with current refId",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0}),this.totalCountSource.next(a[0].totalCount[0]?.total),this.userList=a[0].users,this.changeDetectionRef.detectChanges()})}isApproved(e){return e.some(a=>a.productApproved)}copyLink(e=this.generatedLink){this.clipboard.copy(e),this.hotToastService.show("Link copied to clipboard",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0})}deleteManager(e){this.adminManagerService.deleteManagerById(e).subscribe(()=>this.updateManagerList())}getCountryNameByCode(e){return e?(0,c.mG)(e):""}togglePage(e){this.currentPage=e,this.offset=(e-1)*this.limit,this.getUsersByRefId(this.usersByRefIdGroup)}updateManagerList(){this.adminManagerService.getManagers().subscribe(e=>{this.managersList=e,this.changeDetectionRef.detectChanges()})}static#t=this.\u0275fac=function(a){return new(a||v)(t.rXU(l.ok),t.rXU(u.B0),t.rXU(x.U_),t.rXU(R),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:v,selectors:[["b2b-admin-manager"]],decls:35,vars:18,consts:[[1,"admin-manager"],[1,"admin-manager__form-group",3,"ngSubmit","formGroup"],[1,"admin-manager__form-group__container"],["type","text","b2bNgxInput","","formControlName","firstName","placeholder","First name","label","Enter first name",3,"theme"],["type","text","b2bNgxInput","","formControlName","lastName","placeholder","Second name","label","Enter second name",3,"theme"],["type","text","b2bNgxInput","","formControlName","url","placeholder","https://b2b.discount/blog","label","Enter the link for which the ref will be generated",1,"mb-3",3,"theme"],["b2bNgxButton","",3,"theme"],[1,"admin-manager__generated-link"],["b2bNgxInput","","disabled","","placeholder","Here will be generated link",3,"ngModelChange","ngModel","theme"],["b2bNgxButton","",3,"click","theme","disabled"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","refId"],["class","th-id","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","firstName"],["class","th-firstName","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["class","th-lastName","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"admin-manager__generated-link",3,"ngSubmit","formGroup"],["type","text","b2bNgxInput","","formControlName","refId","placeholder","Ref id",3,"theme"],["mat-header-cell","",1,"th-id"],["mat-cell","",3,"click"],["mat-header-cell","",1,"th-firstName"],["mat-cell",""],["mat-header-cell","",1,"th-lastName"],["b2bNgxButton","",1,"delete-btn",3,"click","theme"],["mat-header-row",""],["mat-row",""],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","email"],["matColumnDef","registrationType"],["matColumnDef","country"],["matColumnDef","registrationDate"],["matColumnDef","company"],[3,"togglePageNumber","length","perPage","shouldScroll","currentPage"],["b2bNgxIcon","",3,"name",4,"ngIf"],["b2bNgxIcon","",3,"name"]],template:function(a,i){1&a&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return i.generateLink(i.formGroup)}),t.j41(2,"div",2)(3,"div"),t.nrm(4,"input",3),t.k0s(),t.j41(5,"div"),t.nrm(6,"input",4),t.k0s()(),t.nrm(7,"input",5),t.j41(8,"button",6),t.EFF(9," Generate Link "),t.k0s()(),t.j41(10,"div",7)(11,"input",8),t.mxI("ngModelChange",function(y){return t.DH7(i.generatedLink,y)||(i.generatedLink=y),y}),t.k0s(),t.j41(12,"button",9),t.bIt("click",function(){return i.copyLink()}),t.EFF(13," Copy URL "),t.k0s()(),t.j41(14,"table",10),t.qex(15,11),t.DNE(16,P,2,0,"th",12)(17,F,2,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,B,2,0,"th",15)(20,G,2,1,"td",16),t.bVm(),t.qex(21,17),t.DNE(22,j,2,0,"th",18)(23,$,2,1,"td",16),t.bVm(),t.qex(24,19),t.DNE(25,S,1,0,"th",15)(26,L,3,1,"td",16),t.bVm(),t.DNE(27,U,1,0,"tr",20)(28,Y,1,0,"tr",21),t.k0s(),t.j41(29,"form",22),t.bIt("ngSubmit",function(){return i.getUsersByRefId(i.usersByRefIdGroup)}),t.nrm(30,"input",23),t.j41(31,"button",6),t.EFF(32," Submit "),t.k0s()(),t.DNE(33,nt,24,12),t.nI1(34,"async"),t.k0s()),2&a&&(t.R7$(),t.Y8G("formGroup",i.formGroup),t.R7$(3),t.Y8G("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(2),t.Y8G("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",i.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.R7$(3),t.R50("ngModel",i.generatedLink),t.Y8G("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",i.b2bNgxButtonThemeEnum.BACKGROUND_BLACK)("disabled",!i.generatedLink),t.R7$(2),t.Y8G("dataSource",i.managersList),t.R7$(13),t.Y8G("matHeaderRowDef",i.displayedColumnsManagers),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumnsManagers),t.R7$(),t.Y8G("formGroup",i.usersByRefIdGroup),t.R7$(),t.Y8G("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",i.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.R7$(2),t.vxM(33,t.bMT(34,16,i.totalCount$)?33:-1))},dependencies:[h.bT,E.b,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,k.Z,l.vS,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,A.i,O.e,h.Jj,h.vh],styles:[".admin-manager[_ngcontent-%COMP%]{padding:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:49%}.admin-manager__form-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px}.admin-manager__generated-link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-manager__generated-link[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%}.admin-manager__generated-link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:15%}[_nghost-%COMP%]  table{width:65%;margin-top:50px;background-color:#fff}[_nghost-%COMP%]  th.mat-mdc-header-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  th.mat-mdc-header-cell:last-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:last-of-type{padding-right:0}[_nghost-%COMP%]  .th-id{width:10%;text-align:center;background-color:#000;color:#fff;padding-top:18px}[_nghost-%COMP%]  .th-firstName{text-align:center;padding-left:0}[_nghost-%COMP%]  .th-lastName{text-align:center;padding-left:0}[_nghost-%COMP%]  .cdk-column-refId{text-align:center;background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:10%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8;cursor:pointer}[_nghost-%COMP%]  .cdk-column-lastName, [_nghost-%COMP%]  .cdk-column-email, [_nghost-%COMP%]  .cdk-column-registrationType, [_nghost-%COMP%]  .cdk-column-firstName, [_nghost-%COMP%]  .cdk-column-registrationDate, [_nghost-%COMP%]  .cdk-column-country, [_nghost-%COMP%]  .cdk-column-company{background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:40%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .cdk-column-email>img{width:20px}[_nghost-%COMP%]  .cdk-column-company{width:50%;padding:5px}[_nghost-%COMP%]  .cdk-column-delete{background-color:#fff;height:65px;width:10%;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .delete-btn{width:100%;height:100%;transform:translateY(-17%)}"]})};return n=(0,C.Cg)([(0,M.d)()],n),n})()}];let ot=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[g.iI.forChild(it),g.iI]})}return n})();var N=o(50096),at=o(58764),rt=o(3470),st=o(12208);let mt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[h.MD,ot,N.E,l.X1,at.i,l.YN,N.E,p.tP,rt.F,st.x]})}return n})()},12208:(D,_,o)=>{o.d(_,{x:()=>b});var h=o(38684),g=o(3470),C=o(89985);let b=(()=>{class f{static#t=this.\u0275fac=function(d){return new(d||f)};static#e=this.\u0275mod=C.$C({type:f});static#n=this.\u0275inj=C.G2t({imports:[h.MD,g.F]})}return f})()},71860:(D,_,o)=>{o.d(_,{B0:()=>b,FQ:()=>M});var h=o(38684),g=o(89985);class C{constructor(c,s){this._document=s;const t=this._textarea=this._document.createElement("textarea"),u=t.style;u.position="fixed",u.top=u.opacity="0",u.left="-999em",t.setAttribute("aria-hidden","true"),t.value=c,t.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(t)}copy(){const c=this._textarea;let s=!1;try{if(c){const t=this._document.activeElement;c.select(),c.setSelectionRange(0,c.value.length),s=this._document.execCommand("copy"),t&&t.focus()}}catch{}return s}destroy(){const c=this._textarea;c&&(c.remove(),this._textarea=void 0)}}let b=(()=>{class d{constructor(s){this._document=s}copy(s){const t=this.beginCopy(s),u=t.copy();return t.destroy(),u}beginCopy(s){return new C(s,this._document)}static#t=this.\u0275fac=function(t){return new(t||d)(g.KVO(h.qQ))};static#e=this.\u0275prov=g.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),M=(()=>{class d{static#t=this.\u0275fac=function(t){return new(t||d)};static#e=this.\u0275mod=g.$C({type:d});static#n=this.\u0275inj=g.G2t({})}return d})()}}]);