"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3658],{63658:(j,x,c)=>{c.r(x),c.d(x,{AdminLogisticProfileDetailsModule:()=>Rt});var f=c(60177),b=c(52168),t=c(54438),P=c(73370),d=c(14945),h=c(96850),D=c(85623),u=c(49894),_=c(89417),w=c(5964),i=c(84412),s=c(72558),r=c(9159),g=c(39955),M=c(88834),O=c(99213),k=c(3997);const S=()=>({left:"10px",top:"20px"});function I(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Port from"),t.k0s())}function $(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.JRh(null==n.portFrom?null:n.portFrom.name)}}function A(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Country from"),t.k0s())}function L(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.JRh(null==n.countryFrom?null:n.countryFrom.name)}}function N(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Port to"),t.k0s())}function B(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.JRh(null==n.portTo?null:n.portTo.name)}}function V(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Country to"),t.k0s())}function U(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.JRh(null==n.countryTo?null:n.countryTo.name)}}function G(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Date from"),t.k0s())}function Y(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,n.validDateFrom,"dd.MM.yyyy")," ")}}function X(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Date to"),t.k0s())}function J(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,n.validDateTo,"dd.MM.yyyy")," ")}}function z(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Actions"),t.k0s())}function W(e,o){if(1&e){const n=t.RV6();t.j41(0,"td",25)(1,"div",26)(2,"button",27),t.bIt("click",function(){const a=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.deleteTariff(a))}),t.j41(3,"mat-icon"),t.EFF(4,"delete"),t.k0s()()()()}}function K(e,o){1&e&&t.nrm(0,"tr",28)}function H(e,o){1&e&&t.nrm(0,"tr",29)}function Z(e,o){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"table",11),t.qex(2,12),t.DNE(3,I,2,0,"th",13)(4,$,2,1,"td",14),t.bVm(),t.qex(5,15),t.DNE(6,A,2,0,"th",13)(7,L,2,1,"td",14),t.bVm(),t.qex(8,16),t.DNE(9,N,2,0,"th",13)(10,B,2,1,"td",14),t.bVm(),t.qex(11,17),t.DNE(12,V,2,0,"th",13)(13,U,2,1,"td",14),t.bVm(),t.qex(14,18),t.DNE(15,G,2,0,"th",13)(16,Y,3,4,"td",14),t.bVm(),t.qex(17,19),t.DNE(18,X,2,0,"th",13)(19,J,3,4,"td",14),t.bVm(),t.qex(20,20),t.DNE(21,z,2,0,"th",13)(22,W,5,0,"td",14),t.bVm(),t.DNE(23,K,1,0,"tr",21)(24,H,1,0,"tr",22),t.k0s(),t.j41(25,"b2b-pagination",23),t.nI1(26,"async"),t.bIt("togglePageNumber",function(a){t.eBV(n);const p=t.XpG();return t.Njj(p.togglePage(a))}),t.k0s(),t.bVm()}if(2&e){const n=t.XpG();t.R7$(),t.Y8G("dataSource",n.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("currentPage",n.currentPage)("length",t.bMT(26,6,n.totalCount$))("perPage",n.productsLimit)}}function Q(e,o){1&e&&(t.j41(0,"h3"),t.EFF(1,"No companies found"),t.k0s())}function q(e,o){if(1&e&&(t.j41(0,"div",32)(1,"p",33),t.EFF(2),t.k0s(),t.j41(3,"p",34),t.EFF(4),t.k0s()()),2&e){const n=o.$implicit;t.R7$(2),t.JRh(n.errorField),t.R7$(2),t.JRh(n.errorMessage)}}function tt(e,o){if(1&e&&(t.j41(0,"div",30),t.DNE(1,q,5,2,"div",31),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.errorList)}}let et=(()=>{let e=class T{constructor(n,l,a,p){this.adminLogisticService=n,this.activatedRoute=l,this.hotToastService=a,this.changeDetectorRef=p,this.displayedColumns=["portFrom","countryFrom","portTo","countryTo","validDateFrom","validDateTo","actions"],this.updating=!1,this.productsLimit=15,this.totalCountSource=new i.t(0),this.totalCount$=this.totalCountSource.asObservable(),this.currentPage=1,this.date=new _.MJ(""),this.errorList=[{errorField:"Error field",errorData:"Error data",errorMessage:"Error message"}],this.seaRequest={limit:this.productsLimit,offset:0}}ngOnInit(){this.fetchData(),this.setFormData()}uploadSeaTariff(n){const l=n.target,a=l.files[0];if(!a)return;if(!["xlsx","xls","csv"].includes(a?.name.split(".")[a?.name.split(".").length-1]))return void this.hotToastService.error("Wrong type format, you can upload only sheets types");l.value=null;const m=new FileReader;m.readAsDataURL(a),m.onload=()=>{const C=new FormData;C.append("excelData",a),this.adminLogisticService.uploadSeaTariff(this.seaRequest.companyId,C).pipe((0,u.s)(this)).subscribe(F=>{F.resultUpdate.count.error&&F.resultUpdate.count.error.errorList.forEach(y=>{this.errorList.push({errorField:y.errorField,errorData:JSON.parse(y.errorData),errorMessage:y.errorMessage})}),this.fetchData()})}}togglePage(n){this.seaRequest={...this.seaRequest,offset:(n-1)*this.productsLimit},this.currentPage=n,this.fetchData()}setNullableValue(){this.date.patchValue(null,{emitEvent:!1}),this.seaRequest.date=null,this.fetchData()}deleteTariff(n){this.updating||(this.updating=!0,this.adminLogisticService.deleteTariff(n._id,"sea").pipe((0,u.s)(this)).subscribe(()=>{this.fetchData(),this.hotToastService.success("Tariff was successfully deleted")}))}fetchData(){this.activatedRoute.snapshot.params?.id&&(this.seaRequest.companyId=this.activatedRoute.snapshot.params?.id),this.adminLogisticService.getSeaTariffs(this.seaRequest).pipe((0,u.s)(this)).subscribe(n=>{this.totalCountSource.next(n[0].totalCount),this.dataSource=n[0].tariffs,this.updating=!1,this.changeDetectorRef.detectChanges()})}setFormData(){this.date.valueChanges.pipe((0,w.p)(n=>!!n),(0,u.s)(this)).subscribe(n=>{this.seaRequest.date=new Date(n).toLocaleDateString().split(".").reverse().join("."),this.fetchData()})}static#t=this.\u0275fac=function(l){return new(l||T)(t.rXU(P.n),t.rXU(b.nX),t.rXU(s.U_),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:T,selectors:[["b2b-sea-profile"]],decls:16,vars:10,consts:[["fileInput",""],["noProfiles",""],[1,"logistic-wrapper"],[1,"logistic-header-wrapper"],["multiple","","type","file",3,"change"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"country-wrapper"],["inputClassName","datepicker","iconName","filled-calendar",3,"formControl","iconPosition"],[3,"click"],[4,"ngIf","ngIfElse"],["class","error-list",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4","no-background",3,"dataSource"],["matColumnDef","portFrom"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","countryFrom"],["matColumnDef","portTo"],["matColumnDef","countryTo"],["matColumnDef","validDateFrom"],["matColumnDef","validDateTo"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"togglePageNumber","currentPage","length","perPage"],["mat-header-cell",""],["mat-cell",""],[1,"actions-block"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"error-list"],["class","error-field",4,"ngFor","ngForOf"],[1,"error-field"],[1,"field"],[1,"message"]],template:function(l,a){if(1&l){const p=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div")(3,"input",4,0),t.bIt("change",function(C){return t.eBV(p),t.Njj(a.uploadSeaTariff(C))}),t.k0s(),t.j41(5,"button",5),t.bIt("click",function(){t.eBV(p);const C=t.sdS(4);return t.Njj(C.click())}),t.EFF(6," Upload sea tariffs "),t.k0s()(),t.j41(7,"div",6),t.nrm(8,"b2b-datepicker",7),t.j41(9,"mat-icon",8),t.bIt("click",function(){return t.eBV(p),t.Njj(a.setNullableValue())}),t.EFF(10,"close "),t.k0s()()(),t.DNE(11,Z,27,8,"ng-container",9),t.nI1(12,"async"),t.DNE(13,Q,2,0,"ng-template",null,1,t.C5r)(15,tt,2,1,"div",10),t.k0s()}if(2&l){const p=t.sdS(14);t.R7$(8),t.Y8G("formControl",a.date)("iconPosition",t.lJ4(9,S)),t.R7$(),t.AVh("show",a.date.value),t.R7$(2),t.Y8G("ngIf",t.bMT(12,7,a.totalCount$))("ngIfElse",p),t.R7$(4),t.Y8G("ngIf",a.errorList.length>1)}},dependencies:[f.Sq,f.bT,r.Zl,r.tL,r.ji,r.cC,r.YV,r.iL,r.KS,r.$R,r.YZ,r.NB,g.i,_.BC,_.l_,M.iY,O.An,k.e,f.Jj,f.vh],styles:[".logistic-wrapper[_ngcontent-%COMP%]{padding:30px}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]{padding-bottom:24px;margin-bottom:24px;border-bottom:1px solid lightgray}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{align-items:center}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:24px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .b2b-ngx-button[_ngcontent-%COMP%]{padding:7.5px 15px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:48%}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]{position:relative}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon.show[_ngcontent-%COMP%]{display:initial;position:absolute;top:16px;left:-19px;color:gray;font-size:15px;width:12px;height:12px;cursor:pointer}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:max-content}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:16px;padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#add8e6}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%]{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{text-align:end;padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px;padding:5px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;background:#add8e6;border-radius:5px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;line-height:13px;color:#fff}.logistic-wrapper[_ngcontent-%COMP%]   table.no-background[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:initial;background:transparent}.logistic-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}  input.datepicker{height:64px;border:none;border-radius:14px;padding:0 16px;width:100%;max-width:191px}  input.datepicker::placeholder{padding-left:20px}.error-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:500px;padding:16px;border-radius:8px;background:#fff;max-width:50%;margin-top:24px}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:15px;line-height:22px;padding-bottom:12px;font-weight:400}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]:first-of-type{color:gray}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{min-width:50%;font-weight:600}"],changeDetection:0})};return e=(0,D.Cg)([(0,u.d)()],e),e})();const nt=()=>({left:"10px",top:"20px"});function ot(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"City from"),t.k0s())}function it(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.JRh(null==n.cityFrom?null:n.cityFrom.name)}}function rt(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Country from"),t.k0s())}function at(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.JRh(null==n.countryFrom?null:n.countryFrom.name)}}function ct(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"City to"),t.k0s())}function st(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.JRh(null==n.cityTo?null:n.cityTo.name)}}function lt(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Country to"),t.k0s())}function pt(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.JRh(null==n.countryTo?null:n.countryTo.name)}}function dt(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Date from"),t.k0s())}function gt(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,n.validDateFrom,"dd.MM.yyyy")," ")}}function mt(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Date to"),t.k0s())}function ut(e,o){if(1&e&&(t.j41(0,"td",25),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,n.validDateTo,"dd.MM.yyyy")," ")}}function _t(e,o){1&e&&(t.j41(0,"th",24),t.EFF(1,"Actions"),t.k0s())}function ft(e,o){if(1&e){const n=t.RV6();t.j41(0,"td",25)(1,"div",26)(2,"button",27),t.bIt("click",function(){const a=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.deleteTariff(a))}),t.j41(3,"mat-icon"),t.EFF(4,"delete"),t.k0s()()()()}}function ht(e,o){1&e&&t.nrm(0,"tr",28)}function Ct(e,o){1&e&&t.nrm(0,"tr",29)}function bt(e,o){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"table",11),t.qex(2,12),t.DNE(3,ot,2,0,"th",13)(4,it,2,1,"td",14),t.bVm(),t.qex(5,15),t.DNE(6,rt,2,0,"th",13)(7,at,2,1,"td",14),t.bVm(),t.qex(8,16),t.DNE(9,ct,2,0,"th",13)(10,st,2,1,"td",14),t.bVm(),t.qex(11,17),t.DNE(12,lt,2,0,"th",13)(13,pt,2,1,"td",14),t.bVm(),t.qex(14,18),t.DNE(15,dt,2,0,"th",13)(16,gt,3,4,"td",14),t.bVm(),t.qex(17,19),t.DNE(18,mt,2,0,"th",13)(19,ut,3,4,"td",14),t.bVm(),t.qex(20,20),t.DNE(21,_t,2,0,"th",13)(22,ft,5,0,"td",14),t.bVm(),t.DNE(23,ht,1,0,"tr",21)(24,Ct,1,0,"tr",22),t.k0s(),t.j41(25,"b2b-pagination",23),t.nI1(26,"async"),t.bIt("togglePageNumber",function(a){t.eBV(n);const p=t.XpG();return t.Njj(p.togglePage(a))}),t.k0s(),t.bVm()}if(2&e){const n=t.XpG();t.R7$(),t.Y8G("dataSource",n.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("currentPage",n.currentPage)("length",t.bMT(26,6,n.totalCount$))("perPage",n.productsLimit)}}function Pt(e,o){1&e&&(t.j41(0,"h3"),t.EFF(1,"No companies found"),t.k0s())}function Mt(e,o){if(1&e&&(t.j41(0,"div",32)(1,"p",33),t.EFF(2),t.k0s(),t.j41(3,"p",34),t.EFF(4),t.k0s()()),2&e){const n=o.$implicit;t.R7$(2),t.JRh(n.errorField),t.R7$(2),t.JRh(n.errorMessage)}}function Ot(e,o){if(1&e&&(t.j41(0,"div",30),t.DNE(1,Mt,5,2,"div",31),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.errorList)}}let xt=(()=>{let e=class R{constructor(n,l,a,p){this.adminLogisticService=n,this.activatedRoute=l,this.hotToastService=a,this.changeDetectorRef=p,this.displayedColumns=["cityFrom","countryFrom","cityTo","countryTo","validDateFrom","validDateTo","actions"],this.updating=!1,this.productsLimit=15,this.currentPage=1,this.totalCountSource=new i.t(0),this.totalCount$=this.totalCountSource.asObservable(),this.date=new _.MJ(""),this.errorList=[{errorField:"Error field",errorData:"Error data",errorMessage:"Error message"}],this.airRequest={limit:this.productsLimit,offset:0}}ngOnInit(){this.fetchData(),this.setFormGroup()}uploadAirProfile(n){const l=n.target,a=l.files[0];if(!a)return;if(!["xlsx","xls","csv"].includes(a?.name.split(".")[a?.name.split(".").length-1]))return void this.hotToastService.error("Wrong type format, you can upload only sheets types");l.value=null;const m=new FileReader;m.readAsDataURL(a),m.onload=()=>{const F=new FormData;F.append("excelData",a),this.adminLogisticService.uploadAirTariff(this.airRequest.companyId,F).pipe((0,u.s)(this)).subscribe(y=>{y.resultUpdate.count.error&&y.resultUpdate.count.error.errorList.forEach(v=>{this.errorList.push({errorField:v.errorField,errorData:JSON.parse(v.errorData),errorMessage:v.errorMessage})}),this.fetchData()})}}togglePage(n){this.airRequest={...this.airRequest,offset:(n-1)*this.productsLimit},this.currentPage=n,this.fetchData()}setNullableValue(){this.date.patchValue(null,{emitEvent:!1}),this.airRequest.date=null,this.fetchData()}deleteTariff(n){this.updating||(this.updating=!0,this.adminLogisticService.deleteTariff(n._id,"air").pipe((0,u.s)(this)).subscribe(()=>{this.fetchData(),this.hotToastService.success("Tariff was successfully deleted")}))}fetchData(){this.activatedRoute.snapshot.params?.id&&(this.airRequest.companyId=this.activatedRoute.snapshot.params?.id),this.adminLogisticService.getAirTariffs(this.airRequest).pipe((0,u.s)(this)).subscribe(n=>{this.dataSource=n[0].tariffs,this.totalCountSource.next(n[0].totalCount),this.updating=!1,this.changeDetectorRef.detectChanges()})}setFormGroup(){this.date.valueChanges.pipe((0,w.p)(n=>!!n),(0,u.s)(this)).subscribe(n=>{this.airRequest.date=new Date(n).toLocaleDateString().split(".").reverse().join("."),this.fetchData()})}static#t=this.\u0275fac=function(l){return new(l||R)(t.rXU(P.n),t.rXU(b.nX),t.rXU(s.U_),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:R,selectors:[["b2b-air-profile"]],decls:16,vars:10,consts:[["fileInput",""],["noProfiles",""],[1,"logistic-wrapper"],[1,"logistic-header-wrapper"],["multiple","","type","file",3,"change"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"country-wrapper"],["inputClassName","datepicker","iconName","filled-calendar",3,"formControl","iconPosition"],[3,"click"],[4,"ngIf","ngIfElse"],["class","error-list",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4","no-background",3,"dataSource"],["matColumnDef","cityFrom"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","countryFrom"],["matColumnDef","cityTo"],["matColumnDef","countryTo"],["matColumnDef","validDateFrom"],["matColumnDef","validDateTo"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"togglePageNumber","currentPage","length","perPage"],["mat-header-cell",""],["mat-cell",""],[1,"actions-block"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"error-list"],["class","error-field",4,"ngFor","ngForOf"],[1,"error-field"],[1,"field"],[1,"message"]],template:function(l,a){if(1&l){const p=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div")(3,"input",4,0),t.bIt("change",function(C){return t.eBV(p),t.Njj(a.uploadAirProfile(C))}),t.k0s(),t.j41(5,"button",5),t.bIt("click",function(){t.eBV(p);const C=t.sdS(4);return t.Njj(C.click())}),t.EFF(6," Upload air tariffs "),t.k0s()(),t.j41(7,"div",6),t.nrm(8,"b2b-datepicker",7),t.j41(9,"mat-icon",8),t.bIt("click",function(){return t.eBV(p),t.Njj(a.setNullableValue())}),t.EFF(10,"close "),t.k0s()()(),t.DNE(11,bt,27,8,"ng-container",9),t.nI1(12,"async"),t.DNE(13,Pt,2,0,"ng-template",null,1,t.C5r)(15,Ot,2,1,"div",10),t.k0s()}if(2&l){const p=t.sdS(14);t.R7$(8),t.Y8G("formControl",a.date)("iconPosition",t.lJ4(9,nt)),t.R7$(),t.AVh("show",a.date.value),t.R7$(2),t.Y8G("ngIf",t.bMT(12,7,a.totalCount$))("ngIfElse",p),t.R7$(4),t.Y8G("ngIf",a.errorList.length>1)}},dependencies:[f.Sq,f.bT,r.Zl,r.tL,r.ji,r.cC,r.YV,r.iL,r.KS,r.$R,r.YZ,r.NB,g.i,_.BC,_.l_,M.iY,O.An,k.e,f.Jj,f.vh],styles:[".logistic-wrapper[_ngcontent-%COMP%]{padding:30px}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]{padding-bottom:24px;margin-bottom:24px;border-bottom:1px solid lightgray}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{align-items:center}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:24px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .b2b-ngx-button[_ngcontent-%COMP%]{padding:7.5px 15px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:48%}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]{position:relative}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon.show[_ngcontent-%COMP%]{display:initial;position:absolute;top:16px;left:-19px;color:gray;font-size:15px;width:12px;height:12px;cursor:pointer}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:max-content}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:16px;padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#add8e6}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%]{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{text-align:end;padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px;padding:5px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;background:#add8e6;border-radius:5px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;line-height:13px;color:#fff}.logistic-wrapper[_ngcontent-%COMP%]   table.no-background[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:initial;background:transparent}.logistic-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}  input.datepicker{height:64px;border:none;border-radius:14px;padding:0 16px;width:100%;max-width:191px}  input.datepicker::placeholder{padding-left:20px}.error-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:500px;padding:16px;border-radius:8px;background:#fff;max-width:50%;margin-top:24px}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:15px;line-height:22px;padding-bottom:12px;font-weight:400}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]:first-of-type{color:gray}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{min-width:50%;font-weight:600}"],changeDetection:0})};return e=(0,D.Cg)([(0,u.d)()],e),e})();const yt=[{path:"",component:(()=>{class e{constructor(n){this.adminLogisticService=n,this.selectedIndex=0}ngOnInit(){}static#t=this.\u0275fac=function(l){return new(l||e)(t.rXU(P.n))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["b2b-components"]],decls:7,vars:2,consts:[[3,"breadcrumbLabel"],[1,"profile-wrapper"],[3,"selectedIndexChange","selectedIndex"],["label","Sea"],["label","Air"]],template:function(l,a){1&l&&(t.nrm(0,"b2b-breadcrumbs",0),t.j41(1,"div",1)(2,"mat-tab-group",2),t.mxI("selectedIndexChange",function(m){return t.DH7(a.selectedIndex,m)||(a.selectedIndex=m),m}),t.j41(3,"mat-tab",3),t.nrm(4,"b2b-sea-profile"),t.k0s(),t.j41(5,"mat-tab",4),t.nrm(6,"b2b-air-profile"),t.k0s()()()),2&l&&(t.Y8G("breadcrumbLabel","Tariffs"),t.R7$(2),t.R50("selectedIndex",a.selectedIndex))},dependencies:[d.C,h.mq,h.T8,et,xt],styles:[".profile-wrapper[_ngcontent-%COMP%]{padding:30px}"]})}return e})()}];let wt=(()=>{class e{static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275mod=t.$C({type:e});static#n=this.\u0275inj=t.G2t({imports:[b.iI.forChild(yt),b.iI]})}return e})();var Ft=c(69388),Dt=c(49122),vt=c(76108),Tt=c(18560);let Rt=(()=>{class e{static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275mod=t.$C({type:e});static#n=this.\u0275inj=t.G2t({imports:[f.MD,wt,r.tP,Ft.O,Dt.P,h.RI,vt.h,_.X1,M.Hl,O.m_,Tt.x]})}return e})()},14945:(j,x,c)=>{c.d(x,{C:()=>_});var f=c(31635),b=c(49894),t=c(25558),P=c(73028),d=c(54438),h=c(52168),D=c(60177);function u(w,i){if(1&w&&(d.j41(0,"li",2)(1,"a",3),d.EFF(2),d.k0s()()),2&w){const s=i.$implicit,r=i.index,g=d.XpG();d.R7$(),d.AVh("active",r===g.breadcrumbs.length-1),d.Y8G("routerLink",s.url)("queryParams",s.params),d.R7$(),d.SpI(" ",s.label," ")}}let _=class E{set breadcrumbLabel(i){this.label=i}constructor(i,s){this.router=i,this.route=s}ngOnInit(){this.route.data.pipe((0,t.n)(i=>(this.breadcrumbs=i?.breadcrumbs,this.route.queryParams)),(0,P.Z)(i=>{const s=Object.keys(i).reduce((r,g)=>("category"!==g&&"childCategory"!==g&&(r[g]=i[g]),r),{});return Object.keys(i).forEach(r=>{if("companyId"===r){const g=this.breadcrumbs.findIndex(O=>"OFFERS"===O.label);g&&this.breadcrumbs.splice(g,1);const M=i[r].slice(0,i[r].lastIndexOf("-"));this.addBreadcrumb(M,`/b2bmarket/company/${i[r]}`)}else"category"!==r&&"childCategory"!==r||this.breadcrumbs.some(g=>g.label===i[r])||this.addBreadcrumb(i[r],`${this.breadcrumbs[this.breadcrumbs.length-1].url}/${i[r]}`,Object.keys(s).length>0?s:null)}),this.route.parent.params}),(0,P.Z)(i=>{if(i?.id&&this.alreadyExist(i?.id||i?.category&&this.alreadyExist(i?.category))){const s=i?.id||i?.category,r=this.router.url.substring(0,this.router.url.indexOf(s)+s.length);this.addBreadcrumb(s,r)}return this.route.params}),(0,b.s)(this)).subscribe(i=>{if(i?.id&&this.alreadyExist(i?.id)||i?.category&&this.alreadyExist(i?.category)){const s=i?.id||i?.category,r=this.router.url.substring(0,this.router.url.indexOf(s)+s.length);this.addBreadcrumb(s,r,null,i?.category?"category":null)}if(i?.childCategory&&this.alreadyExist(i?.childCategory)){const s=this.router.url.substring(0,this.router.url.indexOf(i.childCategory)+i.childCategory.length);this.addBreadcrumb(i.childCategory,s)}i?.productId&&this.alreadyExist(i?.productId)&&this.addBreadcrumb(i.productId,this.router.url),this.label&&this.setLabel(this.label)})}setLabel(i){this.breadcrumbs[this.breadcrumbs.length-1].label=i,this.breadcrumbs[this.breadcrumbs?.length-2].url.includes("/products/")&&this.breadcrumbs.splice(this.breadcrumbs.length-2,1)}alreadyExist(i){return!this.breadcrumbs.some(s=>s.label===i)}addBreadcrumb(i,s,r,g){if(this.breadcrumbs.some(M=>"category"===M?.type)){const M=this.breadcrumbs.indexOf(this.breadcrumbs.find(O=>"category"===O?.type));this.breadcrumbs.splice(M,1)}this.breadcrumbs=[...this.breadcrumbs,{label:i,url:s,params:r,type:g}]}static#t=this.\u0275fac=function(s){return new(s||E)(d.rXU(h.Ix),d.rXU(h.nX))};static#e=this.\u0275cmp=d.VBU({type:E,selectors:[["b2b-breadcrumbs"]],inputs:{breadcrumbLabel:"breadcrumbLabel"},decls:2,vars:1,consts:[[1,"breadcrumb"],["class","breadcrumb-item",4,"ngFor","ngForOf"],[1,"breadcrumb-item"],["b2bNgxLink","",3,"routerLink","queryParams"]],template:function(s,r){1&s&&(d.j41(0,"ul",0),d.DNE(1,u,3,5,"li",1),d.k0s()),2&s&&(d.R7$(),d.Y8G("ngForOf",r.breadcrumbs))},dependencies:[D.Sq,h.Wk],styles:[".breadcrumb[_ngcontent-%COMP%]{padding:18px 100px 0}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#222224;font-size:11px;font-weight:500;line-height:136%;letter-spacing:.66px;text-transform:uppercase}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#9fa4bb}@media (max-width: 48em){.breadcrumb[_ngcontent-%COMP%]{padding:18px;border-bottom:1px solid #9FA4BB}}"]})};_=(0,f.Cg)([(0,b.d)()],_)},49122:(j,x,c)=>{c.d(x,{P:()=>d}),c(14945);var b=c(60177),t=c(52168),P=c(54438);let d=(()=>{class h{static#t=this.\u0275fac=function(_){return new(_||h)};static#e=this.\u0275mod=P.$C({type:h});static#n=this.\u0275inj=P.G2t({imports:[b.MD,t.iI]})}return h})()}}]);