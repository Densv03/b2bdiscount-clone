"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3602],{33602:(q,j,f)=>{f.r(j),f.d(j,{AdminArticleModule:()=>n});var y=f(60177),S=f(52168),v=f(85623),x=f(70152),w=f(23294),R=f(99172),D=f(25558),O=f(5964),tt=f(96354),g=f(89992),_=f(89417),P=f(51809),E=f(49894),G=f(84572),L=f(75575),C=f(49969),a=f(54438),N=f(59052),U=f(13065),$=f(72558),M=f(7886),Y=f(76828),V=f(29200),K=f(81953),W=f(25232),X=f(89127),B=f(73955);function z(i,o){1&i&&(a.j41(0,"p",17),a.EFF(1," This field is required "),a.k0s()),2&i&&a.Y8G("@fadeInOut",void 0)}function F(i,o,l){Object.entries(o).forEach(([c,u])=>{if(Array.isArray(u))u.filter(s=>!!s).forEach(s=>{i.append(c,s)});else if("image"===c)Array.from(u).forEach(s=>{i.append(c,s)});else if("object"==typeof u&&null!==u)F(i,u,c);else{const s=l?`${l}${(0,L.Z)(c)}`:c;i.append(s,u)}})}const J=[{path:"",component:(()=>{let i=class k{constructor(l,c,u,s,d){this._formBuilder=l,this._categoriesService=c,this._wikiService=u,this._hotToastService=s,this._activatedRoute=d,this.searchControl=new _.MJ,this.b2bNgxSelectThemeEnum=g.E,this.b2bNgxButtonThemeEnum=P.a,this.formGroup=this.getFormGroup(),this.level1Categories=[],this.level2Categories=[],this.searchedOptions$=this.getSearchedOptions()}getSearchedOptions(){return this.searchControl.valueChanges.pipe((0,x.B)(1e3),(0,w.F)(),(0,R.Z)(""),(0,D.n)(l=>this._wikiService.getTags(l)))}setSearch(l){this.searchControl.setValue(l)}setLevel1Categories(){this._categoriesService.getWikiCategories().pipe((0,E.s)(this)).subscribe(l=>{this.level1Categories=l})}setLevel2Categories(){this.formGroup.get("level1Category").valueChanges.pipe((0,E.s)(this),(0,O.p)(l=>!!l)).subscribe(l=>{this.level2Categories=this.level1Categories.find(c=>c._id===l)?.children})}updateArticle(){const l=this._activatedRoute.paramMap.pipe((0,tt.T)(u=>u.get("id")),(0,O.p)(u=>!!u),(0,D.n)(u=>this._wikiService.getArticleById(u))),c=this._categoriesService.getWikiCategories();(0,G.z)([l,c]).pipe((0,E.s)(this)).subscribe(([u,s])=>{const d=u.category?._id,h=s.find(p=>p?.children.find(m=>m._id===d))?._id;this.formGroup.patchValue({...u,image:[u.image],level1Category:h,level2Category:d})})}ngOnInit(){this.updateArticle(),this.setLevel1Categories(),this.setLevel2Categories()}getFormGroup(){return this._formBuilder.group({_id:null,title:["",_.k0.required],description:"",author:"",image:"",country:[null],tags:[[]],level1Category:[null],level2Category:[null]})}onSubmit(l){if("INVALID"===this.formGroup.status)return;const c=new FormData,{_id:u,level1Category:s,level2Category:d,tags:h,...p}=l,m={...p,category:d??s,tags:h.map(b=>b._id||b.name)};for(const b in m)(!m[b]||Array.isArray(m[b])&&!m[b].length)&&delete m[b];m.image=m.image[0],u?this._wikiService.updateArticle(u,m).pipe((0,E.s)(this),this._hotToastService.observe({loading:"Article updating...",success:"Article updated successfully!",error:"Article updating failed!"})).subscribe(()=>{}):(F(c,m),this._wikiService.createArticle(c).pipe((0,E.s)(this),this._hotToastService.observe({loading:"Article creating...",success:"Article created successfully!",error:"Article creation failed!"})).subscribe(()=>{}))}static#t=this.\u0275fac=function(c){return new(c||k)(a.rXU(_.ok),a.rXU(N.w),a.rXU(U.i),a.rXU($.U_),a.rXU(S.nX))};static#e=this.\u0275cmp=a.VBU({type:k,selectors:[["b2b-admin-article"]],decls:25,vars:19,consts:[[1,"admin-article",3,"ngSubmit","formGroup"],[1,"admin-article__label"],["formControlName","image",1,"admin-article__image"],[1,"admin-article__main"],["formControlName","title","placeholder","Enter article label",1,"admin-article__input",3,"label"],["class","error",4,"ngIf"],["formControlName","author","placeholder","Enter article author",1,"admin-article__input",3,"label"],[1,"admin-article__categories"],[1,"admin-article__category"],["formControlName","level1Category","placeholder","Select category","bindValue","_id","bindLabel","name",3,"options","theme"],[1,"admin-article__sub-category"],["formControlName","level2Category","placeholder","Select subcategory","bindValue","_id","bindLabel","name",3,"options","theme"],[1,"admin-article__additional"],["formControlName","country","placeholder","Select Country",1,"admin-article__country",3,"theme"],[1,"admin-article__tags"],["formControlName","tags",3,"searched","searchedOptions"],["b2bNgxButton","",1,"admin-article__button",3,"theme"],[1,"error"]],template:function(c,u){if(1&c&&(a.j41(0,"form",0),a.bIt("ngSubmit",function(){return u.onSubmit(u.formGroup.value)}),a.j41(1,"p",1),a.EFF(2),a.k0s(),a.j41(3,"b2b-ngx-file",2),a.EFF(4,"Image"),a.k0s(),a.j41(5,"div",3)(6,"div"),a.nrm(7,"b2b-ngx-input",4),a.nI1(8,"translate"),a.DNE(9,z,2,1,"p",5),a.k0s(),a.j41(10,"div"),a.nrm(11,"b2b-ngx-input",6),a.nI1(12,"translate"),a.k0s()(),a.j41(13,"div",7)(14,"div",8),a.nrm(15,"b2b-ngx-select",9),a.k0s(),a.j41(16,"div",10),a.nrm(17,"b2b-ngx-select",11),a.k0s()(),a.j41(18,"div",12),a.nrm(19,"b2b-ngx-country-select",13),a.j41(20,"div",14)(21,"b2b-ngx-chips",15),a.nI1(22,"async"),a.bIt("searched",function(d){return u.setSearch(d)}),a.k0s()()(),a.j41(23,"button",16),a.EFF(24),a.k0s()()),2&c){let s;a.Y8G("formGroup",u.formGroup),a.R7$(2),a.SpI(" ",u.formGroup.get("_id").value?"Edit an article":"Add an article"," "),a.R7$(5),a.Y8G("label",a.bMT(8,13,"LABELS.ARTICLE_LABEL")),a.R7$(2),a.Y8G("ngIf",null==(s=u.formGroup.get("title").errors)?null:s.required),a.R7$(2),a.Y8G("label",a.bMT(12,15,"LABELS.ARTICLE_AUTHOR")),a.R7$(4),a.Y8G("options",u.level1Categories)("theme",u.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),a.R7$(2),a.Y8G("options",u.level2Categories)("theme",u.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),a.R7$(2),a.Y8G("theme",u.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),a.R7$(2),a.Y8G("searchedOptions",a.bMT(22,17,u.searchedOptions$)),a.R7$(2),a.Y8G("theme",u.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),a.R7$(),a.SpI(" ",u.formGroup.get("_id").value?"Update an article":"Create an article"," ")}},dependencies:[y.bT,M.f,Y.D,V.P,K.Z,W.z,_.qT,_.BC,_.cb,_.j4,_.JD,X.m,y.Jj,B.D9],styles:[".admin-article[_ngcontent-%COMP%]{display:block;margin:30px;background-color:#fff;padding:60px}.admin-article[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-size:14px;color:#e63d3d;margin-top:7px;margin-bottom:0}.admin-article[_ngcontent-%COMP%]   .admin-article__image[_ngcontent-%COMP%]{display:block;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__label[_ngcontent-%COMP%]{font-weight:700;font-size:32px;color:#0f0f11}.admin-article[_ngcontent-%COMP%]   .admin-article__input[_ngcontent-%COMP%]{display:block;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__main[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.admin-article[_ngcontent-%COMP%]   .admin-article__main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:49%}.admin-article[_ngcontent-%COMP%]   .admin-article__main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .admin-article__input[_ngcontent-%COMP%]{width:100%}.admin-article[_ngcontent-%COMP%]   .admin-article__additional[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__additional[_ngcontent-%COMP%]   .admin-article__country[_ngcontent-%COMP%], .admin-article[_ngcontent-%COMP%]   .admin-article__additional[_ngcontent-%COMP%]   .admin-article__tags[_ngcontent-%COMP%]{width:49%}.admin-article[_ngcontent-%COMP%]   .admin-article__categories[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__categories[_ngcontent-%COMP%]   .admin-article__category[_ngcontent-%COMP%], .admin-article[_ngcontent-%COMP%]   .admin-article__categories[_ngcontent-%COMP%]   .admin-article__sub-category[_ngcontent-%COMP%]{width:49%}.admin-article[_ngcontent-%COMP%]   .admin-article__button[_ngcontent-%COMP%]{margin-top:30px;padding:15px 40px}  .angular-editor-textarea img{max-width:100%}  .angular-editor-textarea p{line-height:24px}  .admin-article__description{display:block;margin-top:30px;overflow:hidden;line-height:24px}  .admin-article__description span,   .admin-article__description p{line-height:24px}  .admin-article__description ul,   .admin-article__description li{list-style:disc!important}  .admin-article__description ul{padding-left:30px}  .admin-article__description strong,   .admin-article__description b{font-weight:700!important}  .admin-article__description img{width:100%}"],data:{animation:[(0,C.hZ)("fadeInOut",[(0,C.kY)(":enter",[(0,C.iF)({opacity:0}),(0,C.i0)(500,(0,C.iF)({opacity:1}))]),(0,C.kY)(":leave",[(0,C.i0)(500,(0,C.iF)({opacity:0}))])])]},changeDetection:0})};return i=(0,v.Cg)([(0,E.d)()],i),i})()}];let Z=(()=>{class i{static#t=this.\u0275fac=function(c){return new(c||i)};static#e=this.\u0275mod=a.$C({type:i});static#n=this.\u0275inj=a.G2t({imports:[S.iI.forChild(J),S.iI]})}return i})();var H=f(42944),Q=f(32941),nt=f(99348),t=f(41820),e=f(11058),r=f(33797);let n=(()=>{class i{static#t=this.\u0275fac=function(c){return new(c||i)};static#e=this.\u0275mod=a.$C({type:i});static#n=this.\u0275inj=a.G2t({imports:[y.MD,Z,H.E,Q.A,nt._,t.i,e.o,_.X1,r.r,B.h]})}return i})()},7886:(q,j,f)=>{f.d(j,{f:()=>D});var y=f(54438),S=f(81258),v=f(89417),x=f(79601),w=f(31586),R=f(36529);let D=(()=>{class O{constructor(g){this._changeDetectionRef=g,this.label="",this.errors="",this.version=w.v.B2B,this.NgxInputVersionEnum=w.v,this.type="input",this.placeholder="",this.theme=x.Q.BACKGROUND_GRAY,this.onChange=()=>null,this.onTouched=()=>null,this.formControl=new v.MJ(""),this.id=(0,S.Z)(),this.id="id"}get inputClass(){return this.version===w.v.B2B?"b2b-ngx-input":"globy-ngx-input"}ngOnChanges(g){g.errors&&this.formControl.setErrors(g.errors)}ngOnInit(){this.subscribeOnValueChanges()}validate(){return this.formControl.errors}registerOnChange(g){this.onChange=g}registerOnTouched(g){this.onTouched=g}writeValue(g){this.formControl.setValue(g)}setDisabledState(g){g?this.formControl.disable():this.formControl.enable()}subscribeOnValueChanges(){this.formControl.valueChanges.pipe().subscribe(g=>{this.onChange(g)})}static#t=this.\u0275fac=function(_){return new(_||O)(y.rXU(y.gRc))};static#e=this.\u0275cmp=y.VBU({type:O,selectors:[["b2b-ngx-input"]],inputs:{type:"type",placeholder:"placeholder",theme:"theme",label:"label",errors:"errors",version:"version"},features:[y.Jv_([{provide:v.kq,useExisting:(0,y.Rfq)(()=>O),multi:!0},{provide:v.cz,useExisting:(0,y.Rfq)(()=>O),multi:!0}]),y.OA$],decls:1,vars:7,consts:[["b2bNgxInput","",3,"theme","formControl","type","id","placeholder"]],template:function(_,P){1&_&&y.nrm(0,"input",0),2&_&&(y.HbH(P.inputClass),y.Y8G("theme",P.theme)("formControl",P.formControl)("type",P.type)("id",P.id)("placeholder",P.placeholder))},dependencies:[v.me,v.BC,v.l_,R.b],changeDetection:0})}return O})()},85623:(q,j,f)=>{function w(t,e,r,n){var l,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(l=t[c])&&(o=(i<3?l(o):i>3?l(e,r,o):l(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}f.d(j,{Cg:()=>w}),"function"==typeof SuppressedError&&SuppressedError}}]);