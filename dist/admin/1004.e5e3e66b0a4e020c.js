"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1004],{81004:(N,h,a)=>{a.r(h),a.d(h,{AdminBillingModule:()=>K});var d=a(96814),e=a(19347),m=a(56223),P=a(82242),y=a(43377),C=a(52748),g=a(74027),r=a(44112),v=a(81374),O=a(87046),_=a(37398),A=a(66027),f=a(48530),c=a(24411),t=a(65879),s=a(17856),u=a(83498),T=a(88657);function B(i,D){if(1&i&&(t.ynx(0),t.TgZ(1,"label"),t._uU(2,"Enter amount of quotes"),t.qZA(),t._UZ(3,"input",7),t.BQk()),2&i){const n=t.oxw();t.xp6(3),t.Q6J("theme",n.b2bNgxInputThemeEnum.BACKGROUND_GRAY)}}let b=(()=>{class i{constructor(n,o,l){this.dialogRef=n,this.formBuilder=o,this.data=l,this.b2bNgxInputThemeEnum=A.T,this.b2bNgxButtonThemeEnum=f.n,this.b2bNgxSelectThemeEnum=O.B,this.formGroup=this.getFormGroup(),this.typePlanOptions=this.getTypePlanOptions(),this.isQuotesAmountInputVisible$=this.isQuotesAmountInputVisible()}ngOnInit(){this.data.paymentPlan&&this.formGroup.patchValue(this.data.paymentPlan),this.initFormSettings()}submitForm(n){this.dialogRef.close({value:n.value,mode:this.getEditMode(),id:this.data?.paymentPlan?._id})}getButtonText(){return"add"===this.getEditMode()?"Add payment plan":"Edit payment plan"}initFormSettings(){this.formGroup.get("typePlan").valueChanges.subscribe(n=>{"quotes"===n?this.formGroup.get("amountOfQuotes").setValidators([m.kI.required,(0,c.X)()]):this.formGroup.get("amountOfQuotes").clearValidators(),this.formGroup.get("amountOfQuotes").updateValueAndValidity()})}getFormGroup(){return this.formBuilder.group({typePlan:[null,m.kI.required],title:[null,m.kI.required],price:[null,[m.kI.required,(0,c.X)()]],amountOfQuotes:[null],description:[null,m.kI.required]})}isQuotesAmountInputVisible(){return this.formGroup.get("typePlan").valueChanges.pipe((0,_.U)(n=>"quotes"===n))}getTypePlanOptions(){return[{value:"subscription",label:"Subscription"},{value:"quotes",label:"Quotes"}]}getEditMode(){return this.data.paymentPlan?"edit":"add"}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(e.so),t.Y36(m.qu),t.Y36(e.WI))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["b2b-select-billing-method-dialog"]],decls:16,vars:12,consts:[[3,"formGroup","ngSubmit"],["type","text","formControlName","title","b2bNgxInput","","placeholder","Title",1,"select-billing-method-dialog__form-item",3,"theme"],["type","text","formControlName","price","b2bNgxInput","","placeholder","Price",1,"select-billing-method-dialog__form-item",3,"theme"],["type","text","formControlName","description","b2bNgxInput","","placeholder","Description",1,"select-billing-method-dialog__form-item",3,"theme"],["placeholder","Select type of billing plan","bindValue","value","bindLabel","label","formControlName","typePlan",1,"select-billing-method-dialog__form-item__select","select-billing-method-dialog__form-item",3,"options","theme"],[4,"ngIf"],["b2bNgxButton","",1,"select-billing-method-dialog__submit-button",3,"theme","disabled"],["type","text","b2bNgxInput","","placeholder","Amount of quotes","formControlName","amountOfQuotes",1,"select-billing-method-dialog__form-item",3,"theme"]],template:function(o,l){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return l.submitForm(l.formGroup)}),t.TgZ(1,"label"),t._uU(2,"Enter title"),t.qZA(),t._UZ(3,"input",1),t.TgZ(4,"label"),t._uU(5,"Enter price"),t.qZA(),t._UZ(6,"input",2),t.TgZ(7,"label"),t._uU(8,"Enter description"),t.qZA(),t._UZ(9,"input",3),t.TgZ(10,"b2b-ngx-select",4),t._uU(11," Select type of billing plan "),t.qZA(),t.YNc(12,B,4,1,"ng-container",5),t.ALo(13,"async"),t.TgZ(14,"button",6),t._uU(15),t.qZA()()),2&o&&(t.Q6J("formGroup",l.formGroup),t.xp6(3),t.Q6J("theme",l.b2bNgxInputThemeEnum.BACKGROUND_GRAY),t.xp6(3),t.Q6J("theme",l.b2bNgxInputThemeEnum.BACKGROUND_GRAY),t.xp6(3),t.Q6J("theme",l.b2bNgxInputThemeEnum.BACKGROUND_GRAY),t.xp6(1),t.Q6J("options",l.typePlanOptions)("theme",l.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.xp6(2),t.Q6J("ngIf",t.lcZ(13,10,l.isQuotesAmountInputVisible$)),t.xp6(2),t.Q6J("theme",l.b2bNgxButtonThemeEnum.BACKGROUND_BLACK)("disabled","VALID"!==l.formGroup.status),t.xp6(1),t.hij(" ",l.getButtonText()," "))},dependencies:[d.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,s.k,u.f,T.B,d.Ov],styles:[".select-billing-method-dialog__form-item[_ngcontent-%COMP%]{margin-bottom:15px}.select-billing-method-dialog__form-item__select[_ngcontent-%COMP%]{display:block}.select-billing-method-dialog__submit-button[_ngcontent-%COMP%]{padding:15px 20px;margin-top:15px}"]})}return i})();var x=a(87588),I=a(58133),S=a(65619),Z=a(32181);let U=(()=>{class i{constructor(n){this.apiService=n,this.currentPaymentPlans=new S.X([])}getCurrentPaymentPlans(){return this.currentPaymentPlans.asObservable()}updateCurrentPaymentPlans(n){this.apiService.get("authorize-net/get-payment-plan"+(n?`?type=${n}`:"")).pipe((0,Z.h)(l=>!!l),(0,v.P)()).subscribe(l=>this.currentPaymentPlans.next(l))}addPaymentPlan(n){return this.apiService.post("authorize-net/add-new-payment-plan",n)}updatePaymentPlanById(n,o){return this.apiService.put("authorize-net/update-payment-plan",{id:n,...o})}deletePaymentPlanById(n){return this.apiService.delete("authorize-net/delete-payment-plan",{body:{id:n}})}getPaymentPlans(n){return this.apiService.get("authorize-net/get-payment-plan"+(n?`?type=${n}`:""))}getQuotesPaymentPlansToDisplay(){return this.apiService.get("authorize-net/get-payment-plan?type=quotes").pipe((0,_.U)(n=>n.length>3?n.slice(0,3):n))}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(x.s))};static#n=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function w(i,D){if(1&i&&(t.TgZ(0,"h3"),t._uU(1),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.hij(" Quotes number: ",n.paymentPlan.amountOfQuotes," ")}}let R=(()=>{class i{constructor(){this.onDelete=new t.vpe,this.onEdit=new t.vpe,this.b2bNgxButtonThemeEnum=f.n}deletePaymentPlan(n,o){o.stopPropagation(),this.onDelete.emit(n)}editPaymentPlan(n){this.onEdit.emit(n)}static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["b2b-admin-payment-plan-item"]],inputs:{paymentPlan:"paymentPlan"},outputs:{onDelete:"onDelete",onEdit:"onEdit"},decls:12,vars:6,consts:[[1,"admin-payment-plan-item",3,"click"],[4,"ngIf"],["b2bNgxButton","",3,"theme","click"]],template:function(o,l){1&o&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return l.editPaymentPlan(l.paymentPlan)}),t.TgZ(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"h3"),t._uU(6),t.qZA(),t.TgZ(7,"h3"),t._uU(8),t.qZA(),t.YNc(9,w,2,1,"h3",1),t.TgZ(10,"button",2),t.NdJ("click",function(E){return l.deletePaymentPlan(l.paymentPlan._id,E)}),t._uU(11," Delete "),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(l.paymentPlan.title),t.xp6(2),t.hij("Payment plan: ",l.paymentPlan.typePlan,""),t.xp6(2),t.hij("Price: ",l.paymentPlan.price,""),t.xp6(2),t.hij("Description: ",l.paymentPlan.description,""),t.xp6(1),t.Q6J("ngIf","quotes"===l.paymentPlan.typePlan),t.xp6(1),t.Q6J("theme",l.b2bNgxButtonThemeEnum.BACKGROUND_BLACK))},dependencies:[d.O5,u.f],styles:[".admin-payment-plan-item[_ngcontent-%COMP%]{background-color:#fff;border:2px solid gray}.admin-payment-plan-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.admin-payment-plan-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-left:20px}.admin-payment-plan-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:90%;height:40px;margin:10px auto}"]})}return i})();function G(i,D){if(1&i){const n=t.EpF();t.TgZ(0,"b2b-admin-payment-plan-item",2),t.NdJ("onDelete",function(l){t.CHM(n);const p=t.oxw();return t.KtG(p.deletePaymentPlan(l))})("onEdit",function(l){t.CHM(n);const p=t.oxw();return t.KtG(p.editPaymentPlan(l))}),t.qZA()}2&i&&t.Q6J("paymentPlan",D.$implicit)}let J=(()=>{class i{constructor(){this.onDelete=new t.vpe,this.onEdit=new t.vpe}ngOnInit(){}deletePaymentPlan(n){this.onDelete.emit(n)}editPaymentPlan(n){this.onEdit.emit(n)}static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["b2b-admin-payment-plan-list"]],inputs:{paymentPlans:"paymentPlans"},outputs:{onDelete:"onDelete",onEdit:"onEdit"},decls:2,vars:1,consts:[[1,"admin-payment-plan-item-list__container"],["class","admin-payment-plan-item-list__item",3,"paymentPlan","onDelete","onEdit",4,"ngFor","ngForOf"],[1,"admin-payment-plan-item-list__item",3,"paymentPlan","onDelete","onEdit"]],template:function(o,l){1&o&&(t.TgZ(0,"div",0),t.YNc(1,G,1,1,"b2b-admin-payment-plan-item",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",l.paymentPlans))},dependencies:[d.sg,R],styles:[".admin-payment-plan-item-list__container[_ngcontent-%COMP%]{display:grid;width:90%;margin:0 auto;grid-template-columns:1fr 1fr 1fr;grid-gap:10px}"]})}return i})();const F=[{path:"",component:(()=>{class i{constructor(n,o,l,p){this.matDialog=n,this.apiService=o,this.hotToastService=l,this.adminBillingService=p,this.b2bNgxSelectThemeEnum=O.B,this.currentPaymentPlans=this.adminBillingService.getCurrentPaymentPlans()}ngOnInit(){this.adminBillingService.updateCurrentPaymentPlans()}addBillingPlan(){this.matDialog.open(b,{data:{}}).afterClosed().subscribe(n=>{!n||"add"!==n.mode||this.adminBillingService.addPaymentPlan(n.value).pipe(this.hotToastService.observe({loading:"Adding payment plan...",success:"Payment plan added successfully",error:"Error adding payment plan"})).subscribe(()=>{this.adminBillingService.updateCurrentPaymentPlans()})})}deletePaymentPlan(n){this.adminBillingService.deletePaymentPlanById(n).pipe(this.hotToastService.observe({loading:"Deleting payment plan...",success:"Payment plan deleted successfully",error:"Error deleting payment plan"}),(0,v.P)()).subscribe(()=>{this.adminBillingService.updateCurrentPaymentPlans()})}editPaymentPlan(n){this.matDialog.open(b,{data:{paymentPlan:n}}).afterClosed().subscribe(o=>{!o||"edit"!==o.mode||this.adminBillingService.updatePaymentPlanById(o.id,o.value).pipe(this.hotToastService.observe({loading:"Editing payment plan...",success:"Payment plan edited successfully",error:"Error editing payment plan"}),(0,v.P)()).subscribe(()=>{this.adminBillingService.updateCurrentPaymentPlans()})})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(e.uw),t.Y36(x.s),t.Y36(I.jE),t.Y36(U))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["b2b-admin-billing"]],decls:4,vars:3,consts:[[1,"admin-billing__add-billing-plan",3,"click"],[3,"paymentPlans","onDelete","onEdit"]],template:function(o,l){1&o&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return l.addBillingPlan()}),t._uU(1,"+"),t.qZA(),t.TgZ(2,"b2b-admin-payment-plan-list",1),t.NdJ("onDelete",function(E){return l.deletePaymentPlan(E)})("onEdit",function(E){return l.editPaymentPlan(E)}),t.ALo(3,"async"),t.qZA()),2&o&&(t.xp6(2),t.Q6J("paymentPlans",t.lcZ(3,1,l.currentPaymentPlans)))},dependencies:[J,d.Ov],styles:[".admin-billing__add-billing-plan[_ngcontent-%COMP%]{color:#fff;width:50px;height:50px;display:flex;justify-content:center;align-items:center;font-weight:700;background-color:#000;margin-top:30px;margin-left:30px;margin-bottom:40px}"]})}return i})()}];let Q=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({imports:[r.Bz.forChild(F),r.Bz]})}return i})(),K=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275mod=t.oAB({type:i});static#e=this.\u0275inj=t.cJS({imports:[d.ez,Q,e.Is,m.UX,P.r,y.l,C.ED,g.F]})}return i})()},64636:(N,h,a)=>{a.d(h,{J:()=>f});var d=a(97582),e=a(65879),m=a(92438),P=a(51791),y=a(836),C=a(32181),g=a(96814),r=a(83498),v=a(53803);function O(c,t){if(1&c){const s=e.EpF();e.TgZ(0,"li")(1,"button",6),e.NdJ("click",function(T){const b=e.CHM(s).$implicit,x=e.oxw(2);return e.KtG(x.callOptionFunc(T,b))}),e._UZ(2,"img",7),e.TgZ(3,"span"),e._uU(4),e.qZA()()()}if(2&c){const s=t.$implicit;e.xp6(2),e.Q6J("name",s.icon),e.xp6(1),e.Tol(s.className+" ngx-dropdown-text"),e.xp6(1),e.Oqu(s.label)}}function _(c,t){if(1&c&&(e.TgZ(0,"ul",4),e.YNc(1,O,5,4,"li",5),e.qZA()),2&c){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.options)}}const A=["*"];let f=class M{constructor(t){this.changeDetection=t,this.isMenuShow=!1,this.toggleOptionClick=new e.vpe}callOptionFunc(t,s){this.isMenuShow=!1,t.preventDefault(),t.stopImmediatePropagation(),s.onClick(this.optionToReturn||s,this.requiredOptionToCheck)}get menuClassName(){return`${this.className} `}subscribeOnClickOutside(t){const s=(0,m.R)(document,"click").pipe((0,y.T)(1),(0,P.t)(this),(0,C.h)(u=>!t.contains(u.target))).subscribe(()=>{this.isMenuShow=!1,this.changeDetection.detectChanges(),s.unsubscribe()})}showMenu(t,s){this.isMenuShow=!this.isMenuShow,t.stopImmediatePropagation(),t.preventDefault(),this.isMenuShow&&this.subscribeOnClickOutside(s)}static#t=this.\u0275fac=function(s){return new(s||M)(e.Y36(e.sBO))};static#n=this.\u0275cmp=e.Xpm({type:M,selectors:[["b2b-ngx-dropdown"]],inputs:{options:"options",requiredOptionToCheck:"requiredOptionToCheck",className:"className",optionToReturn:"optionToReturn"},outputs:{toggleOptionClick:"toggleOptionClick"},ngContentSelectors:A,decls:5,vars:1,consts:[[1,"ngx-dropdown-container"],["container",""],[3,"click"],["class","ngx-dropdown",4,"ngIf"],[1,"ngx-dropdown"],[4,"ngFor","ngForOf"],["b2bNgxButton","",1,"ngx-dropdown-button",3,"click"],["b2bNgxIcon","",1,"ngx-dropdown-button-icon",3,"name"]],template:function(s,u){if(1&s){const T=e.EpF();e.F$t(),e.TgZ(0,"div",0,1)(2,"div",2),e.NdJ("click",function(b){e.CHM(T);const x=e.MAs(1);return e.KtG(u.showMenu(b,x))}),e.Hsn(3),e.qZA(),e.YNc(4,_,2,1,"ul",3),e.qZA()}2&s&&(e.xp6(4),e.Q6J("ngIf",u.isMenuShow))},dependencies:[g.sg,g.O5,r.f,v.p],styles:[".ngx-dropdown-container[_ngcontent-%COMP%]{position:relative}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]{position:absolute;z-index:2;background:#ffffff;box-shadow:0 2px 12px #0f0f1129;border-radius:4px;width:180px;right:0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px;width:100%}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]:hover{background-color:#eff4fa}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]   .ngx-dropdown-text[_ngcontent-%COMP%]{text-align:left;font-weight:500;font-size:13px;line-height:18px;color:#0f0f11;margin-left:12px}"],changeDetection:0})};f=(0,d.gn)([(0,P.c)()],f)},52748:(N,h,a)=>{a.d(h,{ED:()=>C,Yr:()=>g}),a(64636);var e=a(96814),m=a(43377),P=a(98653),y=a(65879);let C=(()=>{class r{static#t=this.\u0275fac=function(_){return new(_||r)};static#n=this.\u0275mod=y.oAB({type:r});static#e=this.\u0275inj=y.cJS({imports:[e.ez,m.l,P.w]})}return r})();var g=function(r){return r.RESTORE="Restore",r.ARCHIVE="Archive",r.DELETE="Delete",r.EDIT="Edit",r}(g||{})}}]);