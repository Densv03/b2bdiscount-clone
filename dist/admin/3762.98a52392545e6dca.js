"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3762],{3762:(R,b,e)=>{e.r(b),e.d(b,{AdminArticleModule:()=>k});var l=e(38684),v=e(9063),g=e(35285),y=e(93703),_=e(24241),A=e(51477),O=e(51983),m=e(46295),I=e(76999),o=e(10424),c=e(82575),h=e(22001),f=e(19825),S=e(99927),B=e(31239),p=e(24892),t=e(89985),D=e(41513),L=e(4249),N=e(24797),U=e(55774),j=e(50508),F=e(27936),$=e(61553),Y=e(7040),V=e(54697),x=e(12819);function K(r,G){1&r&&(t.j41(0,"p",17),t.EFF(1," This field is required "),t.k0s()),2&r&&t.Y8G("@fadeInOut",void 0)}function T(r,G,a){Object.entries(G).forEach(([i,n])=>{if(Array.isArray(n))n.filter(s=>!!s).forEach(s=>{r.append(i,s)});else if("image"===i)Array.from(n).forEach(s=>{r.append(i,s)});else if("object"==typeof n&&null!==n)T(r,n,i);else{const s=a?`${a}${(0,B.Z)(i)}`:i;r.append(s,n)}})}const W=[{path:"",component:(()=>{let r=class E{constructor(a,i,n,s,u){this._formBuilder=a,this._categoriesService=i,this._wikiService=n,this._hotToastService=s,this._activatedRoute=u,this.searchControl=new c.MJ,this.b2bNgxSelectThemeEnum=o.E,this.b2bNgxButtonThemeEnum=h.a,this.formGroup=this.getFormGroup(),this.level1Categories=[],this.level2Categories=[],this.searchedOptions$=this.getSearchedOptions()}getSearchedOptions(){return this.searchControl.valueChanges.pipe((0,y.B)(1e3),(0,_.F)(),(0,A.Z)(""),(0,O.n)(a=>this._wikiService.getTags(a)))}setSearch(a){this.searchControl.setValue(a)}setLevel1Categories(){this._categoriesService.getWikiCategories().pipe((0,f.s)(this)).subscribe(a=>{this.level1Categories=a})}setLevel2Categories(){this.formGroup.get("level1Category").valueChanges.pipe((0,f.s)(this),(0,m.p)(a=>!!a)).subscribe(a=>{this.level2Categories=this.level1Categories.find(i=>i._id===a)?.children})}updateArticle(){const a=this._activatedRoute.paramMap.pipe((0,I.T)(n=>n.get("id")),(0,m.p)(n=>!!n),(0,O.n)(n=>this._wikiService.getArticleById(n))),i=this._categoriesService.getWikiCategories();(0,S.z)([a,i]).pipe((0,f.s)(this)).subscribe(([n,s])=>{const u=n.category?._id,M=s.find(P=>P?.children.find(d=>d._id===u))?._id;this.formGroup.patchValue({...n,image:[n.image],level1Category:M,level2Category:u})})}ngOnInit(){this.updateArticle(),this.setLevel1Categories(),this.setLevel2Categories()}getFormGroup(){return this._formBuilder.group({_id:null,title:["",c.k0.required],description:"",author:"",image:"",country:[null],tags:[[]],level1Category:[null],level2Category:[null]})}onSubmit(a){if("INVALID"===this.formGroup.status)return;const i=new FormData,{_id:n,level1Category:s,level2Category:u,tags:M,...P}=a,d={...P,category:u??s,tags:M.map(C=>C._id||C.name)};for(const C in d)(!d[C]||Array.isArray(d[C])&&!d[C].length)&&delete d[C];d.image=d.image[0],n?this._wikiService.updateArticle(n,d).pipe((0,f.s)(this),this._hotToastService.observe({loading:"Article updating...",success:"Article updated successfully!",error:"Article updating failed!"})).subscribe(()=>{}):(T(i,d),this._wikiService.createArticle(i).pipe((0,f.s)(this),this._hotToastService.observe({loading:"Article creating...",success:"Article created successfully!",error:"Article creation failed!"})).subscribe(()=>{}))}static#t=this.\u0275fac=function(i){return new(i||E)(t.rXU(c.ok),t.rXU(D.w),t.rXU(L.i),t.rXU(N.U_),t.rXU(v.nX))};static#e=this.\u0275cmp=t.VBU({type:E,selectors:[["b2b-admin-article"]],decls:25,vars:19,consts:[[1,"admin-article",3,"ngSubmit","formGroup"],[1,"admin-article__label"],["formControlName","image",1,"admin-article__image"],[1,"admin-article__main"],["formControlName","title","placeholder","Enter article label",1,"admin-article__input",3,"label"],["class","error",4,"ngIf"],["formControlName","author","placeholder","Enter article author",1,"admin-article__input",3,"label"],[1,"admin-article__categories"],[1,"admin-article__category"],["formControlName","level1Category","placeholder","Select category","bindValue","_id","bindLabel","name",3,"options","theme"],[1,"admin-article__sub-category"],["formControlName","level2Category","placeholder","Select subcategory","bindValue","_id","bindLabel","name",3,"options","theme"],[1,"admin-article__additional"],["formControlName","country","placeholder","Select Country",1,"admin-article__country",3,"theme"],[1,"admin-article__tags"],["formControlName","tags",3,"searched","searchedOptions"],["b2bNgxButton","",1,"admin-article__button",3,"theme"],[1,"error"]],template:function(i,n){if(1&i&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return n.onSubmit(n.formGroup.value)}),t.j41(1,"p",1),t.EFF(2),t.k0s(),t.j41(3,"b2b-ngx-file",2),t.EFF(4,"Image"),t.k0s(),t.j41(5,"div",3)(6,"div"),t.nrm(7,"b2b-ngx-input",4),t.nI1(8,"translate"),t.DNE(9,K,2,1,"p",5),t.k0s(),t.j41(10,"div"),t.nrm(11,"b2b-ngx-input",6),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"div",7)(14,"div",8),t.nrm(15,"b2b-ngx-select",9),t.k0s(),t.j41(16,"div",10),t.nrm(17,"b2b-ngx-select",11),t.k0s()(),t.j41(18,"div",12),t.nrm(19,"b2b-ngx-country-select",13),t.j41(20,"div",14)(21,"b2b-ngx-chips",15),t.nI1(22,"async"),t.bIt("searched",function(u){return n.setSearch(u)}),t.k0s()()(),t.j41(23,"button",16),t.EFF(24),t.k0s()()),2&i){let s;t.Y8G("formGroup",n.formGroup),t.R7$(2),t.SpI(" ",n.formGroup.get("_id").value?"Edit an article":"Add an article"," "),t.R7$(5),t.Y8G("label",t.bMT(8,13,"LABELS.ARTICLE_LABEL")),t.R7$(2),t.Y8G("ngIf",null==(s=n.formGroup.get("title").errors)?null:s.required),t.R7$(2),t.Y8G("label",t.bMT(12,15,"LABELS.ARTICLE_AUTHOR")),t.R7$(4),t.Y8G("options",n.level1Categories)("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.R7$(2),t.Y8G("options",n.level2Categories)("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.R7$(2),t.Y8G("theme",n.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.R7$(2),t.Y8G("searchedOptions",t.bMT(22,17,n.searchedOptions$)),t.R7$(2),t.Y8G("theme",n.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.R7$(),t.SpI(" ",n.formGroup.get("_id").value?"Update an article":"Create an article"," ")}},dependencies:[l.bT,U.f,j.D,F.P,$.Z,Y.z,c.qT,c.BC,c.cb,c.j4,c.JD,V.m,l.Jj,x.D9],styles:[".admin-article[_ngcontent-%COMP%]{display:block;margin:30px;background-color:#fff;padding:60px}.admin-article[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-size:14px;color:#e63d3d;margin-top:7px;margin-bottom:0}.admin-article[_ngcontent-%COMP%]   .admin-article__image[_ngcontent-%COMP%]{display:block;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__label[_ngcontent-%COMP%]{font-weight:700;font-size:32px;color:#0f0f11}.admin-article[_ngcontent-%COMP%]   .admin-article__input[_ngcontent-%COMP%]{display:block;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__main[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.admin-article[_ngcontent-%COMP%]   .admin-article__main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:49%}.admin-article[_ngcontent-%COMP%]   .admin-article__main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .admin-article__input[_ngcontent-%COMP%]{width:100%}.admin-article[_ngcontent-%COMP%]   .admin-article__additional[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__additional[_ngcontent-%COMP%]   .admin-article__country[_ngcontent-%COMP%], .admin-article[_ngcontent-%COMP%]   .admin-article__additional[_ngcontent-%COMP%]   .admin-article__tags[_ngcontent-%COMP%]{width:49%}.admin-article[_ngcontent-%COMP%]   .admin-article__categories[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-article[_ngcontent-%COMP%]   .admin-article__categories[_ngcontent-%COMP%]   .admin-article__category[_ngcontent-%COMP%], .admin-article[_ngcontent-%COMP%]   .admin-article__categories[_ngcontent-%COMP%]   .admin-article__sub-category[_ngcontent-%COMP%]{width:49%}.admin-article[_ngcontent-%COMP%]   .admin-article__button[_ngcontent-%COMP%]{margin-top:30px;padding:15px 40px}  .angular-editor-textarea img{max-width:100%}  .angular-editor-textarea p{line-height:24px}  .admin-article__description{display:block;margin-top:30px;overflow:hidden;line-height:24px}  .admin-article__description span,   .admin-article__description p{line-height:24px}  .admin-article__description ul,   .admin-article__description li{list-style:disc!important}  .admin-article__description ul{padding-left:30px}  .admin-article__description strong,   .admin-article__description b{font-weight:700!important}  .admin-article__description img{width:100%}"],data:{animation:[(0,p.hZ)("fadeInOut",[(0,p.kY)(":enter",[(0,p.iF)({opacity:0}),(0,p.i0)(500,(0,p.iF)({opacity:1}))]),(0,p.kY)(":leave",[(0,p.i0)(500,(0,p.iF)({opacity:0}))])])]},changeDetection:0})};return r=(0,g.Cg)([(0,f.d)()],r),r})()}];let X=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.$C({type:r});static#n=this.\u0275inj=t.G2t({imports:[v.iI.forChild(W),v.iI]})}return r})();var z=e(50096),J=e(86324),Z=e(59076),H=e(58764),Q=e(92578),w=e(41325);let k=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.$C({type:r});static#n=this.\u0275inj=t.G2t({imports:[l.MD,X,z.E,J.A,Z._,H.i,Q.o,c.X1,w.r,x.h]})}return r})()},55774:(R,b,e)=>{e.d(b,{f:()=>O});var l=e(89985),v=e(27322),g=e(82575),y=e(28225),_=e(90194),A=e(6113);let O=(()=>{class m{constructor(o){this._changeDetectionRef=o,this.label="",this.errors="",this.version=_.v.B2B,this.NgxInputVersionEnum=_.v,this.type="input",this.placeholder="",this.theme=y.Q.BACKGROUND_GRAY,this.onChange=()=>null,this.onTouched=()=>null,this.formControl=new g.MJ(""),this.id=(0,v.Z)(),this.id="id"}get inputClass(){return this.version===_.v.B2B?"b2b-ngx-input":"globy-ngx-input"}ngOnChanges(o){o.errors&&this.formControl.setErrors(o.errors)}ngOnInit(){this.subscribeOnValueChanges()}validate(){return this.formControl.errors}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}writeValue(o){this.formControl.setValue(o)}setDisabledState(o){o?this.formControl.disable():this.formControl.enable()}subscribeOnValueChanges(){this.formControl.valueChanges.pipe().subscribe(o=>{this.onChange(o)})}static#t=this.\u0275fac=function(c){return new(c||m)(l.rXU(l.gRc))};static#e=this.\u0275cmp=l.VBU({type:m,selectors:[["b2b-ngx-input"]],inputs:{type:"type",placeholder:"placeholder",theme:"theme",label:"label",errors:"errors",version:"version"},features:[l.Jv_([{provide:g.kq,useExisting:(0,l.Rfq)(()=>m),multi:!0},{provide:g.cz,useExisting:(0,l.Rfq)(()=>m),multi:!0}]),l.OA$],decls:1,vars:7,consts:[["b2bNgxInput","",3,"theme","formControl","type","id","placeholder"]],template:function(c,h){1&c&&l.nrm(0,"input",0),2&c&&(l.HbH(h.inputClass),l.Y8G("theme",h.theme)("formControl",h.formControl)("type",h.type)("id",h.id)("placeholder",h.placeholder))},dependencies:[g.me,g.BC,g.l_,A.b],changeDetection:0})}return m})()}}]);