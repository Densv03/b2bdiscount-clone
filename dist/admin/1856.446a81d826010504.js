"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1856],{21856:(R,v,c)=>{c.r(v),c.d(v,{AdminLogisticModule:()=>Dt});var h=c(60177),_=c(52168),x=c(85623),r=c(89417),p=c(34006),t=c(54438),g=c(25232),C=c(88834),b=c(99213),M=c(57252),T=c(87680),N=c(73955);function A(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",19),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.removeEmail(o))}),t.j41(1,"div",20),t.EFF(2),t.k0s(),t.j41(3,"button",21),t.EFF(4,"Delete"),t.k0s()()}if(2&n){const e=s.$implicit;t.R7$(2),t.JRh(e)}}function I(n,s){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"b2b-ngx-checkbox",22),t.bIt("checkboxChange",function(o){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.setTransportType(o,a.value))}),t.EFF(2),t.k0s()()}if(2&n){const e=s.$implicit;t.R7$(),t.Y8G("checked",e.checked),t.R7$(),t.SpI(" ",e.label," ")}}let $=(()=>{class n{constructor(e,i){this.dialogData=e,this.dialogRef=i,this.transportTypes=["Sea","Air"].map(o=>({value:o,label:o,checked:!1})),this.selectedTransportTypes=[],this.emailsList=[]}ngOnInit(){this.setFormGroup(),this.emailsList=this.dialogData.email instanceof Array?this.dialogData.email:[this.dialogData.email]}addEmail(){this.profileForm.get("email").valid&&this.profileForm.get("email").value.trim()&&(this.emailsList.push(this.profileForm.value.email),this.profileForm.get("email").reset())}removeEmail(e){this.emailsList=this.emailsList.filter(i=>i!==e)}save(){this.dialogRef.close({...this.profileForm.value,email:this.emailsList})}setTransportType(e,i){if(e.target.checked)this.selectedTransportTypes.push(i);else{const o=this.selectedTransportTypes.indexOf(i);this.selectedTransportTypes.splice(o,1)}this.profileForm.patchValue({transportType:this.selectedTransportTypes},{emitEvent:!1})}setFormGroup(){this.profileForm=new r.gE({name:new r.MJ(this.dialogData?.name||null,r.k0.required),country:new r.MJ(this.dialogData?.country?.toLowerCase()||null,r.k0.required),email:new r.MJ(null,[r.k0.required,r.k0.email]),phone:new r.MJ(this.dialogData?.phone||null,r.k0.required),transportType:new r.MJ(this.dialogData?.transportType||null,r.k0.required)}),this.dialogData?.transportType&&(this.transportTypes.map(e=>e.checked=this.dialogData.transportType.includes(e.value)),this.selectedTransportTypes=[...this.dialogData.transportType])}static#t=this.\u0275fac=function(i){return new(i||n)(t.rXU(p.Vh),t.rXU(p.CP))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["b2b-add-logistic-profile-dialog"]],decls:32,vars:13,consts:[[1,"dialog-wrapper"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-close","","mat-icon-button","",1,"close-button"],[1,"close-icon"],[3,"formGroup"],["type","text","placeholder","Enter company name","label","Company name","formControlName","name",1,"b2b-ngx-input","background","background-gray"],[1,"two-in-row","mt-16"],["formControlName","country","placeholder","Select Country"],[1,"mt-16","d-flex","email-wrapper"],["for","email",1,"b2b-ngx-input-label"],["id","email","autocomplete","new-email","formControlName","email",1,"b2b-ngx-input","background","background-gray","grow-1",3,"placeholder"],["mat-raised-button","","color","primary",3,"click"],[1,"mt-16","emails-list"],[1,"d-flex","list-item","justify-between"],[1,"mt-16"],["formControlName","phone",3,"errors"],[4,"ngFor","ngForOf"],[1,"button-wrapper","mt-16"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"d-flex","list-item","justify-between",3,"click"],[1,"email"],["mat-raised-button","","color","warn"],[3,"checkboxChange","checked"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2),t.j41(3,"button",2)(4,"mat-icon",3),t.EFF(5,"close"),t.k0s()()(),t.j41(6,"section",4),t.nrm(7,"input",5),t.j41(8,"div",6)(9,"div"),t.nrm(10,"b2b-ngx-country-select",7),t.k0s()(),t.j41(11,"div",8)(12,"div")(13,"label",9),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.nrm(16,"input",10),t.nI1(17,"translate"),t.k0s(),t.j41(18,"button",11),t.bIt("click",function(){return o.addEmail()}),t.EFF(19,"Add Email"),t.k0s()(),t.j41(20,"div",12),t.Z7z(21,A,5,1,"div",13,t.fX1),t.k0s(),t.j41(23,"div",14)(24,"b2b-ngx-tel",15),t.EFF(25),t.nI1(26,"translate"),t.k0s()(),t.j41(27,"div",6),t.DNE(28,I,3,2,"div",16),t.k0s()(),t.j41(29,"div",17)(30,"button",18),t.bIt("click",function(){return o.save()}),t.EFF(31," Save "),t.k0s()()()),2&i&&(t.R7$(2),t.SpI(" ",o.dialogData?"Edit "+o.dialogData.name:"Add profile"," "),t.R7$(4),t.Y8G("formGroup",o.profileForm),t.R7$(8),t.SpI(" ",t.bMT(15,7,"LABELS.EMAIL")," "),t.R7$(2),t.Y8G("placeholder",t.bMT(17,9,"PLACEHOLDERS.YOUR_EMAIL")),t.R7$(5),t.Dyx(o.emailsList),t.R7$(3),t.Y8G("errors",null==o.profileForm.controls.phone?null:o.profileForm.controls.phone.errors),t.R7$(),t.SpI(" ",t.bMT(26,11,"LABELS.PHONE")," "),t.R7$(3),t.Y8G("ngForOf",o.transportTypes))},dependencies:[h.Sq,g.z,r.me,r.BC,r.cb,r.j4,r.JD,p.tx,p.BI,C.$z,C.iY,b.An,M.s,T.k,N.D9],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}section[_ngcontent-%COMP%]   .two-in-row[_ngcontent-%COMP%]{display:flex;align-items:end;gap:16px}section[_ngcontent-%COMP%]   .two-in-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 50%}.mt-16[_ngcontent-%COMP%]{margin-top:16px}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7.5px 15px}.email-wrapper[_ngcontent-%COMP%]{align-items:flex-end;justify-content:space-between;gap:10px}.email-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-grow:1}.emails-list[_ngcontent-%COMP%]{max-height:200px;overflow:auto;display:flex;flex-direction:column;gap:10px}.emails-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;align-items:center}.emails-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{width:80%}"]})}return n})();var m=c(49894),P=c(84412),F=c(25558),y=c(65892),O=c(5964),E=c(89992),u=c(49969);const k=(n,s=!1)=>e=>e.value&&n.some(o=>(s?o?.toLowerCase():o.name?.toLowerCase())===e.value.toLowerCase())?{cityExists:!0}:null;var G=c(73370),L=c(29200),V=c(46635);const S=(n,s)=>({value:n,length:s});function Y(n,s){if(1&n&&(t.j41(0,"p",18),t.EFF(1),t.k0s()),2&n){const e=t.XpG(3);t.Y8G("@fadeInOut",void 0),t.R7$(),t.SpI(" This ",e.directionForm.controls.type.value," already exist ")}}function B(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",15),t.nrm(1,"input",19),t.j41(2,"img",20),t.bIt("click",function(){const o=t.eBV(e).$index,a=t.XpG(3);return t.Njj(a.deleteAlternativeName(o))}),t.k0s()()}if(2&n){const e=s.$index;t.R7$(),t.Y8G("formControlName",e)}}function X(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",11),t.nrm(1,"b2b-ngx-country-select",12),t.k0s(),t.DNE(2,Y,2,2,"p",13),t.j41(3,"div",14),t.Z7z(4,B,3,1,"div",15,t.fX1),t.k0s(),t.j41(6,"div",16)(7,"button",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.addField())}),t.EFF(8," + Add more "),t.k0s()()}if(2&n){let e;const i=t.XpG(2);t.R7$(2),t.Y8G("ngIf",null==(e=i.directionForm.get("country").errors)?null:e.cityExists),t.R7$(2),t.Dyx(i.countryNames.controls)}}function J(n,s){if(1&n&&t.nrm(0,"b2b-ngx-country-select",21),2&n){const e=t.XpG(2);t.Y8G("customOptions",t.l_i(1,S,e.cityOptions,null==e.cityOptions.value?null:e.cityOptions.value.length))}}function U(n,s){if(1&n&&(t.j41(0,"div",5),t.DNE(1,X,9,1)(2,J,1,4),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.vxM(1,"country"===e.directionForm.controls.type.value?1:2)}}function z(n,s){if(1&n&&(t.j41(0,"p",18),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.Y8G("@fadeInOut",void 0),t.R7$(),t.SpI(" This ",e.directionForm.controls.type.value," already exist ")}}function H(n,s){if(1&n&&(t.j41(0,"div",5),t.nrm(1,"input",22),t.DNE(2,z,2,2,"p",13),t.k0s()),2&n){let e;const i=t.XpG();t.R7$(2),t.Y8G("ngIf",null==(e=i.directionForm.get("name").errors)?null:e.cityExists)}}function Q(n,s){1&n&&(t.j41(0,"b2b-ngx-checkbox",23),t.EFF(1," Active "),t.k0s())}let K=(()=>{let n=class D{constructor(e,i,o){this.dialogRef=e,this.adminLogisticService=i,this.changeDetectorRef=o,this.types=["Country","City","Port","Airport"].map(a=>({type:a.toLowerCase(),name:a})),this.showNameInput=!1,this.b2bNgxSelectThemeEnum=E.E,this.directionCountryOptions=new P.t(null),this.countryOptions=new P.t(null)}get countryNames(){return this.directionForm?.get("countryNames")}ngOnInit(){this.setForm()}deleteAlternativeName(e){this.countryNames.removeAt(e)}addField(){this.countryNames.push(new r.MJ(null))}save(){if(this.directionForm.invalid)return void this.directionForm.markAllAsTouched();const{type:e,country:i,active:a}=this.directionForm.value,l={type:e,name:"country"!==e?this.directionForm.value.name:(0,y.mG)(i),active:a};"city"===e&&(l.countryId=i),("port"===e||"airport"===e)&&(l.cityId=i),"country"===e&&this.countryNames.length>0&&(l.countryNames=this.countryNames.value),this.dialogRef.close(l)}setForm(){this.directionForm=new r.gE({type:new r.MJ(null,r.k0.required),country:new r.MJ(null),name:new r.MJ(null),city:new r.MJ(null),active:new r.MJ(!1),countryNames:new r.Yp([new r.MJ(null)])});const e=this.directionForm.get("country"),i=this.directionForm.get("name"),o=this.directionForm.get("city");this.directionForm.controls.type.valueChanges.pipe((0,m.s)(this)).subscribe(a=>{i.reset(),e.reset(),i.clearValidators(),e.clearValidators(),o.clearValidators(),i.setErrors(null),e.setErrors(null),o.setErrors(null),"country"!==a?(this.countryOptions=this.directionCountryOptions,e.setValidators([r.k0.required]),i.setValidators([r.k0.required]),this.showNameInput=!0,"port"===a||"airport"===a?o.setValidators([r.k0.required]):i.disable()):(this.countryOptions=null,this.showNameInput=!1,e.setValidators(k(this.directions.map(l=>(0,y.QC)(l.name)),!0))),this.directionForm.updateValueAndValidity(),this.changeDetectorRef.detectChanges()}),e.valueChanges.pipe((0,O.p)(a=>!!a),(0,m.s)(this)).subscribe(a=>{if("city"===this.directionForm.controls.type.value)i.enable(),i.setValidators(k(this.directions.find(l=>l._id===a).cities)),this.directionForm.updateValueAndValidity(),this.changeDetectorRef.detectChanges();else{let l=null;this.directions.some(f=>f.cities.some(w=>w._id===a&&(l="port"===this.directionForm.controls.type.value?w.ports:w.airports,!0))),i.enable(),i.setValidators(k(l)),this.directionForm.updateValueAndValidity(),this.changeDetectorRef.detectChanges()}})}static#t=this.\u0275fac=function(i){return new(i||D)(t.rXU(p.CP),t.rXU(G.n),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:D,selectors:[["b2b-create-direction-dialog"]],decls:15,vars:6,consts:[[1,"dialog-wrapper"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-close","","mat-icon-button","",1,"close-button"],[1,"close-icon"],[3,"formGroup"],[1,"search-wrapper"],["formControlName","type","bindValue","type","bindLabel","name","placeholder","Select direction type",3,"options","theme"],["class","search-wrapper",4,"ngIf"],["formControlName","active",4,"ngIf"],[1,"button-wrapper","mt-16"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"pt-2"],["formControlName","country","placeholder","Select Country",1,"admin-article__country"],["class","error",4,"ngIf"],["formArrayName","countryNames"],[1,"d-flex","gap-1","pt-4"],[1,"d-flex","justify-content-end","w-100"],["type","button",1,"add-more","bg-white",3,"click"],[1,"error"],["placeholder","Input alternative country name",1,"b2b-ngx-input","background","background-gray",3,"formControlName"],["b2bNgxIcon","","name","delete",3,"click"],["formControlName","country","placeholder","Select city",1,"admin-article__country",3,"customOptions"],["formControlName","name","placeholder","Input name of direction",1,"b2b-ngx-input","background","background-gray"],["formControlName","active"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2," Create direction "),t.j41(3,"button",2)(4,"mat-icon",3),t.EFF(5,"close"),t.k0s()()(),t.j41(6,"section",4)(7,"div",5),t.nrm(8,"b2b-ngx-select",6),t.k0s(),t.DNE(9,U,3,1,"div",7)(10,H,3,1,"div",7)(11,Q,2,0,"b2b-ngx-checkbox",8),t.j41(12,"div",9)(13,"button",10),t.bIt("click",function(){return o.save()}),t.EFF(14," Save "),t.k0s()()()()),2&i&&(t.R7$(6),t.Y8G("formGroup",o.directionForm),t.R7$(2),t.Y8G("options",o.types)("theme",o.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.R7$(),t.Y8G("ngIf",o.directionForm.controls.type.value),t.R7$(),t.Y8G("ngIf",o.showNameInput),t.R7$(),t.Y8G("ngIf",o.directionForm.controls.type.value))},dependencies:[h.bT,g.z,r.me,r.BC,r.cb,r.j4,r.JD,r.v8,p.tx,p.BI,C.iY,b.An,T.k,L.P,V.i],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mt-16[_ngcontent-%COMP%]{margin-top:16px}section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;min-height:300px}section[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}section[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7.5px 15px}.add-more[_ngcontent-%COMP%]{margin-top:24px;border-radius:4px;padding:8px 18px;border:1px solid black}.error[_ngcontent-%COMP%]{font-size:14px;color:#e63d3d;margin-top:7px;margin-bottom:0}"],data:{animation:[(0,u.hZ)("fadeInOut",[(0,u.kY)(":enter",[(0,u.iF)({opacity:0}),(0,u.i0)(500,(0,u.iF)({opacity:1}))]),(0,u.kY)(":leave",[(0,u.i0)(500,(0,u.iF)({opacity:0}))])])]}})};return n=(0,x.Cg)([(0,m.d)()],n),n})();var Z=c(72558),d=c(9159),W=c(26320),q=c(3997);const tt=()=>["Port","Airport"],et=(n,s)=>({value:n,length:s});function nt(n,s){if(1&n&&(t.j41(0,"div",12)(1,"b2b-ngx-select",18),t.EFF(2),t.k0s()()),2&n){const e=t.XpG();t.R7$(),t.Y8G("placeholder","Port"===e.pointsGroup.controls.type.value?"Select port":"Select airport")("options",e.itemOptions)("theme",e.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.R7$(),t.SpI(" ","Port"===e.pointsGroup.controls.type.value?"Select port":"Select airport"," ")}}function ot(n,s){1&n&&(t.j41(0,"th",31),t.EFF(1,"Name"),t.k0s())}function it(n,s){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.R7$(),t.JRh(e.name)}}function rt(n,s){1&n&&(t.j41(0,"th",31),t.EFF(1,"Country"),t.k0s())}function at(n,s){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=s.$implicit,i=t.XpG(2);t.R7$(),t.SpI(" ",i.getName(e.country)," ")}}function ct(n,s){1&n&&(t.j41(0,"th",31),t.EFF(1,"Email"),t.k0s())}function st(n,s){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.R7$(),t.JRh(e.email)}}function lt(n,s){1&n&&(t.j41(0,"th",31),t.EFF(1,"Phone"),t.k0s())}function pt(n,s){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.R7$(),t.SpI(" ",e.phone.internationalNumber," ")}}function mt(n,s){1&n&&(t.j41(0,"th",31),t.EFF(1,"Transport type"),t.k0s())}function dt(n,s){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.R7$(),t.JRh(e.transportType)}}function gt(n,s){1&n&&(t.j41(0,"th",31),t.EFF(1,"Actions"),t.k0s())}function ut(n,s){if(1&n){const e=t.RV6();t.j41(0,"td",32)(1,"div",33)(2,"button",34),t.bIt("click",function(o){const a=t.eBV(e).$implicit,l=t.XpG(2);return o.stopPropagation(),t.Njj(l.addLogisticProfile(a))}),t.j41(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()(),t.j41(5,"button",34),t.bIt("click",function(o){const a=t.eBV(e).$implicit,l=t.XpG(2);return o.stopPropagation(),t.Njj(l.deleteLogisticProfile(a))}),t.j41(6,"mat-icon"),t.EFF(7,"delete"),t.k0s()()()()}}function ht(n,s){1&n&&t.nrm(0,"tr",35)}function ft(n,s){if(1&n){const e=t.RV6();t.j41(0,"tr",36),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.openProfileDetails(o._id))}),t.k0s()}}function _t(n,s){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"table",19),t.qex(2,20),t.DNE(3,ot,2,0,"th",21)(4,it,2,1,"td",22),t.bVm(),t.qex(5,23),t.DNE(6,rt,2,0,"th",21)(7,at,2,1,"td",22),t.bVm(),t.qex(8,24),t.DNE(9,ct,2,0,"th",21)(10,st,2,1,"td",22),t.bVm(),t.qex(11,25),t.DNE(12,lt,2,0,"th",21)(13,pt,2,1,"td",22),t.bVm(),t.qex(14,26),t.DNE(15,mt,2,0,"th",21)(16,dt,2,1,"td",22),t.bVm(),t.qex(17,27),t.DNE(18,gt,2,0,"th",21)(19,ut,8,0,"td",22),t.bVm(),t.DNE(20,ht,1,0,"tr",28)(21,ft,1,0,"tr",29),t.k0s(),t.j41(22,"b2b-pagination",30),t.bIt("togglePageNumber",function(o){t.eBV(e);const a=t.XpG();return t.Njj(a.togglePage(o))}),t.k0s(),t.bVm()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("dataSource",e.dataSource),t.R7$(19),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("currentPage",e.currentPage)("length",e.totalCount)("perPage",e.productsLimit)}}function Ct(n,s){1&n&&(t.j41(0,"h3"),t.EFF(1,"No companies found"),t.k0s())}const bt=[{path:"",component:(()=>{let n=class j{constructor(e,i,o,a,l){this.dialog=e,this.router=i,this.adminLogisticService=o,this.hotToastService=a,this.changeDetectorRef=l,this.displayedColumns=["name","country","email","phone","transportType","actions"],this.transportTypes=["Sea","Air"].map(f=>({_id:f.toLowerCase(),name:f})),this.b2bNgxSelectThemeEnum=E.E,this.productsLimit=20,this.currentPage=1,this.countryOptions=new P.t(null),this.cityOptions=new P.t(null),this.filteredQueryObj={limit:this.productsLimit,offset:0},this.getName=y.mG}ngOnInit(){this.getDirectionOptions(),this.fetchData(),this.setFormGroup()}addLogisticProfile(e){this.dialog.open($,{width:"500px",data:e}).afterClosed().pipe((0,O.p)(o=>!!o),(0,F.n)(o=>{const a={...o,contactPhoneNumber:o.phone.number,contactPhoneInternationalNumber:o.phone.internationalNumber,contactPhoneNationalNumber:o.phone.nationalNumber,contactPhoneE164Number:o.phone.e164Number,contactPhoneCountryCode:o.phone.countryCode,contactPhoneDialCode:o.phone.dialCode};return e?this.adminLogisticService.updateCompanyProfile(a,e._id):this.adminLogisticService.createCompanyProfile(a)}),(0,m.s)(this)).subscribe(()=>{this.fetchData(),this.hotToastService.success(e?"Profile was successfully updated":"New profile was successfully created")})}createDirection(){const e=this.dialog.open(K,{width:"500px",minHeight:"400px"});e.componentInstance.directionCountryOptions=this.countryOptions,e.componentInstance.cityOptions=this.cityOptions,e.componentInstance.directions=this.directions,e.afterClosed().pipe((0,O.p)(i=>!!i),(0,F.n)(i=>this.adminLogisticService.createDirection(i)),(0,m.s)(this)).subscribe(()=>{this.countryOptions.next(null),this.getDirectionOptions(),this.hotToastService.success("Direction was successfully created")})}deleteLogisticProfile(e){this.adminLogisticService.deleteCompanyProfile(e._id).pipe((0,m.s)(this)).subscribe(()=>{this.hotToastService.success("Profile was successfully deleted"),this.fetchData()})}togglePage(e){this.filteredQueryObj={...this.filteredQueryObj,offset:(e-1)*this.productsLimit},this.currentPage=e,this.fetchData()}openProfileDetails(e){this.router.navigate(["/logistic",e])}setNullableValue(e,i){"searchGroup"===e?this.searchGroup.patchValue(i&&"type"===i?{type:null}:{country:null},{emitEvent:!1}):this.pointsGroup.patchValue({countryId:null},{emitEvent:!1})}radioDisable(e){e.target.id.slice(0,-1)===this.pointsGroup.controls.type.value&&this.pointsGroup.controls.type.reset()}fetchData(e){this.adminLogisticService.getCompanies(this.filteredQueryObj.limit,this.filteredQueryObj.offset,e).pipe((0,m.s)(this)).subscribe(i=>{this.totalCount=i.totalCount,this.dataSource=i.companies,this.changeDetectorRef.detectChanges()},i=>this.hotToastService.error(i.error.message))}setFormGroup(){this.searchGroup=new r.gE({name:new r.MJ(null),country:new r.MJ(null),type:new r.MJ(null),q:new r.MJ(null)}),this.pointsGroup=new r.gE({countryId:new r.MJ(null),items:new r.MJ(null),type:new r.MJ(null)}),this.searchGroup.valueChanges.pipe((0,m.s)(this)).subscribe(e=>{const i={};for(const o in e)null!=e[o]&&(i[o]=e[o]);this.fetchData(i),this.changeDetectorRef.detectChanges()}),this.pointsGroup.valueChanges.pipe((0,O.p)(e=>!!e.countryId),(0,F.n)(e=>this.adminLogisticService.getDirection(e.countryId)),(0,m.s)(this)).subscribe(e=>{const i=e.data.map("Port"===this.pointsGroup.controls.type.value?o=>o.cities.filter(a=>!!a.ports&&a.ports.length>0).map(a=>a.ports):o=>o.cities.filter(a=>!!a.airports&&a.airports.length>0).map(a=>a.airports));this.itemOptions=i.flatMap(o=>o.flat())})}getDirectionOptions(){this.adminLogisticService.getDirection().pipe((0,m.s)(this)).subscribe(e=>{this.countryOptions.next(e.data.map(i=>({label:i.name,icon:(0,y.QC)(i.name),code:i._id}))),this.directions=e.data,this.cityOptions.next(e.data.map(i=>i.cities.map(o=>({label:o.name,code:o._id,icon:(0,y.QC)(i.name)}))).flatMap(i=>i.flat()))})}static#t=this.\u0275fac=function(i){return new(i||j)(t.rXU(p.bZ),t.rXU(_.Ix),t.rXU(G.n),t.rXU(Z.U_),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:j,selectors:[["b2b-admin-logistic"]],decls:30,vars:24,consts:[["noProfiles",""],[1,"logistic-wrapper"],[1,"point-actions",3,"formGroup"],[1,"logistic-header-wrapper"],["formControlName","type",3,"click","options"],[1,"search-wrapper","country-wrapper"],["formControlName","countryId","placeholder","Select Country",3,"customOptions","theme"],[3,"click"],["class","search-wrapper",4,"ngIf"],[1,"logistic-header-wrapper",3,"formGroup"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"b2b-ngx-button","background","background-black",3,"click","disabled"],[1,"search-wrapper"],["formControlName","name","placeholder","Search by name",1,"b2b-ngx-input","background","background-white"],["formControlName","country","placeholder","Select Country",3,"theme"],["formControlName","type","placeholder","Search by transport type","bindValue","_id","bindLabel","name",3,"options","theme"],["formControlName","q","label","Search","placeholder","Search",1,"b2b-ngx-input","background","background-white"],[4,"ngIf","ngIfElse"],["formControlName","items","bindValue","_id","bindLabel","name",3,"placeholder","options","theme"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","country"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","transportType"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"togglePageNumber","currentPage","length","perPage"],["mat-header-cell",""],["mat-cell",""],[1,"actions-block"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,o){if(1&i){const a=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"b2b-ngx-radio",4),t.bIt("click",function(f){return t.eBV(a),t.Njj(o.radioDisable(f))}),t.k0s(),t.j41(4,"div",5)(5,"b2b-ngx-country-select",6),t.EFF(6,"Select country for ports or airports"),t.k0s(),t.j41(7,"mat-icon",7),t.bIt("click",function(){return t.eBV(a),t.Njj(o.setNullableValue("pointsGroup"))}),t.EFF(8,"close"),t.k0s()(),t.DNE(9,nt,3,4,"div",8),t.k0s()(),t.j41(10,"div",9)(11,"button",10),t.bIt("click",function(){return t.eBV(a),t.Njj(o.addLogisticProfile())}),t.EFF(12," Add logistic profile "),t.k0s(),t.j41(13,"button",11),t.nI1(14,"async"),t.bIt("click",function(){return t.eBV(a),t.Njj(o.createDirection())}),t.EFF(15," Create direction "),t.k0s(),t.j41(16,"div",12),t.nrm(17,"input",13),t.k0s(),t.j41(18,"div",5),t.nrm(19,"b2b-ngx-country-select",14),t.j41(20,"mat-icon",7),t.bIt("click",function(){return t.eBV(a),t.Njj(o.setNullableValue("searchGroup"))}),t.EFF(21,"close"),t.k0s()(),t.j41(22,"div",5),t.nrm(23,"b2b-ngx-select",15),t.j41(24,"mat-icon",7),t.bIt("click",function(){return t.eBV(a),t.Njj(o.setNullableValue("searchGroup","type"))}),t.EFF(25,"close"),t.k0s()(),t.nrm(26,"input",16),t.k0s(),t.DNE(27,_t,23,6,"ng-container",17)(28,Ct,2,0,"ng-template",null,0,t.C5r),t.k0s()}if(2&i){const a=t.sdS(29);t.R7$(),t.Y8G("formGroup",o.pointsGroup),t.R7$(2),t.Y8G("options",t.lJ4(20,tt)),t.R7$(2),t.Y8G("customOptions",t.l_i(21,et,o.countryOptions,null==o.countryOptions.value?null:o.countryOptions.value.length))("theme",o.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.R7$(2),t.AVh("show",null==o.pointsGroup?null:o.pointsGroup.controls.countryId.value),t.R7$(2),t.Y8G("ngIf",o.pointsGroup.controls.countryId.value&&o.pointsGroup.controls.type.value),t.R7$(),t.Y8G("formGroup",o.searchGroup),t.R7$(3),t.Y8G("disabled",!t.bMT(14,18,o.countryOptions)),t.R7$(6),t.Y8G("theme",o.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.R7$(),t.AVh("show",o.searchGroup.controls.country.value),t.R7$(3),t.Y8G("options",o.transportTypes)("theme",o.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.R7$(),t.AVh("show",o.searchGroup.controls.type.value),t.R7$(3),t.Y8G("ngIf",o.totalCount)("ngIfElse",a)}},dependencies:[h.bT,g.z,r.me,r.BC,r.cb,r.j4,r.JD,C.iY,b.An,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,L.P,W.K,q.e,h.Jj],styles:[".logistic-wrapper[_ngcontent-%COMP%]{padding:30px}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]{padding-bottom:24px;margin-bottom:24px;border-bottom:1px solid lightgray}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{align-items:center}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:24px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .b2b-ngx-button[_ngcontent-%COMP%]{padding:7.5px 15px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:48%}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]{position:relative}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon.show[_ngcontent-%COMP%]{display:initial;position:absolute;top:16px;left:-19px;color:gray;font-size:15px;width:12px;height:12px;cursor:pointer}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:max-content}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:16px;padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#add8e6}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%]{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{text-align:end;padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px;padding:5px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;background:#add8e6;border-radius:5px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;line-height:13px;color:#fff}.logistic-wrapper[_ngcontent-%COMP%]   table.no-background[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:initial;background:transparent}.logistic-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}  input.datepicker{height:64px;border:none;border-radius:14px;padding:0 16px;width:100%;max-width:191px}  input.datepicker::placeholder{padding-left:20px}.error-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:500px;padding:16px;border-radius:8px;background:#fff;max-width:50%;margin-top:24px}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:15px;line-height:22px;padding-bottom:12px;font-weight:400}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]:first-of-type{color:gray}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{min-width:50%;font-weight:600}"]})};return n=(0,x.Cg)([(0,m.d)()],n),n})()}];let yt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[_.iI.forChild(bt),_.iI]})}return n})();var vt=c(11058),xt=c(82006),Pt=c(60182),Ot=c(69388),Mt=c(99348),Ft=c(80360),kt=c(18560),wt=c(24318);let Dt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[h.MD,yt,vt.o,r.X1,p.hM,C.Hl,b.m_,N.h,xt.f,Pt.n,Ot.O,d.tP,Mt._,Ft.$,kt.x,wt.F]})}return n})()},80360:(R,v,c)=>{c.d(v,{$:()=>p});var h=c(60177),_=c(89417),x=c(24318),r=c(54438);let p=(()=>{class g{static#t=this.\u0275fac=function(M){return new(M||g)};static#e=this.\u0275mod=r.$C({type:g});static#n=this.\u0275inj=r.G2t({imports:[h.MD,_.X1,x.F]})}return g})();c(26320)}}]);