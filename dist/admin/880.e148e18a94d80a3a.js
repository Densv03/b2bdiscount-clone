"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[880],{10880:(X,R,g)=>{g.r(R),g.d(R,{AdminOfferCategoriesModule:()=>q});var s=g(60177),O=g(52168),b=g(85623),G=g(79601),P=g(51809),x=g(49894),F=g(5964),a=g(54438),D=g(89417),u=g(59052),E=g(72558),f=g(7886),N=g(81953),M=g(29200),Y=g(71356);function B(y,ne){if(1&y&&(a.j41(0,"p",18),a.EFF(1),a.k0s()),2&y){const d=a.XpG();a.R7$(),a.SpI(" ",d.errorMessage," ")}}const z=[{path:"",component:(()=>{let y=class te{constructor(d,m,p){this._formBuilder=d,this._categoriesService=m,this._hotToastrService=p,this.b2bNgxInputThemeEnum=G.Q,this.b2bNgxButtonThemeEnum=P.a,this.formGroup=this.getFormGroup(),this.level1Categories=[],this.level2Categories=[],this.level3Categories=[],this.errorMessage=""}setLevel1Categories(){this._categoriesService.getCategories$().pipe((0,x.s)(this)).subscribe(d=>{this.level1Categories=d})}setLevel2Categories(){this.formGroup.get("selectLevel1Category").valueChanges.pipe((0,x.s)(this),(0,F.p)(d=>!!d)).subscribe(d=>{this.level2Categories=this.level1Categories.find(m=>m._id===d)?.children})}setLevel3Categories(){this.formGroup.get("selectLevel2Category").valueChanges.pipe((0,x.s)(this),(0,F.p)(d=>!!d)).subscribe(d=>{this.level3Categories=this.level2Categories.find(m=>m._id===d)?.children})}ngOnInit(){this.setLevel1Categories(),this.setLevel2Categories(),this.setLevel3Categories()}createCategory(){const d=this.formGroup.get("selectLevel1Category").value,m=this.formGroup.get("selectLevel2Category").value,p=this.formGroup.get("inputLevel1Category").value,T=this.formGroup.get("inputLevel2Category").value,L=this.formGroup.get("inputLevel3Category").value;this.errorMessage="";let I="",S="",A="";if(p&&T&&L)I={name:p},S={name:T},A={name:L};else if(d&&T&&L)I={id:d},S={name:T},A={name:L};else{if(!(d&&m&&L))return void(this.errorMessage="To create a category you have to fill all fields; Each level have to be filled with select (already exist category) or with name (new one); You cant select 3 level category");I={id:d},S={id:m},A={name:L}}this._categoriesService.createCategory(I,S,A).pipe((0,x.s)(this),this._hotToastrService.observe({loading:"Category is creating...",success:"Category successfully created",error:"Categories creating failed"})).subscribe()}updateCategory(){const d=this.formGroup.get("selectLevel1Category").value,m=this.formGroup.get("selectLevel2Category").value,p=this.formGroup.get("selectLevel3Category").value,T=this.formGroup.get("inputLevel1Category").value,L=this.formGroup.get("inputLevel2Category").value,I=this.formGroup.get("inputLevel3Category").value,S=this.formGroup.get("toggleLevel1Category").value,A=this.formGroup.get("toggleLevel2Category").value,ee=this.formGroup.get("toggleLevel3Category").value;this.errorMessage="";let e="",t="",n="";if(d&&(T||S))e=d,t=T,n=S;else if(m&&(L||A))e=m,t=L,n=A;else{if(!p||!I&&!ee)return void(this.errorMessage="To update a category you have to select it and enter a new name");e=p,t=I,n=ee}this._categoriesService.updateCategory(e,t,n).pipe((0,x.s)(this),this._hotToastrService.observe({loading:"Category is updating...",success:"Category successfully updated",error:"Categories updating failed"})).subscribe()}getFormGroup(){return this._formBuilder.group({selectLevel1Category:[null],selectLevel2Category:[null],selectLevel3Category:[null],inputLevel1Category:[null],inputLevel2Category:[null],inputLevel3Category:[null],toggleLevel1Category:[null],toggleLevel2Category:[null],toggleLevel3Category:[null]})}static#e=this.\u0275fac=function(m){return new(m||te)(a.rXU(D.ok),a.rXU(u.w),a.rXU(E.U_))};static#t=this.\u0275cmp=a.VBU({type:te,selectors:[["b2b-admin-offer"]],decls:29,vars:10,consts:[[1,"admin-offer-categories"],[1,"admin-offer-categories__create"],[1,"admin-offer-categories__create-title"],[1,"admin-offer-categories__create-sub-title"],[1,"admin-offer-categories__create-form",3,"formGroup"],["formControlName","selectLevel1Category","bindValue","_id","bindLabel","name","placeholder","Select level 1 category",1,"admin-offer-categories__create-select",3,"options"],["formControlName","selectLevel2Category","bindValue","_id","bindLabel","name","placeholder","Select level 2 category",1,"admin-offer-categories__create-select",3,"options"],["formControlName","selectLevel3Category","bindValue","_id","bindLabel","name","placeholder","Select level 3 category",1,"admin-offer-categories__create-select",3,"options"],[1,"admin-offer-categories__create-divider"],["formControlName","inputLevel1Category","placeholder","Create / Update level 1 category",1,"admin-offer-categories__create-input",3,"theme"],["formControlName","inputLevel2Category","placeholder","Create / Update level 2 category",1,"admin-offer-categories__create-input",3,"theme"],["formControlName","inputLevel3Category","placeholder","Create / Update level 3 category",1,"admin-offer-categories__create-input",3,"theme"],["formControlName","toggleLevel1Category",1,"admin-offer-categories__create-toggle"],["formControlName","toggleLevel2Category",1,"admin-offer-categories__create-toggle"],["formControlName","toggleLevel3Category",1,"admin-offer-categories__create-toggle"],["b2bNgxButton","","type","button",1,"admin-offer-categories__create-button",3,"click","theme"],["b2bNgxButton","","type","button",1,"admin-offer-categories__update-button",3,"click","theme"],["class","admin-offer-categories__error-message",4,"ngIf"],[1,"admin-offer-categories__error-message"]],template:function(m,p){1&m&&(a.j41(0,"div",0)(1,"div",1)(2,"p",2),a.EFF(3,"Create / Update category"),a.k0s(),a.j41(4,"p",3),a.EFF(5," To create a category you have to fill all levels "),a.k0s(),a.j41(6,"p",3),a.EFF(7," To update a category you have to select it and enter the new name "),a.k0s(),a.j41(8,"form",4),a.nrm(9,"b2b-ngx-select",5)(10,"b2b-ngx-select",6)(11,"b2b-ngx-select",7),a.j41(12,"p",8),a.EFF(13,"OR"),a.k0s(),a.j41(14,"p",8),a.EFF(15,"OR"),a.k0s(),a.j41(16,"p",8),a.EFF(17,"OR"),a.k0s(),a.nrm(18,"b2b-ngx-input",9)(19,"b2b-ngx-input",10)(20,"b2b-ngx-input",11)(21,"b2b-ngx-toggle",12)(22,"b2b-ngx-toggle",13)(23,"b2b-ngx-toggle",14),a.j41(24,"button",15),a.bIt("click",function(){return p.createCategory()}),a.EFF(25," Create category "),a.k0s(),a.j41(26,"button",16),a.bIt("click",function(){return p.updateCategory()}),a.EFF(27," Update category "),a.k0s()(),a.DNE(28,B,2,1,"p",17),a.k0s()()),2&m&&(a.R7$(8),a.Y8G("formGroup",p.formGroup),a.R7$(),a.Y8G("options",p.level1Categories),a.R7$(),a.Y8G("options",p.level2Categories),a.R7$(),a.Y8G("options",p.level3Categories),a.R7$(7),a.Y8G("theme",p.b2bNgxInputThemeEnum.BACKGROUND_WHITE),a.R7$(),a.Y8G("theme",p.b2bNgxInputThemeEnum.BACKGROUND_WHITE),a.R7$(),a.Y8G("theme",p.b2bNgxInputThemeEnum.BACKGROUND_WHITE),a.R7$(4),a.Y8G("theme",p.b2bNgxButtonThemeEnum.BACKGROUND_BLUE),a.R7$(2),a.Y8G("theme",p.b2bNgxButtonThemeEnum.BACKGROUND_WHITE),a.R7$(2),a.Y8G("ngIf",p.errorMessage))},dependencies:[s.bT,f.f,N.Z,M.P,Y.b,D.qT,D.BC,D.cb,D.j4,D.JD],styles:[".admin-offer-categories[_ngcontent-%COMP%]{padding:30px}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-sub-title[_ngcontent-%COMP%]{margin-top:5px}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin-top:50px}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-divider[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-input[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-toggle[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-select[_ngcontent-%COMP%]{width:30%}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-divider.admin-offer-categories__create-divider[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-input.admin-offer-categories__create-divider[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-toggle.admin-offer-categories__create-divider[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-select.admin-offer-categories__create-divider[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:15px 0;font-weight:700}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-divider.admin-offer-categories__create-toggle[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-input.admin-offer-categories__create-toggle[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-toggle.admin-offer-categories__create-toggle[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-select.admin-offer-categories__create-toggle[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__update-button[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-button[_ngcontent-%COMP%]{width:30%;padding:15px 0;margin-top:50px}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__update-button.admin-offer-categories__create-button[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-button.admin-offer-categories__create-button[_ngcontent-%COMP%]{margin-left:15%}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__update-button.admin-offer-categories__update-button[_ngcontent-%COMP%], .admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__create[_ngcontent-%COMP%]   .admin-offer-categories__create-form[_ngcontent-%COMP%]   .admin-offer-categories__create-button.admin-offer-categories__update-button[_ngcontent-%COMP%]{margin-right:15%}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__update[_ngcontent-%COMP%]{margin-top:50px}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__update[_ngcontent-%COMP%]   .admin-offer-categories__update-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.admin-offer-categories[_ngcontent-%COMP%]   .admin-offer-categories__error-message[_ngcontent-%COMP%]{text-align:center;margin-top:30px;color:#d0021b}"],changeDetection:0})};return y=(0,b.Cg)([(0,x.d)()],y),y})()}];let J=(()=>{class y{static#e=this.\u0275fac=function(m){return new(m||y)};static#t=this.\u0275mod=a.$C({type:y});static#n=this.\u0275inj=a.G2t({imports:[O.iI.forChild(z),O.iI]})}return y})();var k=g(42944),V=g(99348),Z=g(41820),Q=g(45572);let q=(()=>{class y{static#e=this.\u0275fac=function(m){return new(m||y)};static#t=this.\u0275mod=a.$C({type:y});static#n=this.\u0275inj=a.G2t({imports:[s.MD,J,k.E,Z.i,V._,Q.Y,D.X1]})}return y})()},7886:(X,R,g)=>{g.d(R,{f:()=>F});var s=g(54438),O=g(81258),b=g(89417),G=g(79601),P=g(31586),x=g(36529);let F=(()=>{class a{constructor(u){this._changeDetectionRef=u,this.label="",this.errors="",this.version=P.v.B2B,this.NgxInputVersionEnum=P.v,this.type="input",this.placeholder="",this.theme=G.Q.BACKGROUND_GRAY,this.onChange=()=>null,this.onTouched=()=>null,this.formControl=new b.MJ(""),this.id=(0,O.Z)(),this.id="id"}get inputClass(){return this.version===P.v.B2B?"b2b-ngx-input":"globy-ngx-input"}ngOnChanges(u){u.errors&&this.formControl.setErrors(u.errors)}ngOnInit(){this.subscribeOnValueChanges()}validate(){return this.formControl.errors}registerOnChange(u){this.onChange=u}registerOnTouched(u){this.onTouched=u}writeValue(u){this.formControl.setValue(u)}setDisabledState(u){u?this.formControl.disable():this.formControl.enable()}subscribeOnValueChanges(){this.formControl.valueChanges.pipe().subscribe(u=>{this.onChange(u)})}static#e=this.\u0275fac=function(E){return new(E||a)(s.rXU(s.gRc))};static#t=this.\u0275cmp=s.VBU({type:a,selectors:[["b2b-ngx-input"]],inputs:{type:"type",placeholder:"placeholder",theme:"theme",label:"label",errors:"errors",version:"version"},features:[s.Jv_([{provide:b.kq,useExisting:(0,s.Rfq)(()=>a),multi:!0},{provide:b.cz,useExisting:(0,s.Rfq)(()=>a),multi:!0}]),s.OA$],decls:1,vars:7,consts:[["b2bNgxInput","",3,"theme","formControl","type","id","placeholder"]],template:function(E,f){1&E&&s.nrm(0,"input",0),2&E&&(s.HbH(f.inputClass),s.Y8G("theme",f.theme)("formControl",f.formControl)("type",f.type)("id",f.id)("placeholder",f.placeholder))},dependencies:[b.me,b.BC,b.l_,x.b],changeDetection:0})}return a})()},71356:(X,R,g)=>{g.d(R,{b:()=>D});var s=g(54438),O=g(89417),b=g(81258),G=g(60177);function P(u,E){1&u&&(s.j41(0,"span",6),s.EFF(1,"Visible"),s.k0s())}function x(u,E){1&u&&(s.j41(0,"span",7),s.EFF(1,"Hidden"),s.k0s())}function F(u,E){if(1&u&&(s.j41(0,"span",7),s.EFF(1),s.k0s()),2&u){const f=s.XpG(2);s.R7$(),s.JRh(f.customLabel)}}function a(u,E){if(1&u&&(s.qex(0),s.DNE(1,P,2,0,"span",4)(2,x,2,0,"span",5)(3,F,2,1,"span",5),s.bVm()),2&u){const f=s.XpG();s.R7$(),s.Y8G("ngIf",!f.customLabel&&f.formControl.value),s.R7$(),s.Y8G("ngIf",!f.customLabel&&!f.formControl.value),s.R7$(),s.Y8G("ngIf",f.customLabel)}}let D=(()=>{class u{constructor(f){this._changeDetectorRef=f,this.placeholder="",this.errors={},this.customLabel="",this.emptyLabel=!1,this.subcategories=!1,this.toggled=!1,this.change=new s.bkB,this.type="checkbox",this.onChange=()=>null,this.onTouched=()=>null,this.formControl=new O.MJ(!1),this.id=(0,b.Z)()}get error(){if(!this.errors)return"";const f=Object.keys(this.errors)[0];return this.errors[f]}ngOnInit(){this.subscribeOnValueChanges()}ngOnChanges(f){f.errors&&this.formControl.setErrors(f.errors.currentValue)}validate(){return this.formControl.errors}subscribeOnValueChanges(){this.formControl.valueChanges.pipe().subscribe(f=>{this.onChange(f)})}registerOnChange(f){this.onChange=f}registerOnTouched(f){this.onTouched=f}writeValue(f){this.formControl.setValue(f,{emitEvent:!1}),this.toggled=f,this._changeDetectorRef.detectChanges()}setDisabledState(f){f?this.formControl.disable():this.formControl.enable()}emitToggleChange(){this.toggled=!this.toggled,this.change.emit()}static#e=this.\u0275fac=function(N){return new(N||u)(s.rXU(s.gRc))};static#t=this.\u0275cmp=s.VBU({type:u,selectors:[["b2b-ngx-toggle"]],inputs:{placeholder:"placeholder",errors:"errors",customLabel:"customLabel",emptyLabel:"emptyLabel",subcategories:"subcategories",toggled:"toggled"},outputs:{change:"change"},features:[s.Jv_([{provide:O.kq,useExisting:(0,s.Rfq)(()=>u),multi:!0},{provide:O.cz,useExisting:(0,s.Rfq)(()=>u),multi:!0}]),s.OA$],decls:4,vars:5,consts:[[1,"ngx-toggle"],[4,"ngIf"],["type","checkbox",1,"ngx-toggle-input",3,"click","ngModelChange","formControl","ngModel"],[1,"ngx-toggle-custom-input"],["class","ngx-toggle-label-visible",4,"ngIf"],["class","ngx-toggle-label-hidden",4,"ngIf"],[1,"ngx-toggle-label-visible"],[1,"ngx-toggle-label-hidden"]],template:function(N,M){1&N&&(s.j41(0,"label",0),s.DNE(1,a,4,3,"ng-container",1),s.j41(2,"input",2),s.bIt("click",function(){return M.emitToggleChange()}),s.mxI("ngModelChange",function(B){return s.DH7(M.toggled,B)||(M.toggled=B),B}),s.k0s(),s.nrm(3,"span",3),s.k0s()),2&N&&(s.AVh("subcategories",M.subcategories),s.R7$(),s.Y8G("ngIf",!M.emptyLabel),s.R7$(),s.Y8G("formControl",M.formControl),s.R50("ngModel",M.toggled))},dependencies:[G.bT,O.Zm,O.BC,O.l_],styles:['.ngx-toggle[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;padding-left:60px;font-size:12px;color:gray;height:26px}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-input[_ngcontent-%COMP%]{opacity:0;height:100%;width:100%}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background-color:#0f0f11}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{transform:translate(26px)}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-custom-input[_ngcontent-%COMP%]{position:absolute;cursor:pointer;left:0;top:0;background-color:#556274;transition:.4s;width:52px;height:100%;border-radius:34px}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-custom-input[_ngcontent-%COMP%]:before{position:absolute;content:"";border-radius:50%;height:18px;width:18px;left:4px;bottom:4px;background-color:#fff;transition:.4s}.ngx-toggle.subcategories[_ngcontent-%COMP%]{height:20px;padding-left:27px}.ngx-toggle.subcategories[_ngcontent-%COMP%]   .ngx-toggle-input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{transform:translate(19px)}.ngx-toggle.subcategories[_ngcontent-%COMP%]   .ngx-toggle-custom-input[_ngcontent-%COMP%]{width:40px}.ngx-toggle.subcategories[_ngcontent-%COMP%]   .ngx-toggle-custom-input[_ngcontent-%COMP%]:before{width:14px;height:14px;bottom:3px}.ngx-toggle-label-visible[_ngcontent-%COMP%], .ngx-toggle-label-hidden[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:#556274}'],changeDetection:0})}return u})()},45572:(X,R,g)=>{g.d(R,{Y:()=>G});var s=g(60177),O=g(89417),b=g(54438);let G=(()=>{class P{static#e=this.\u0275fac=function(a){return new(a||P)};static#t=this.\u0275mod=b.$C({type:P});static#n=this.\u0275inj=b.G2t({imports:[s.MD,O.X1]})}return P})()},85623:(X,R,g)=>{function P(e,t,n,o){var c,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var _=e.length-1;_>=0;_--)(c=e[_])&&(r=(i<3?c(r):i>3?c(t,n,r):c(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r}g.d(R,{Cg:()=>P}),"function"==typeof SuppressedError&&SuppressedError}}]);