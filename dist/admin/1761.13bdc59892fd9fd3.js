"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[1761],{57355:(ee,E,a)=>{a.r(E),a.d(E,{GlobyFileCard:()=>I});var c=a(89985),s=a(58764),e=a(3470),$=a(93744),v=a(61553),B=a(76492);function S(m,M){if(1&m&&(c.j41(0,"div",9)(1,"div",10)(2,"span",11),c.EFF(3),c.k0s()()()),2&m){const h=c.XpG();c.xc7("align-items","end"),c.R7$(3),c.SpI("+",h.length,"")}}function y(m,M){if(1&m){const h=c.RV6();c.j41(0,"button",13),c.bIt("click",function(){c.eBV(h);const l=c.XpG(2);return c.Njj(l.edit())}),c.nrm(1,"img",14),c.k0s()}2&m&&(c.R7$(),c.Y8G("name","edit"))}function w(m,M){if(1&m){const h=c.RV6();c.j41(0,"button",13),c.bIt("click",function(){c.eBV(h);const l=c.XpG(2);return c.Njj(l.delete())}),c.nrm(1,"img",15),c.k0s()}2&m&&(c.R7$(),c.Y8G("name","close"))}function A(m,M){if(1&m&&(c.j41(0,"div",3),c.DNE(1,y,2,1,"button",12)(2,w,2,1,"button",12),c.k0s()),2&m){const h=c.XpG();c.R7$(),c.vxM(1,h.showEdit?1:-1),c.R7$(),c.vxM(2,h.showDelete?2:-1)}}function J(m,M){1&m&&(c.j41(0,"div",4)(1,"span",16),c.EFF(2,"main"),c.k0s()())}function k(m,M){if(1&m&&c.nrm(0,"img",17),2&m){const h=c.XpG(2);c.FS9("alt",h.index?"Image #"+h.index:"Image"),c.Y8G("src",h.url,c.B4B)}}function U(m,M){if(1&m&&c.nrm(0,"video",18),2&m){const h=c.XpG(2);c.Y8G("src",h.url,c.B4B)}}function Q(m,M){if(1&m&&c.DNE(0,k,1,2)(1,U,1,1),2&m){let h;const D=c.XpG();c.vxM(0,"image"===(h=D.type)?0:"video"===h?1:-1)}}function z(m,M){if(1&m&&(c.j41(0,"span",7),c.EFF(1),c.k0s()),2&m){const h=c.XpG();c.R7$(),c.JRh(h.title)}}function O(m,M){if(1&m&&(c.j41(0,"span",8),c.EFF(1),c.k0s()),2&m){const h=c.XpG();c.R7$(),c.JRh(h.description)}}let I=(()=>{class m{constructor(h){this.cdr=h,this.showDelete=!0,this.showEdit=!1,this.deleteItem=new c.bkB,this.editItem=new c.bkB,this.type="image"}ngOnChanges(h){this.initDefault()}ngOnInit(){this.initDefault()}getUrlFormFile(){const h=new FileReader;h.onload=()=>{this.url=h.result,this.cdr.detectChanges()},h.readAsDataURL(this.data),this.type="image"}initDefault(){this.handleDataAsFile()||this.getUrlFormItem()}getUrlFormItem(){let{type:h,url:D}=this.handleItem(this.data);(D?.includes("youtube.com")||D?.includes("youtu.be"))&&(D=this.getThumbnailUrl(D)),this.type=h,this.url=D,this.cdr.detectChanges()}delete(){this.deleteItem.next(this.index)}edit(){this.editItem.next(this.index)}getThumbnailUrl(h){return h.includes($.c.apiUrl)?h:`https://img.youtube.com/vi/${this.extractVideoID(h)}/0.jpg`}videoUrl(){this.url=URL.createObjectURL(this.data),this.type="video"}extractVideoID(h){const l=h.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if(l&&11==l[2].length)return l[2];throw new Error("Invalid link")}handleDataAsFile(){const h=function V(m){return m instanceof File}(this.data);return h&&(this.data?.type?.includes("image")?this.getUrlFormFile():this.data?.type?.includes("video")&&this.videoUrl()),h}static#e=this.\u0275fac=function(D){return new(D||m)(c.rXU(c.gRc))};static#t=this.\u0275cmp=c.VBU({type:m,selectors:[["globy-file-card"]],inputs:{data:"data",index:"index",handleItem:"handleItem",showDelete:"showDelete",length:"length",showEdit:"showEdit",title:"title",description:"description"},outputs:{deleteItem:"deleteItem",editItem:"editItem"},standalone:!0,features:[c.OA$,c.aNF],decls:10,vars:6,consts:[[1,"flex","flex-col","gap-3","justify-end","content-end","items-end"],[1,"grid","grid-cols-3","grid-rows-3"],[1,"z-10","p-2","flex","justify-end","flex-row","col-start-3","col-end-4","row-start-3","row-end-4",3,"align-items"],[1,"z-10","flex","flex-row","items-baseline","justify-end","p-2","w-full","col-start-1","col-end-4","row-start-1","row-end-2","gap-2"],[1,"z-10","flex","flex-row","items-center","justify-start","col-start-1","col-end-2","row-start-1","row-end-2","w-full","h-auto"],[1,"z-0","flex","items-end","justify-start","h-full","w-full","col-start-1","col-end-4","row-start-1","row-end-4"],[1,"flex","flex-col"],[1,"font-semibold","truncate"],[1,"text-sm"],[1,"z-10","p-2","flex","justify-end","flex-row","col-start-3","col-end-4","row-start-3","row-end-4"],[1,"length","z-20","flex","items-center","justify-center","!h-[32px]","!w-[32px]","rounded-md"],[1,"text-black","font-semibold"],["type","button","b2bNgxButton","",1,"top__button"],["type","button","b2bNgxButton","",1,"top__button",3,"click"],["b2bNgxIcon","","alt","Edit button icon",1,"!h-[14px]",3,"name"],["b2bNgxIcon","","alt","Delete button icon",1,"w-[16px]",3,"name"],[1,"main-badge","text-white","text-[8px]","!bg-red-500","p-1","px-2"],[1,"aspect-square","w-full","h-full","object-cover","rounded-md",3,"src","alt"],["preload","auto","playsinline","","muted","","loop","",1,"w-full","h-full","aspect-square","bg-black","rounded-md",3,"src"]],template:function(D,l){1&D&&(c.j41(0,"div",0)(1,"div",1),c.DNE(2,S,4,3,"div",2)(3,A,3,2,"div",3)(4,J,3,0,"div",4),c.j41(5,"div",5),c.DNE(6,Q,2,1),c.k0s()(),c.j41(7,"div",6),c.DNE(8,z,2,1,"span",7)(9,O,2,1,"span",8),c.k0s()()),2&D&&(c.R7$(2),c.vxM(2,l.length?2:-1),c.R7$(),c.vxM(3,l.showEdit||l.showDelete?3:-1),c.R7$(),c.vxM(4,0===l.index?4:-1),c.R7$(2),c.vxM(6,l.url?6:-1),c.R7$(2),c.vxM(8,l.title?8:-1),c.R7$(),c.vxM(9,l.description?9:-1))},dependencies:[s.i,v.Z,e.F,B.i],styles:[".main-badge[_ngcontent-%COMP%]{background:#ee3535;font-size:8px;border-top-right-radius:.125rem;border-bottom-right-radius:.125rem}.top__button[_ngcontent-%COMP%]{z-index:10;display:flex;width:24px;cursor:pointer;align-items:center;justify-content:center;background-color:rgb(255 255 255 / var(--tw-bg-opacity));--tw-bg-opacity: .95;padding:.25rem}.top__button[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity));opacity:.3}.length[_ngcontent-%COMP%]{background-color:#fff6;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}"],changeDetection:0})}return m})()},4118:(ee,E,a)=>{a.d(E,{G:()=>X});var c=a(35285),s=a(89985),e=a(29980),V=a(58764),$=a(19825),v=a(87366),B=a.n(v),S=a(38684),y=a(871),w=a(47956),A=a(82575),J=a(3470),k=a(57355);function U(_,j){if(1&_){const g=s.RV6();s.j41(0,"globy-file-card",2),s.bIt("deleteItem",function(C){s.eBV(g);const T=s.XpG(2);return s.Njj(T.delete(C))})("editItem",function(C){s.eBV(g);const T=s.XpG(2);return s.Njj(T.edit(C))}),s.k0s()}if(2&_){const g=s.XpG(),F=g.$implicit,C=g.$index,T=s.XpG();s.Y8G("showDelete",T.showDelete)("showEdit",T.showEdit)("handleItem",T.handleItem)("data",F)("index",C)}}function Q(_,j){1&_&&s.DNE(0,U,1,5,"globy-file-card",1),2&_&&s.vxM(0,j.$implicit?0:-1)}let z=(()=>{class _{constructor(){this.deleteItem=new s.bkB,this.editItem=new s.bkB}delete(g){this.deleteItem.next(g)}edit(g){this.editItem.next(g)}static#e=this.\u0275fac=function(F){return new(F||_)};static#t=this.\u0275cmp=s.VBU({type:_,selectors:[["globy-file-list"]],inputs:{items:"items",handleItem:"handleItem",showDelete:"showDelete",showEdit:"showEdit",customClass:"customClass"},outputs:{deleteItem:"deleteItem",editItem:"editItem"},standalone:!0,features:[s.aNF],decls:3,vars:1,consts:[[1,"grid","grid-flow-row","gap-3",3,"ngClass"],[3,"showDelete","showEdit","handleItem","data","index"],[3,"deleteItem","editItem","showDelete","showEdit","handleItem","data","index"]],template:function(F,C){1&F&&(s.j41(0,"div",0),s.Z7z(1,Q,1,1,null,null,s.Vm6),s.k0s()),2&F&&(s.Y8G("ngClass",C.customClass),s.R7$(),s.Dyx(C.items))},dependencies:[k.GlobyFileCard,S.YU],encapsulation:2,changeDetection:0})}return _})();var O=a(24797),I=a(80221),m=a(61553),M=a(76492);function h(_,j){if(1&_&&s.nrm(0,"img",5),2&_){const g=s.XpG();s.Y8G("name",g.buttonIcon)}}function D(_,j){if(1&_&&(s.j41(0,"span",7),s.EFF(1),s.k0s()),2&_){const g=s.XpG();s.R7$(),s.JRh(g.noFileLabel)}}function l(_,j){1&_&&(s.j41(0,"mat-error",11),s.EFF(1,"This field is required"),s.k0s())}function Z(_,j){if(1&_&&(s.j41(0,"div",2),s.Z7z(1,l,2,0,"mat-error",11,s.Vm6),s.k0s()),2&_){const g=s.XpG();s.R7$(),s.Dyx(g.errors)}}function H(_,j){if(1&_&&(s.j41(0,"div",9),s.EFF(1),s.k0s()),2&_){const g=s.XpG();s.R7$(),s.SpI(" ",g.description," ")}}function ne(_,j){if(1&_){const g=s.RV6();s.j41(0,"globy-file-list",12),s.bIt("deleteItem",function(C){s.eBV(g);const T=s.XpG();return s.Njj(T.delete(C))}),s.k0s()}if(2&_){const g=s.XpG();s.Y8G("customClass",g.customListClass)("showDelete",g.showDelete)("handleItem",g.handleItem)("items",g.items)}}let X=(()=>{let _=class fe extends e.t{constructor(){super(),this.buttonIcon="export",this.buttonLabel="Upload file",this.maxFileWeight=10,this.accept=y.eG,this.showResulList=!0,this.showDelete=!0,this.hotToastService=(0,s.WQX)(O.U_)}get value(){return this.formControl?.value||[]}get acceptTypes(){return this.accept.map(F=>`.${F}`).join(", ")}get items(){return Array.isArray(this.formControl.value)?this.formControl.value:[this.formControl.value]}delete(g){let F=B().cloneDeep(this.value);F=B().without(F,F[g]),this.formControl.patchValue(F)}uploadFile(g){let F=g.target.files;if(!this.checkFormat(F))return;const C=this.checkFileSize(F);this.formControl.patchValue(this.multiple?[...this.value,...C]:[...C])}checkFormat(g){const T=Array.from(g).map(P=>P.name.split(".").pop()).every(P=>this.accept.includes(P));return T||this.hotToastService.error("Wrong file type"),T}checkFileSize(g){let F=Array.from(g);for(let C=0;C<F.length;C++){const T=F[C];T.size/1e6>this.maxFileWeight&&(this.hotToastService.error(`File "${T.name}" is too big`),F=F.filter(P=>P.name!==T.name))}return F}static#e=this.\u0275fac=function(F){return new(F||fe)};static#t=this.\u0275cmp=s.VBU({type:fe,selectors:[["globy-file"]],inputs:{buttonIcon:"buttonIcon",buttonLabel:"buttonLabel",buttonClass:"buttonClass",maxFileWeight:"maxFileWeight",description:"description",multiple:"multiple",accept:"accept",noFileLabel:"noFileLabel",showResulList:"showResulList",customListClass:"customListClass",showDelete:"showDelete",handleItem:"handleItem",errors:"errors"},standalone:!0,features:[s.Jv_([(0,w.J)(fe)]),s.Vt3,s.aNF],decls:13,vars:9,consts:[["fileInput",""],[1,"flex","flex-col","gap-3"],[1,"flex","flex-col"],[1,"flex","flex-row","items-center","gap-3"],["b2bNgxButton","","type","button",1,"upload-button","text-xs","cursor-pointer","rounded-sm","px-3","py-2","flex","flex-row","gap-2","items-center",3,"click","ngClass"],["b2bNgxIcon","",1,"cursor-pointer",3,"name"],[1,"cursor-pointer"],[1,"!text-xs","md:text-base"],["type","file",1,"hidden",3,"change","accept","multiple"],[1,"flex","items-center","justify-start","font-secondary","md:w-1/2","!text-xs","md:text-base"],[3,"customClass","showDelete","handleItem","items"],[1,"text-red-500","text-xs"],[3,"deleteItem","customClass","showDelete","handleItem","items"]],template:function(F,C){if(1&F){const T=s.RV6();s.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),s.bIt("click",function(){s.eBV(T);const Y=s.sdS(9);return s.Njj(Y.click())}),s.DNE(4,h,1,1,"img",5),s.j41(5,"span",6),s.EFF(6),s.k0s()(),s.DNE(7,D,2,1,"span",7),s.j41(8,"input",8,0),s.bIt("change",function(Y){return s.eBV(T),s.Njj(C.uploadFile(Y))}),s.k0s()(),s.DNE(10,Z,3,0,"div",2),s.k0s(),s.DNE(11,H,2,1,"div",9)(12,ne,1,4,"globy-file-list",10),s.k0s()}2&F&&(s.R7$(3),s.Y8G("ngClass",C.buttonClass),s.R7$(),s.vxM(4,C.buttonIcon?4:-1),s.R7$(2),s.JRh(C.buttonLabel),s.R7$(),s.vxM(7,!C.noFileLabel||null!=C.formControl&&null!=C.formControl.value&&C.formControl.value.length?-1:7),s.R7$(),s.Y8G("accept",C.acceptTypes)("multiple",C.multiple),s.R7$(2),s.vxM(10,C.errors?10:-1),s.R7$(),s.vxM(11,C.description?11:-1),s.R7$(),s.vxM(12,C.showResulList?12:-1))},dependencies:[V.i,m.Z,S.YU,z,A.X1,J.F,M.i,I.TL],styles:[".upload-button[_ngcontent-%COMP%]{border:2px solid #000000}"]})};return _=(0,c.Cg)([(0,$.d)()],_),_})()},871:(ee,E,a)=>{a.d(E,{Eo:()=>e,eG:()=>c});const c=["png","svg","jpg","jpeg","webp"],e=["mp4","avi","mov","flv","mkv","wmv","avchd","webm"]},69648:(ee,E,a)=>{a.d(E,{T:()=>le});var c=a(52235),s=a(35285),e=a(83621),V=a(37063),$=a(49134),v=a(82575),B=a(50096),S=a(90194),y=a(38684),w=a(86822),A=a(86324),J=a(58764),k=a(22699),U=a(78478),Q=a(6588),z=a(19825),O=a(80221),I=a(83065),m=a(4118),M=a(51271),h=a(93744);function D(u,f){return p=>{const x=p.get(u).value,G=p.get(f).value;return x&&G&&new Date(x)>new Date(G)?{dateRangeError:!0}:null}}var l=a(89985),Z=a(53154),H=a(24797),ne=a(13817),X=a(6113),_=a(82812),j=a(61553);const g=u=>({"md:mb-0 mb-20":u});function F(u,f){1&u&&(l.j41(0,"mat-error"),l.EFF(1,"Your title is too short. Min length is 5 symbols"),l.k0s())}function C(u,f){1&u&&(l.j41(0,"mat-error"),l.EFF(1,"Your title is too long. Max length is 40 symbols"),l.k0s())}function T(u,f){1&u&&l.eu8(0)}function P(u,f){if(1&u&&l.DNE(0,T,1,0,"ng-container",13),2&u){l.XpG(2);const p=l.sdS(30);l.Y8G("ngTemplateOutlet",p)}}function Y(u,f){1&u&&l.eu8(0)}function ce(u,f){if(1&u&&l.DNE(0,Y,1,0,"ng-container",13),2&u){l.XpG(2);const p=l.sdS(32);l.Y8G("ngTemplateOutlet",p)}}function K(u,f){if(1&u&&l.DNE(0,F,2,0,"mat-error")(1,C,2,0,"mat-error")(2,P,1,1,"ng-container")(3,ce,1,1,"ng-container"),2&u){const p=l.XpG();l.vxM(0,null!=p.title&&null!=p.title.errors&&p.title.errors.minlength?0:-1),l.R7$(),l.vxM(1,null!=p.title&&null!=p.title.errors&&p.title.errors.maxlength?1:-1),l.R7$(),l.vxM(2,null!=p.title&&null!=p.title.errors&&p.title.errors.required?2:-1),l.R7$(),l.vxM(3,null!=p.title&&null!=p.title.errors&&p.title.errors.cyrillic?3:-1)}}function L(u,f){1&u&&(l.j41(0,"mat-error"),l.EFF(1,"Your description is too short. Min length is 40 symbols"),l.k0s())}function de(u,f){1&u&&(l.j41(0,"mat-error"),l.EFF(1,"Your description is too long. Max length is 1000 symbols"),l.k0s())}function R(u,f){1&u&&l.eu8(0)}function ie(u,f){if(1&u&&l.DNE(0,R,1,0,"ng-container",13),2&u){l.XpG(2);const p=l.sdS(30);l.Y8G("ngTemplateOutlet",p)}}function oe(u,f){1&u&&l.eu8(0)}function N(u,f){if(1&u&&l.DNE(0,oe,1,0,"ng-container",13),2&u){l.XpG(2);const p=l.sdS(32);l.Y8G("ngTemplateOutlet",p)}}function re(u,f){if(1&u&&l.DNE(0,L,2,0,"mat-error")(1,de,2,0,"mat-error")(2,ie,1,1,"ng-container")(3,N,1,1,"ng-container"),2&u){const p=l.XpG();l.vxM(0,null!=p.description&&null!=p.description.errors&&p.description.errors.minlength?0:-1),l.R7$(),l.vxM(1,null!=p.description&&null!=p.description.errors&&p.description.errors.maxlength?1:-1),l.R7$(),l.vxM(2,null!=p.description&&null!=p.description.errors&&p.description.errors.required?2:-1),l.R7$(),l.vxM(3,null!=p.description&&null!=p.description.errors&&p.description.errors.cyrillic?3:-1)}}function me(u,f){1&u&&l.eu8(0)}function te(u,f){if(1&u&&l.DNE(0,me,1,0,"ng-container",13),2&u){l.XpG();const p=l.sdS(30);l.Y8G("ngTemplateOutlet",p)}}function be(u,f){1&u&&l.eu8(0)}function W(u,f){1&u&&l.eu8(0)}function Ve(u,f){if(1&u&&l.DNE(0,W,1,0,"ng-container",13),2&u){l.XpG();const p=l.sdS(30);l.Y8G("ngTemplateOutlet",p)}}function _e(u,f){1&u&&l.eu8(0)}function q(u,f){1&u&&(l.j41(0,"mat-error"),l.EFF(1,"This field is required"),l.k0s())}function ve(u,f){1&u&&(l.j41(0,"mat-error"),l.EFF(1,"You can use only latin symbols"),l.k0s())}function Ce(u,f){1&u&&(l.j41(0,"mat-error"),l.EFF(1," Start date must be before end date. "),l.k0s())}function ye(u,f){if(1&u&&l.DNE(0,Ce,2,0,"mat-error"),2&u){const p=l.XpG();l.vxM(0,null!=p.form.errors&&p.form.errors.dateRangeError?0:-1)}}let le=class Ie extends V.M{constructor(f,p,x,G,ae){super(),this.tradeShow=f,this.authService=p,this.hotToastService=x,this.clientTradeShowService=G,this.fb=ae,this.form=this.fb.group({title:["",[v.k0.required,v.k0.minLength(5),v.k0.maxLength(40),(0,I.r)()]],description:["",[v.k0.minLength(40),v.k0.maxLength(1e3),(0,I.r)()]],startedAt:[null,[v.k0.required]],endedAt:[null,[v.k0.required]],images:[null,[v.k0.required]],type:["upcoming"]},{validators:[D("startedAt","endedAt")]}),this.today=new Date("December 31, 2009, 23:15:30 GMT-11:00"),this.NgxInputVersionEnum=S.v,this.fileUploadDescription=M.B}get company(){return this.authService.company}get controls(){return this.form?.controls}get title(){return this.controls?.title}get description(){return this.controls?.description}ngOnInit(){this.patchValue()}onSubmit(){var f=this;return(0,c.A)(function*(){if(!(yield(0,Q._)(f.clientTradeShowService.tradeShows$))?.find(x=>x?._id===f.tradeShow?._id))return f.create();f.edit(),f.onDismiss()})()}patchValue(){this.tradeShow&&this.form.patchValue({...this.tradeShow,startedAt:new Date(this.tradeShow.startedAt),endedAt:new Date(this.tradeShow.endedAt)})}edit(){const f={...this.tradeShow,...this.form.value,uploadedImages:this.form?.value?.images?.map(p=>p?._id||void 0).filter(p=>!!p)};console.log("EDIT::",f),this.clientTradeShowService.update(f).pipe((0,k.$)(),this.hotToastService.observe(U.g9)).subscribe(p=>{this.onDismiss(p)})}create(){const f={...this.tradeShow,...this.form.value};this.clientTradeShowService.create(f).pipe((0,z.s)(this),(0,k.$)(),this.hotToastService.observe(U.g9)).subscribe(p=>{this.onDismiss(p)})}onDismiss(f){super.onDismiss(f),this.clientTradeShowService.getListByCompanyId().subscribe()}handleImage(f){return{url:f?.path?h.c.apiUrl+encodeURIComponent(f?.path):null,type:"image"}}getFileErrors(){return this.controls.images?.errors?.required&&this.form.touched?["This field is required"]:void 0}static#e=this.\u0275fac=function(p){return new(p||Ie)(l.rXU($.Vh),l.rXU(Z.u),l.rXU(H.U_),l.rXU(ne.f),l.rXU(v.ok))};static#t=this.\u0275cmp=l.VBU({type:Ie,selectors:[["b2b-client-profile-trade-shows-modal"]],standalone:!0,features:[l.Vt3,l.aNF],decls:35,vars:45,consts:[["required",""],["cyrillic",""],["dateRange",""],[1,"md:max-w-[70vw]","p-2","min-w-[50vw]","max-h-screen","md:max-h-[90vh]","overflow-y-auto",3,"close","label"],[1,"flex","flex-col","gap-4","md:mb-0","mb-12",3,"ngSubmit","formGroup"],[1,"flex","flex-col"],["b2bNgxInput","","type","text",3,"formControlName","label","placeholder","version"],["b2bNgxInput","",3,"formControlName","label","placeholder","version"],[1,"flex","flex-col","gap-2","w-full"],[1,"font-semibold","text-sm","mb-2"],[1,"flex","flex-col","md:flex-row","gap-2"],[1,"flex","flex-col","md:w-1/2","w-full"],[3,"label","today","inputClassName","version","formControlName"],[4,"ngTemplateOutlet"],[3,"label","inputClassName","today","version","formControlName"],[1,"h-fit",3,"buttonLabel","customListClass","description","formControlName","noFileLabel","handleItem","maxFileWeight","multiple","showResulList","errors"],[1,"flex","flex-row","justify-center","items-center"],["b2bNgxButton","","type","submit",1,"bg-[#1C5BFE]","px-10","py-3","rounded-[0.25rem]","text-white",3,"disabled","ngClass"]],template:function(p,x){if(1&p){const G=l.RV6();l.j41(0,"b2b-client-profile-modal-container",3),l.nI1(1,"titlecase"),l.bIt("close",function(){return l.eBV(G),l.Njj(x.onDismiss())}),l.j41(2,"form",4),l.bIt("ngSubmit",function(){return l.eBV(G),l.Njj(x.onSubmit())}),l.j41(3,"div",5),l.nrm(4,"input",6),l.DNE(5,K,4,4),l.k0s(),l.j41(6,"div",5),l.nrm(7,"textarea",7),l.DNE(8,re,4,4),l.k0s(),l.j41(9,"div",8)(10,"span",9),l.EFF(11),l.nI1(12,"titlecase"),l.k0s(),l.j41(13,"div",10)(14,"div",11)(15,"b2b-datepicker",12),l.EFF(16," Date from "),l.k0s(),l.DNE(17,te,1,1,"ng-container")(18,be,1,0,"ng-container",13),l.k0s(),l.j41(19,"div",11)(20,"b2b-datepicker",14),l.EFF(21," Date to "),l.k0s(),l.DNE(22,Ve,1,1,"ng-container")(23,_e,1,0,"ng-container",13),l.k0s()()(),l.j41(24,"div",5),l.nrm(25,"globy-file",15),l.k0s(),l.j41(26,"div",16)(27,"button",17),l.EFF(28," Save changes "),l.k0s()()()(),l.DNE(29,q,2,0,"ng-template",null,0,l.C5r)(31,ve,2,0,"ng-template",null,1,l.C5r)(33,ye,1,1,"ng-template",null,2,l.C5r)}if(2&p){const G=l.sdS(34);l.Y8G("label","Add "+l.bMT(1,39,x.tradeShow.type)+" exhibition"),l.R7$(2),l.Y8G("formGroup",x.form),l.R7$(2),l.Y8G("formControlName","title")("label","Exhibition name")("placeholder","Exhibition name")("version",x.NgxInputVersionEnum.GLOBY),l.R7$(),l.vxM(5,x.title.touched?5:-1),l.R7$(2),l.Y8G("formControlName","description")("label","Event description")("placeholder","Event description")("version",x.NgxInputVersionEnum.GLOBY),l.R7$(),l.vxM(8,null!=x.description&&x.description.touched?8:-1),l.R7$(3),l.SpI("",l.bMT(12,41,x.tradeShow.type)," period"),l.R7$(4),l.Y8G("label","Date from")("today",x.startedAt)("inputClassName","text-xs")("version",x.NgxInputVersionEnum.GLOBY)("formControlName","startedAt"),l.R7$(2),l.vxM(17,null!=x.controls.startedAt&&null!=x.controls.startedAt.errors&&x.controls.startedAt.errors.required?17:-1),l.R7$(),l.Y8G("ngTemplateOutlet",G),l.R7$(2),l.Y8G("label","Date to")("inputClassName","text-xs")("today",x.controls.startedAt.value)("version",x.NgxInputVersionEnum.GLOBY)("formControlName","endedAt"),l.R7$(2),l.vxM(22,null!=x.controls.endedAt&&null!=x.controls.endedAt.errors&&x.controls.endedAt.errors.required?22:-1),l.R7$(),l.Y8G("ngTemplateOutlet",G),l.R7$(2),l.Y8G("buttonLabel","Choose photos")("customListClass","grid-cols-2 md:grid-cols-5 lg:grid-cols-7")("description",x.fileUploadDescription)("formControlName","images")("noFileLabel","No file chosen")("handleItem",x.handleImage)("maxFileWeight",5)("multiple",!0)("showResulList",!0)("errors",x.getFileErrors()),l.R7$(2),l.Y8G("disabled",x.form.invalid)("ngClass",l.eq3(43,g,null==x.controls.images||null==x.controls.images.value?null:x.controls.images.value[0]))}},dependencies:[e.Q,B.E,X.b,v.X1,v.qT,v.me,v.BC,v.cb,v.j4,v.JD,y.PV,w.h,_.i,A.A,J.i,j.Z,O.TL,m.G,y.T3,y.YU],styles:["__datepicker[_nghost-%COMP%]{margin-left:8px}__datepicker[_nghost-%COMP%]     input.datepicker{height:64px;border:none;border-radius:14px;padding:0 16px;width:100%}__datepicker[_nghost-%COMP%]     input.datepicker::placeholder{padding-left:20px}.datepicker[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}  input.datepicker{height:48px;width:100%;border:1px solid #C6D1E2;border-radius:.375rem!important;padding:.5rem 1rem!important}  input.datepicker::placeholder{padding-left:20px}  button.b2b-ngx-button .ngx-file-button .outline .outline-black{border:1px solid black}  .ngx-file .control button{border-width:1px}mat-error[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity))}"],changeDetection:0})};le=(0,s.Cg)([(0,z.d)()],le)},51271:(ee,E,a)=>{a.d(E,{B:()=>c,b:()=>s});const c="Image file size should be less than 5MB. Supported formats: .jpeg, .jpg, .png, .webp and .svg. Recommended image size is more than 640\xd7640 px.",s="To upload a video file, the user has to choose and upload files from the computer. Supported formats of the video: MP4, MOV, AVI, FLV, MKV, WMV, AVCHD, and WEBM. The maximum video size: 100MB."},31761:(ee,E,a)=>{a.r(E),a.d(E,{ClientProfileSettingsNewComponent:()=>zn});var c=a(52235),s=a(35285),e=a(89985),V=a(23290),$=a(45378),v=a(38684),B=a(87366),S=a.n(B),y=a(19825),w=a(22699),A=a(93703),J=a(27492),k=a(75563);const U=(o,i)=>i.label,Q=(o,i)=>({"tab-border--active":o,"tab-border":i});function z(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){const r=e.eBV(t).$index,d=e.XpG();return e.Njj(d.activateTab(r))}),e.EFF(1),e.k0s()}if(2&o){const t=i.$implicit;e.Y8G("ngClass",e.l_i(2,Q,t.active,!t.active)),e.R7$(),e.SpI(" ",t.label," ")}}let O=class je{constructor(i,t){this.clientProfileSettingsTabsService=i,this.cdr=t,this.disabled=!1,this.defaultTab=S().cloneDeep($.j),this.activeTab=new e.bkB,this.tabs=S().cloneDeep($.v)}ngOnInit(){this.initTab()}activateTab(i){var t=this;return(0,c.A)(function*(){(yield t.clientProfileSettingsTabsService.isActivationPossible())?t.changeTab(i):t.clientProfileSettingsTabsService.openTabChangeModal().afterClosed().pipe((0,y.s)(t),(0,w.$)(),(0,A.B)(100),(0,J.M)(function(){var r=(0,c.A)(function*(d){d?yield t.clientProfileSettingsTabsService.initSaveModal(t.clientProfileSettingsTabsService.activeTab):yield t.clientProfileSettingsTabsService.initSaveModal(null)});return function(d){return r.apply(this,arguments)}}())).subscribe(()=>{t.changeTab(i),t.clientProfileSettingsTabsService.data$.next({first:null,second:null})})})()}changeTab(i){this.tabs.map(t=>t.active=!1),this.disabled||(this.tabs[i].active=!this.tabs[i].active),this.activeTab.emit(this.tabs[i]),this.clientProfileSettingsTabsService.currentTab.next(this.tabs[i]),this.clientProfileSettingsTabsService.activeTab=this.tabs[i],this.cdr.detectChanges()}initTab(){const i=this.tabs.findIndex(t=>t.label===this.defaultTab.label);this.clientProfileSettingsTabsService.activeTab=this.tabs[i],this.clientProfileSettingsTabsService.currentTab.next(this.tabs[i]),this.changeTab(i)}static#e=this.\u0275fac=function(t){return new(t||je)(e.rXU(k.l),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:je,selectors:[["b2b-client-profile-settings-tabs"]],inputs:{disabled:"disabled",defaultTab:"defaultTab"},outputs:{activeTab:"activeTab"},standalone:!0,features:[e.aNF],decls:3,vars:0,consts:[[1,"w-full","grid","grid-flow-col","overflow-x-scroll","no-scrollbar"],[1,"whitespace-nowrap","text-center","transition-all","ease-in-out","duration-300","cursor-pointer","flex","items-center","justify-center","text-black","hover:bg-[#EDF1FCFF]","px-3","py-2","text-secondary","text-md",3,"ngClass"],[1,"whitespace-nowrap","text-center","transition-all","ease-in-out","duration-300","cursor-pointer","flex","items-center","justify-center","text-black","hover:bg-[#EDF1FCFF]","px-3","py-2","text-secondary","text-md",3,"click","ngClass"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.Z7z(1,z,2,5,"div",1,U),e.k0s()),2&t&&(e.R7$(),e.Dyx(n.tabs))},dependencies:[V.RI,v.YU],styles:[".tab-border--active[_ngcontent-%COMP%]{border-bottom:2px solid #005dff}.tab-border[_ngcontent-%COMP%]{border-bottom:2px solid #cfdeff}.no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"],changeDetection:0})};O=(0,s.Cg)([(0,y.d)()],O);var I=a(60312),m=a(82575),M=a(58764),h=a(3470),D=a(94078),l=a(62397);let Z=class Re{constructor(i){this.fb=i,this.data=new e.bkB,this.form=this.fb.group({logo:[],banner:[]}),this.initFormListener()}ngOnInit(){console.log("company::",this.company)}initFormListener(){this.form.valueChanges.pipe((0,y.s)(this)).subscribe(i=>{i.logo||(this.logo=void 0),i.banner||(this.banner=void 0),this.data.emit(i)})}patchLogo(i){this.form.get("logo").patchValue(i)}patchBanner(i){this.form.get("banner").patchValue(i)}static#e=this.\u0275fac=function(t){return new(t||Re)(e.rXU(m.ok))};static#t=this.\u0275cmp=e.VBU({type:Re,selectors:[["b2b-client-profile-settings-image-uploader"]],inputs:{company:"company"},outputs:{data:"data"},standalone:!0,features:[e.aNF],decls:7,vars:17,consts:[[3,"formGroup"],[1,"hidden","md:flex","w-full"],[1,"w-full",3,"file","buttonLabel","mode","path"],[1,"aspect-square","!h-52",3,"file","buttonLabel","mode","modalMode","path"],[1,"flex","flex-col","md:hidden","gap-4"],[1,"md:hidden",3,"file","label","mode","modalMode","orientation","buttonLabel","path"],[3,"file","buttonLabel","label","path"]],template:function(t,n){1&t&&(e.qex(0,0),e.j41(1,"div",1)(2,"b2b-client-profile-image-container",2),e.bIt("file",function(d){return n.patchBanner(d)}),e.j41(3,"b2b-client-profile-image-container",3),e.bIt("file",function(d){return n.patchLogo(d)}),e.k0s()()(),e.j41(4,"div",4)(5,"b2b-client-profile-image-container",5),e.bIt("file",function(d){return n.patchLogo(d)}),e.k0s(),e.j41(6,"b2b-client-profile-image-container",6),e.bIt("file",function(d){return n.patchBanner(d)}),e.k0s()(),e.bVm()),2&t&&(e.Y8G("formGroup",n.form),e.R7$(2),e.Y8G("buttonLabel","Upload Banner")("mode","desktop")("path",null==n.company||null==n.company.banner?null:n.company.banner.path),e.R7$(),e.Y8G("buttonLabel","Upload Logo")("mode","desktop")("modalMode","logo")("path",null==n.company||null==n.company.logo?null:n.company.logo.path),e.R7$(2),e.Y8G("label","Supported file types: PDF, PNG and JPG files. Maximum size: 5 MB")("mode","mobile")("modalMode","logo")("orientation","horizontal")("buttonLabel","Upload Logo")("path",null==n.company||null==n.company.logo?null:n.company.logo.path),e.R7$(),e.Y8G("buttonLabel","Upload Banner")("label","Supported file types: PDF, PNG and JPG files. Maximum size: 5 MB")("path",null==n.company||null==n.company.banner?null:n.company.banner.path))},dependencies:[M.i,h.F,D.f,m.X1,m.cb,m.j4,l.C],styles:[".container[_ngcontent-%COMP%]:hover   .input[_ngcontent-%COMP%]{display:flex!important}"],changeDetection:0})};Z=(0,s.Cg)([(0,y.d)()],Z);var H=a(80221),ne=a(28225),X=a(50096),_=a(90194),j=a(44372),g=a(10424),F=a(59076),C=a(87628),T=a(22821);const P=[{name:"Facebook",icon:"facebook",formControlName:"facebook",edit:!1},{name:"Instagram",icon:"instagram",formControlName:"instagram",edit:!1},{name:"LinkedIn",icon:"linkedin",formControlName:"linkedin",edit:!1},{name:"Twitter",icon:"twitter",formControlName:"twitter",edit:!1}];var Y=a(50442),ce=a(70948),K=a(4638),L=a(78478),de=a(92578),R=a(61553);let ie=(()=>{class o{constructor(){this.initSave=new e.bkB}onInitSave(){this.initSave.emit(!0)}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["b2b-client-profile-mobile-toolbar"]],outputs:{initSave:"initSave"},standalone:!0,features:[e.aNF],decls:3,vars:0,consts:[[1,"flex","flex-row","gap-4","!bg-white","justify-center","p-3","z-50"],["b2bNgxButton","",1,"bg-[#1C5BFE]","px-3","w-1/2","rounded-[0.25rem]","py-2","text-white",3,"click"]],template:function(n,r){1&n&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return r.onInitSave()}),e.EFF(2," Save changes "),e.k0s()())},dependencies:[M.i,R.Z]})}return o})();var oe=a(83621),N=a(49134),re=a(37063),me=a(39129),te=a(6113);let be=(()=>{class o extends re.M{constructor(t){super(),this.socialMediaForm=t,this.control=new m.MJ("",[m.k0.required,(0,me.o)()]),this.NgxInputVersionEnum=_.v}ngOnInit(){this.patchValue()}patchValue(){this.socialMediaForm.value&&this.control.patchValue(this.socialMediaForm.value)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(N.Vh))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["b2b-client-profile-social-media-modal"]],standalone:!0,features:[e.Vt3,e.aNF],decls:12,vars:7,consts:[[1,"md:w-[50vw]","p-2",3,"close","label"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-row","pl-3","items-center","!py-0","bg-white","border","border-[#C6D1E2]","rounded-md"],[1,"flex","flex-row","gap-2","pr-3"],[3,"svgIcon"],[1,"grid","w-full","divider"],["type","text","b2bNgxInput","",1,"border-none","!py-4","w-full",3,"formControl","placeholder","version"],[1,"flex","flex-row","justify-center"],["type","submit","b2bNgxButton","",1,"bg-[#1C5BFE]","px-10","py-3","rounded-[0.25rem]","text-white",3,"click","disabled"]],template:function(n,r){1&n&&(e.j41(0,"b2b-client-profile-modal-container",0),e.bIt("close",function(){return r.onDismiss()}),e.j41(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"mat-icon",4),e.j41(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"input",6),e.k0s()(),e.j41(9,"div",7)(10,"button",8),e.bIt("click",function(){return r.onDismiss(r.control.value)}),e.EFF(11," Save changes "),e.k0s()()()()),2&n&&(e.Y8G("label","Add resources"),e.R7$(4),e.Y8G("svgIcon",r.socialMediaForm.icon+"_new"),e.R7$(2),e.JRh(r.socialMediaForm.name),e.R7$(2),e.Y8G("formControl",r.control)("placeholder","https://"+r.socialMediaForm.formControlName+".com/link")("version",r.NgxInputVersionEnum.GLOBY),e.R7$(2),e.Y8G("disabled",r.control.invalid))},dependencies:[oe.Q,X.E,te.b,T.An,m.X1,m.me,m.BC,m.l_,M.i,R.Z],styles:[".divider[_ngcontent-%COMP%]{border-left:1px solid #C6D1E2}"]})}return o})();var W=a(53154);const _e=["en","es","pt"];var q=a(93744),ve=a(12819),Ce=a(83883);let ye=(()=>{class o{constructor(t,n){this.translateProvider=t,this.httpService=n,this.supportedLangs=_e}get supportedLang(){return this.supportedLangs.filter(t=>t===this.currentLang)}get defaultLang(){return this.translateProvider.defaultLang}get currentLang(){return this.translateProvider.currentLang}get langs(){return this.translateProvider.langs}set(t,n,r){return this.translateProvider.set(t,n,r)}get(t){return this.translateProvider.get(t)}getLang(){return this.translateProvider.currentLang}setLang(t){this.translateProvider.use(t)}getLangs(){return this.translateProvider.getLangs()}getTranslation(t){return this.translateProvider.getTranslation(t)}translate(t){var n=this;return(0,c.A)(function*(){return n.httpService.post(q.c.apiUrl+"translate",t).toPromise()})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.KVO(ve.c$),e.KVO(Ce.Qq))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),le=(()=>{class o{constructor(t){this.translationFacade=t}get supportedLangs(){return this.translationFacade.supportedLangs}get currentLang(){return this.translationFacade.currentLang}get langs(){return this.translationFacade.langs}get(t){return this.translationFacade.get(t)}setLang(t){this.translationFacade.setLang(t)}generateKey(t,n,r){return`${t}.${n}.${r.join(".").toLowerCase()}`}translateMany(t){var n=this;return(0,c.A)(function*(){return yield Promise.all(t.map(r=>n.translateAndSaveOne(r)))})()}translateOne(t){var n=this;return(0,c.A)(function*(){return yield Promise.all(n.supportedLangs.map(r=>n.translateAndSaveOne({...t,langTo:r,langFrom:n.currentLang})))})()}translateAndSaveOne(t){var n=this;return(0,c.A)(function*(){try{const r=yield n.translate(t);return n.translationFacade.set(r.key,r.text,r.langTo),r}catch(r){return console.error(r),null}})()}translate(t){return this.translationFacade.translate(t)}static#e=this.\u0275fac=function(n){return new(n||o)(e.KVO(ye))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var u=a(27936),f=a(7040);const p=o=>({"!py-0":o});function x(o,i){1&o&&(e.j41(0,"mat-error",6),e.EFF(1,"Please use only latin letters"),e.k0s())}function G(o,i){1&o&&(e.j41(0,"mat-error",6),e.EFF(1,"Please use only latin letters"),e.k0s())}function ae(o,i){1&o&&(e.j41(0,"mat-error",6),e.EFF(1,"You description is too short. Min length 40 symbols"),e.k0s())}function Ze(o,i){1&o&&(e.j41(0,"mat-error",6),e.EFF(1,"Please use only latin letters"),e.k0s())}function He(o,i){1&o&&e.nrm(0,"mat-icon",23),2&o&&e.Y8G("svgIcon","check-green")}function Ke(o,i){1&o&&(e.j41(0,"mat-error",6),e.EFF(1,'Must be website link. E.g. "https://google.com"'),e.k0s())}function qe(o,i){1&o&&e.nrm(0,"mat-icon",19),2&o&&e.Y8G("svgIcon","check-green")}function et(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",25)(1,"div",29),e.nrm(2,"mat-icon",19),e.j41(3,"span"),e.EFF(4),e.k0s(),e.DNE(5,qe,1,1,"mat-icon",19),e.k0s(),e.j41(6,"button",30),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.changeMedia(r))}),e.EFF(7),e.k0s()()}if(2&o){const t=i.$implicit,n=e.XpG();e.Y8G("ngClass",e.eq3(5,p,t.edit)),e.R7$(2),e.Y8G("svgIcon",t.icon+"_new"),e.R7$(2),e.JRh(t.name),e.R7$(),e.vxM(5,!t.edit&&n.socialMedia.get(t.formControlName).value.length>0?5:-1),e.R7$(2),e.SpI(" ",null!=t&&t.edit?"Edit":"Link"," ")}}let xe=class Ne{constructor(i,t,n,r,d,b){this.authService=i,this.clientCompanyInformationService=t,this.matDialog=n,this.cdr=r,this.translationService=d,this.clientProfileSettingsTabsService=b,this.initSave$=new K.c,this.socialMedias=S().cloneDeep(P),this.form=this.clientCompanyInformationService.initForm(),this.rootRoles$=new K.c,this.company=this.authService.company,this.annualRevenueList=(0,L.Aq)(L.G1),this.employeesNumberList=(0,L.Aq)(L.TK),this.yearOfFoundationList=this.clientCompanyInformationService.yearOfFoundationList,this.B2bNgxInputThemeEnum=ne.Q,this.NgxInputVersionEnum=_.v,this.NgxSelectVariantEnum=C.Y,this.B2bNgxSelectThemeEnum=g.E,this.rootRoles$=this.clientCompanyInformationService.rootRoles$}get website(){return this.form.get("website")}get isAdmin(){return this.clientCompanyInformationService.isAdmin}get socialMedia(){return this.form.get("socialMedia")}get isEqual(){return S().isEqual(this.form.value,this.initialFormValue)}ngOnInit(){this.clientCompanyInformationService.initDefault()}ngAfterViewInit(){this.detectChanges(),this.saveListener(),this.patchForm()}ngOnDestroy(){this.form.reset()}canDeactivate(){return!this.form.dirty||confirm("You have unsaved changes! Are you sure you want to leave?")}changeMedia(i){this.matDialog.open(be,{data:{...i,value:this.socialMedia.get(i.formControlName).value},backdropClass:"modal__backdrop"}).afterClosed().pipe((0,w.$)(),(0,y.s)(this)).subscribe(t=>{t&&(this.socialMedia.get(i.formControlName).patchValue(t),this.cdr.detectChanges())})}onSubmit(){if(this.form.errors)return;const i=S().cloneDeep(this.initialFormValue);try{this.clientCompanyInformationService.onSubmit(this.form.value),this.initialFormValue=this.form.value,this.authService.updateCompany({...this.company,...this.form.value}),this.translate(this.authService.company),this.updateTabsData()}catch(t){console.error(t),this.initialFormValue=i}this.cdr.detectChanges()}handleData(i){(i.logo||void 0===i.logo)&&this.form.get("logo").patchValue(i.logo),(i.banner||void 0===i.banner)&&this.form.get("banner").patchValue(i.banner)}translate(i){const t={text:i.companyDescription,key:this.translationService.generateKey("company",i._id,["companyDescription"])};this.translationService.translateOne(t)}patchForm(){const i=this.authService.user,t=this.authService.company,n=S().omitBy(t?.socialMedia,r=>S().isUndefined(r)||S().isNull(r)||""===r||" "===r);setTimeout(()=>{this.form.patchValue({...t,socialMedia:n,businessType:t?.businessType||t?.roleId||i?.role?._id}),this.initialFormValue=this.form.value,this.clientProfileSettingsTabsService.data$.next({first:this.initialFormValue,second:this.form.value})},600)}detectChanges(){this.form.valueChanges.pipe((0,A.B)(100),(0,y.s)(this)).subscribe(i=>{this.updateTabsData(),this.cdr.detectChanges()})}saveListener(){this.clientProfileSettingsTabsService.initSubmit$.pipe((0,y.s)(this)).subscribe(i=>{null===i?this.patchForm():i?.label===I.y?.COMPANY_INFORMATION&&this.onSubmit()})}updateTabsData(){this.clientProfileSettingsTabsService.data$.next({first:this.form.value,second:this.initialFormValue})}static#e=this.\u0275fac=function(t){return new(t||Ne)(e.rXU(W.u),e.rXU(ce.w),e.rXU(N.bZ),e.rXU(e.gRc),e.rXU(le),e.rXU(k.l))};static#t=this.\u0275cmp=e.VBU({type:Ne,selectors:[["b2b-client-company-information"]],inputs:{initSave$:"initSave$"},standalone:!0,features:[e.Jv_([ce.w]),e.aNF],decls:48,vars:44,consts:[[1,"flex","flex-col","gap-4","md:mb-0","mb-32","z-10"],[3,"data","company"],[1,"flex","flex-col","gap-12",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-col","gap-1"],["placeholder","Example: Google","b2bNgxInput","","type","text",3,"label","formControlName","version"],[1,"text-red-500","text-xs"],["placeholder","Briefly describe your company (at least 40 characters)","b2bNgxInput","",1,"h-40",3,"label","version","formControlName"],[1,"font-secondary","text-xs","text-[#556274]"],[1,"section__border"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["placeholder","Select",3,"options","bindValue","bindLabel","version","formControlName"],["placeholder","Select",3,"options","version","bindValue","bindLabel","formControlName"],["bindLabel","displayName","placeholder","Select",3,"options","bindValue","version","formControlName"],["placeholder","Select",3,"version","theme","formControlName"],["placeholder","Input office address","b2bNgxInput","",1,"h-40",3,"label","version","formControlName"],[1,"text-lg","font-bold"],[1,"flex","flex-row","items-center","gap-1","bg-white","rounded-md","border","border-[#C6D1E2]"],[1,"w-fit","px-3","flex","flex-row","gap-2","items-center","bg-white"],[3,"svgIcon"],[1,"h-full"],[1,"w-full","grid"],["placeholder","Paste link","b2bNgxInput","","type","text",1,"!w-full","rounded-md","border-none",3,"version","formControlName"],[1,"mr-4","w-12","min-w-[24px]",3,"svgIcon"],[1,"grid","grid-cols-1","gap-4","md:grid-cols-2",3,"formGroupName"],[1,"flex","flex-row","justify-between","pl-3","pr-2","items-center","!py-2","bg-white","border","border-[#C6D1E2]","rounded-md",3,"ngClass"],[1,"hidden","md:flex","flex-row","justify-center","items-center"],["type","submit","b2bNgxButton","",1,"bg-[#1C5BFE]","px-10","py-3","rounded-[0.25rem]","text-white",3,"disabled"],[1,"fixed","md:hidden","left-0","bottom-0","w-full",3,"initSave"],[1,"flex","flex-row","gap-2"],["type","button","mat-flat-button","",1,"!bg-[#EEEEEE]","!px-10","!z-0",3,"click"]],template:function(t,n){if(1&t&&(e.j41(0,"div",0)(1,"b2b-client-profile-settings-image-uploader",1),e.bIt("data",function(d){return n.handleData(d)}),e.k0s(),e.j41(2,"form",2),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(3,"div",3)(4,"div",4),e.nrm(5,"input",5),e.DNE(6,x,2,0,"mat-error",6),e.k0s(),e.j41(7,"div",4),e.nrm(8,"textarea",7),e.DNE(9,G,2,0,"mat-error",6)(10,ae,2,0,"mat-error",6),e.j41(11,"span",8),e.EFF(12,"e.g. Company has been a trusted name in the manufacturing of high-quality steel components for over 30 years. Specializing in both domestic and international markets, we pride ourselves on delivering durable products that meet rigorous industry standards."),e.k0s()(),e.nrm(13,"div",9),e.j41(14,"div",10)(15,"b2b-ngx-select",11),e.EFF(16,"Year established "),e.k0s(),e.j41(17,"b2b-ngx-select",11),e.EFF(18,"Number of employees "),e.k0s(),e.j41(19,"b2b-ngx-select",12),e.EFF(20,"Annual revenue "),e.k0s(),e.j41(21,"b2b-ngx-select",13),e.EFF(22,"Business type "),e.k0s(),e.j41(23,"b2b-ngx-country-select",14),e.EFF(24,"Country "),e.k0s()(),e.j41(25,"div",4),e.nrm(26,"textarea",15),e.DNE(27,Ze,2,0,"mat-error",6),e.k0s(),e.nrm(28,"div",9),e.j41(29,"div",16),e.EFF(30,"Official resources"),e.k0s(),e.j41(31,"div",4)(32,"div",17)(33,"div",18),e.nrm(34,"mat-icon",19),e.j41(35,"span",20),e.EFF(36,"Website"),e.k0s()(),e.j41(37,"div",21),e.nrm(38,"input",22),e.k0s(),e.DNE(39,He,1,1,"mat-icon",23),e.k0s(),e.DNE(40,Ke,2,0,"mat-error",6),e.k0s(),e.j41(41,"div",24),e.Z7z(42,et,8,7,"div",25,e.Vm6),e.k0s()(),e.j41(44,"div",26)(45,"button",27),e.EFF(46," Save changes "),e.k0s()()()(),e.j41(47,"b2b-client-profile-mobile-toolbar",28),e.bIt("initSave",function(){return n.onSubmit()}),e.k0s()),2&t){let r,d,b,Qe;e.R7$(),e.Y8G("company",n.company),e.R7$(),e.Y8G("formGroup",n.form),e.R7$(3),e.Y8G("label","Company name")("formControlName","companyName")("version",n.NgxInputVersionEnum.GLOBY),e.R7$(),e.vxM(6,null!=(r=n.form.get("companyName").errors)&&r.cyrillic?6:-1),e.R7$(2),e.Y8G("label","Company description")("version",n.NgxInputVersionEnum.GLOBY)("formControlName","companyDescription"),e.R7$(),e.vxM(9,null!=(d=n.form.get("companyDescription").errors)&&d.cyrillic?9:-1),e.R7$(),e.vxM(10,null!=(b=n.form.get("companyDescription").errors)&&b.minlength?10:-1),e.R7$(5),e.Y8G("options",n.yearOfFoundationList)("bindValue","id")("bindLabel","value")("version",n.NgxSelectVariantEnum.GLOBY)("formControlName","yearOfFoundation"),e.R7$(2),e.Y8G("options",n.employeesNumberList)("bindValue","id")("bindLabel","value")("version",n.NgxSelectVariantEnum.GLOBY)("formControlName","employeesNumber"),e.R7$(2),e.Y8G("options",n.annualRevenueList)("version",n.NgxSelectVariantEnum.GLOBY)("bindValue","id")("bindLabel","value")("formControlName","annualRevenue"),e.R7$(2),e.Y8G("options",null==n.clientCompanyInformationService?null:n.clientCompanyInformationService.subRoles)("bindValue",n.isAdmin?"_id":"id")("version",n.NgxSelectVariantEnum.GLOBY)("formControlName","businessType"),e.R7$(2),e.Y8G("version",n.NgxSelectVariantEnum.GLOBY)("theme",n.B2bNgxSelectThemeEnum.BACKGROUND_WHITE)("formControlName","country"),e.R7$(3),e.Y8G("label","Office address")("version",n.NgxInputVersionEnum.GLOBY)("formControlName","address"),e.R7$(),e.vxM(27,null!=(Qe=n.form.get("address").errors)&&Qe.cyrillic?27:-1),e.R7$(7),e.Y8G("svgIcon","globe"),e.R7$(4),e.Y8G("version",n.NgxInputVersionEnum.GLOBY)("formControlName","website"),e.R7$(),e.vxM(39,n.website.valid&&(null==n.website||null==n.website.value?null:n.website.value.length)>0?39:-1),e.R7$(),e.vxM(40,n.form.get("website").errors?40:-1),e.R7$(),e.Y8G("formGroupName","socialMedia"),e.R7$(),e.Dyx(n.socialMedias),e.R7$(3),e.Y8G("disabled",n.isEqual||n.form.invalid)}},dependencies:[Z,X.E,te.b,j.j,F._,u.P,m.X1,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,m.$R,T.An,Y.$z,v.YU,de.o,f.z,M.i,R.Z,ie,H.TL],styles:[".section__border[_ngcontent-%COMP%]{border-bottom:1px solid #D3DFFF}"]})};xe=(0,s.Cg)([(0,y.d)()],xe);var tt=a(6790);const nt=[{label:"Payment method",property:"paymentMethods",value:[{value:"Swift transfer",label:"Swift transfer"},{value:"L/C",label:"L/C"},{value:"Paypal",label:"Paypal"},{value:"CAD",label:"CAD"}]},{label:"Trading areas",property:"tradingAreas",value:[{value:"Domestic market",label:"Domestic market"},{value:"International market",label:"International market"}]},{label:"Delivery terms",property:"deliveryTerms",value:[{value:"EXW",label:"EXW"},{value:"FCA",label:"FCA"},{value:"FAS",label:"FAS"},{value:"FOB",label:"FOB"},{value:"CFR/CIF",label:"CFR/CIF"},{value:"DPU",label:"DPU"},{value:"DAP",label:"DAP"},{value:"DDP",label:"DDP"}]}],it={paymentMethods:[],deliveryTerms:[],tradingAreas:[],countries:[]};var ot=a(41325),Be=a(95656);function rt(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",6)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"mat-icon",7),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(2);return e.Njj(d.deleteCountry(r))}),e.EFF(4,"close"),e.k0s()()}if(2&o){const t=i.$implicit,n=e.XpG(2);e.R7$(2),e.JRh(n.getCountryName(t))}}function lt(o,i){if(1&o&&(e.j41(0,"div",3),e.Z7z(1,rt,5,1,"div",6,e.Vm6),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Dyx(t.countries)}}let at=(()=>{class o extends re.M{constructor(t){super(),this.data=t,this.control=new m.MJ([]),this.NgxInputVersionEnum=_.v,this.NgxSelectVariantEnum=C.Y,this.B2bNgxSelectThemeEnum=g.E}get countries(){return this.control.value}ngOnInit(){this.patchValue(),this.resize()}getCountryName(t){return(0,Be.mG)(t)}patchValue(){this.data.countries&&this.control.patchValue(this.data.countries)}deleteCountry(t){const n=this.countries.filter(r=>r!==t);this.control.patchValue(n)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(N.Vh))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["b2b-client-profile-countries-modal"]],standalone:!0,features:[e.Vt3,e.aNF],decls:8,vars:6,consts:[[1,"",3,"close","label"],[1,"flex","flex-col","gap-4"],[3,"multiple","theme","formControl","version"],[1,"flex","flex-row","flex-wrap","gap-3"],[1,"flex","flex-row","justify-center","items-center"],["b2bNgxButton","",1,"bg-[#1C5BFE]","px-10","py-3","rounded-[0.25rem]","text-white",3,"click"],[1,"border__chip","curs","rounded-md","bg-white","flex","flex-row","gap-1","justify-between","px-3","py-2"],[1,"text-[#9FA4BB]","scale-75",3,"click"]],template:function(n,r){1&n&&(e.j41(0,"b2b-client-profile-modal-container",0),e.bIt("close",function(){return r.onDismiss(!1)}),e.j41(1,"div",1)(2,"b2b-ngx-country-select",2),e.EFF(3," Target country "),e.k0s(),e.DNE(4,lt,3,0,"div",3),e.j41(5,"div",4)(6,"button",5),e.bIt("click",function(){return r.onDismiss(r.countries)}),e.EFF(7," Save changes "),e.k0s()()()()),2&n&&(e.Y8G("label","Add target country"),e.R7$(2),e.Y8G("multiple",!0)("theme",r.B2bNgxSelectThemeEnum.BACKGROUND_WHITE)("formControl",r.control)("version",r.NgxSelectVariantEnum.GLOBY),e.R7$(2),e.vxM(4,r.countries.length?4:-1))},dependencies:[oe.Q,X.E,ot.r,de.o,f.z,m.X1,m.BC,m.l_,T.An,M.i,R.Z],styles:[".border__chip[_ngcontent-%COMP%]{border:.16rem solid #000000}"],changeDetection:0})}return o})();var Oe=a(22001),ue=a(62889),st=a(31239),Fe=a(38341),se=a(24797),ct=a(70685),dt=a(87472);const mt=o=>({"grid-cols-2":o});function ut(o,i){if(1&o){const t=e.RV6();e.j41(0,"b2b-ngx-checkbox",16),e.bIt("checkboxChange",function(){const r=e.eBV(t).$implicit,d=e.XpG().$implicit,b=e.XpG();return e.Njj(b.changeCheckbox(d.property,r.value))}),e.EFF(1),e.k0s()}if(2&o){const t=i.$implicit,n=e.XpG().$implicit,r=e.XpG();e.Y8G("version",r.NgxInputVersionEnum.GLOBY)("checked",r.check(n.property,t.value)),e.R7$(),e.SpI("",t.value," ")}}function pt(o,i){if(1&o&&(e.j41(0,"div",12)(1,"span",3),e.EFF(2),e.j41(3,"span"),e.EFF(4,"*"),e.k0s()(),e.j41(5,"div",13),e.Z7z(6,ut,2,3,"b2b-ngx-checkbox",14,e.Vm6),e.k0s()(),e.nrm(8,"div",15)),2&o){const t=i.$implicit,n=i.$index;e.R7$(2),e.JRh(t.label),e.R7$(3),e.Y8G("ngClass",e.eq3(2,mt,2==n)),e.R7$(),e.Dyx(t.value)}}function ht(o,i){if(1&o&&(e.j41(0,"div",17)(1,"span",18),e.EFF(2),e.k0s()()),2&o){const t=i.$implicit,n=e.XpG(2);e.R7$(2),e.JRh(n.getCountryName(t))}}function ft(o,i){if(1&o&&(e.j41(0,"div",5),e.Z7z(1,ht,3,1,"div",17,e.Vm6),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Dyx(t.paymentAndShipping.countries)}}function gt(o,i){1&o&&(e.j41(0,"mat-icon"),e.EFF(1,"add"),e.k0s())}let Se=class Ge{constructor(i,t,n,r,d,b){this.matDialog=i,this.cdr=t,this.sourcingRequestService=n,this.hotToastService=r,this.clientProfileSettingsTabsService=d,this.clientMarketplaceService=b,this.initSave$=new K.c,this.data=new e.bkB,this.authService=(0,e.WQX)(W.u),this.checkBoxes=nt,this.paymentAndShipping=S().cloneDeep(this.authService.company?.paymentAndShipping)??it,this.NgxInputVersionEnum=_.v,this.B2bNgxButtonThemeEnum=Oe.a}get company(){return this.authService.company}get disabled(){const i=S().omitBy(this.paymentAndShipping,t=>0===t?.length||!t?.length);return!(i?.paymentMethods&&i?.deliveryTerms&&i?.tradingAreas)||S().isEqual(i,this.company.paymentAndShipping)}ngOnInit(){this.saveListener()}changeCheckbox(i,t){this.check(i,t)?this.remove(i,t):this.add(i,t),this.updateTabsData(),this.cdr.detectChanges()}check(i,t){return this.paymentAndShipping[i].includes(t)}openCountrySelect(){this.matDialog.open(at,{data:{countries:this.paymentAndShipping.countries},panelClass:"max-h-[90%]",backdropClass:"modal__backdrop"}).afterClosed().pipe((0,y.s)(this)).subscribe(i=>{this.paymentAndShipping.countries=i,this.cdr.detectChanges()})}getCountryName(i){return(0,Be.mG)(i)}onSubmit(){if(!this.disabled){try{this.sourcingRequestService.updateCompanyInfo({companyName:this.company.companyName,paymentAndShipping:this.paymentAndShipping}).pipe((0,w.$)(),this.hotToastService.observe(L.g9)).subscribe(i=>{this.authService.updateCompany(i),this.paymentAndShipping=S().cloneDeep(i.paymentAndShipping),this.updateTabsData()})}catch(i){console.log(i)}this.updateTabsData(),this.updateProductsModal()}}updateTabsData(){this.clientProfileSettingsTabsService.data$.next({first:this.paymentAndShipping,second:this.company.paymentAndShipping})}updateProductsModal(){this.matDialog.open(ue.e,{data:{label:"Update products",title:"",description:"Would you like to update this information for all your products?",buttons:[{label:"Discard",result:!1},{label:"Apply changes",result:!0}]}}).afterClosed().pipe((0,y.s)(this)).subscribe(i=>{i&&this.updateAllProducts()})}toProductModel(i){return{paymentMethods:i.paymentMethods,tradingAreas:i.tradingAreas,shipping:i.deliveryTerms}}add(i,t){this.paymentAndShipping[i].push(t)}remove(i,t){this.paymentAndShipping[i]=this.paymentAndShipping[i].filter(n=>n!==t)}saveListener(){this.clientProfileSettingsTabsService.initSubmit$.pipe((0,y.s)(this)).subscribe(i=>{null===i?this.paymentAndShipping=S().cloneDeep(this.authService.company?.paymentAndShipping):i?.label===I.y?.PAYMENT_AND_SHIPPING&&this.onSubmit(),this.cdr.detectChanges()})}updateAllProducts(){const i=this.hotToastService.loading("Updating products");this.clientMarketplaceService.getUserMarketProducts({limit:999999}).subscribe(t=>{for(let n=0;n<t.length;n++)try{n===t.length-1&&(this.updateProduct((0,B.pick)(t[n],["_id"])),i.close())}catch(r){console.error(r),this.hotToastService.error("Can't update all products"),i.close()}})}updateProduct(i){this.clientMarketplaceService.updateProduct(i?._id,this.getFormData(this.toProductModel(this.paymentAndShipping))).pipe(this.hotToastService.observe({error:`Can't update product with ID: ${i?._id}`})).subscribe(()=>{})}getFormData(i){const t=new FormData;return Object.entries(i).filter(([,n])=>!!n).forEach(([n,r])=>{if(Array.isArray(r))r.filter(d=>!!d).forEach(d=>{t.append(n,"specificationList"===n?JSON.stringify(d):d)});else if("object"==typeof r&&r)for(const d in r){const b=`${n}${(0,st.Z)(d)}`;t.append(b,r[d])}else t.append(n,r)}),t}static#e=this.\u0275fac=function(t){return new(t||Ge)(e.rXU(N.bZ),e.rXU(e.gRc),e.rXU(Fe.$),e.rXU(se.U_),e.rXU(k.l),e.rXU(ct.C))};static#t=this.\u0275cmp=e.VBU({type:Ge,selectors:[["b2b-client-payment-and-shipping"]],inputs:{initSave$:"initSave$"},outputs:{data:"data"},standalone:!0,features:[e.aNF],decls:20,vars:4,consts:[[1,"flex","flex-col","gap-6","mb-10","md:mb-0"],[1,"block","gap-4"],[1,"flex","flex-col","gap-3"],[1,"title"],[1,"font-secondary","text-sm","text-[#556274]"],[1,"flex","flex-row","gap-3","flex-wrap"],[1,"flex","flex-row","items-start"],["b2bNgxButton","",1,"px-4","py-1","min-h-[38px]","flex","gap-2","bg-[#EEEEEE]","flex-row","items-center","justify-between",3,"click"],[1,"text-sm","font-secondary"],[1,"hidden","md:flex","flex-row","justify-center","items-center"],["b2bNgxButton","",1,"bg-[#1C5BFE]","px-10","py-3","rounded-[0.25rem]","text-white",3,"click","disabled"],[1,"fixed","md:hidden","left-0","bottom-0","w-full",3,"initSave"],[1,"block"],[1,"grid","grid-cols-1","md:flex","flex-row","col-span-2","md:flex-row","gap-4","flex-wrap",3,"ngClass"],[1,"font-secondary",3,"version","checked"],[1,"section__border"],[1,"font-secondary",3,"checkboxChange","version","checked"],[1,"border__chip","cursor","font-semibold","rounded-md","bg-white","flex","flex-row","gap-1","justify-between","px-3","py-2"],[1,"text-sm"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.Z7z(1,pt,9,4,null,null,e.Vm6),e.j41(3,"div",1)(4,"div",2)(5,"span",3),e.EFF(6,"Export history"),e.k0s(),e.j41(7,"span",4),e.EFF(8," Specify all the countries that you've exported your products in already and the countries that you export in, in present. "),e.k0s()(),e.j41(9,"div",2),e.DNE(10,ft,3,0,"div",5),e.j41(11,"div",6)(12,"button",7),e.bIt("click",function(){return n.openCountrySelect()}),e.DNE(13,gt,2,0,"mat-icon"),e.j41(14,"span",8),e.EFF(15),e.k0s()()()()(),e.j41(16,"div",9)(17,"button",10),e.bIt("click",function(){return n.onSubmit()}),e.EFF(18," Save changes "),e.k0s()()(),e.j41(19,"b2b-client-profile-mobile-toolbar",11),e.bIt("initSave",function(){return n.onSubmit()}),e.k0s()),2&t&&(e.R7$(),e.Dyx(n.checkBoxes),e.R7$(9),e.vxM(10,null!=n.paymentAndShipping&&n.paymentAndShipping.countries?10:-1),e.R7$(3),e.vxM(13,null!=n.paymentAndShipping&&null!=n.paymentAndShipping.countries&&n.paymentAndShipping.countries.length?-1:13),e.R7$(2),e.JRh(n.paymentAndShipping.countries.length>0?"Edit":"Add countries"),e.R7$(2),e.Y8G("disabled",n.disabled))},dependencies:[tt.n,dt.k,M.i,R.Z,T.An,v.YU,ie],styles:[".title[_ngcontent-%COMP%]{font-family:Inter,Arial,sans-serif;font-size:1.125rem;line-height:1.75rem;font-weight:500}.block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.border__chip[_ngcontent-%COMP%]{border:.16rem solid #000000}.section__border[_ngcontent-%COMP%]{border-bottom:1px solid #D3DFFF}"],changeDetection:0})};Se=(0,s.Cg)([(0,y.d)()],Se);var pe=a(83065);let bt=(()=>{class o{constructor(){this.data=new e.bkB,this.sourcingRequestService=(0,e.WQX)(Fe.$),this.hotToastService=(0,e.WQX)(se.U_),this.authService=(0,e.WQX)(W.u),this.clientProfileSettingsTabsService=(0,e.WQX)(k.l),this.fb=(0,e.WQX)(m.ok),this.array=this.fb.array([]),this.form=this.fb.group({advantages:this.array})}get company(){return this.authService.company}get advantages(){return this.form.controls.advantages}get controls(){return this.advantages.controls}onSubmit(){this.sourcingRequestService.updateCompanyInfo({companyName:this.authService.company.companyName,advantages:S().values(this.form.controls.advantages.value)}).pipe((0,w.$)(),this.hotToastService.observe(L.g9)).subscribe(t=>{this.authService.updateCompany(t),this.updateTabsData()})}getForm(t){return this.fb.group({title:[t?.title||"",[(0,pe.r)(),m.k0.required,m.k0.minLength(10),m.k0.maxLength(300)]],content:[t?.content||"",[(0,pe.r)(),m.k0.required,m.k0.minLength(40),m.k0.maxLength(1e3)]],_id:[]})}addForm(t){3!==this.advantages.length&&this.advantages.push(this.getForm(t))}updateTabsData(t=this.form?.value){this.clientProfileSettingsTabsService.data$.next({first:t?.advantages?.map(n=>S().omit(n,["_id"])),second:this.company?.advantages?.map(n=>S().omit(n,["_id"]))})}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function _t(o,i){1&o&&(e.j41(0,"mat-error",18),e.EFF(1,"This field is required"),e.k0s())}function vt(o,i){1&o&&(e.j41(0,"mat-error",18),e.EFF(1,"Please, use only latin letters"),e.k0s())}function Ct(o,i){1&o&&(e.j41(0,"mat-error",18),e.EFF(1,"Title is to long. Title length must be no longer then 300 symbols "),e.k0s())}function yt(o,i){1&o&&(e.j41(0,"mat-error",18),e.EFF(1,"Title is to short. Title must contain at least 10 symbols "),e.k0s())}function xt(o,i){if(1&o&&e.DNE(0,_t,2,0,"mat-error",18)(1,vt,2,0,"mat-error",18)(2,Ct,2,0,"mat-error",18)(3,yt,2,0,"mat-error",18),2&o){let t,n,r,d;const b=e.XpG().$implicit;e.vxM(0,null!=(t=b.get("title").errors)&&t.required?0:-1),e.R7$(),e.vxM(1,null!=(n=b.get("title").errors)&&n.cyrillic?1:-1),e.R7$(),e.vxM(2,null!=(r=b.get("title").errors)&&r.maxlength?2:-1),e.R7$(),e.vxM(3,null!=(d=b.get("title").errors)&&d.minlength?3:-1)}}function Ft(o,i){1&o&&(e.j41(0,"mat-error",18),e.EFF(1,"This field is required"),e.k0s())}function St(o,i){1&o&&(e.j41(0,"mat-error",18),e.EFF(1,"Please, use only latin letters"),e.k0s())}function Tt(o,i){1&o&&(e.j41(0,"mat-error",18),e.EFF(1,"Description is to long. Description length must be no longer then 1000 symbols "),e.k0s())}function Mt(o,i){1&o&&(e.j41(0,"mat-error",18),e.EFF(1,"Description is to short. Description must contain at least 40 symbols "),e.k0s())}function Dt(o,i){if(1&o&&e.DNE(0,Ft,2,0,"mat-error",18)(1,St,2,0,"mat-error",18)(2,Tt,2,0,"mat-error",18)(3,Mt,2,0,"mat-error",18),2&o){let t,n,r,d;const b=e.XpG().$implicit;e.vxM(0,null!=(t=b.get("content").errors)&&t.required?0:-1),e.R7$(),e.vxM(1,null!=(n=b.get("content").errors)&&n.cyrillic?1:-1),e.R7$(),e.vxM(2,null!=(r=b.get("content").errors)&&r.maxlength?2:-1),e.R7$(),e.vxM(3,null!=(d=b.get("content").errors)&&d.minlength?3:-1)}}function Et(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",5)(1,"div",11)(2,"div",12)(3,"div",13),e.nrm(4,"input",14),e.DNE(5,xt,4,4),e.k0s()(),e.j41(6,"div",15),e.nrm(7,"textarea",16),e.DNE(8,Dt,4,4),e.k0s()(),e.j41(9,"button",17),e.bIt("click",function(){const r=e.eBV(t).$index,d=e.XpG();return e.Njj(d.deleteForm(r))}),e.j41(10,"mat-icon"),e.EFF(11,"delete"),e.k0s()()()}if(2&o){const t=i.$implicit,n=i.$index,r=e.XpG();e.R7$(),e.Y8G("formGroup",t),e.R7$(3),e.Mz_("placeholder","",n+1,". Advanced and efficient production process"),e.Y8G("version",r.NgxInputVersionEnum.GLOBY),e.R7$(),e.vxM(5,t.touched?5:-1),e.R7$(2),e.Mz_("placeholder","",n+1,". e.g. Our advanced manufacturing processes, combined with a commitment to sustainable practices, position us at the forefront of innovation and environmental stewardship in the industry."),e.Y8G("version",r.NgxInputVersionEnum.GLOBY),e.R7$(),e.vxM(8,null!=t&&t.get("content").touched?8:-1)}}let Te=class $e extends bt{constructor(i){super(),this.cdr=i,this.initSave$=new K.c,this.NgxInputVersionEnum=_.v}get isEqual(){return S().isEqual(S().values(this.form.value),this.company?.advantages)}ngOnInit(){this.changeDetector(),this.initDefault(),this.saveListener()}initDefault(){let i=S().cloneDeep(this.authService?.company?.advantages)??void 0;i?.length?i.forEach(t=>this.addForm(t)):this.addForm()}setDefault(){let i=S().cloneDeep(this.authService?.company?.advantages)??void 0;this.form.controls.advantages.controls.forEach((t,n)=>{i[n]&&t.patchValue({title:i[n].title,content:i[n].content,_id:i[n]._id})})}changeDetector(){this.form.valueChanges.pipe((0,A.B)(200),(0,y.s)(this)).subscribe(i=>{this.updateTabsData(i)})}getFormGroup(i){return i}deleteForm(i){1!==this.advantages.length&&this.advantages.removeAt(i)}saveListener(){this.clientProfileSettingsTabsService.initSubmit$.pipe((0,y.s)(this)).subscribe(i=>{null===i&&(this.setDefault(),this.cdr.detectChanges()),i?.label===I.y?.OUR_ADVANTAGES&&this.onSubmit(),this.cdr.detectChanges()})}static#e=this.\u0275fac=function(t){return new(t||$e)(e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:$e,selectors:[["b2b-client-advantages"]],inputs:{initSave$:"initSave$"},standalone:!0,features:[e.Vt3,e.aNF],decls:18,vars:3,consts:[[1,"flex","flex-col","gap-6","mb-10","md:mb-0"],[1,"flex","flex-row","gap-3","justify-between","items-center"],[1,"font-secondary","text-lg","font-medium"],[1,"flex","flex-col","gap-10",3,"ngSubmit","formGroup"],["formArrayName","advantages",1,"flex","flex-col","gap-8"],[1,"flex","flex-row","items-center","gap-1"],[1,"flex","flex-row","justify-start","items-baseline"],["type","button","mat-flat-button","",1,"px-3","!bg-[#EEEEEE]",3,"click","disabled"],[1,"hidden","md:flex","flex-row","justify-center","items-center"],["type","submit","b2bNgxButton","",1,"bg-[#1C5BFE]","px-10","py-3","rounded-[0.25rem]","text-white",3,"disabled"],[1,"fixed","md:hidden","left-0","bottom-0","w-full",3,"initSave"],[1,"flex","flex-col","gap-3","w-full",3,"formGroup"],[1,"flex","flex-row","gap-1"],[1,"flex","flex-col","gap-1","w-full"],["b2bNgxInput","","formControlName","title","type","text",3,"version","placeholder"],[1,"flex","flex-col","gap-1"],["b2bNgxInput","","formControlName","content",1,"min-h-32",3,"placeholder","version"],["type","button","mat-icon-button","",3,"click"],[1,"text-red-500","text-xs"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2),e.EFF(3,"Highlight up to three (3) advantages of your company so that buyers can learn more about you."),e.k0s()(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(5,"div",4),e.Z7z(6,Et,12,9,"div",5,e.Vm6),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){return n.addForm()}),e.j41(10,"mat-icon"),e.EFF(11,"add"),e.k0s(),e.j41(12,"span"),e.EFF(13,"Add"),e.k0s()()()(),e.j41(14,"div",8)(15,"button",9),e.EFF(16," Save changes "),e.k0s()()(),e.j41(17,"b2b-client-profile-mobile-toolbar",10),e.bIt("initSave",function(){return n.onSubmit()}),e.k0s()()),2&t&&(e.R7$(4),e.Y8G("formGroup",n.form),e.R7$(2),e.Dyx(n.controls),e.R7$(3),e.Y8G("disabled",3===(null==n.advantages?null:n.advantages.length)),e.R7$(6),e.Y8G("disabled",n.form.invalid||n.isEqual))},dependencies:[X.E,te.b,m.X1,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,m.v8,m.YN,M.i,R.Z,ie,H.TL,Y.$z,T.An,Y.iY],changeDetection:0})};Te=(0,s.Cg)([(0,y.d)()],Te);var wt=a(86324),kt=a(10508);const Xe={loading:"Updating company information...",success:"Company documents successfully updated.",error:"Company documents updating failed"};let Me=class ge{constructor(){this.sourcingRequestService=(0,e.WQX)(Fe.$),this.authService=(0,e.WQX)(W.u),this.hotToastService=(0,e.WQX)(se.U_),this.fb=(0,e.WQX)(m.ok),this.loading=(0,e.vPA)(!1),this.form=this.fb.group({documents:[]})}get company(){return this.authService.company}get documents(){return this.company?.documents||[]}upload(i){const t=(0,kt.t)({companyName:this.company.companyName,documents:i,uploadedDocs:this.documents});this.updateDocuments(t)}delete(i){const{_id:t}=this.documents[i];return this.sourcingRequestService.deleteCompanyDocuments(this.authService.company._id,[t]).pipe((0,w.$)(),this.hotToastService.observe(Xe),(0,y.s)(this))}updateDocuments(i){this.loading.set(!0);try{this.sourcingRequestService.updateCompanyInfo(i).pipe((0,w.$)(),this.hotToastService.observe(Xe),(0,y.s)(this)).subscribe(t=>{this.loading.set(!1),this.authService.updateCompany(t)})}catch(t){console.error(t),this.loading.set(!1)}}static#e=this.\u0275fac=function(t){return new(t||ge)};static#t=this.\u0275prov=e.jDH({token:ge,factory:ge.\u0275fac,providedIn:"root"})};Me=(0,s.Cg)([(0,y.d)()],Me);var Ye=a(6588);const It=["determinateSpinner"];function jt(o,i){if(1&o&&(e.qSk(),e.j41(0,"svg",11),e.nrm(1,"circle",12),e.k0s()),2&o){const t=e.XpG();e.BMQ("viewBox",t._viewBox()),e.R7$(),e.xc7("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),e.BMQ("r",t._circleRadius())}}const Rt=new e.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function Nt(){return{diameter:Ue}}}),Ue=100;let De=(()=>{class o{get color(){return this._color||this._defaultColor}set color(t){this._color=t}constructor(t,n,r){this._elementRef=t,this._defaultColor="primary",this._value=0,this._diameter=Ue,this._noopAnimations="NoopAnimations"===n&&!!r&&!r._forceAnimations,this.mode="mat-spinner"===t.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,t||0))}get diameter(){return this._diameter}set diameter(t){this._diameter=t||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=t||0}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(e.aKT),e.rXU(e.bc$,8),e.rXU(Rt))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,r){if(1&n&&e.GBs(It,5),2&n){let d;e.mGM(d=e.lsd())&&(r._determinateCircle=d.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,r){2&n&&(e.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===r.mode?r.value:null)("mode",r.mode),e.HbH("mat-"+r.color),e.xc7("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),e.AVh("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===r.mode))},inputs:{color:"color",mode:"mode",value:[e.Mj6.HasDecoratorInputTransform,"value","value",e.Udg],diameter:[e.Mj6.HasDecoratorInputTransform,"diameter","diameter",e.Udg],strokeWidth:[e.Mj6.HasDecoratorInputTransform,"strokeWidth","strokeWidth",e.Udg]},exportAs:["matProgressSpinner"],standalone:!0,features:[e.GFd,e.aNF],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,r){if(1&n&&(e.DNE(0,jt,2,8,"ng-template",null,0,e.C5r),e.j41(2,"div",2,1),e.qSk(),e.j41(4,"svg",3),e.nrm(5,"circle",4),e.k0s()(),e.joV(),e.j41(6,"div",5)(7,"div",6)(8,"div",7),e.eu8(9,8),e.k0s(),e.j41(10,"div",9),e.eu8(11,8),e.k0s(),e.j41(12,"div",10),e.eu8(13,8),e.k0s()()()),2&n){const d=e.sdS(1);e.R7$(4),e.BMQ("viewBox",r._viewBox()),e.R7$(),e.xc7("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),e.BMQ("r",r._circleRadius()),e.R7$(4),e.Y8G("ngTemplateOutlet",d),e.R7$(2),e.Y8G("ngTemplateOutlet",d),e.R7$(2),e.Y8G("ngTemplateOutlet",d)}},dependencies:[v.T3],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0})}return o})();var $t=a(50508);function Pt(o,i){if(1&o){const t=e.RV6();e.j41(0,"b2b-ngx-file",6),e.bIt("change",function(r){e.eBV(t);const d=e.XpG();return e.Njj(d.formChange(r))}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("emptyFileLabel","Supported file types: PDF, PNG, JPG and DOC files. Maximum size: 20 MB (total)")("version",t.NgxInputVersionEnum.GLOBY)("maxAllowedSize",20)("showIcon",!1)("theme",null)("label","Upload document")}}function Lt(o,i){1&o&&e.nrm(0,"mat-spinner",7)}function At(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",9)(1,"a",10)(2,"mat-icon",11),e.EFF(3,"add"),e.k0s(),e.j41(4,"span",12),e.EFF(5),e.k0s()(),e.j41(6,"button",13),e.bIt("click",function(){const r=e.eBV(t).$index,d=e.XpG(2);return e.Njj(d.openDeletePopup(r))}),e.j41(7,"mat-icon"),e.EFF(8,"close"),e.k0s()()()}if(2&o){const t=i.$implicit;e.R7$(2),e.Y8G("svgIcon","document-blue"),e.R7$(3),e.JRh(t.name)}}function Vt(o,i){if(1&o&&(e.j41(0,"div",5)(1,"span",2),e.EFF(2,"Uploaded files"),e.k0s(),e.j41(3,"div",8),e.Z7z(4,At,9,2,"div",9,e.Vm6),e.k0s()()),2&o){const t=e.XpG();e.R7$(4),e.Dyx(t.documents)}}let Ee=class Pe extends Me{constructor(i){super(),this.cdr=i,this.NgxInputVersionEnum=_.v,this.matDialog=(0,e.WQX)(N.bZ)}formChange(i){const t=Array.from(i.target.files);this.upload(t),this.cdr.detectChanges()}openDeletePopup(i){var t=this;this.matDialog.open(ue.e,{data:{title:"Are you sure you want to delete the document?",label:""},panelClass:"app-full-bleed-dialog",backdropClass:"modal__backdrop"}).afterClosed().subscribe(n=>{n&&this.delete(i).subscribe(function(){var r=(0,c.A)(function*(d){const b=yield(0,Ye._)(t.sourcingRequestService.getCompanyData());t.authService.updateCompany(b),t.cdr.detectChanges()});return function(d){return r.apply(this,arguments)}}())})}static#e=this.\u0275fac=function(t){return new(t||Pe)(e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:Pe,selectors:[["b2b-client-documents"]],standalone:!0,features:[e.Vt3,e.aNF],decls:9,vars:2,consts:[[1,"flex","flex-col","gap-14"],[1,"flex","flex-col","gap-2"],[1,"text-lg","font-secondary","font-medium"],[1,"text-sm","text-[#556274]","md:w-2/3"],[1,"!cursor-pointer",3,"emptyFileLabel","version","maxAllowedSize","showIcon","theme","label"],[1,"flex","flex-col","gap-3","flex-wrap"],[1,"!cursor-pointer",3,"change","emptyFileLabel","version","maxAllowedSize","showIcon","theme","label"],["diameter","24"],[1,"flex","flex-row","flex-wrap","gap-4"],[1,"flex","flex-row","items-center","justify-center","gap-3","rounded-xl","border","!border-[#CFDEFF]","p-3"],["href","",1,"flex","flex-row","items-center","justify-center","gap-2"],[3,"svgIcon"],[1,"font-semibold","text-sm","font-secondary"],["b2bNgxButton","",1,"flex","items-center",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2),e.EFF(3,"Documents"),e.k0s(),e.j41(4,"span",3),e.EFF(5,"Upload any document you want to share with your customers, such as catalogs, licenses, presentations, etc. Supported file formats: PDF, PNG, JPG, DOC. Maximum of 6 files with a total size of 20 MB."),e.k0s(),e.DNE(6,Pt,1,6,"b2b-ngx-file",4)(7,Lt,1,0),e.k0s(),e.DNE(8,Vt,6,0,"div",5),e.k0s()),2&t&&(e.R7$(6),e.vxM(6,n.loading()?7:6),e.R7$(2),e.vxM(8,(null==n.documents?null:n.documents.length)>0?8:-1))},dependencies:[wt.A,$t.D,T.An,m.X1,M.i,R.Z,D.f,De],styles:[".app-full-bleed-dialog[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}"],changeDetection:0})};Ee=(0,s.Cg)([(0,y.d)()],Ee);const Bt=[{type:"participated",label:"Participated",button:"Add event"},{type:"upcoming",label:"Upcoming",button:"Add event"}];var Ot=a(69648),Xt=a(13817),Yt=a(5854);const Ut=()=>[v.Jj,a.e(6133).then(a.bind(a,96133)).then(o=>o.ClientProfileTradeShowCardComponent)];function zt(o,i){if(1&o&&e.nrm(0,"b2b-client-profile-trade-show-card",10),2&o){const t=e.XpG().$implicit;e.Y8G("tradeShow",t)}}function Wt(o,i){if(1&o&&e.DNE(0,zt,1,1,"b2b-client-profile-trade-show-card",10),2&o){const t=i.$implicit,n=e.XpG(4).$implicit;e.vxM(0,t.type===n.type?0:-1)}}function Jt(o,i){if(1&o&&(e.j41(0,"div",9),e.Z7z(1,Wt,1,1,null,null,e.Vm6),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Dyx(t)}}function Qt(o,i){1&o&&e.DNE(0,Jt,3,0,"div",9),2&o&&e.vxM(0,null!=i&&i.length?0:-1)}function Zt(o,i){if(1&o&&(e.DNE(0,Qt,1,1),e.nI1(1,"async")),2&o){let t;const n=e.XpG(2);e.vxM(0,(t=e.bMT(1,1,n.clientTradeShowService.tradeShows$))?0:-1,t)}}function Ht(o,i){1&o&&(e.j41(0,"div",11),e.nrm(1,"mat-spinner",12),e.k0s())}function Kt(o,i){1&o&&e.nrm(0,"div",8)}function qt(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",4)(1,"div",5),e.EFF(2),e.k0s(),e.j41(3,"button",6),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.openModal({type:r.type}))}),e.j41(4,"mat-icon",7),e.EFF(5,"add"),e.k0s(),e.j41(6,"span"),e.EFF(7),e.nI1(8,"titlecase"),e.k0s()()(),e.DNE(9,Zt,2,3)(10,Ht,2,0),e.nv$(11,9,Ut,10,null,null,0,null,e.T$4),e.nI1(13,"async"),e.DNE(14,Kt,1,0,"div",8)}if(2&o){const t=i.$implicit,n=i.$index,r=e.XpG();e.R7$(2),e.JRh(t.label),e.R7$(5),e.JRh(e.bMT(8,4,t.button)),e.R7$(4),e.LVR(e.bMT(13,6,r.clientTradeShowService.tradeShows$)),e.R7$(3),e.vxM(14,0===n?14:-1)}}let we=class Le{constructor(i,t,n,r){this.tradeShowService=i,this.clientTradeShowService=t,this.cdr=n,this.tabService=r,this.matDialog=(0,e.WQX)(N.bZ),this.tradeShowSections=Bt}ngOnInit(){this.getList(),this.tabListen()}openModal(i){this.matDialog.open(Ot.T,{data:i,backdropClass:"modal__backdrop"}).afterClosed().pipe((0,y.s)(this)).subscribe(()=>{this.getList()})}tabListen(){this.tabService.currentTab.asObservable().subscribe(i=>{i.label==I.y.TRADE_SHOWS&&this.getList()})}getList(){this.clientTradeShowService.getList(),this.cdr.detectChanges()}static#e=this.\u0275fac=function(t){return new(t||Le)(e.rXU(Xt.f),e.rXU(Yt.D),e.rXU(e.gRc),e.rXU(k.l))};static#t=this.\u0275cmp=e.VBU({type:Le,selectors:[["b2b-client-trade-shows"]],standalone:!0,features:[e.aNF],decls:6,vars:0,consts:[[300,null],[1,"flex","flex-col","gap-8"],[1,"description__border","rounded-md","p-3","font-secondary","text-sm","text-black"],[1,"flex","flex-col","gap-6"],[1,"flex","flex-row","gap-2","items-center","justify-start"],[1,"text-lg","font-medium","w-28"],["b2bNgxButton","",1,"!bg-[#EEEEEE]","rounded-md","px-3","py-1","text-sm","flex","flex-row","items-center","justify-start",3,"click"],[1,"scale-75"],[1,"section__border"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-3"],[3,"tradeShow"],[1,"flex","flex-row","justify-center","items-center"],["diameter","24"]],template:function(t,n){1&t&&(e.j41(0,"div",1)(1,"div",2),e.EFF(2," List the trade shows in which you have participated or plan to participate in the future. For each trade show, you need to add photos of your activity to the exhibition. Mentioning your activities at trade shows can help your business gain trust from potential buyers. "),e.k0s(),e.j41(3,"div",3),e.Z7z(4,qt,15,8,null,null,e.Vm6),e.k0s()()),2&t&&(e.R7$(4),e.Dyx(n.tradeShowSections))},dependencies:[M.i,R.Z,v.PV,T.An,v.Jj,De],styles:[".description__border[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #D3DFFF}.section__border[_ngcontent-%COMP%]{border-bottom:1px solid #D3DFFF}"],changeDetection:0})};we=(0,s.Cg)([(0,y.d)()],we);var en=a(61890);const tn=[{type:"image",label:"Photo",button:"Add photo"},{type:"video",label:"Video",button:"Add video"}];var ze=a(70333),nn=a(86822),on=a(4118),We=function(o){return o.DRAFT="draft",o.PUBLIC="public",o}(We||{}),rn=a(78593),Je=a(51271),ln=a(57355);const an=(o,i)=>t=>{const n=t,r=n.get(o),d=n.get(i);return!r||!d||(d.value?r.errors&&r.errors.conditionalRequire&&(delete r.errors.conditionalRequire,0===Object.keys(r.errors).length&&r.setErrors(null)):(!r.value||0===r.value.length)&&r.setErrors({...r.errors,conditionalRequire:!0})),null};var sn=a(871),cn=a(28991),dn=a(55620);function he(o){o||((0,e.Af3)(he),o=(0,e.WQX)(e.abz));const i=new K.c(t=>o.onDestroy(t.next.bind(t)));return t=>t.pipe((0,dn.Q)(i))}const hn=o=>({hidden:o}),fn=o=>({"md:mb-0 mb-20":o});function gn(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Your title is too short. Min length is 5 symbols"),e.k0s())}function bn(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Your title is too long. Max length is 40 symbols"),e.k0s())}function _n(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"This field is required"),e.k0s())}function vn(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"You can use only latin symbols"),e.k0s())}function Cn(o,i){if(1&o&&e.DNE(0,gn,2,0,"mat-error")(1,bn,2,0,"mat-error")(2,_n,2,0,"mat-error")(3,vn,2,0,"mat-error"),2&o){const t=e.XpG();e.vxM(0,null!=t.title&&null!=t.title.errors&&t.title.errors.minlength?0:-1),e.R7$(),e.vxM(1,null!=t.title&&null!=t.title.errors&&t.title.errors.maxlength?1:-1),e.R7$(),e.vxM(2,null!=t.title&&null!=t.title.errors&&t.title.errors.required?2:-1),e.R7$(),e.vxM(3,null!=t.title&&null!=t.title.errors&&t.title.errors.cyrillic?3:-1)}}function yn(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Your description is too short. Min length is 40 symbols"),e.k0s())}function xn(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Your description is too long. Max length is 1000 symbols"),e.k0s())}function Fn(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"This field is required"),e.k0s())}function Sn(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"You can use only latin symbols"),e.k0s())}function Tn(o,i){if(1&o&&e.DNE(0,yn,2,0,"mat-error")(1,xn,2,0,"mat-error")(2,Fn,2,0,"mat-error")(3,Sn,2,0,"mat-error"),2&o){const t=e.XpG();e.vxM(0,null!=t.description&&null!=t.description.errors&&t.description.errors.minlength?0:-1),e.R7$(),e.vxM(1,null!=t.description&&null!=t.description.errors&&t.description.errors.maxlength?1:-1),e.R7$(),e.vxM(2,null!=t.description&&null!=t.description.errors&&t.description.errors.required?2:-1),e.R7$(),e.vxM(3,null!=t.description&&null!=t.description.errors&&t.description.errors.cyrillic?3:-1)}}function Mn(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"This field is required"),e.k0s())}function Dn(o,i){1&o&&(e.j41(0,"mat-error",11),e.EFF(1,'Must be website link. E.g. "https://youtube.com"'),e.k0s())}function En(o,i){1&o&&(e.j41(0,"mat-error",11),e.EFF(1,"Invalid youtube video link"),e.k0s())}function wn(o,i){if(1&o&&e.DNE(0,Mn,2,0,"mat-error")(1,Dn,2,0,"mat-error",11)(2,En,2,0,"mat-error",11),2&o){const t=e.XpG(2);e.vxM(0,null!=t.videoLink&&null!=t.videoLink.errors&&t.videoLink.errors.required?0:-1),e.R7$(),e.vxM(1,null!=t.videoLink&&null!=t.videoLink.errors&&t.videoLink.errors.website?1:-1),e.R7$(),e.vxM(2,null!=t.videoLink&&null!=t.videoLink.errors&&t.videoLink.errors.invalidYoutubeLink?2:-1)}}function kn(o,i){1&o&&(e.j41(0,"div",10),e.nrm(1,"div",12),e.j41(2,"span",13),e.EFF(3,"OR"),e.k0s(),e.nrm(4,"div",12),e.k0s())}function In(o,i){if(1&o&&(e.j41(0,"div",2),e.nrm(1,"input",4),e.DNE(2,wn,3,3),e.k0s(),e.DNE(3,kn,5,0,"div",10)),2&o){const t=e.XpG();e.R7$(),e.Y8G("formControlName","videoLink")("label","Youtube video link")("placeholder","Youtube video link")("version",t.NgxInputVersionEnum.GLOBY),e.R7$(),e.vxM(2,t.videoLink.touched?2:-1),e.R7$(),e.vxM(3,t.validVideoLink||null!=t.videos&&null!=t.videos.value&&t.videos.value[0]?-1:3)}}function jn(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",7)(1,"globy-file-card",14),e.bIt("deleteItem",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.clearVideoLink())}),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("showDelete",!0)("data",null!=t.videoLink&&t.videoLink.value?t.video:null==t.videos||null==t.videos.value?null:t.videos.value[0])("handleItem",t.handleItem)}}let ke=class Ae extends re.M{constructor(i,t,n,r){super(),this.data=i,this.fb=t,this.folderService=n,this.hotToastService=r,this.form=this.buildForm(),this.mode=this.data.folder?._id?"edit":"create",this.destroyRef=(0,e.WQX)(e.abz),this.NgxInputVersionEnum=_.v,this.fileUploadDescription="image"===this.data.type?Je.B:Je.b,this.VIDEO_TYPES=sn.Eo,this.IMAGE_TYPES=cn.e}get controls(){return this.form.controls}get title(){return this.controls.title}get description(){return this.controls.description}get videoLink(){return this.controls.videoLink}get videos(){return this.controls.videos}get images(){return this.controls.images}get video(){return{link:this.videoLink.value}}get multiple(){return"image"===this.data.type}get handleEditData(){const i=this.form.value,t=this.data?.folder,n=i?.images?.filter(d=>!!d._id).map(d=>d._id),r=i?.videos?.filter(d=>!!d._id).map(d=>d._id);return{...t,...i,uploadedImages:n,uploadedVideos:r}}get handleCreateData(){return this.form.value}ngOnInit(){this.patchForm(),this.videoLinkListener()}onSubmit(){"edit"===this.mode&&this.folderService.update(this.handleEditData).pipe((0,w.$)(),this.hotToastService.observe(L.g9),he(this.destroyRef)).subscribe(()=>{this.onDismiss()}),"create"===this.mode&&this.folderService.create(this.handleCreateData).pipe((0,w.$)(),this.hotToastService.observe(L.g9),he(this.destroyRef)).subscribe(()=>{this.onDismiss()})}handleItem(i){let t,n="image";return i?.link&&(t=i.link),i?.path?.includes("video")&&(n="video"),i?.path&&(t=q.c.apiUrl+encodeURIComponent(i.path)),{url:t,type:n}}get validVideoLink(){return this.videoLink?.value&&!this.videoLink?.errors?.invalidYoutubeLink}clearVideoLink(){this.videoLink.reset(),this.videos.reset()}videoLinkListener(){this.controls.videoLink&&(this.controls.videoLink.valueChanges.pipe((0,A.B)(1e3),(0,y.s)(this)).subscribe(i=>{i&&this.videos.patchValue([])}),this.controls.videos.valueChanges.pipe((0,y.s)(this)).subscribe(i=>{i?.[0]?this.videoLink.disable():this.videoLink.enable()}))}buildForm(){const i=this.fb.group({title:["",[m.k0.required,m.k0.minLength(5),m.k0.maxLength(40),(0,pe.r)()]],description:["",[m.k0.required,m.k0.minLength(40),m.k0.maxLength(1e3),(0,pe.r)()]],images:[[],[m.k0.required]],videos:[[]],status:[We.PUBLIC],videoLink:[null,[(0,rn.q7)(),(0,me.q)()]]},{validators:an("video","videoLink")});return"image"===this.data.type&&(i.removeControl("videos"),i.removeControl("videoLink")),"video"===this.data.type&&i.removeControl("images"),i}patchForm(){this.data.folder?._id&&this.form.patchValue({...this.data.folder,videoLink:this.data?.folder?.videos?.find(i=>!!i?.link)?.link||void 0})}static#e=this.\u0275fac=function(t){return new(t||Ae)(e.rXU(N.Vh),e.rXU(m.ok),e.rXU(ze.k),e.rXU(se.U_))};static#t=this.\u0275cmp=e.VBU({type:Ae,selectors:[["b2b-client-profile-media-modal"]],standalone:!0,features:[e.Vt3,e.aNF],decls:15,vars:30,consts:[[1,"md:max-w-[70vw]","p-2","min-w-[50vw]","max-h-screen","md:max-h-[90vh]","overflow-y-auto",3,"close","label"],[1,"flex","flex-col","gap-4","md:mb-0","mb-12",3,"ngSubmit","formGroup"],[1,"flex","flex-col"],["b2bNgxInput","","type","text",3,"formControlName","label","placeholder","version"],["b2bNgxInput","",3,"formControlName","label","placeholder","version"],[1,"flex","flex-col","gap-2",3,"ngClass"],[1,"h-fit",3,"buttonLabel","customListClass","description","formControlName","handleItem","accept","maxFileWeight","multiple","showResulList"],[1,"grid","grid-cols-2","md:grid-cols-5","lg:grid-cols-7"],[1,"flex","flex-row","justify-center","items-center"],["b2bNgxButton","","type","submit",1,"bg-[#1C5BFE]","px-10","py-3","rounded-[0.25rem]","text-white",3,"disabled","ngClass"],[1,"flex","flex-row","gap-3","w-full","items-center"],[1,"text-red-500","text-xs"],[1,"border-bottom"],[1,"text-sm"],[3,"deleteItem","showDelete","data","handleItem"]],template:function(t,n){1&t&&(e.j41(0,"b2b-client-profile-modal-container",0),e.bIt("close",function(){return n.onDismiss()}),e.j41(1,"form",1),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(2,"div",2),e.nrm(3,"input",3),e.DNE(4,Cn,4,4),e.k0s(),e.j41(5,"div",2),e.nrm(6,"textarea",4),e.DNE(7,Tn,4,4),e.k0s(),e.DNE(8,In,4,6),e.j41(9,"div",5),e.nrm(10,"globy-file",6),e.k0s(),e.DNE(11,jn,2,3,"div",7),e.j41(12,"div",8)(13,"button",9),e.EFF(14," Save changes "),e.k0s()()()()),2&t&&(e.Y8G("label","Add "+("image"===n.data.type?"Folder":"Video")),e.R7$(),e.Y8G("formGroup",n.form),e.R7$(2),e.Y8G("formControlName","title")("label","Exhibition name")("placeholder","Exhibition name")("version",n.NgxInputVersionEnum.GLOBY),e.R7$(),e.vxM(4,n.form.touched?4:-1),e.R7$(2),e.Y8G("formControlName","description")("label","Event description")("placeholder","Event description")("version",n.NgxInputVersionEnum.GLOBY),e.R7$(),e.vxM(7,n.form.touched?7:-1),e.R7$(),e.vxM(8,n.videoLink?8:-1),e.R7$(),e.Y8G("ngClass",e.eq3(26,hn,(null==n.videos||null==n.videos.value?null:n.videos.value[0])||n.validVideoLink)),e.R7$(),e.Y8G("buttonLabel","Choose"+("image"===n.data.type?" Photos":" Video"))("customListClass","grid-cols-2 md:grid-cols-5 lg:grid-cols-7")("description",n.fileUploadDescription)("formControlName","image"===n.data.type?"images":"videos")("handleItem",n.handleItem)("accept","video"===n.data.type?n.VIDEO_TYPES:n.IMAGE_TYPES)("maxFileWeight",100)("multiple",n.multiple)("showResulList","image"===n.data.type),e.R7$(),e.vxM(11,n.validVideoLink||null!=n.videos&&null!=n.videos.value&&n.videos.value.length?11:-1),e.R7$(2),e.Y8G("disabled","image"===(null==n.data?null:n.data.type)?null==n.form?null:n.form.invalid:(null==n.form?null:n.form.invalid)||!n.validVideoLink&&!(null!=n.videos&&null!=n.videos.value&&n.videos.value.length))("ngClass",e.eq3(28,fn,(null==n.images||null==n.images.value?null:n.images.value[0])||(null==n.videos||null==n.videos.value?null:n.videos.value[0]))))},dependencies:[nn.h,M.i,R.Z,X.E,te.b,oe.Q,on.G,ln.GlobyFileCard,H.TL,m.X1,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,v.YU],styles:["mat-error[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity))}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #C6D1E2;width:100%}"]})};ke=(0,s.Cg)([(0,y.d)()],ke);const Rn=()=>[v.Jj,Promise.resolve().then(a.bind(a,57355)).then(o=>o.GlobyFileCard)];function Nn(o,i){if(1&o){const t=e.RV6();e.j41(0,"globy-file-card",13),e.bIt("deleteItem",function(){e.eBV(t);const r=e.XpG().$implicit,d=e.XpG(4);return e.Njj(d.deleteItem(r))})("editItem",function(){e.eBV(t);const r=e.XpG().$implicit,d=e.XpG(3).$implicit,b=e.XpG();return e.Njj(b.openModal(d.type,r))}),e.k0s()}if(2&o){const t=e.XpG().$implicit,n=e.XpG(4);e.Y8G("data",null==t?null:t.images[0])("showEdit",!0)("showDelete",!0)("length",null==t||null==t.images?null:t.images.length)("title",t.title)("handleItem",n.handleImage)}}function Gn(o,i){if(1&o){const t=e.RV6();e.j41(0,"globy-file-card",14),e.bIt("deleteItem",function(){e.eBV(t);const r=e.XpG().$implicit,d=e.XpG(4);return e.Njj(d.deleteItem(r))})("editItem",function(){e.eBV(t);const r=e.XpG().$implicit,d=e.XpG(3).$implicit,b=e.XpG();return e.Njj(b.openModal(d.type,r))}),e.k0s()}if(2&o){const t=e.XpG().$implicit,n=e.XpG(4);e.Y8G("data",null==t?null:t.videos[0])("showEdit",!0)("showDelete",!0)("title",t.title)("handleItem",n.handleVideo)}}function $n(o,i){if(1&o&&e.DNE(0,Nn,1,6,"globy-file-card",11)(1,Gn,1,5,"globy-file-card",12),2&o){const t=i.$implicit,n=e.XpG(3).$implicit;e.vxM(0,"image"===n.type&&null!=t&&null!=t.images&&t.images.length?0:-1),e.R7$(),e.vxM(1,"video"===n.type&&null!=t&&null!=t.videos&&t.videos.length?1:-1)}}function Pn(o,i){if(1&o&&(e.j41(0,"div",10),e.Z7z(1,$n,2,2,null,null,e.Vm6),e.nI1(3,"async"),e.k0s()),2&o){const t=e.XpG(3);e.R7$(),e.Dyx(e.bMT(3,0,t.folderService.folders$))}}function Ln(o,i){if(1&o&&e.DNE(0,Pn,4,2,"div",10),2&o){const t=e.XpG(2);e.vxM(0,t.showFolders?0:-1)}}function An(o,i){1&o&&e.eu8(0)}function Vn(o,i){if(1&o&&e.DNE(0,An,1,0,"ng-container",15),2&o){e.XpG(2);const t=e.sdS(7);e.Y8G("ngTemplateOutlet",t)}}function Bn(o,i){1&o&&e.nrm(0,"div",9)}function On(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",5)(1,"div",6),e.EFF(2),e.k0s(),e.j41(3,"button",7),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.openModal(r.type))}),e.j41(4,"mat-icon",8),e.EFF(5,"add"),e.k0s(),e.j41(6,"span"),e.EFF(7),e.nI1(8,"titlecase"),e.k0s()()(),e.DNE(9,Ln,1,1)(10,Vn,1,1),e.nv$(11,9,Rn,10,null,null,1,null,e.T$4),e.nI1(13,"async"),e.DNE(14,Bn,1,0,"div",9)}if(2&o){const t=i.$implicit,n=i.$index,r=e.XpG();e.R7$(2),e.JRh(t.label),e.R7$(5),e.JRh(e.bMT(8,4,t.button)),e.R7$(4),e.LVR(e.bMT(13,6,r.folderService.folders$)),e.R7$(3),e.vxM(14,0===n?14:-1)}}function Xn(o,i){1&o&&(e.j41(0,"div",16),e.nrm(1,"mat-spinner",17),e.k0s())}let Yn=(()=>{class o{constructor(){this.matDialog=(0,e.WQX)(N.bZ),this.cdr=(0,e.WQX)(e.gRc),this.authService=(0,e.WQX)(W.u),this.folderService=(0,e.WQX)(ze.k),this.hotToastService=(0,e.WQX)(se.U_),this.showFolders=!1,this.mediaSections=tn}get company(){return this.authService.company}handleImage(t){return{type:"image",url:q.c.apiUrl+encodeURIComponent(t.path)}}handleVideo(t){return{type:t?.link?"image":"video",url:t.link?t.link:q.c?.apiUrl+encodeURIComponent(t?.path)}}ngOnInit(){this.getFolders()}openModal(t,n){this.matDialog.open(ke,{data:{type:t,folder:n}}).afterClosed().subscribe(r=>{this.getFolders()})}getFolders(){this.folderService.getListByCompanyId().subscribe(t=>{this.showFolders=t.some(n=>n.images?.length>0||n?.videos?.length>0),this.cdr.detectChanges()})}deleteItem(t){this.matDialog.open(ue.e,{data:{},backdropClass:"modal__backdrop"}).afterClosed().subscribe(n=>{n&&this.folderService.delete(t._id).pipe(this.hotToastService.observe(L.g9)).subscribe(r=>{this.getFolders()})})}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["b2b-client-media"]],standalone:!0,features:[e.aNF],decls:8,vars:0,consts:[["spinner",""],[300,null],[1,"flex","flex-col","gap-8"],[1,"description__border","rounded-md","p-3","font-secondary","text-sm","text-black"],[1,"flex","flex-col","gap-6"],[1,"flex","flex-row","gap-2","items-center","justify-start"],[1,"text-lg","font-medium","w-28"],["b2bNgxButton","",1,"!bg-[#EEEEEE]","rounded-md","px-3","py-1","text-sm","flex","flex-row","items-center","justify-start",3,"click"],[1,"scale-75"],[1,"section__border"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-3"],[1,"h-fit",3,"data","showEdit","showDelete","length","title","handleItem"],[1,"h-fit",3,"data","showEdit","showDelete","title","handleItem"],[1,"h-fit",3,"deleteItem","editItem","data","showEdit","showDelete","length","title","handleItem"],[1,"h-fit",3,"deleteItem","editItem","data","showEdit","showDelete","title","handleItem"],[4,"ngTemplateOutlet"],[1,"flex","flex-row","justify-center","items-center"],["diameter","24"]],template:function(n,r){1&n&&(e.j41(0,"div",2)(1,"div",3),e.EFF(2," Add photos and videos that represent your business in the best view. We recommend to upload high-quality images and videos to appear more trustworthy. "),e.k0s(),e.j41(3,"div",4),e.Z7z(4,On,15,8,null,null,e.Vm6),e.k0s()(),e.DNE(6,Xn,2,0,"ng-template",null,0,e.C5r)),2&n&&(e.R7$(4),e.Dyx(r.mediaSections))},dependencies:[v.Jj,M.i,R.Z,T.An,De,v.PV,v.T3],styles:[".description__border[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #D3DFFF}.section__border[_ngcontent-%COMP%]{border-bottom:1px solid #D3DFFF}"],changeDetection:0})}return o})();function Un(o,i){if(1&o&&e.nrm(0,"b2b-client-company-information",2)(1,"b2b-client-payment-and-shipping",2)(2,"b2b-client-advantages",2)(3,"b2b-client-documents",2)(4,"b2b-client-trade-shows",2)(5,"b2b-client-media",2),2&o){const t=i,n=e.XpG();e.Y8G("hidden",(null==t?null:t.label)!==(null==n.TabLabel?null:n.TabLabel.COMPANY_INFORMATION)),e.R7$(),e.Y8G("hidden",(null==t?null:t.label)!==(null==n.TabLabel?null:n.TabLabel.PAYMENT_AND_SHIPPING)),e.R7$(),e.Y8G("hidden",(null==t?null:t.label)!==(null==n.TabLabel?null:n.TabLabel.OUR_ADVANTAGES)),e.R7$(),e.Y8G("hidden",(null==t?null:t.label)!==(null==n.TabLabel?null:n.TabLabel.DOCUMENTS)),e.R7$(),e.Y8G("hidden",(null==t?null:t.label)!==(null==n.TabLabel?null:n.TabLabel.TRADE_SHOWS)),e.R7$(),e.Y8G("hidden",(null==t?null:t.label)!==(null==n.TabLabel?null:n.TabLabel.MEDIA))}}let zn=(()=>{class o{constructor(t,n,r,d){this.cdr=t,this.tabservice=n,this.matDialog=r,this.authService=d,this.tab$=new en.m(2),this.disabled=!1,this.TabLabel=I.y,this.tabs=$.v}unloadNotification(t){return(0,c.A)(function*(){q.c.production&&(t.preventDefault(),t.returnValue="")})()}ngOnInit(){this.checkNewUser()}canDeactivate(){var t=this;return(0,c.A)(function*(){return yield t.initSave(),!0})()}changeTab(t){this.tab$.next(t),this.cdr.detectChanges()}initSave(){var t=this;return(0,c.A)(function*(){(yield t.tabservice.isActivationPossible())?yield t.tabservice.initSaveModal(null):(yield(0,Ye._)(t.tabservice.openTabChangeModal().afterClosed()))&&(yield t.tabservice.initSaveModal(t.tabservice.activeTab))})()}checkNewUser(){const t=this.authService.user,n=["companyName","companyDescription","businessType","employeesNumber","yearOfFoundation","address"],r=S().pick(this.authService.company,n),d=S().values(r);!localStorage.getItem("supplier-pop-up")&&n.length>d.length&&"supplier"===t.rootRole.name&&this.initFirstRegistrationPopup()}initFirstRegistrationPopup(){var t=this;return(0,c.A)(function*(){t.matDialog.open(ue.e,{data:{label:"Update your data",title:"Fill your data",description:"You need to fill out your company to profile to be able to upload your products.",buttons:[{label:"Got it!",result:!0,theme:Oe.a.BACKGROUND_BLUE}]}}).afterClosed().subscribe(n=>{localStorage.setItem("supplier-pop-up","true")})})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(e.gRc),e.rXU(k.l),e.rXU(N.bZ),e.rXU(W.u))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["b2b-client-profile-settings-new"]],hostBindings:function(n,r){1&n&&e.bIt("beforeunload",function(b){return r.unloadNotification(b)},!1,e.tSv)},standalone:!0,features:[e.Jv_([k.l,{provide:N.di,useValue:{overlayPanelClass:"w-full  md:max-w-[80vw]"}}]),e.aNF],decls:4,vars:4,consts:[[1,"flex","flex-col","gap-10","mb-10"],[1,"w-full",3,"activeTab","defaultTab"],[3,"hidden"]],template:function(n,r){if(1&n&&(e.j41(0,"div",0)(1,"b2b-client-profile-settings-tabs",1),e.bIt("activeTab",function(b){return r.changeTab(b)}),e.k0s(),e.DNE(2,Un,6,6),e.nI1(3,"async"),e.k0s()),2&n){let d;e.R7$(),e.Y8G("defaultTab",r.tabs[0]),e.R7$(),e.vxM(2,(d=e.bMT(3,2,r.tab$))?2:-1,d)}},dependencies:[O,xe,Se,Te,Ee,we,M.i,v.Jj,Yn],changeDetection:0})}return o})()},5854:(ee,E,a)=>{a.d(E,{D:()=>$});var c=a(52235),s=a(89985),e=a(54066),V=a(13817);let $=(()=>{class v{constructor(){this.tradeShowService=(0,s.WQX)(V.f),this.tradeShows$=new e.B}getList(){var S=this;return(0,c.A)(function*(){S.tradeShowService.getListByCompanyId().subscribe(y=>{S.tradeShows$.next(y)})})()}static#e=this.\u0275fac=function(y){return new(y||v)};static#t=this.\u0275prov=s.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()}}]);