"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[7032],{34067:(p,l,t)=>{t.d(l,{I:()=>s});var a=t(96814),o=t(56223),c=t(98653),i=t(19212);let s=(()=>{class f{static#e=this.\u0275fac=function(O){return new(O||f)};static#t=this.\u0275mod=i.oAB({type:f});static#r=this.\u0275inj=i.cJS({imports:[a.ez,o.UX,c.w]})}return f})();t(25819)},44901:(p,l,t)=>{t.d(l,{b:()=>O});var a=t(99397),o=t(37398),c=t(81374),i=t(65619),s=t(19212),S=t(87588),f=t(16113),d=t(75972);function h(_){return _.photos&&_.photos.length?_.photos[0].lg:null}let O=(()=>{class _{constructor(e,r,n){this._apiService=e,this._offersQuery=r,this._offersStore=n,this.offersSource=new i.X([]),this.savedOffersSource=new i.X([]),this.offersLength=new i.X(0),this.savedOffersLength=new i.X(0),this._endpoint="offers/"}get offers$(){return this.offersSource.asObservable()}get savedOffers$(){return this.savedOffersSource.asObservable()}get offersLength$(){return this.offersLength.asObservable()}get savedOffersLength$(){return this.savedOffersLength.asObservable()}removeAllOffers(){return this._apiService.delete("offers/delete")}getContainerLocation(e){return this._apiService.get(`container/location?${e}`)}getAllOffersCount(){return this._offersQuery.selectAllOffersCount$}getSeaLines(){const{seaLines:e}=this._offersQuery.getValue();return e.length||this._apiService.get("seaLines").subscribe(r=>{this._offersStore.update({seaLines:r})}),this._offersQuery.selectSeaLines$}markAsSold(e){this._apiService.post(`offer/${e}/status/update`,{status:"sold"}).pipe().subscribe()}hideOffer(e){return this._apiService.post(`offer/${e}/hide`,{})}unHideOffer(e){return this._apiService.post(`offer/${e}/unHide`,{})}adminHideOffer(e){return this._apiService.post(`offer/${e}/adminHide`,{})}adminUnHideOffer(e){return this._apiService.post(`offer/${e}/adminUnHide`,{})}deleteOfferSub(e){return this._apiService.delete(`offer/${e}/delete`)}deleteRfq(e){return this._apiService.delete("tradeBid/delete-rfq-admin",{body:{rfqId:e}})}deleteOfferById(e,r){return this._apiService.delete(`offer/${e}/delete`,r)}getOfferById(e){return this._apiService.get(`offer/${e}/`).pipe((0,a.b)(r=>{this._offersStore.update({offer:r})}))}getMyOffers(){return this._apiService.get("my/offers?limit=1").subscribe(e=>{this._offersStore.update({myOffers:e.map(r=>({...r,previewPhoto:h(r)}))})}),this._offersQuery.selectMyOffers$}getOffers(e=""){return this._apiService.get("offers/"+e).pipe((0,o.U)(r=>{const{offers:n,totalCount:u}=r,v=n.map(m=>({...m,previewPhoto:h(m)}));return this._offersStore.update({allOffers:v,allOffersCount:u}),[...v]}))}getActiveOffers(){return this._apiService.get("offers?hideSold=true").pipe((0,o.U)(e=>{const{offers:r,totalCount:n}=e,u=r.map(v=>({...v,previewPhoto:h(v)}));return this._offersStore.update({allOffers:u,allOffersCount:n}),[...u]}))}getSavedOffers(){return this._apiService.get("my/offers/favourites").subscribe(r=>{this._offersStore.update({savedOffers:r.map(n=>({...n,previewPhoto:h(n)}))})}),this._offersQuery.selectSavedOffers$}createOffer(e){return this._apiService.post("offer/create",e)}updateOffer(e,r){return this._apiService.put(`offer/${r}/update`,e)}addFavoriteOffer(e){return this._apiService.post(`user/favourites/${e}/add`,{}).pipe((0,a.b)(()=>{this._offersStore.update({allOffers:this._offersStore.getValue().allOffers.map(r=>({...r,isSaved:r._id===e||r.isSaved}))})}))}removeFavoriteOffer(e){return this._apiService.delete(`user/favourites/${e}/remove`).pipe((0,a.b)(()=>{const{savedOffers:r,allOffers:n}=this._offersQuery.getValue();this._offersStore.update({savedOffers:r.filter(u=>u._id!==e),allOffers:n.map(u=>({...u,isSaved:u._id!==e&&u.isSaved}))})}))}approveOffer(e){return this._apiService.post(`offer/${e}/adminApprovalOffer`,{})}declineOffer(e){return this._apiService.post(`offer/${e}/adminRejectionOffer`,{})}updateOffersList(e){this.getOffers(e).pipe((0,c.P)()).subscribe(r=>{this.offersSource.next(r.rfqList)})}static#e=this.\u0275fac=function(r){return new(r||_)(s.LFG(S.s),s.LFG(f.Y),s.LFG(d.m))};static#t=this.\u0275prov=s.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},16113:(p,l,t)=>{t.d(l,{Y:()=>i});var a=t(70275),o=t(19212),c=t(75972);let i=(()=>{class s extends a.AE{constructor(f){super(f),this.store=f,this.selectAllOffers$=this.select("allOffers"),this.selectMyOffers$=this.select("myOffers"),this.selectOffer$=this.select("offer"),this.selectSavedOffers$=this.select("savedOffers"),this.selectAllOffersCount$=this.select("allOffersCount"),this.selectSeaLines$=this.select("seaLines")}static#e=this.\u0275fac=function(d){return new(d||s)(o.LFG(c.m))};static#t=this.\u0275prov=o.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},75972:(p,l,t)=>{t.d(l,{m:()=>s});var a=t(97582),o=t(70275),c=t(19212);let s=class E extends o.yh{constructor(){super({allOffers:[],myOffers:[],offer:null,savedOffers:[],allOffersCount:0,seaLines:[]})}static#e=this.\u0275fac=function(d){return new(d||E)};static#t=this.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})};s=(0,a.gn)([(0,o.yC)({name:"offers"})],s)},24036:(p,l,t)=>{t.d(l,{z:()=>c});var a=t(46973),o=t(80305);function c(i,s){const S="object"==typeof s;return new Promise((f,d)=>{const h=new o.Hp({next:O=>{f(O),h.unsubscribe()},error:d,complete:()=>{S?f(s.defaultValue):d(new a.K)}});i.subscribe(h)})}}}]);