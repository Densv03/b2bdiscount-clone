"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[8175],{78175:(R,h,a)=>{a.r(h),a.d(h,{AdminBillingModule:()=>w});var d=a(38684),e=a(49134),m=a(82575),b=a(50096),P=a(58764),C=a(55161),g=a(59076),r=a(9063),v=a(22699),E=a(10424),y=a(76999),M=a(28225),f=a(22001),c=a(57223),t=a(89985),s=a(6113),u=a(61553),x=a(27936);function O(i,T){if(1&i&&(t.qex(0),t.j41(1,"label"),t.EFF(2,"Enter amount of quotes"),t.k0s(),t.nrm(3,"input",7),t.bVm()),2&i){const n=t.XpG();t.R7$(3),t.Y8G("theme",n.b2bNgxInputThemeEnum.BACKGROUND_GRAY)}}let _=(()=>{class i{constructor(n,o,l){this.dialogRef=n,this.formBuilder=o,this.data=l,this.b2bNgxInputThemeEnum=M.Q,this.b2bNgxButtonThemeEnum=f.a,this.b2bNgxSelectThemeEnum=E.E,this.formGroup=this.getFormGroup(),this.typePlanOptions=this.getTypePlanOptions(),this.isQuotesAmountInputVisible$=this.isQuotesAmountInputVisible()}ngOnInit(){this.data.paymentPlan&&this.formGroup.patchValue(this.data.paymentPlan),this.initFormSettings()}submitForm(n){this.dialogRef.close({value:n.value,mode:this.getEditMode(),id:this.data?.paymentPlan?._id})}getButtonText(){return"add"===this.getEditMode()?"Add payment plan":"Edit payment plan"}initFormSettings(){this.formGroup.get("typePlan").valueChanges.subscribe(n=>{"quotes"===n?this.formGroup.get("amountOfQuotes").setValidators([m.k0.required,(0,c._)()]):this.formGroup.get("amountOfQuotes").clearValidators(),this.formGroup.get("amountOfQuotes").updateValueAndValidity()})}getFormGroup(){return this.formBuilder.group({typePlan:[null,m.k0.required],title:[null,m.k0.required],price:[null,[m.k0.required,(0,c._)()]],amountOfQuotes:[null],description:[null,m.k0.required]})}isQuotesAmountInputVisible(){return this.formGroup.get("typePlan").valueChanges.pipe((0,y.T)(n=>"quotes"===n))}getTypePlanOptions(){return[{value:"subscription",label:"Subscription"},{value:"quotes",label:"Quotes"}]}getEditMode(){return this.data.paymentPlan?"edit":"add"}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(e.CP),t.rXU(m.ok),t.rXU(e.Vh))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["b2b-select-billing-method-dialog"]],decls:16,vars:12,consts:[[3,"ngSubmit","formGroup"],["type","text","formControlName","title","b2bNgxInput","","placeholder","Title",1,"select-billing-method-dialog__form-item",3,"theme"],["type","text","formControlName","price","b2bNgxInput","","placeholder","Price",1,"select-billing-method-dialog__form-item",3,"theme"],["type","text","formControlName","description","b2bNgxInput","","placeholder","Description",1,"select-billing-method-dialog__form-item",3,"theme"],["placeholder","Select type of billing plan","bindValue","value","bindLabel","label","formControlName","typePlan",1,"select-billing-method-dialog__form-item__select","select-billing-method-dialog__form-item",3,"options","theme"],[4,"ngIf"],["b2bNgxButton","",1,"select-billing-method-dialog__submit-button",3,"theme","disabled"],["type","text","b2bNgxInput","","placeholder","Amount of quotes","formControlName","amountOfQuotes",1,"select-billing-method-dialog__form-item",3,"theme"]],template:function(o,l){1&o&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return l.submitForm(l.formGroup)}),t.j41(1,"label"),t.EFF(2,"Enter title"),t.k0s(),t.nrm(3,"input",1),t.j41(4,"label"),t.EFF(5,"Enter price"),t.k0s(),t.nrm(6,"input",2),t.j41(7,"label"),t.EFF(8,"Enter description"),t.k0s(),t.nrm(9,"input",3),t.j41(10,"b2b-ngx-select",4),t.EFF(11," Select type of billing plan "),t.k0s(),t.DNE(12,O,4,1,"ng-container",5),t.nI1(13,"async"),t.j41(14,"button",6),t.EFF(15),t.k0s()()),2&o&&(t.Y8G("formGroup",l.formGroup),t.R7$(3),t.Y8G("theme",l.b2bNgxInputThemeEnum.BACKGROUND_GRAY),t.R7$(3),t.Y8G("theme",l.b2bNgxInputThemeEnum.BACKGROUND_GRAY),t.R7$(3),t.Y8G("theme",l.b2bNgxInputThemeEnum.BACKGROUND_GRAY),t.R7$(),t.Y8G("options",l.typePlanOptions)("theme",l.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.R7$(2),t.Y8G("ngIf",t.bMT(13,10,l.isQuotesAmountInputVisible$)),t.R7$(2),t.Y8G("theme",l.b2bNgxButtonThemeEnum.BACKGROUND_BLACK)("disabled","VALID"!==l.formGroup.status),t.R7$(),t.SpI(" ",l.getButtonText()," "))},dependencies:[d.bT,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,s.b,u.Z,x.P,d.Jj],styles:[".select-billing-method-dialog__form-item[_ngcontent-%COMP%]{margin-bottom:15px}.select-billing-method-dialog__form-item__select[_ngcontent-%COMP%]{display:block}.select-billing-method-dialog__submit-button[_ngcontent-%COMP%]{padding:15px 20px;margin-top:15px}"]})}return i})();var D=a(20559),S=a(24797),N=a(39229),A=a(46295);let G=(()=>{class i{constructor(n){this.apiService=n,this.currentPaymentPlans=new N.t([])}getCurrentPaymentPlans(){return this.currentPaymentPlans.asObservable()}updateCurrentPaymentPlans(n){this.apiService.get("authorize-net/get-payment-plan"+(n?`?type=${n}`:"")).pipe((0,A.p)(l=>!!l),(0,v.$)()).subscribe(l=>this.currentPaymentPlans.next(l))}addPaymentPlan(n){return this.apiService.post("authorize-net/add-new-payment-plan",n)}updatePaymentPlanById(n,o){return this.apiService.put("authorize-net/update-payment-plan",{id:n,...o})}deletePaymentPlanById(n){return this.apiService.delete("authorize-net/delete-payment-plan",{body:{id:n}})}getPaymentPlans(n){return this.apiService.get("authorize-net/get-payment-plan"+(n?`?type=${n}`:""))}getQuotesPaymentPlansToDisplay(){return this.apiService.get("authorize-net/get-payment-plan?type=quotes").pipe((0,y.T)(n=>n.length>3?n.slice(0,3):n))}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(D.G))};static#n=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function F(i,T){if(1&i&&(t.j41(0,"h3"),t.EFF(1),t.k0s()),2&i){const n=t.XpG();t.R7$(),t.SpI(" Quotes number: ",n.paymentPlan.amountOfQuotes," ")}}let j=(()=>{class i{constructor(){this.onDelete=new t.bkB,this.onEdit=new t.bkB,this.b2bNgxButtonThemeEnum=f.a}deletePaymentPlan(n,o){o.stopPropagation(),this.onDelete.emit(n)}editPaymentPlan(n){this.onEdit.emit(n)}static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["b2b-admin-payment-plan-item"]],inputs:{paymentPlan:"paymentPlan"},outputs:{onDelete:"onDelete",onEdit:"onEdit"},decls:12,vars:6,consts:[[1,"admin-payment-plan-item",3,"click"],[4,"ngIf"],["b2bNgxButton","",3,"click","theme"]],template:function(o,l){1&o&&(t.j41(0,"div",0),t.bIt("click",function(){return l.editPaymentPlan(l.paymentPlan)}),t.j41(1,"h2"),t.EFF(2),t.k0s(),t.j41(3,"h3"),t.EFF(4),t.k0s(),t.j41(5,"h3"),t.EFF(6),t.k0s(),t.j41(7,"h3"),t.EFF(8),t.k0s(),t.DNE(9,F,2,1,"h3",1),t.j41(10,"button",2),t.bIt("click",function(B){return l.deletePaymentPlan(l.paymentPlan._id,B)}),t.EFF(11," Delete "),t.k0s()()),2&o&&(t.R7$(2),t.JRh(l.paymentPlan.title),t.R7$(2),t.SpI("Payment plan: ",l.paymentPlan.typePlan,""),t.R7$(2),t.SpI("Price: ",l.paymentPlan.price,""),t.R7$(2),t.SpI("Description: ",l.paymentPlan.description,""),t.R7$(),t.Y8G("ngIf","quotes"===l.paymentPlan.typePlan),t.R7$(),t.Y8G("theme",l.b2bNgxButtonThemeEnum.BACKGROUND_BLACK))},dependencies:[d.bT,u.Z],styles:[".admin-payment-plan-item[_ngcontent-%COMP%]{background-color:#fff;border:2px solid gray}.admin-payment-plan-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.admin-payment-plan-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-left:20px}.admin-payment-plan-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:90%;height:40px;margin:10px auto}"]})}return i})();function $(i,T){if(1&i){const n=t.RV6();t.j41(0,"b2b-admin-payment-plan-item",2),t.bIt("onDelete",function(l){t.eBV(n);const p=t.XpG();return t.Njj(p.deletePaymentPlan(l))})("onEdit",function(l){t.eBV(n);const p=t.XpG();return t.Njj(p.editPaymentPlan(l))}),t.k0s()}2&i&&t.Y8G("paymentPlan",T.$implicit)}let k=(()=>{class i{constructor(){this.onDelete=new t.bkB,this.onEdit=new t.bkB}ngOnInit(){}deletePaymentPlan(n){this.onDelete.emit(n)}editPaymentPlan(n){this.onEdit.emit(n)}static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["b2b-admin-payment-plan-list"]],inputs:{paymentPlans:"paymentPlans"},outputs:{onDelete:"onDelete",onEdit:"onEdit"},decls:2,vars:1,consts:[[1,"admin-payment-plan-item-list__container"],["class","admin-payment-plan-item-list__item",3,"paymentPlan","onDelete","onEdit",4,"ngFor","ngForOf"],[1,"admin-payment-plan-item-list__item",3,"onDelete","onEdit","paymentPlan"]],template:function(o,l){1&o&&(t.j41(0,"div",0),t.DNE(1,$,1,1,"b2b-admin-payment-plan-item",1),t.k0s()),2&o&&(t.R7$(),t.Y8G("ngForOf",l.paymentPlans))},dependencies:[d.Sq,j],styles:[".admin-payment-plan-item-list__container[_ngcontent-%COMP%]{display:grid;width:90%;margin:0 auto;grid-template-columns:1fr 1fr 1fr;grid-gap:10px}"]})}return i})();const U=[{path:"",component:(()=>{class i{constructor(n,o,l,p){this.matDialog=n,this.apiService=o,this.hotToastService=l,this.adminBillingService=p,this.b2bNgxSelectThemeEnum=E.E,this.currentPaymentPlans=this.adminBillingService.getCurrentPaymentPlans()}ngOnInit(){this.adminBillingService.updateCurrentPaymentPlans()}addBillingPlan(){this.matDialog.open(_,{data:{}}).afterClosed().subscribe(n=>{!n||"add"!==n.mode||this.adminBillingService.addPaymentPlan(n.value).pipe(this.hotToastService.observe({loading:"Adding payment plan...",success:"Payment plan added successfully",error:"Error adding payment plan"})).subscribe(()=>{this.adminBillingService.updateCurrentPaymentPlans()})})}deletePaymentPlan(n){this.adminBillingService.deletePaymentPlanById(n).pipe(this.hotToastService.observe({loading:"Deleting payment plan...",success:"Payment plan deleted successfully",error:"Error deleting payment plan"}),(0,v.$)()).subscribe(()=>{this.adminBillingService.updateCurrentPaymentPlans()})}editPaymentPlan(n){this.matDialog.open(_,{data:{paymentPlan:n}}).afterClosed().subscribe(o=>{!o||"edit"!==o.mode||this.adminBillingService.updatePaymentPlanById(o.id,o.value).pipe(this.hotToastService.observe({loading:"Editing payment plan...",success:"Payment plan edited successfully",error:"Error editing payment plan"}),(0,v.$)()).subscribe(()=>{this.adminBillingService.updateCurrentPaymentPlans()})})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(e.bZ),t.rXU(D.G),t.rXU(S.U_),t.rXU(G))};static#n=this.\u0275cmp=t.VBU({type:i,selectors:[["b2b-admin-billing"]],decls:4,vars:3,consts:[[1,"admin-billing__add-billing-plan",3,"click"],[3,"onDelete","onEdit","paymentPlans"]],template:function(o,l){1&o&&(t.j41(0,"div",0),t.bIt("click",function(){return l.addBillingPlan()}),t.EFF(1,"+"),t.k0s(),t.j41(2,"b2b-admin-payment-plan-list",1),t.nI1(3,"async"),t.bIt("onDelete",function(B){return l.deletePaymentPlan(B)})("onEdit",function(B){return l.editPaymentPlan(B)}),t.k0s()),2&o&&(t.R7$(2),t.Y8G("paymentPlans",t.bMT(3,1,l.currentPaymentPlans)))},dependencies:[k,d.Jj],styles:[".admin-billing__add-billing-plan[_ngcontent-%COMP%]{color:#fff;width:50px;height:50px;display:flex;justify-content:center;align-items:center;font-weight:700;background-color:#000;margin-top:30px;margin-left:30px;margin-bottom:40px}"]})}return i})()}];let V=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275mod=t.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[r.iI.forChild(U),r.iI]})}return i})(),w=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#n=this.\u0275mod=t.$C({type:i});static#e=this.\u0275inj=t.G2t({imports:[d.MD,V,e.hM,m.X1,b.E,P.i,C.n_,g._]})}return i})()},64640:(R,h,a)=>{a.d(h,{K:()=>f});var d=a(35285),e=a(89985),m=a(60801),b=a(19825),P=a(6742),C=a(46295),g=a(38684),r=a(61553),v=a(76492);const E=["*"];function y(c,t){if(1&c){const s=e.RV6();e.j41(0,"li")(1,"button",6),e.bIt("click",function(x){const O=e.eBV(s).$implicit,_=e.XpG(2);return e.Njj(_.callOptionFunc(x,O))}),e.nrm(2,"img",7),e.j41(3,"span"),e.EFF(4),e.k0s()()()}if(2&c){const s=t.$implicit;e.R7$(2),e.Y8G("name",s.icon),e.R7$(),e.HbH(s.className+" ngx-dropdown-text"),e.R7$(),e.JRh(s.label)}}function M(c,t){if(1&c&&(e.j41(0,"ul",4),e.DNE(1,y,5,4,"li",5),e.k0s()),2&c){const s=e.XpG();e.R7$(),e.Y8G("ngForOf",s.options)}}let f=class I{constructor(t){this.changeDetection=t,this.isMenuShow=!1,this.toggleOptionClick=new e.bkB}callOptionFunc(t,s){this.isMenuShow=!1,t.preventDefault(),t.stopImmediatePropagation(),s.onClick(this.optionToReturn||s,this.requiredOptionToCheck)}get menuClassName(){return`${this.className} `}subscribeOnClickOutside(t){const s=(0,m.R)(document,"click").pipe((0,P.i)(1),(0,b.s)(this),(0,C.p)(u=>!t.contains(u.target))).subscribe(()=>{this.isMenuShow=!1,this.changeDetection.detectChanges(),s.unsubscribe()})}showMenu(t,s){this.isMenuShow=!this.isMenuShow,t.stopImmediatePropagation(),t.preventDefault(),this.isMenuShow&&this.subscribeOnClickOutside(s)}static#t=this.\u0275fac=function(s){return new(s||I)(e.rXU(e.gRc))};static#n=this.\u0275cmp=e.VBU({type:I,selectors:[["b2b-ngx-dropdown"]],inputs:{options:"options",requiredOptionToCheck:"requiredOptionToCheck",className:"className",optionToReturn:"optionToReturn"},outputs:{toggleOptionClick:"toggleOptionClick"},ngContentSelectors:E,decls:5,vars:1,consts:[["container",""],[1,"ngx-dropdown-container"],[3,"click"],["class","ngx-dropdown",4,"ngIf"],[1,"ngx-dropdown"],[4,"ngFor","ngForOf"],["b2bNgxButton","",1,"ngx-dropdown-button",3,"click"],["b2bNgxIcon","",1,"ngx-dropdown-button-icon",3,"name"]],template:function(s,u){if(1&s){const x=e.RV6();e.NAR(),e.j41(0,"div",1,0)(2,"div",2),e.bIt("click",function(_){e.eBV(x);const D=e.sdS(1);return e.Njj(u.showMenu(_,D))}),e.SdG(3),e.k0s(),e.DNE(4,M,2,1,"ul",3),e.k0s()}2&s&&(e.R7$(4),e.Y8G("ngIf",u.isMenuShow))},dependencies:[g.Sq,g.bT,r.Z,v.i],styles:[".ngx-dropdown-container[_ngcontent-%COMP%]{position:relative}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]{position:absolute;z-index:2;background:#fff;box-shadow:0 2px 12px #0f0f1129;border-radius:4px;width:180px;right:0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px;width:100%}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]:hover{background-color:#eff4fa}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]   .ngx-dropdown-text[_ngcontent-%COMP%]{text-align:left;font-weight:500;font-size:13px;line-height:18px;color:#0f0f11;margin-left:12px}"],changeDetection:0})};f=(0,d.Cg)([(0,b.d)()],f)},55161:(R,h,a)=>{a.d(h,{n_:()=>C,JV:()=>g}),a(64640);var e=a(38684),m=a(58764),b=a(3470),P=a(89985);let C=(()=>{class r{static#t=this.\u0275fac=function(y){return new(y||r)};static#n=this.\u0275mod=P.$C({type:r});static#e=this.\u0275inj=P.G2t({imports:[e.MD,m.i,b.F]})}return r})();var g=function(r){return r.RESTORE="Restore",r.ARCHIVE="Archive",r.DELETE="Delete",r.EDIT="Edit",r}(g||{})}}]);