"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[4135],{64135:(A,O,r)=>{r.r(O),r.d(O,{AdminLogisticProfileDetailsModule:()=>Zt});var _=r(96814),h=r(44112),t=r(65879),m=r(71042),p=r(70745),C=r(74104),M=r(97582),f=r(51791),P=r(56223),w=r(32181),i=r(65619),l=r(58133),a=r(25313),d=r(17551),x=r(32296),y=r(30617),U=r(79645);function L(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Port from"),t.qZA())}function E(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(null==n.portFrom?null:n.portFrom.name)}}function F(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Country from"),t.qZA())}function B(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(null==n.countryFrom?null:n.countryFrom.name)}}function R(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Port to"),t.qZA())}function Y(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(null==n.portTo?null:n.portTo.name)}}function I(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Country to"),t.qZA())}function k(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(null==n.countryTo?null:n.countryTo.name)}}function J(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Date from"),t.qZA())}function Q(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.validDateFrom,"dd.MM.yyyy")," ")}}function q(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Date to"),t.qZA())}function j(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.validDateTo,"dd.MM.yyyy")," ")}}function z(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Actions"),t.qZA())}function $(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",25)(1,"div",26)(2,"button",27),t.NdJ("click",function(){const g=t.CHM(n).$implicit,u=t.oxw(2);return t.KtG(u.deleteTariff(g))}),t.TgZ(3,"mat-icon"),t._uU(4,"delete"),t.qZA()()()()}}function K(e,o){1&e&&t._UZ(0,"tr",28)}function H(e,o){1&e&&t._UZ(0,"tr",29)}function W(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"table",11),t.ynx(2,12),t.YNc(3,L,2,0,"th",13),t.YNc(4,E,2,1,"td",14),t.BQk(),t.ynx(5,15),t.YNc(6,F,2,0,"th",13),t.YNc(7,B,2,1,"td",14),t.BQk(),t.ynx(8,16),t.YNc(9,R,2,0,"th",13),t.YNc(10,Y,2,1,"td",14),t.BQk(),t.ynx(11,17),t.YNc(12,I,2,0,"th",13),t.YNc(13,k,2,1,"td",14),t.BQk(),t.ynx(14,18),t.YNc(15,J,2,0,"th",13),t.YNc(16,Q,3,4,"td",14),t.BQk(),t.ynx(17,19),t.YNc(18,q,2,0,"th",13),t.YNc(19,j,3,4,"td",14),t.BQk(),t.ynx(20,20),t.YNc(21,z,2,0,"th",13),t.YNc(22,$,5,0,"td",14),t.BQk(),t.YNc(23,K,1,0,"tr",21),t.YNc(24,H,1,0,"tr",22),t.qZA(),t.TgZ(25,"b2b-pagination",23),t.NdJ("togglePageNumber",function(c){t.CHM(n);const g=t.oxw();return t.KtG(g.togglePage(c))}),t.ALo(26,"async"),t.qZA(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("currentPage",n.currentPage)("length",t.lcZ(26,6,n.totalCount$))("perPage",n.productsLimit)}}function G(e,o){1&e&&(t.TgZ(0,"h3"),t._uU(1,"No companies found"),t.qZA())}function X(e,o){if(1&e&&(t.TgZ(0,"div",32)(1,"p",33),t._uU(2),t.qZA(),t.TgZ(3,"p",34),t._uU(4),t.qZA()()),2&e){const n=o.$implicit;t.xp6(2),t.Oqu(n.errorField),t.xp6(2),t.Oqu(n.errorMessage)}}function V(e,o){if(1&e&&(t.TgZ(0,"div",30),t.YNc(1,X,5,2,"div",31),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.errorList)}}const tt=function(){return{left:"10px",top:"20px"}};let et=(()=>{let e=class Z{constructor(n,s,c,g){this.adminLogisticService=n,this.activatedRoute=s,this.hotToastService=c,this.changeDetectorRef=g,this.displayedColumns=["portFrom","countryFrom","portTo","countryTo","validDateFrom","validDateTo","actions"],this.updating=!1,this.productsLimit=15,this.totalCountSource=new i.X(0),this.totalCount$=this.totalCountSource.asObservable(),this.currentPage=1,this.date=new P.NI(""),this.errorList=[{errorField:"Error field",errorData:"Error data",errorMessage:"Error message"}],this.seaRequest={limit:this.productsLimit,offset:0}}ngOnInit(){this.fetchData(),this.setFormData()}uploadSeaTariff(n){const s=n.target,c=s.files[0];if(!c)return;if(!["xlsx","xls","csv"].includes(c?.name.split(".")[c?.name.split(".").length-1]))return void this.hotToastService.error("Wrong type format, you can upload only sheets types");s.value=null;const u=new FileReader;u.readAsDataURL(c),u.onload=()=>{const b=new FormData;b.append("excelData",c),this.adminLogisticService.uploadSeaTariff(this.seaRequest.companyId,b).pipe((0,f.t)(this)).subscribe(v=>{v.resultUpdate.count.error&&v.resultUpdate.count.error.errorList.forEach(T=>{this.errorList.push({errorField:T.errorField,errorData:JSON.parse(T.errorData),errorMessage:T.errorMessage})}),this.fetchData()})}}togglePage(n){this.seaRequest={...this.seaRequest,offset:(n-1)*this.productsLimit},this.currentPage=n,this.fetchData()}setNullableValue(){this.date.patchValue(null,{emitEvent:!1}),this.seaRequest.date=null,this.fetchData()}deleteTariff(n){this.updating||(this.updating=!0,this.adminLogisticService.deleteTariff(n._id,"sea").pipe((0,f.t)(this)).subscribe(()=>{this.fetchData(),this.hotToastService.success("Tariff was successfully deleted")}))}fetchData(){this.activatedRoute.snapshot.params?.id&&(this.seaRequest.companyId=this.activatedRoute.snapshot.params?.id),this.adminLogisticService.getSeaTariffs(this.seaRequest).pipe((0,f.t)(this)).subscribe(n=>{this.totalCountSource.next(n[0].totalCount),this.dataSource=n[0].tariffs,this.updating=!1,this.changeDetectorRef.detectChanges()})}setFormData(){this.date.valueChanges.pipe((0,w.h)(n=>!!n),(0,f.t)(this)).subscribe(n=>{this.seaRequest.date=new Date(n).toLocaleDateString().split(".").reverse().join("."),this.fetchData()})}static#t=this.\u0275fac=function(s){return new(s||Z)(t.Y36(m.d),t.Y36(h.gz),t.Y36(l.jE),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:Z,selectors:[["b2b-sea-profile"]],decls:16,vars:10,consts:[[1,"logistic-wrapper"],[1,"logistic-header-wrapper"],["multiple","","type","file",3,"change"],["fileInput",""],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"country-wrapper"],["inputClassName","datepicker","iconName","filled-calendar",3,"formControl","iconPosition"],[3,"click"],[4,"ngIf","ngIfElse"],["noProfiles",""],["class","error-list",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4","no-background",3,"dataSource"],["matColumnDef","portFrom"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","countryFrom"],["matColumnDef","portTo"],["matColumnDef","countryTo"],["matColumnDef","validDateFrom"],["matColumnDef","validDateTo"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"currentPage","length","perPage","togglePageNumber"],["mat-header-cell",""],["mat-cell",""],[1,"actions-block"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"error-list"],["class","error-field",4,"ngFor","ngForOf"],[1,"error-field"],[1,"field"],[1,"message"]],template:function(s,c){if(1&s){const g=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"input",2,3),t.NdJ("change",function(b){return c.uploadSeaTariff(b)}),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){t.CHM(g);const b=t.MAs(4);return t.KtG(b.click())}),t._uU(6," Upload sea tariffs "),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"b2b-datepicker",6),t.TgZ(9,"mat-icon",7),t.NdJ("click",function(){return c.setNullableValue()}),t._uU(10,"close "),t.qZA()()(),t.YNc(11,W,27,8,"ng-container",8),t.ALo(12,"async"),t.YNc(13,G,2,0,"ng-template",null,9,t.W1O),t.YNc(15,V,2,1,"div",10),t.qZA()}if(2&s){const g=t.MAs(14);t.xp6(8),t.Q6J("formControl",c.date)("iconPosition",t.DdM(9,tt)),t.xp6(1),t.ekj("show",c.date.value),t.xp6(2),t.Q6J("ngIf",t.lcZ(12,7,c.totalCount$))("ngIfElse",g),t.xp6(4),t.Q6J("ngIf",c.errorList.length>1)}},dependencies:[_.sg,_.O5,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,d.i,P.JJ,P.oH,x.RK,y.Hw,U.Q,_.Ov,_.uU],styles:[".logistic-wrapper[_ngcontent-%COMP%]{padding:30px}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]{padding-bottom:24px;margin-bottom:24px;border-bottom:1px solid lightgray}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{align-items:center}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:24px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .b2b-ngx-button[_ngcontent-%COMP%]{padding:7.5px 15px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:48%}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]{position:relative}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon.show[_ngcontent-%COMP%]{display:initial;position:absolute;top:16px;left:-19px;color:gray;font-size:15px;width:12px;height:12px;cursor:pointer}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:max-content}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:16px;padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#add8e6}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%]{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{text-align:end;padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px;padding:5px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;background:lightblue;border-radius:5px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;line-height:13px;color:#fff}.logistic-wrapper[_ngcontent-%COMP%]   table.no-background[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:initial;background:transparent}.logistic-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}  input.datepicker{height:64px;border:none;border-radius:14px;padding:0 16px;width:100%;max-width:191px}  input.datepicker::placeholder{padding-left:20px}.error-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:500px;padding:16px;border-radius:8px;background:white;max-width:50%;margin-top:24px}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:15px;line-height:22px;padding-bottom:12px;font-weight:400}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]:first-of-type{color:gray}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{min-width:50%;font-weight:600}"],changeDetection:0})};return e=(0,M.gn)([(0,f.c)()],e),e})();function nt(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"City from"),t.qZA())}function ot(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(null==n.cityFrom?null:n.cityFrom.name)}}function it(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Country from"),t.qZA())}function rt(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(null==n.countryFrom?null:n.countryFrom.name)}}function at(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"City to"),t.qZA())}function ct(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(null==n.cityTo?null:n.cityTo.name)}}function lt(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Country to"),t.qZA())}function st(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(null==n.countryTo?null:n.countryTo.name)}}function pt(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Date from"),t.qZA())}function gt(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.validDateFrom,"dd.MM.yyyy")," ")}}function dt(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Date to"),t.qZA())}function ut(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.validDateTo,"dd.MM.yyyy")," ")}}function _t(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Actions"),t.qZA())}function mt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",25)(1,"div",26)(2,"button",27),t.NdJ("click",function(){const g=t.CHM(n).$implicit,u=t.oxw(2);return t.KtG(u.deleteTariff(g))}),t.TgZ(3,"mat-icon"),t._uU(4,"delete"),t.qZA()()()()}}function ft(e,o){1&e&&t._UZ(0,"tr",28)}function ht(e,o){1&e&&t._UZ(0,"tr",29)}function Ct(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"table",11),t.ynx(2,12),t.YNc(3,nt,2,0,"th",13),t.YNc(4,ot,2,1,"td",14),t.BQk(),t.ynx(5,15),t.YNc(6,it,2,0,"th",13),t.YNc(7,rt,2,1,"td",14),t.BQk(),t.ynx(8,16),t.YNc(9,at,2,0,"th",13),t.YNc(10,ct,2,1,"td",14),t.BQk(),t.ynx(11,17),t.YNc(12,lt,2,0,"th",13),t.YNc(13,st,2,1,"td",14),t.BQk(),t.ynx(14,18),t.YNc(15,pt,2,0,"th",13),t.YNc(16,gt,3,4,"td",14),t.BQk(),t.ynx(17,19),t.YNc(18,dt,2,0,"th",13),t.YNc(19,ut,3,4,"td",14),t.BQk(),t.ynx(20,20),t.YNc(21,_t,2,0,"th",13),t.YNc(22,mt,5,0,"td",14),t.BQk(),t.YNc(23,ft,1,0,"tr",21),t.YNc(24,ht,1,0,"tr",22),t.qZA(),t.TgZ(25,"b2b-pagination",23),t.NdJ("togglePageNumber",function(c){t.CHM(n);const g=t.oxw();return t.KtG(g.togglePage(c))}),t.ALo(26,"async"),t.qZA(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("currentPage",n.currentPage)("length",t.lcZ(26,6,n.totalCount$))("perPage",n.productsLimit)}}function Pt(e,o){1&e&&(t.TgZ(0,"h3"),t._uU(1,"No companies found"),t.qZA())}function bt(e,o){if(1&e&&(t.TgZ(0,"div",32)(1,"p",33),t._uU(2),t.qZA(),t.TgZ(3,"p",34),t._uU(4),t.qZA()()),2&e){const n=o.$implicit;t.xp6(2),t.Oqu(n.errorField),t.xp6(2),t.Oqu(n.errorMessage)}}function Ot(e,o){if(1&e&&(t.TgZ(0,"div",30),t.YNc(1,bt,5,2,"div",31),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.errorList)}}const xt=function(){return{left:"10px",top:"20px"}};let Mt=(()=>{let e=class S{constructor(n,s,c,g){this.adminLogisticService=n,this.activatedRoute=s,this.hotToastService=c,this.changeDetectorRef=g,this.displayedColumns=["cityFrom","countryFrom","cityTo","countryTo","validDateFrom","validDateTo","actions"],this.updating=!1,this.productsLimit=15,this.currentPage=1,this.totalCountSource=new i.X(0),this.totalCount$=this.totalCountSource.asObservable(),this.date=new P.NI(""),this.errorList=[{errorField:"Error field",errorData:"Error data",errorMessage:"Error message"}],this.airRequest={limit:this.productsLimit,offset:0}}ngOnInit(){this.fetchData(),this.setFormGroup()}uploadAirProfile(n){const s=n.target,c=s.files[0];if(!c)return;if(!["xlsx","xls","csv"].includes(c?.name.split(".")[c?.name.split(".").length-1]))return void this.hotToastService.error("Wrong type format, you can upload only sheets types");s.value=null;const u=new FileReader;u.readAsDataURL(c),u.onload=()=>{const v=new FormData;v.append("excelData",c),this.adminLogisticService.uploadAirTariff(this.airRequest.companyId,v).pipe((0,f.t)(this)).subscribe(T=>{T.resultUpdate.count.error&&T.resultUpdate.count.error.errorList.forEach(D=>{this.errorList.push({errorField:D.errorField,errorData:JSON.parse(D.errorData),errorMessage:D.errorMessage})}),this.fetchData()})}}togglePage(n){this.airRequest={...this.airRequest,offset:(n-1)*this.productsLimit},this.currentPage=n,this.fetchData()}setNullableValue(){this.date.patchValue(null,{emitEvent:!1}),this.airRequest.date=null,this.fetchData()}deleteTariff(n){this.updating||(this.updating=!0,this.adminLogisticService.deleteTariff(n._id,"air").pipe((0,f.t)(this)).subscribe(()=>{this.fetchData(),this.hotToastService.success("Tariff was successfully deleted")}))}fetchData(){this.activatedRoute.snapshot.params?.id&&(this.airRequest.companyId=this.activatedRoute.snapshot.params?.id),this.adminLogisticService.getAirTariffs(this.airRequest).pipe((0,f.t)(this)).subscribe(n=>{this.dataSource=n[0].tariffs,this.totalCountSource.next(n[0].totalCount),this.updating=!1,this.changeDetectorRef.detectChanges()})}setFormGroup(){this.date.valueChanges.pipe((0,w.h)(n=>!!n),(0,f.t)(this)).subscribe(n=>{this.airRequest.date=new Date(n).toLocaleDateString().split(".").reverse().join("."),this.fetchData()})}static#t=this.\u0275fac=function(s){return new(s||S)(t.Y36(m.d),t.Y36(h.gz),t.Y36(l.jE),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:S,selectors:[["b2b-air-profile"]],decls:16,vars:10,consts:[[1,"logistic-wrapper"],[1,"logistic-header-wrapper"],["multiple","","type","file",3,"change"],["fileInput",""],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"country-wrapper"],["inputClassName","datepicker","iconName","filled-calendar",3,"formControl","iconPosition"],[3,"click"],[4,"ngIf","ngIfElse"],["noProfiles",""],["class","error-list",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4","no-background",3,"dataSource"],["matColumnDef","cityFrom"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","countryFrom"],["matColumnDef","cityTo"],["matColumnDef","countryTo"],["matColumnDef","validDateFrom"],["matColumnDef","validDateTo"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"currentPage","length","perPage","togglePageNumber"],["mat-header-cell",""],["mat-cell",""],[1,"actions-block"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"error-list"],["class","error-field",4,"ngFor","ngForOf"],[1,"error-field"],[1,"field"],[1,"message"]],template:function(s,c){if(1&s){const g=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"input",2,3),t.NdJ("change",function(b){return c.uploadAirProfile(b)}),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){t.CHM(g);const b=t.MAs(4);return t.KtG(b.click())}),t._uU(6," Upload air tariffs "),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"b2b-datepicker",6),t.TgZ(9,"mat-icon",7),t.NdJ("click",function(){return c.setNullableValue()}),t._uU(10,"close "),t.qZA()()(),t.YNc(11,Ct,27,8,"ng-container",8),t.ALo(12,"async"),t.YNc(13,Pt,2,0,"ng-template",null,9,t.W1O),t.YNc(15,Ot,2,1,"div",10),t.qZA()}if(2&s){const g=t.MAs(14);t.xp6(8),t.Q6J("formControl",c.date)("iconPosition",t.DdM(9,xt)),t.xp6(1),t.ekj("show",c.date.value),t.xp6(2),t.Q6J("ngIf",t.lcZ(12,7,c.totalCount$))("ngIfElse",g),t.xp6(4),t.Q6J("ngIf",c.errorList.length>1)}},dependencies:[_.sg,_.O5,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,d.i,P.JJ,P.oH,x.RK,y.Hw,U.Q,_.Ov,_.uU],styles:[".logistic-wrapper[_ngcontent-%COMP%]{padding:30px}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]{padding-bottom:24px;margin-bottom:24px;border-bottom:1px solid lightgray}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{align-items:center}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:24px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .b2b-ngx-button[_ngcontent-%COMP%]{padding:7.5px 15px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:48%}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]{position:relative}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon.show[_ngcontent-%COMP%]{display:initial;position:absolute;top:16px;left:-19px;color:gray;font-size:15px;width:12px;height:12px;cursor:pointer}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:max-content}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:16px;padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#add8e6}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%]{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{text-align:end;padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px;padding:5px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;background:lightblue;border-radius:5px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;line-height:13px;color:#fff}.logistic-wrapper[_ngcontent-%COMP%]   table.no-background[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:initial;background:transparent}.logistic-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}  input.datepicker{height:64px;border:none;border-radius:14px;padding:0 16px;width:100%;max-width:191px}  input.datepicker::placeholder{padding-left:20px}.error-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:500px;padding:16px;border-radius:8px;background:white;max-width:50%;margin-top:24px}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:15px;line-height:22px;padding-bottom:12px;font-weight:400}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]:first-of-type{color:gray}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{min-width:50%;font-weight:600}"],changeDetection:0})};return e=(0,M.gn)([(0,f.c)()],e),e})();const yt=[{path:"",component:(()=>{class e{constructor(n){this.adminLogisticService=n,this.selectedIndex=0}ngOnInit(){}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(m.d))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["b2b-components"]],decls:7,vars:2,consts:[[3,"breadcrumbLabel"],[1,"profile-wrapper"],[3,"selectedIndex","selectedIndexChange"],["label","Sea"],["label","Air"]],template:function(s,c){1&s&&(t._UZ(0,"b2b-breadcrumbs",0),t.TgZ(1,"div",1)(2,"mat-tab-group",2),t.NdJ("selectedIndexChange",function(u){return c.selectedIndex=u}),t.TgZ(3,"mat-tab",3),t._UZ(4,"b2b-sea-profile"),t.qZA(),t.TgZ(5,"mat-tab",4),t._UZ(6,"b2b-air-profile"),t.qZA()()()),2&s&&(t.Q6J("breadcrumbLabel","Tariffs"),t.xp6(2),t.Q6J("selectedIndex",c.selectedIndex))},dependencies:[p.c,C.uX,C.SP,et,Mt],styles:[".profile-wrapper[_ngcontent-%COMP%]{padding:30px}"]})}return e})()}];let Tt=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(yt),h.Bz]})}return e})();var wt=r(89611),vt=r(73599),At=r(92977),Dt=r(75870);let Zt=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[_.ez,Tt,a.p0,wt.z,vt.o,C.Nh,At.R,P.UX,x.ot,y.Ps,Dt.u]})}return e})()},70745:(A,O,r)=>{r.d(O,{c:()=>P});var _=r(97582),h=r(51791),t=r(94664),m=r(9769),p=r(65879),C=r(44112),M=r(96814);function f(w,i){if(1&w&&(p.TgZ(0,"li",2)(1,"a",3),p._uU(2),p.qZA()()),2&w){const l=i.$implicit,a=i.index,d=p.oxw();p.xp6(1),p.ekj("active",a===d.breadcrumbs.length-1),p.Q6J("routerLink",l.url)("queryParams",l.params),p.xp6(1),p.hij(" ",l.label," ")}}let P=class N{set breadcrumbLabel(i){this.label=i}constructor(i,l){this.router=i,this.route=l}ngOnInit(){this.route.data.pipe((0,t.w)(i=>(this.breadcrumbs=i?.breadcrumbs,this.route.queryParams)),(0,m.z)(i=>{const l=Object.keys(i).reduce((a,d)=>("category"!==d&&"childCategory"!==d&&(a[d]=i[d]),a),{});return Object.keys(i).forEach(a=>{if("companyId"===a){const d=this.breadcrumbs.findIndex(y=>"OFFERS"===y.label);d&&this.breadcrumbs.splice(d,1);const x=i[a].slice(0,i[a].lastIndexOf("-"));this.addBreadcrumb(x,`/b2bmarket/company/${i[a]}`)}else"category"!==a&&"childCategory"!==a||this.breadcrumbs.some(d=>d.label===i[a])||this.addBreadcrumb(i[a],`${this.breadcrumbs[this.breadcrumbs.length-1].url}/${i[a]}`,Object.keys(l).length>0?l:null)}),this.route.parent.params}),(0,m.z)(i=>{if(i?.id&&this.alreadyExist(i?.id||i?.category&&this.alreadyExist(i?.category))){const l=i?.id||i?.category,a=this.router.url.substring(0,this.router.url.indexOf(l)+l.length);this.addBreadcrumb(l,a)}return this.route.params}),(0,h.t)(this)).subscribe(i=>{if(i?.id&&this.alreadyExist(i?.id)||i?.category&&this.alreadyExist(i?.category)){const l=i?.id||i?.category,a=this.router.url.substring(0,this.router.url.indexOf(l)+l.length);this.addBreadcrumb(l,a,null,i?.category?"category":null)}if(i?.childCategory&&this.alreadyExist(i?.childCategory)){const l=this.router.url.substring(0,this.router.url.indexOf(i.childCategory)+i.childCategory.length);this.addBreadcrumb(i.childCategory,l)}i?.productId&&this.alreadyExist(i?.productId)&&this.addBreadcrumb(i.productId,this.router.url),this.label&&this.setLabel(this.label)})}setLabel(i){this.breadcrumbs[this.breadcrumbs.length-1].label=i,this.breadcrumbs[this.breadcrumbs?.length-2].url.includes("/products/")&&this.breadcrumbs.splice(this.breadcrumbs.length-2,1)}alreadyExist(i){return!this.breadcrumbs.some(l=>l.label===i)}addBreadcrumb(i,l,a,d){if(this.breadcrumbs.some(x=>"category"===x?.type)){const x=this.breadcrumbs.indexOf(this.breadcrumbs.find(y=>"category"===y?.type));this.breadcrumbs.splice(x,1)}this.breadcrumbs=[...this.breadcrumbs,{label:i,url:l,params:a,type:d}]}static#t=this.\u0275fac=function(l){return new(l||N)(p.Y36(C.F0),p.Y36(C.gz))};static#e=this.\u0275cmp=p.Xpm({type:N,selectors:[["b2b-breadcrumbs"]],inputs:{breadcrumbLabel:"breadcrumbLabel"},decls:2,vars:1,consts:[[1,"breadcrumb"],["class","breadcrumb-item",4,"ngFor","ngForOf"],[1,"breadcrumb-item"],["b2bNgxLink","",3,"routerLink","queryParams"]],template:function(l,a){1&l&&(p.TgZ(0,"ul",0),p.YNc(1,f,3,5,"li",1),p.qZA()),2&l&&(p.xp6(1),p.Q6J("ngForOf",a.breadcrumbs))},dependencies:[M.sg,C.rH],styles:[".breadcrumb[_ngcontent-%COMP%]{padding:18px 100px 0}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#222224;font-size:11px;font-weight:500;line-height:136%;letter-spacing:.66px;text-transform:uppercase}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#9fa4bb}@media (max-width: 48em){.breadcrumb[_ngcontent-%COMP%]{padding:18px;border-bottom:1px solid #9FA4BB}}"]})};P=(0,_.gn)([(0,h.c)()],P)},73599:(A,O,r)=>{r.d(O,{o:()=>p}),r(70745);var h=r(96814),t=r(44112),m=r(65879);let p=(()=>{class C{static#t=this.\u0275fac=function(P){return new(P||C)};static#e=this.\u0275mod=m.oAB({type:C});static#n=this.\u0275inj=m.cJS({imports:[h.ez,t.Bz]})}return C})()},89611:(A,O,r)=>{r.d(O,{z:()=>t});var _=r(96814),h=r(65879);let t=(()=>{class m{static#t=this.\u0275fac=function(M){return new(M||m)};static#e=this.\u0275mod=h.oAB({type:m});static#n=this.\u0275inj=h.cJS({imports:[_.ez]})}return m})()},75870:(A,O,r)=>{r.d(O,{u:()=>m});var _=r(96814),h=r(98653),t=r(65879);let m=(()=>{class p{static#t=this.\u0275fac=function(f){return new(f||p)};static#e=this.\u0275mod=t.oAB({type:p});static#n=this.\u0275inj=t.cJS({imports:[_.ez,h.w]})}return p})()}}]);