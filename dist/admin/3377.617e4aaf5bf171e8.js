"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3377],{36170:(U,S,o)=>{o.r(S),o.d(S,{AdminUsersModule:()=>xt});var l=o(96814),c=o(44112),d=o(97582),T=o(65619),O=o(78645),w=o(52572),I=o(9769),y=o(27921),E=o(94664),f=o(37398),x=o(32181),g=o(81374),v=o(51791),C=o(48530),m=o(19347),b=o(66027),_=o(86825),e=o(65879),h=o(56223),R=o(83498),N=o(17856);function j(n,s){1&n&&(e.TgZ(0,"p",5),e._uU(1," This field is required! "),e.qZA()),2&n&&e.Q6J("@fadeInOut",void 0)}function H(n,s){1&n&&(e.TgZ(0,"p",5),e._uU(1," Please use only number "),e.qZA()),2&n&&e.Q6J("@fadeInOut",void 0)}let $=(()=>{class n{constructor(t,i,a){this.dialogRef=t,this.data=i,this.fb=a,this.b2bNgxButtonThemeEnum=C.n,this.b2bNgxInputThemeEnum=b.T,this.currentValueQuotes=this.data.currentValue,this.quotesValue=this.currentValueQuotes,this.form=this.fb.group({quotesNumber:[""]}),this.formState=this.form.controls}ngOnInit(){}confirmChanges(){this.dialogRef.close(+this.quotesValue)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(m.so),e.Y36(m.WI),e.Y36(h.qu))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["b2b-change-quotes-amount-dialog"]],decls:9,vars:7,consts:[[1,"modal-wrapper"],[3,"formGroup"],["formControlName","quotesNumber","b2bNgxInput","",3,"theme","ngModel","ngModelChange"],["class","error",4,"ngIf"],["b2bNgxButton","",3,"theme","click"],[1,"error"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1)(4,"input",2),e.NdJ("ngModelChange",function(p){return a.quotesValue=p}),e.qZA(),e.YNc(5,j,2,1,"p",3),e.YNc(6,H,2,1,"p",3),e.TgZ(7,"button",4),e.NdJ("click",function(){return a.confirmChanges()}),e._uU(8," Confirm "),e.qZA()()()),2&i&&(e.xp6(2),e.hij("Current quotes value: ",a.currentValueQuotes,""),e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(1),e.Q6J("theme",a.b2bNgxInputThemeEnum.BACKGROUND_GRAY)("ngModel",a.quotesValue),e.xp6(1),e.Q6J("ngIf",a.formState.quotesNumber.touched&&(null==a.formState.quotesNumber.errors?null:a.formState.quotesNumber.errors.required)),e.xp6(1),e.Q6J("ngIf",a.formState.quotesNumber.touched&&(null==a.formState.quotesNumber.errors?null:a.formState.quotesNumber.errors.number)),e.xp6(1),e.Q6J("theme",a.b2bNgxButtonThemeEnum.BACKGROUND_BLUE))},dependencies:[l.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,R.f,N.k],styles:["[_nghost-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{width:300px;height:200px}[_nghost-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-size:14px;color:#e63d3d;margin-top:11px;margin-bottom:0}[_nghost-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:15px 40px;width:100%;margin-top:20px}"],data:{animation:[(0,_.X$)("fadeInOut",[(0,_.eR)(":enter",[(0,_.oB)({opacity:0}),(0,_.jt)(500,(0,_.oB)({opacity:1}))]),(0,_.eR)(":leave",[(0,_.jt)(500,(0,_.oB)({opacity:0}))])])]}})}return n})();var k,q=o(94045),L=o(60668),X=o(17706),ee=o(58133),te=o(87588),ne=o(6255),ie=o(30395),ae=o(87046),oe=o(77247),re=o(88657),se=o(94546),le=o(62033),ce=o(56555),de=o(15589),J=o(26238);let z=k=class V{constructor(s,t){this.formBuilder=s,this._authService=t,this.socialAuthTypesOptions=[{value:"google",label:"Google"},{value:"linkedin",label:"LinkedIn"},{value:"otherRegistrations",label:"Other registrations"}],this.onChange=i=>{},this.onTouched=()=>{},this.b2bNgxSelectThemeEnum=ae.B,this.b2bNgxInputThemeEnum=b.T,this.parsedCategories=[],this.range={start:new Date,end:new Date},this.userRoles$=this.getRoles()}ngOnChanges(s){s&&s.categories.currentValue&&s.categories.currentValue.length&&(this.parsedCategories=s.categories.currentValue.map(t=>({text:t.name,value:t._id,collapsed:!0,checked:!1,children:t.children.map(i=>({text:i.name,value:i._id,collapsed:!0,checked:!1,children:i.children.map(a=>({text:a.name,value:a._id,collapsed:!0,checked:!1}))}))})))}ngOnInit(){this.filtersForm=this.formBuilder.group({userType:null,registrationDate:this.formBuilder.control({startDate:null,endDate:null}),fullName:null,company:null,email:null,phone:null,country:null,excludeCountry:null,website:null,preferences:[],categoryOneOrFilterType:!1,categoryTwoOrFilterType:!1,categoryThreeOrFilterType:!1,lastActivity:this.formBuilder.control({startDate:null,endDate:null}),titleOffer:null,offerTime:this.formBuilder.control({startDate:null,endDate:null}),socialAuthType:""}),this.filtersForm.valueChanges.pipe((0,v.t)(this)).subscribe(s=>{this.onChange(s)})}getRoles(){return this._authService.getRoles().pipe()}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}writeValue(s){}static#e=this.\u0275fac=function(t){return new(t||V)(e.Y36(h.qu),e.Y36(oe.e))};static#t=this.\u0275cmp=e.Xpm({type:V,selectors:[["b2b-admin-users-filters"]],inputs:{categories:"categories"},features:[e._Bn([{provide:h.JU,useExisting:(0,e.Gpc)(()=>k),multi:!0}]),e.TTD],decls:37,vars:25,consts:[[1,"admin-users-filters",3,"formGroup"],[1,"admin-users-filters__wrapper"],["formControlName","userType","placeholder","Select user type","bindValue","_id","bindLabel","displayName",3,"options","multiple","theme"],["b2bNgxInput","","ngxDaterangepickerMd","","label","Registration Time","type","text","formControlName","registrationDate","name","daterange",3,"theme","showClearButton"],["b2bNgxInput","","label","Full Name","placeholder","Enter full name","type","text","matInput","","formControlName","fullName","name","fullName",3,"theme"],["b2bNgxInput","","label","Company","placeholder","Enter company","type","text","matInput","","formControlName","company","name","company",3,"theme"],["b2bNgxInput","","label","Email","placeholder","Enter email","type","text","matInput","","formControlName","email","name","email",3,"theme"],["formControlName","country","placeholder","Select Country",3,"multiple","theme"],["formControlName","excludeCountry","placeholder","Select Country to exclude",3,"multiple","theme"],["b2bNgxInput","","label","Website","type","text","placeholder","Enter website","matInput","","formControlName","website","name","website",3,"theme"],["b2bNgxInput","","ngxDaterangepickerMd","","label","Last Activity","type","text","formControlName","lastActivity","name","daterange",3,"theme","showClearButton"],["b2bNgxInput","","ngxDaterangepickerMd","","label","Offers placed time","type","text","formControlName","offerTime","name","daterange",3,"theme","showClearButton"],["placeholder","phone number","formControlName","phone",3,"theme"],["formControlName","socialAuthType","placeholder","Select social auth type","bindValue","value","bindLabel","label",3,"options","multiple","theme"],[1,"admin-users-filters__categories"],["formControlName","preferences","theme","white","label","Preferences","position","right",3,"items"],[1,"admin-users-filters__categories--toggles"],["formControlName","categoryOneOrFilterType","customLabel","category__1 OR"],["formControlName","categoryTwoOrFilterType","customLabel","category__2 OR"],["formControlName","categoryThreeOrFilterType","customLabel","category__3 OR"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div")(3,"b2b-ngx-select",2),e.ALo(4,"async"),e._uU(5,"User type"),e.qZA()(),e.TgZ(6,"div"),e._UZ(7,"input",3),e.qZA(),e.TgZ(8,"div"),e._UZ(9,"input",4),e.qZA(),e.TgZ(10,"div"),e._UZ(11,"input",5),e.qZA(),e.TgZ(12,"div"),e._UZ(13,"input",6),e.qZA(),e.TgZ(14,"div")(15,"b2b-ngx-country-select",7),e._uU(16,"Country"),e.qZA()(),e.TgZ(17,"div")(18,"b2b-ngx-country-select",8),e._uU(19,"Country"),e.qZA(),e._UZ(20,"input",9),e.qZA(),e.TgZ(21,"div"),e._UZ(22,"input",10),e.qZA(),e.TgZ(23,"div"),e._UZ(24,"input",11),e.qZA(),e.TgZ(25,"div")(26,"b2b-ngx-tel",12),e._uU(27,"Phone"),e.qZA()(),e.TgZ(28,"div")(29,"b2b-ngx-select",13),e._uU(30,"Social auth type"),e.qZA()()(),e.TgZ(31,"div",14),e._UZ(32,"b2b-ngx-treeview",15),e.TgZ(33,"div",16),e._UZ(34,"b2b-ngx-toggle",17)(35,"b2b-ngx-toggle",18)(36,"b2b-ngx-toggle",19),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.filtersForm),e.xp6(3),e.Q6J("options",e.lcZ(4,23,i.userRoles$))("multiple",!0)("theme",i.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),e.xp6(4),e.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE)("showClearButton",!0),e.xp6(2),e.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(2),e.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(2),e.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(2),e.Q6J("multiple",!0)("theme",i.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),e.xp6(3),e.Q6J("multiple",!0)("theme",i.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),e.xp6(2),e.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(2),e.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE)("showClearButton",!0),e.xp6(2),e.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE)("showClearButton",!0),e.xp6(2),e.Q6J("theme",i.b2bNgxInputThemeEnum.BACKGROUND_WHITE),e.xp6(3),e.Q6J("options",i.socialAuthTypesOptions)("multiple",!0)("theme",i.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),e.xp6(3),e.Q6J("items",i.parsedCategories))},dependencies:[h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,re.B,se.Z,N.k,le.V,ce.t,de.X,J.SP,l.Ov],styles:[".admin-users-filters__wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:end}.admin-users-filters__wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:20%}.admin-users-filters__wrapper[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{background-color:#fff}.admin-users-filters__categories[_ngcontent-%COMP%]{margin-top:10px;width:45%}.admin-users-filters__categories[_ngcontent-%COMP%]   b2b-ngx-treeview[_ngcontent-%COMP%]{width:88%}.admin-users-filters__categories[_ngcontent-%COMP%]   b2b-ngx-toggle[_ngcontent-%COMP%]{margin-top:20px}.admin-users-filters__categories--toggles[_ngcontent-%COMP%]{margin-top:5px;display:flex}"]})};z=k=(0,d.gn)([(0,v.c)()],z);const pe=["headerCategoryOne"],ge=["editCategoryOne"],me=["headerCategoryTwo"],ue=["editCategoryTwo"],he=["headerPreferences"],_e=["editPreferences"],fe=["headerOffers"],ve=["editOffers"],be=["headerOffersDate"],xe=["editOffersDate"],Ce=["headerActions"],ye=["editActions"],Oe=["headerSoldCargo"],Te=["editSoldCargo"];function Me(n,s){1&n&&(e.TgZ(0,"strong"),e._uU(1,"category__1"),e.qZA())}function Se(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Oqu(t.name)}}function Ie(n,s){1&n&&e.YNc(0,Se,2,1,"span",20),2&n&&e.Q6J("ngForOf",s.value)}function Pe(n,s){1&n&&(e.TgZ(0,"strong"),e._uU(1,"Prefered cargo"),e.qZA())}function De(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij("",t.name+", "," ")}}function Ae(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw().row,p=e.oxw();return e.KtG(p.showMore(a,r))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().row,i=e.oxw();e.Q6J("theme",i.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),e.xp6(1),e.hij(" ",null!=t&&t.visible?"Show less":"Show More"," ")}}function we(n,s){if(1&n&&(e.TgZ(0,"div",21),e.YNc(1,De,2,1,"span",20),e.qZA(),e.YNc(2,Ae,2,2,"button",22)),2&n){const t=s.row,i=s.value;e.ekj("show",t&&(null==t?null:t.visible)),e.xp6(1),e.Q6J("ngForOf",i),e.xp6(1),e.Q6J("ngIf",t.category__3.length>3)}}function Ee(n,s){1&n&&(e.TgZ(0,"strong"),e._uU(1,"Placed offers (offer title)"),e.qZA())}function Ne(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Oqu(t.title+", ")}}function Re(n,s){1&n&&e.YNc(0,Ne,2,1,"span",20),2&n&&e.Q6J("ngForOf",s.value)}function Be(n,s){1&n&&(e.TgZ(0,"strong"),e._uU(1,"Placed_offers_data"),e.qZA())}function Ue(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.date,"yy-MM-dd")+", ")}}function Fe(n,s){1&n&&e.YNc(0,Ue,3,4,"span",20),2&n&&e.Q6J("ngForOf",s.value)}function Le(n,s){1&n&&(e.TgZ(0,"strong"),e._uU(1,"Sold_cargo"),e.qZA())}function ke(n,s){if(1&n&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title+" | [ "+t.reasonForDeletion+" ], ")}}function ze(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ke,3,1,"div",24),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t.deleted&&t.reasonForDeletion)}}function Ze(n,s){1&n&&e.YNc(0,ze,2,1,"div",20),2&n&&e.Q6J("ngForOf",s.value)}function Ge(n,s){1&n&&(e.TgZ(0,"strong"),e._uU(1,"Actions"),e.qZA())}function Ve(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(a){const p=e.CHM(t).value,u=e.oxw();return e.KtG(u.deleteUser(a,p))}),e._uU(1," Delete "),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("theme",t.b2bNgxButtonThemeEnum.BACKGROUND_BLACK)}}const We=[{path:"",component:(()=>{let n=class W{constructor(t,i,a,r,p,u,P,M,B){this._userService=t,this._hotToastrService=i,this._apiService=a,this._categoriesService=r,this._router=p,this._formBuilder=u,this.dialog=P,this.changeDetectionRef=M,this.platformService=B,this.b2bNgxButtonThemeEnum=C.n,this.pageSubject=new T.X(null),this.forceSubject=new O.x,this.filtersSubject=new T.X(null),this.columnMode=L.hq,this.columns=[],this.MILLISECOND_IN_ONE_DAY=864e5,this.users$=this.getUsers$(),this.emailSubmissionForm=u.group({email:["",[h.kI.required,h.kI.email]]}),this.totalCount=0,this.page=0}ngOnInit(){this.columns=this.getColumns(),this.filtersControl=this._formBuilder.control({}),this.filtersControl.valueChanges.pipe((0,v.t)(this)).subscribe(t=>{const{preferences:i=[],categoryOneOrFilterType:a,categoryTwoOrFilterType:r,categoryThreeOrFilterType:p,...u}=t,P=new Date(u.registrationDate.startDate).getTime()===new Date(u.registrationDate.endDate).getTime(),M=new Date(u.lastActivity.startDate).getTime()===new Date(u.lastActivity.endDate).getTime(),B=new Date(u.offerTime.startDate).getTime()===new Date(u.offerTime.endDate).getTime(),Y={...u,phone:u?.phone?.e164Number?u.phone.e164Number.replace("+",""):null,registrationDate:u.registrationDate.startDate?`${new Date(new Date(u.registrationDate.startDate).getTime()+this.MILLISECOND_IN_ONE_DAY).toISOString().split("T")[0]},${new Date(new Date(u.registrationDate.endDate).getTime()+(P?this.MILLISECOND_IN_ONE_DAY:0)).toISOString().split("T")[0]}`:null,lastActivity:u.lastActivity.startDate?`${new Date(new Date(u.lastActivity.startDate).getTime()+this.MILLISECOND_IN_ONE_DAY).toISOString().split("T")[0]},${new Date(new Date(u.lastActivity.endDate).getTime()+(M?this.MILLISECOND_IN_ONE_DAY:0)).toISOString().split("T")[0]}`:null,offerTime:u.offerTime.startDate?`${new Date(new Date(u.offerTime.startDate).getTime()+this.MILLISECOND_IN_ONE_DAY).toISOString().split("T")[0]},${new Date(new Date(u.offerTime.endDate).getTime()+(B?this.MILLISECOND_IN_ONE_DAY:0)).toISOString().split("T")[0]}`:null,categories:!!i&&i.filter(D=>1===this.parsedCategories[D].level).map(D=>this.parsedCategories[D].name).join(a?"OR":"AND"),categoryPosts:!!i&&i.filter(D=>2===this.parsedCategories[D].level).map(D=>this.parsedCategories[D].name).join(r?"OR":"AND"),preferredCargo:!!i&&i.filter(D=>3===this.parsedCategories[D].level).map(D=>this.parsedCategories[D].name).join(p?"OR":"AND")};this.pageSubject.next(0),this.filtersSubject.next(Y)})}export(){const t=this.pageSubject.getValue(),i=this.filtersSubject.getValue();this._userService.getUsersCsv(t,10,i).pipe((0,v.t)(this)).subscribe(a=>{if(this.platformService.isServer)return;const r=window.URL.createObjectURL(a),p=document.createElement("a");p.href=r,p.download="users.csv",p.click()})}getUsers$(){const t=this.getCategories(),i=this.pageSubject.asObservable().pipe((0,y.O)(0)),a=this.forceSubject.asObservable().pipe((0,y.O)(!0)),r=this.filtersSubject.asObservable();return(0,w.a)([t,i,a,r]).pipe((0,E.w)(([p,u,P,M])=>this._userService.getUsers(u,P,M).pipe((0,f.U)(B=>({categories:p,res:B})))),(0,f.U)(p=>{this.categories=p.categories.categories;const P=this.formatUsersPreferences(p.categories,p.res.users).map(M=>({...M,country:M.country||(M.phone?.countryCode?M.phone.countryCode:null),...M.lastActivity?{lastActivity:new Date(new Date(M.lastActivity).getTime()).toISOString().split("T")[0]}:{}}));return this.totalCount=p.res.totalCount,P}))}formatUsersPreferences(t,i){return t.categories.length&&i&&i.length?(this.parsedCategories=this.parseCategories(t.categories),i.map(a=>{const r=a.preferences.map(p=>this.parsedCategories[p]);return{...a,visible:!1,category__1:r.filter(p=>1===p?.level),category__2:r.filter(p=>2===p?.level),category__3:r.filter(p=>3===p?.level)}})):[]}showMore(t,i){t.stopImmediatePropagation(),this.users$=this.users$.pipe((0,v.t)(this),(0,f.U)(a=>{const r=a.findIndex(p=>p._id===i._id);return r>=0&&(a[r].visible=!a[r].visible||!1),a}))}parseCategories(t,i=1){return"string"!=typeof t?t?.reduce((a,r)=>({...a,[r._id]:{...r,level:i},...r.children&&r.children.length?this.parseCategories([...r.children],i+1):[]}),{}):null}onClick(t){"click"!==t.type||"Quotes"!==t.column.name?"click"===t.type&&this._router.navigate([this._router.url,t.row._id]):this.dialog.open($,{data:{currentValue:t.row.rfqQuotes??0}}).afterClosed().pipe((0,x.h)(i=>!!i),(0,f.U)(i=>this._userService.updateUserQuotes(t.row._id,i).subscribe(()=>{this.changeDetectionRef.detectChanges()}))).subscribe()}getCategories(){return this._categoriesService.getCategories$()}setPage(t){this.page=t.offset,this.pageSubject.next(t.offset)}deleteUser(t,i){t.stopImmediatePropagation(),this.dialog.open(q.z,{data:{title:"Delete User",message:"Are you sure you want to delete user?",confirmButtonText:"Delete",confirmButtonTheme:C.n.BACKGROUND_RED,cancelButtonText:"Cancel",cancelButtonTheme:C.n.OUTLINE_BLACK}}).afterClosed().pipe((0,x.h)(a=>!!a),(0,I.z)(()=>this._userService.deleteUserById(i).pipe((0,v.t)(this),this._hotToastrService.observe({loading:"User deleting",success:"User deleted",error:"User deleting failed"})))).subscribe(()=>{this.forceSubject.next(!0)})}stopImmediatePropagation(t){}getColumns(){return[{name:"Type of User",prop:"role.displayName"},{name:"Quotes",prop:"rfqQuotes"},{name:"Registration date/time",prop:"createdAt",pipe:{transform:t=>new l.uU("en-US").transform(t,"yyyy-MM-dd")}},{name:"Full name",prop:"fullName"},{name:"Company(optional)",prop:"company"},{name:"Email",prop:"email"},{name:"Phone number",prop:"phone.e164Number"},{name:"Country",prop:"country"},{name:"Country(by phone number)",prop:"phone.countryCode"},{name:"Website",prop:"site"},{name:"Email confirmed",prop:"emailConfirmed"},{name:"Social auth type",prop:"socialAuthType"},{cellTemplate:this.editCategoryOne,headerTemplate:this.headerCategoryOne,prop:"category__1"},{cellTemplate:this.editPreferences,headerTemplate:this.headerPreferences,prop:"category__3"},{name:"Last activity",prop:"lastActivity"},{cellTemplate:this.editOffers,headerTemplate:this.headerOffers,prop:"offers"},{cellTemplate:this.editOffersDate,headerTemplate:this.headerOffersDate,prop:"offers"},{cellTemplate:this.editSoldCargo,headerTemplate:this.headerSoldCargo,prop:"offers"},{cellTemplate:this.editActions,headerTemplate:this.headerActions,prop:"_id"}]}sendList(){this._userService.sendVerificationLink(this.emailSubmissionForm.value.email).pipe((0,g.P)()).subscribe(({message:t})=>{this.emailSubmissionForm.reset(),this._hotToastrService.success(t)})}static#e=this.\u0275fac=function(i){return new(i||W)(e.Y36(X.K),e.Y36(ee.jE),e.Y36(te.s),e.Y36(ne.G),e.Y36(c.F0),e.Y36(h.qu),e.Y36(m.uw),e.Y36(e.sBO),e.Y36(ie.m))};static#t=this.\u0275cmp=e.Xpm({type:W,selectors:[["b2b-admin-users"]],viewQuery:function(i,a){if(1&i&&(e.Gf(pe,7),e.Gf(ge,7),e.Gf(me,7),e.Gf(ue,7),e.Gf(he,7),e.Gf(_e,7),e.Gf(fe,7),e.Gf(ve,7),e.Gf(be,7),e.Gf(xe,7),e.Gf(Ce,7),e.Gf(ye,7),e.Gf(Oe,7),e.Gf(Te,7)),2&i){let r;e.iGM(r=e.CRH())&&(a.headerCategoryOne=r.first),e.iGM(r=e.CRH())&&(a.editCategoryOne=r.first),e.iGM(r=e.CRH())&&(a.headerCategoryTwo=r.first),e.iGM(r=e.CRH())&&(a.editCategoryTwo=r.first),e.iGM(r=e.CRH())&&(a.headerPreferences=r.first),e.iGM(r=e.CRH())&&(a.editPreferences=r.first),e.iGM(r=e.CRH())&&(a.headerOffers=r.first),e.iGM(r=e.CRH())&&(a.editOffers=r.first),e.iGM(r=e.CRH())&&(a.headerOffersDate=r.first),e.iGM(r=e.CRH())&&(a.editOffersDate=r.first),e.iGM(r=e.CRH())&&(a.headerActions=r.first),e.iGM(r=e.CRH())&&(a.editActions=r.first),e.iGM(r=e.CRH())&&(a.headerSoldCargo=r.first),e.iGM(r=e.CRH())&&(a.editSoldCargo=r.first)}},decls:35,vars:19,consts:[[1,"admin-users"],[1,"email-submission-form",3,"formGroup","ngSubmit"],["b2bNgxInput","","placeholder","Enter email","formControlName","email"],["b2bNgxButton","",1,"admin-offers__button",3,"disabled","theme"],["b2bNgxButton","",1,"admin-offers__button",3,"theme","click"],[3,"categories","formControl"],[1,"admin-users__table"],["rowHeight","auto",1,"material",3,"rows","columns","columnMode","headerHeight","footerHeight","scrollbarH","externalPaging","count","offset","limit","virtualization","activate","scroll","page"],["headerCategoryOne",""],["editCategoryOne",""],["headerPreferences",""],["editPreferences",""],["headerOffers",""],["editOffers",""],["headerOffersDate",""],["editOffersDate",""],["headerSoldCargo",""],["editSoldCargo",""],["headerActions",""],["editActions",""],[4,"ngFor","ngForOf"],[1,"custom"],["b2bNgxButton","",3,"theme","click",4,"ngIf"],["b2bNgxButton","",3,"theme","click"],[4,"ngIf"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.sendList()}),e._UZ(2,"input",2),e.TgZ(3,"button",3),e._uU(4," Send list "),e.qZA()(),e.TgZ(5,"button",4),e.NdJ("click",function(){return a.export()}),e._uU(6," Export "),e.qZA(),e._UZ(7,"b2b-admin-users-filters",5),e.TgZ(8,"div",6)(9,"ngx-datatable",7),e.NdJ("activate",function(p){return a.onClick(p)})("scroll",function(p){return a.stopImmediatePropagation(p)})("page",function(p){return a.setPage(p)}),e.ALo(10,"async"),e.qZA(),e.YNc(11,Me,2,0,"ng-template",null,8,e.W1O),e.YNc(13,Ie,1,1,"ng-template",null,9,e.W1O),e.YNc(15,Pe,2,0,"ng-template",null,10,e.W1O),e.YNc(17,we,3,4,"ng-template",null,11,e.W1O),e.YNc(19,Ee,2,0,"ng-template",null,12,e.W1O),e.YNc(21,Re,1,1,"ng-template",null,13,e.W1O),e.YNc(23,Be,2,0,"ng-template",null,14,e.W1O),e.YNc(25,Fe,1,1,"ng-template",null,15,e.W1O),e.YNc(27,Le,2,0,"ng-template",null,16,e.W1O),e.YNc(29,Ze,1,1,"ng-template",null,17,e.W1O),e.YNc(31,Ge,2,0,"ng-template",null,18,e.W1O),e.YNc(33,Ve,2,1,"ng-template",null,19,e.W1O),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("formGroup",a.emailSubmissionForm),e.xp6(2),e.Q6J("disabled",a.emailSubmissionForm.invalid)("theme",a.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),e.xp6(2),e.Q6J("theme",a.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),e.xp6(2),e.Q6J("categories",a.categories)("formControl",a.filtersControl),e.xp6(2),e.Q6J("rows",e.lcZ(10,17,a.users$))("columns",a.columns)("columnMode",a.columnMode.force)("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("externalPaging",!0)("count",a.totalCount)("offset",a.page)("limit",10)("virtualization",!1))},dependencies:[l.sg,l.O5,h._Y,h.Fj,h.JJ,h.JL,h.oH,h.sg,h.u,R.f,L.nE,N.k,z,l.Ov,l.uU],styles:[".admin-users[_ngcontent-%COMP%]{padding:30px}.admin-users__table[_ngcontent-%COMP%]{margin-top:20px}.email-submission-form[_ngcontent-%COMP%]{display:flex;height:40px;gap:30px;margin-bottom:30px}.email-submission-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:400px}.email-submission-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 30px;margin:0}.admin-offers__button[_ngcontent-%COMP%]{display:inline-block;padding:7.5px 15px;margin:0 15px 15px;border-radius:5px}.admin-offers__button[_ngcontent-%COMP%]:first-child{margin-left:0}.admin-offers__button[_ngcontent-%COMP%]:last-child{margin-right:0}  .datatable-row-detail{width:100vw}  .datatable-header{min-width:100%}  .datatable-body{min-width:100%}  .datatable-body-cell button{margin-top:10px}  .datatable-body-cell .custom{height:45px;overflow:hidden}  .datatable-body-cell .show{overflow:visible;height:auto}"],changeDetection:0})};return n=(0,d.gn)([(0,v.c)()],n),n})()}];let Qe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(We),c.Bz]})}return n})();var Je=o(52748),Ke=o(86461),Ye=o(43377),je=o(98653),He=o(89611),$e=o(74027),qe=o(23031),Xe=o(82242),et=o(80150),tt=o(93374),nt=o(16894),it=o(32296),K=o(69594),F=o(23680),at=o(41043),ot=o(16672);const dt={provide:new e.OlP("mat-select-scroll-strategy"),deps:[K.aV],useFactory:function ct(n){return()=>n.scrollStrategies.reposition()}};let pt=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[dt],imports:[l.ez,K.U8,F.Ng,F.BQ,ot.ZD,at.lN,F.Ng,F.BQ]})}return n})();var gt=o(92596);let Z=(()=>{class n{constructor(){this.changes=new O.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,i,a)=>{if(0==a||0==i)return`0 of ${a}`;const r=t*i;return`${r+1} \u2013 ${r<(a=Math.max(a,0))?Math.min(r+i,a):r+i} of ${a}`}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ft={provide:Z,deps:[[new e.FiY,new e.tp0,Z]],useFactory:function _t(n){return n||new Z}};let vt=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[ft],imports:[l.ez,it.ot,pt,gt.AV]})}return n})();var bt=o(25313);o(38633);let xt=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[l.ez,h.u5,m.Is,h.UX,Qe,Je.ED,Ke.A,Ye.l,je.w,He.z,L.xD,$e.F,qe.c,Xe.r,et.N,tt.e,nt.X5.forRoot(),J.n1.forRoot(),vt,bt.p0]})}return n})()},64636:(U,S,o)=>{o.d(S,{J:()=>v});var l=o(97582),c=o(65879),d=o(92438),T=o(51791),O=o(836),w=o(32181),I=o(96814),y=o(83498),E=o(53803);function f(C,m){if(1&C){const b=c.EpF();c.TgZ(0,"li")(1,"button",6),c.NdJ("click",function(e){const R=c.CHM(b).$implicit,N=c.oxw(2);return c.KtG(N.callOptionFunc(e,R))}),c._UZ(2,"img",7),c.TgZ(3,"span"),c._uU(4),c.qZA()()()}if(2&C){const b=m.$implicit;c.xp6(2),c.Q6J("name",b.icon),c.xp6(1),c.Tol(b.className+" ngx-dropdown-text"),c.xp6(1),c.Oqu(b.label)}}function x(C,m){if(1&C&&(c.TgZ(0,"ul",4),c.YNc(1,f,5,4,"li",5),c.qZA()),2&C){const b=c.oxw();c.xp6(1),c.Q6J("ngForOf",b.options)}}const g=["*"];let v=class Q{constructor(m){this.changeDetection=m,this.isMenuShow=!1,this.toggleOptionClick=new c.vpe}callOptionFunc(m,b){this.isMenuShow=!1,m.preventDefault(),m.stopImmediatePropagation(),b.onClick(this.optionToReturn||b,this.requiredOptionToCheck)}get menuClassName(){return`${this.className} `}subscribeOnClickOutside(m){const b=(0,d.R)(document,"click").pipe((0,O.T)(1),(0,T.t)(this),(0,w.h)(_=>!m.contains(_.target))).subscribe(()=>{this.isMenuShow=!1,this.changeDetection.detectChanges(),b.unsubscribe()})}showMenu(m,b){this.isMenuShow=!this.isMenuShow,m.stopImmediatePropagation(),m.preventDefault(),this.isMenuShow&&this.subscribeOnClickOutside(b)}static#e=this.\u0275fac=function(b){return new(b||Q)(c.Y36(c.sBO))};static#t=this.\u0275cmp=c.Xpm({type:Q,selectors:[["b2b-ngx-dropdown"]],inputs:{options:"options",requiredOptionToCheck:"requiredOptionToCheck",className:"className",optionToReturn:"optionToReturn"},outputs:{toggleOptionClick:"toggleOptionClick"},ngContentSelectors:g,decls:5,vars:1,consts:[[1,"ngx-dropdown-container"],["container",""],[3,"click"],["class","ngx-dropdown",4,"ngIf"],[1,"ngx-dropdown"],[4,"ngFor","ngForOf"],["b2bNgxButton","",1,"ngx-dropdown-button",3,"click"],["b2bNgxIcon","",1,"ngx-dropdown-button-icon",3,"name"]],template:function(b,_){if(1&b){const e=c.EpF();c.F$t(),c.TgZ(0,"div",0,1)(2,"div",2),c.NdJ("click",function(R){c.CHM(e);const N=c.MAs(1);return c.KtG(_.showMenu(R,N))}),c.Hsn(3),c.qZA(),c.YNc(4,x,2,1,"ul",3),c.qZA()}2&b&&(c.xp6(4),c.Q6J("ngIf",_.isMenuShow))},dependencies:[I.sg,I.O5,y.f,E.p],styles:[".ngx-dropdown-container[_ngcontent-%COMP%]{position:relative}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]{position:absolute;z-index:2;background:#ffffff;box-shadow:0 2px 12px #0f0f1129;border-radius:4px;width:180px;right:0}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px;width:100%}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]:hover{background-color:#eff4fa}.ngx-dropdown-container[_ngcontent-%COMP%]   .ngx-dropdown[_ngcontent-%COMP%]   .ngx-dropdown-button[_ngcontent-%COMP%]   .ngx-dropdown-text[_ngcontent-%COMP%]{text-align:left;font-weight:500;font-size:13px;line-height:18px;color:#0f0f11;margin-left:12px}"],changeDetection:0})};v=(0,l.gn)([(0,T.c)()],v)},52748:(U,S,o)=>{o.d(S,{ED:()=>w,Yr:()=>I}),o(64636);var c=o(96814),d=o(43377),T=o(98653),O=o(65879);let w=(()=>{class y{static#e=this.\u0275fac=function(x){return new(x||y)};static#t=this.\u0275mod=O.oAB({type:y});static#n=this.\u0275inj=O.cJS({imports:[c.ez,d.l,T.w]})}return y})();var I=function(y){return y.RESTORE="Restore",y.ARCHIVE="Archive",y.DELETE="Delete",y.EDIT="Edit",y}(I||{})},56555:(U,S,o)=>{o.d(S,{t:()=>E});var l=o(65879),c=o(56223),d=o(14016),T=o(96814);function O(f,x){1&f&&(l.TgZ(0,"span",6),l._uU(1,"Visible"),l.qZA())}function w(f,x){1&f&&(l.TgZ(0,"span",7),l._uU(1,"Hidden"),l.qZA())}function I(f,x){if(1&f&&(l.TgZ(0,"span",7),l._uU(1),l.qZA()),2&f){const g=l.oxw(2);l.xp6(1),l.Oqu(g.customLabel)}}function y(f,x){if(1&f&&(l.ynx(0),l.YNc(1,O,2,0,"span",4),l.YNc(2,w,2,0,"span",5),l.YNc(3,I,2,1,"span",5),l.BQk()),2&f){const g=l.oxw();l.xp6(1),l.Q6J("ngIf",!g.customLabel&&g.formControl.value),l.xp6(1),l.Q6J("ngIf",!g.customLabel&&!g.formControl.value),l.xp6(1),l.Q6J("ngIf",g.customLabel)}}let E=(()=>{class f{constructor(g){this._changeDetectorRef=g,this.placeholder="",this.errors={},this.customLabel="",this.emptyLabel=!1,this.subcategories=!1,this.toggled=!1,this.change=new l.vpe,this.type="checkbox",this.onChange=()=>null,this.onTouched=()=>null,this.formControl=new c.NI(!1),this.id=(0,d.U)()}get error(){if(!this.errors)return"";const g=Object.keys(this.errors)[0];return this.errors[g]}ngOnInit(){this.subscribeOnValueChanges()}ngOnChanges(g){g.errors&&this.formControl.setErrors(g.errors.currentValue)}validate(){return this.formControl.errors}subscribeOnValueChanges(){this.formControl.valueChanges.pipe().subscribe(g=>{this.onChange(g)})}registerOnChange(g){this.onChange=g}registerOnTouched(g){this.onTouched=g}writeValue(g){this.formControl.setValue(g,{emitEvent:!1}),this.toggled=g,this._changeDetectorRef.detectChanges()}setDisabledState(g){g?this.formControl.disable():this.formControl.enable()}emitToggleChange(){this.toggled=!this.toggled,this.change.emit()}static#e=this.\u0275fac=function(v){return new(v||f)(l.Y36(l.sBO))};static#t=this.\u0275cmp=l.Xpm({type:f,selectors:[["b2b-ngx-toggle"]],inputs:{placeholder:"placeholder",errors:"errors",customLabel:"customLabel",emptyLabel:"emptyLabel",subcategories:"subcategories",toggled:"toggled"},outputs:{change:"change"},features:[l._Bn([{provide:c.JU,useExisting:(0,l.Gpc)(()=>f),multi:!0},{provide:c.Cf,useExisting:(0,l.Gpc)(()=>f),multi:!0}]),l.TTD],decls:4,vars:5,consts:[[1,"ngx-toggle"],[4,"ngIf"],["type","checkbox",1,"ngx-toggle-input",3,"formControl","ngModel","click","ngModelChange"],[1,"ngx-toggle-custom-input"],["class","ngx-toggle-label-visible",4,"ngIf"],["class","ngx-toggle-label-hidden",4,"ngIf"],[1,"ngx-toggle-label-visible"],[1,"ngx-toggle-label-hidden"]],template:function(v,C){1&v&&(l.TgZ(0,"label",0),l.YNc(1,y,4,3,"ng-container",1),l.TgZ(2,"input",2),l.NdJ("click",function(){return C.emitToggleChange()})("ngModelChange",function(b){return C.toggled=b}),l.qZA(),l._UZ(3,"span",3),l.qZA()),2&v&&(l.ekj("subcategories",C.subcategories),l.xp6(1),l.Q6J("ngIf",!C.emptyLabel),l.xp6(1),l.Q6J("formControl",C.formControl)("ngModel",C.toggled))},dependencies:[T.O5,c.Wl,c.JJ,c.oH],styles:['.ngx-toggle[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;padding-left:60px;font-size:12px;color:gray;height:26px}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-input[_ngcontent-%COMP%]{opacity:0;height:100%;width:100%}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background-color:#0f0f11}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{transform:translate(26px)}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-custom-input[_ngcontent-%COMP%]{position:absolute;cursor:pointer;left:0;top:0;background-color:#556274;transition:.4s;width:52px;height:100%;border-radius:34px}.ngx-toggle[_ngcontent-%COMP%]   .ngx-toggle-custom-input[_ngcontent-%COMP%]:before{position:absolute;content:"";border-radius:50%;height:18px;width:18px;left:4px;bottom:4px;background-color:#fff;transition:.4s}.ngx-toggle.subcategories[_ngcontent-%COMP%]{height:20px;padding-left:27px}.ngx-toggle.subcategories[_ngcontent-%COMP%]   .ngx-toggle-input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{transform:translate(19px)}.ngx-toggle.subcategories[_ngcontent-%COMP%]   .ngx-toggle-custom-input[_ngcontent-%COMP%]{width:40px}.ngx-toggle.subcategories[_ngcontent-%COMP%]   .ngx-toggle-custom-input[_ngcontent-%COMP%]:before{width:14px;height:14px;bottom:3px}.ngx-toggle-label-visible[_ngcontent-%COMP%], .ngx-toggle-label-hidden[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:#556274}'],changeDetection:0})}return f})()},93374:(U,S,o)=>{o.d(S,{e:()=>T});var l=o(96814),c=o(56223),d=o(65879);let T=(()=>{class O{static#e=this.\u0275fac=function(y){return new(y||O)};static#t=this.\u0275mod=d.oAB({type:O});static#n=this.\u0275inj=d.cJS({imports:[l.ez,c.UX]})}return O})()},94045:(U,S,o)=>{o.d(S,{z:()=>f});var l=o(19347),c=o(48530),d=o(65879),T=o(96814),O=o(83498);function w(x,g){if(1&x&&(d.TgZ(0,"div",6)(1,"h2"),d._uU(2),d.qZA()()),2&x){const v=d.oxw();d.xp6(2),d.Oqu(v.data.title)}}function I(x,g){1&x&&d._UZ(0,"hr",7)}function y(x,g){if(1&x&&(d.TgZ(0,"div",8),d._uU(1),d.qZA()),2&x){const v=d.oxw();d.xp6(1),d.Oqu(v.data.message)}}function E(x,g){1&x&&d._UZ(0,"hr",7)}let f=(()=>{class x{constructor(v,C){this.dialogRef=v,this.data=C,this.b2bNgxButtonThemeEnum=c.n,this.confirmButtonTheme=this.data.confirmButtonTheme,this.cancelButtonTheme=this.data.cancelButtonTheme}closeDialog(v){this.dialogRef.close(v)}static#e=this.\u0275fac=function(C){return new(C||x)(d.Y36(l.so),d.Y36(l.WI))};static#t=this.\u0275cmp=d.Xpm({type:x,selectors:[["b2b-confirmation-dialog"]],decls:10,vars:6,consts:[[1,"confirmation-dialog"],["class","header",4,"ngIf"],["color","#f5f5f5",4,"ngIf"],["class","body",4,"ngIf"],[1,"footer"],["b2bNgxButton","",1,"btn",3,"click"],[1,"header"],["color","#f5f5f5"],[1,"body"]],template:function(C,m){1&C&&(d.TgZ(0,"div",0),d.YNc(1,w,3,1,"div",1),d.YNc(2,I,1,0,"hr",2),d.YNc(3,y,2,1,"div",3),d.YNc(4,E,1,0,"hr",2),d.TgZ(5,"div",4)(6,"button",5),d.NdJ("click",function(){return m.closeDialog(!0)}),d._uU(7),d.qZA(),d.TgZ(8,"button",5),d.NdJ("click",function(){return m.closeDialog(!1)}),d._uU(9),d.qZA()()()),2&C&&(d.xp6(1),d.Q6J("ngIf",m.data.title),d.xp6(1),d.Q6J("ngIf",m.data.title),d.xp6(1),d.Q6J("ngIf",m.data.message),d.xp6(1),d.Q6J("ngIf",m.data.message),d.xp6(3),d.hij(" ",m.data.confirmButtonText," "),d.xp6(2),d.hij(" ",m.data.cancelButtonText," "))},dependencies:[T.O5,O.f],styles:["[_nghost-%COMP%]   .confirmation-dialog[_ngcontent-%COMP%]{width:40vw;height:20vh;position:relative}[_nghost-%COMP%]   .confirmation-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   .confirmation-dialog[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;width:100%;gap:15px;justify-content:center;margin-top:20px}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:15px 20px;width:40%}"]})}return x})()}}]);