"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[6048],{76048:(x,d,o)=>{o.r(d),o.d(d,{AdminCompaniesModule:()=>k});var a=o(38684),h=o(9063),C=o(28225),f=o(76999),t=o(89985),c=o(82575),r=o(39229),g=o(22699),p=o(20559);let u=(()=>{class e{constructor(n){this.apiService=n,this.adminCompaniesListSource=new r.t(null),this.adminCompaniesCountSource=new r.t(0)}get adminCompaniesList$(){return this.adminCompaniesListSource.asObservable()}get adminCompaniesCount$(){return this.adminCompaniesCountSource.asObservable()}updateAdminCompaniesList(n,i){this.getAdminCompaniesList(n,i).pipe((0,g.$)()).subscribe(l=>{this.adminCompaniesCountSource.next(l.totalCount),this.adminCompaniesListSource.next(l.companies)})}getAdminCompaniesList(n,i){return this.apiService.get("products/get-company",{params:{...n,...i}})}static#t=this.\u0275fac=function(i){return new(i||e)(t.KVO(p.G))};static#n=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var D=o(6113),b=o(96484),m=o(86311),y=o(7040),_=o(2243);function v(e,s){1&e&&(t.j41(0,"th",17),t.EFF(1,"Name"),t.k0s())}function F(e,s){if(1&e&&(t.j41(0,"td",18),t.EFF(1),t.k0s()),2&e){const n=s.$implicit;t.R7$(),t.JRh(n.companyName)}}function O(e,s){1&e&&(t.j41(0,"th",17),t.EFF(1,"Chats count"),t.k0s())}function N(e,s){if(1&e&&(t.j41(0,"td",18),t.EFF(1),t.k0s()),2&e){const n=s.$implicit;t.R7$(),t.JRh(n.countChats)}}function A(e,s){1&e&&(t.j41(0,"th",17),t.EFF(1,"Products count"),t.k0s())}function R(e,s){if(1&e&&(t.j41(0,"td",18),t.EFF(1),t.k0s()),2&e){const n=s.$implicit;t.R7$(),t.JRh(n.countProducts)}}function j(e,s){1&e&&(t.j41(0,"th",17),t.EFF(1,"Registration date"),t.k0s())}function E(e,s){if(1&e&&(t.j41(0,"td",18),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=s.$implicit;t.R7$(),t.JRh(t.bMT(2,1,n.createdAt))}}function T(e,s){1&e&&t.nrm(0,"tr",19)}function M(e,s){1&e&&t.nrm(0,"tr",20)}function $(e,s){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"div",6),t.EFF(2),t.k0s(),t.j41(3,"table",7),t.nI1(4,"async"),t.qex(5,8),t.DNE(6,v,2,0,"th",9)(7,F,2,1,"td",10),t.bVm(),t.qex(8,11),t.DNE(9,O,2,0,"th",9)(10,N,2,1,"td",10),t.bVm(),t.qex(11,12),t.DNE(12,A,2,0,"th",9)(13,R,2,1,"td",10),t.bVm(),t.qex(14,13),t.DNE(15,j,2,0,"th",9)(16,E,3,3,"td",10),t.bVm(),t.DNE(17,T,1,0,"tr",14)(18,M,1,0,"tr",15),t.k0s(),t.j41(19,"b2b-ngx-pagination",16),t.bIt("togglePageNumber",function(l){t.eBV(n);const P=t.XpG();return t.Njj(P.togglePage(l))}),t.k0s(),t.bVm()}if(2&e){const n=s.ngIf,i=t.XpG();t.R7$(2),t.SpI(" Total companies count: ",n," "),t.R7$(),t.Y8G("dataSource",t.bMT(4,6,i.adminCompaniesList$)),t.R7$(14),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(),t.Y8G("length",n)("perPage",i.productsLimit)}}function S(e,s){1&e&&(t.j41(0,"h3"),t.EFF(1,"No companies found"),t.k0s())}const I=[{path:"",component:(()=>{class e{constructor(n,i){this.fb=n,this.adminCompaniesService=i,this.b2bNgxInputThemeEnum=C.Q,this.productsLimit=20,this.filtersForm=this.fb.group({q:null,registrationDate:this.fb.control({startDate:new Date((new Date).setFullYear((new Date).getFullYear()-1)).toISOString(),endDate:new Date(Date.now()).toISOString()}),country:[null]}),this.adminCompaniesCount$=this.adminCompaniesService.adminCompaniesCount$,this.adminCompaniesList$=this.adminCompaniesService.adminCompaniesList$,this.displayedColumns=["companyName","countChats","countProducts","createdAt"],this.currentFilters=null,this.filteredQueryObj={limit:this.productsLimit,offset:0}}ngOnInit(){this.updateCompaniesListOnFiltersChange(),this.filtersForm.get("registrationDate").updateValueAndValidity()}removeFalsyKeysFromObject(n){for(const i in n)n[i]||delete n[i];return n}updateCompaniesListOnFiltersChange(){this.filtersForm.valueChanges.pipe((0,f.T)(n=>{if(n.registrationDate.startDate){const i=new Date(n.registrationDate.startDate);n.registrationDate.startDate=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())).toISOString()}return n.registrationDate.endDate&&(n.registrationDate.endDate=new Date(n.registrationDate.endDate).toISOString()),n.q||delete n.q,n.active=!0,n.dateFrom=n.registrationDate.startDate,n.dateTo=n.registrationDate.endDate,delete n.registrationDate,n})).subscribe(n=>{this.onFiltersChange(),this.adminCompaniesService.updateAdminCompaniesList(this.filteredQueryObj,{...this.removeFalsyKeysFromObject(n)}),this.currentFilters=n})}togglePage(n){this.filteredQueryObj={...this.filteredQueryObj,offset:(n-1)*this.productsLimit},this.adminCompaniesService.updateAdminCompaniesList(this.filteredQueryObj,{...this.currentFilters})}onFiltersChange(){this.filteredQueryObj={limit:this.productsLimit,offset:0},this.currentFilters=null}static#t=this.\u0275fac=function(i){return new(i||e)(t.rXU(c.ok),t.rXU(u))};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["b2b-admin-companies"]],decls:8,vars:8,consts:[["noCompanies",""],[3,"formGroup"],["type","text","b2bNgxInput","","placeholder","Enter company name","label","Company name","formControlName","q",1,"mb-3",3,"theme"],["b2bNgxInput","","ngxDaterangepickerMd","","label","Registration Time","type","text","placeholder","Select range of date","name","daterange","formControlName","registrationDate",1,"mb-3",3,"theme","showClearButton"],["formControlName","country","placeholder","Select Country"],[4,"ngIf","ngIfElse"],[1,"total-count"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4",3,"dataSource"],["matColumnDef","companyName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","countChats"],["matColumnDef","countProducts"],["matColumnDef","createdAt"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"togglePageNumber","length","perPage"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,l){if(1&i&&(t.j41(0,"form",1),t.nrm(1,"input",2)(2,"input",3)(3,"b2b-ngx-country-select",4),t.k0s(),t.DNE(4,$,20,8,"ng-container",5),t.nI1(5,"async"),t.DNE(6,S,2,0,"ng-template",null,0,t.C5r)),2&i){const P=t.sdS(7);t.Y8G("formGroup",l.filtersForm),t.R7$(),t.Y8G("theme",l.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",l.b2bNgxInputThemeEnum.BACKGROUND_WHITE)("showClearButton",!0),t.R7$(2),t.Y8G("ngIf",t.bMT(5,6,l.adminCompaniesCount$))("ngIfElse",P)}},dependencies:[a.bT,D.b,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,b.p,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,y.z,_.jR,a.Jj,a.vh],styles:["[_nghost-%COMP%]   .total-count[_ngcontent-%COMP%]{background:#fff;padding:15px;margin-top:25px}[_nghost-%COMP%]     th, [_nghost-%COMP%]     td{vertical-align:middle}"]})}return e})()}];let L=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#n=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[h.iI.forChild(I),h.iI]})}return e})();var G=o(50096),B=o(45596),w=o(3470),V=o(92578);let k=(()=>{class e{static#t=this.\u0275fac=function(i){return new(i||e)};static#n=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[a.MD,L,G.E,c.X1,B.O,w.F,m.tP,V.o,_.kF.forRoot()]})}return e})()},96484:(x,d,o)=>{o.d(d,{p:()=>f});var a=o(89985),h=o(38684);function C(t,c){if(1&t){const r=a.RV6();a.j41(0,"li",2),a.bIt("click",function(){const p=a.eBV(r).$implicit,u=a.XpG();return a.Njj(u.togglePage(p.value))}),a.EFF(1),a.k0s()}if(2&t){const r=c.$implicit,g=a.XpG();a.AVh("active",g.currentPage===r.label),a.R7$(),a.SpI(" ",r.label," ")}}let f=(()=>{class t{constructor(){this.currentPage=1,this.togglePageNumber=new a.bkB,this.currentPage=1,this.togglePage(1)}get options(){return this.length&&this.perPage?new Array(Math.ceil(this.length/this.perPage)).fill(null).map((p,u)=>({label:u+1,value:u+1})):[]}togglePage(r){r!==this.currentPage&&(this.currentPage=r,this.togglePageNumber.emit(r))}togglePrevPage(){1!==this.currentPage&&(this.currentPage=this.currentPage-1,this.togglePageNumber.emit(this.currentPage))}toggleNextPage(){this.currentPage!==this.options.length&&(this.currentPage=this.currentPage+1,this.togglePageNumber.emit(this.currentPage))}static#t=this.\u0275fac=function(g){return new(g||t)};static#n=this.\u0275cmp=a.VBU({type:t,selectors:[["b2b-ngx-pagination"]],inputs:{length:"length",perPage:"perPage",currentPage:"currentPage"},outputs:{togglePageNumber:"togglePageNumber"},decls:2,vars:1,consts:[[1,"ngx-pagination"],["class","ngx-pagination-item",3,"active","click",4,"ngFor","ngForOf"],[1,"ngx-pagination-item",3,"click"]],template:function(g,p){1&g&&(a.j41(0,"ul",0),a.DNE(1,C,2,3,"li",1),a.k0s()),2&g&&(a.R7$(),a.Y8G("ngForOf",p.options))},dependencies:[h.Sq],styles:["[_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#005dff;color:#fff}.ngx-pagination[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:24px;flex-wrap:wrap;row-gap:10px}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;margin:0 4px;border:1px solid #dfe8f5;cursor:pointer}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:hover:not(.active){background-color:#eff4fa}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:active{background:#fff}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:first-child{margin-left:0}.ngx-pagination[_ngcontent-%COMP%]   .ngx-pagination-item[_ngcontent-%COMP%]:last-child{margin-right:0}"],changeDetection:0})}return t})()}}]);