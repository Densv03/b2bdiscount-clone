"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[2076],{21232:(O,p,t)=>{t.d(p,{U:()=>n,ZW:()=>c,cp:()=>d,de:()=>i,gA:()=>l,nE:()=>r,q6:()=>o});const i={loading:"Post updating...",success:"Post updated successfully!",error:"Post updating failed!"},d={loading:"Post creating...",success:"Post created successfully!",error:"Post creation failed!"},c={loading:"Author creating...",success:"Author created successfully!",error:"Author creation failed!"},n={loading:"Author deleting...",success:"Author deleted successfully!",error:"Author deletion failed!"},o={loading:"Author updating...",success:"Author updated successfully!",error:"Author updating failed!"},l=["News","Trade guide","Analysis","Market experts","Market updates","Logistics & Supply chain"],r=["draft","planned","published"]},93983:(O,p,t)=>{t.d(p,{i:()=>n});var i=t(60177),d=t(41108),c=t(54438);let n=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=c.$C({type:o});static#i=this.\u0275inj=c.G2t({imports:[i.MD,d.b]})}return o})()},15575:(O,p,t)=>{t.d(p,{u:()=>o});var i=t(60177),d=t(41108),c=t(24318),n=t(54438);let o=(()=>{class l{static#t=this.\u0275fac=function(_){return new(_||l)};static#e=this.\u0275mod=n.$C({type:l});static#i=this.\u0275inj=n.G2t({imports:[i.MD,d.b,c.F]})}return l})()},76382:(O,p,t)=>{t.d(p,{Aq:()=>c,G1:()=>i,TK:()=>d,g9:()=>n});const i=["1-5M","5-10M","10-50M","50-100M"],d=["1-5","5-10","10-50","50-100","> 100"];function c(o){return o.map(l=>({id:l,value:l}))}const n={loading:"Updating company information...",success:"Company information successfully updated.",error:"Company information updating failed"}},64660:(O,p,t)=>{t.d(p,{w:()=>y});var i=t(89417),d=t(74993),c=t(54153),n=t(61594),o=t(5964),l=t(96697),r=t(21413),s=t(88141),_=t(76382),b=t(67376),v=t.n(b),a=t(5019),f=t(34633),g=t(54438),E=t(15890),S=t(31126),e=t(65397),h=t(72558),D=t(37409);let y=(()=>{class C{constructor(u,m,M,P,T,R){this.fb=u,this.authService=m,this.userService=M,this.sourcingRequestService=P,this.hotToastService=T,this.mixpanelService=R,this.isAdmin="admin"===this.userService.getUser()?.role?.name,this.form=this.initForm(),this.rootRoles$=new r.B,this.subRoles=[],this.yearOfFoundationList=this.getFoundationYear(),this.isSubmit=!1}get company(){return this.authService.company}set company(u){this.authService.updateCompany(u)}initForm(){return this.fb.group({companyName:["",[i.k0.required,(0,f.r)()]],businessType:["",[i.k0.required]],country:["",[i.k0.required]],yearOfFoundation:["",[i.k0.required]],employeesNumber:["",[i.k0.required]],annualRevenue:["",[i.k0.required]],address:["",[i.k0.required,(0,f.r)()]],website:["",[(0,d.q7)()]],companyDescription:["",[i.k0.required,i.k0.minLength(40),(0,f.r)()]],logo:[null],banner:[null],socialMedia:this.fb.group({facebook:["",(0,c.o)()],instagram:["",(0,c.o)()],linkedin:["",(0,c.o)()],twitter:["",(0,c.o)()]})})}initDefault(){this.getRoles(),this.getFoundationYear()}onSubmit(u){this.isSubmit=!1;const m=u.socialMedia,M=(0,a.t)({...u,...m});try{u.banner||this.sourcingRequestService.deleteBanner().subscribe(),u.logo||this.sourcingRequestService.deleteLogo().subscribe(),this.updateCompany(M,u,m)}catch(P){console.log(P)}this.isSubmit=!0}updateCompany(u,m,M){this.sourcingRequestService.updateCompanyInfo(u).pipe((0,n.$)(),this.hotToastService.observe(_.g9),(0,s.M)(()=>{this.mixpanelChangeUser(m),this.trackWebsiteChange(m),M&&this.trackSocialMediaLinksChange(M),this.trackCompanyChange()})).subscribe(P=>{this.authService.updateCompany(P)})}mixpanelChangeUser(u){const m=this.authService.user;this.mixpanelService.set({distinctId:this.userService.getUser()._id,properties:{"Account Type":m.rootRole,"Company Name":u.companyName,Name:u.companyName}})}getRoles(){return this.authService.getRootRoles().pipe((0,o.p)(u=>!!u.length),(0,l.s)(1)).subscribe(u=>{this.rootRoles$.next(u),this.subRoles="supplier"===this.authService.user.rootRole.name?u.find(m=>"supplier"===m.name).subRoles:u.find(m=>"buyer"===m.name).subRoles})}getFoundationYear(){const u=[],m=new Date(Date.now()).getFullYear();for(let M=m;M>m-150;M--)u.push(M.toString());return(0,_.Aq)(u)}trackWebsiteChange(u){u?.website!==this.company?.website&&(this.company.website=u?.website,this.mixpanelService.track("Website Link added",{Link:u?.website}))}trackSocialMediaLinksChange(u){const m=v().omitBy(this.company?.socialMedia,P=>v().isUndefined(P)||v().isNull(P)||""===P||" "===P),M=v().pick(u,["facebook","instagram","linkedin","twitter"]);v().isEqual(M,m)||(this.mixpanelService.track("Social Media Link added",{"Social Media Type":M}),this.company={...this.company,socialMedia:M})}trackCompanyChange(){const u=["companyName","businessType","country","employeesNumber","yearOfFoundation","annualRevenue","companyDescription","address","position"],m=v().omitBy(v().pick(this.company,u),R=>v().isUndefined(R)||v().isNull(R)||""===R),M=v().pick(this.company,u),P=Object.keys(m);v().isEqual(P.sort(),u.sort())&&!v().isEqual(m,M)&&(this.mixpanelService.track("Company information completed",{"Account Type":this.userService.getUser().rootRole?.name}),this.company={...this.company,...m})}static#t=this.\u0275fac=function(m){return new(m||C)(g.KVO(i.ok),g.KVO(E.u),g.KVO(S.D),g.KVO(e.$),g.KVO(h.U_),g.KVO(D.U))};static#e=this.\u0275prov=g.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})()},145:(O,p,t)=>{t.d(p,{c:()=>g});var i=t(84412),d=t(7673),c=t(61594),n=t(88141),o=t(21626),l=t(5019),r=t(54438),s=t(40735),_=t(35706),b=t(31635);let a=class U extends _.il{constructor(){super({homepage:null})}static#t=this.\u0275fac=function(e){return new(e||U)};static#e=this.\u0275prov=r.jDH({token:U,factory:U.\u0275fac,providedIn:"root"})};a=(0,b.Cg)([(0,_.g7)({name:"blog"})],a);let f=(()=>{class E extends _.XK{constructor(e){super(e),this.store=e,this.homepage$=this.select("homepage")}static#t=this.\u0275fac=function(h){return new(h||E)(r.KVO(a))};static#e=this.\u0275prov=r.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),g=(()=>{class E{constructor(e,h,D){this.apiService=e,this.blogQuery=h,this.blogStore=D,this.blogSource$=new i.t([]),this.blogLength=new i.t(0),this._articlesBehaviourSubject=new i.t([]),this._articles$=this._articlesBehaviourSubject.asObservable(),this._endpoint="blogs/"}getTags(e){return this.apiService.get(`tags?q=${e}`)}createBlog(e){return this.apiService.post("blog/create",e)}uploadImage(e,h){return this.apiService.put(`blog/${h}/upload-image`,e)}updateBlog(e,h){return this.apiService.put(`blog/${e}/update`,h)}createArticle(e){return this.apiService.post("blog/create",e)}getComments(e){return this.apiService.get(`comment/${e}`)}updateArticle(e,h){return this.apiService.put(`blog/${e}/update`,h)}createComment(e,h){return this.apiService.post("comment/create",{post:e,text:h})}getArticleById(e){return this.apiService.get(`blog/${e}`)}getNewArticleById(e){return this.apiService.get(`new-blog/${e}`)}updateNewArticle(e,h){return this.apiService.put(`new-blog/update/${e}`,(0,l.t)(h))}get blog$(){return this.blogSource$.asObservable()}get blogLength$(){return this.blogLength.asObservable()}getArticles(e){return this.apiService.get(`blogs${e}`)}updateBlogList(e="&limit=7&"){this.getArticles(e).pipe((0,c.$)()).subscribe(h=>{this.blogSource$.next(h.posts),this.blogLength.next(h.totalCount)})}getHomePage(){const{homepage:e}=this.blogQuery.getValue();return e?(0,d.of)(e):this.apiService.get("new-blogs/homepage").pipe((0,n.M)(h=>this.updateHomepage(h)))}deleteArticleById(e){return this.apiService.delete(`blog/${e}/delete`)}getAuthorList$(e=20,h=0){return this.apiService.get("new-blog/authors",{params:{limit:e,offset:h}})}createNewBlog(e){return this.apiService.post("new-blog/create",(0,l.t)(e))}getNewArticles(e=0,h="News",D="published",y=10){return this.apiService.get("new-blogs",{params:{limit:y,offset:e,type:h,status:D}})}deleteNewArticle(e){return this.apiService.delete(`new-blog/delete/${e}`)}createAuthor(e){return this.apiService.post("new-blog/author/create",(0,l.t)(e))}updateAuthor(e,h){return this.apiService.put(`new-blog/author/${h}`,(0,l.t)(e))}deleteAuthor(e){return this.apiService.delete(`new-blog/author/${e}`)}getArticlesByType(e,h,D,y,C){let A=new o.Nl;return A=A.append("limit",h).append("offset",e).append("type",D),y&&A.append("status",y),C?.length>0&&C.forEach(u=>A.append("tags",u)),this.apiService.get("new-blogs",{params:A})}updateHomepage(e){this.blogStore.update({homepage:e})}static#t=this.\u0275fac=function(h){return new(h||E)(r.KVO(s.G),r.KVO(f),r.KVO(a))};static#e=this.\u0275prov=r.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},49681:(O,p,t)=>{t.d(p,{m:()=>n});var i=t(96354),d=t(54438),c=t(40735);let n=(()=>{class o{constructor(r){this._apiService=r}getChatById(r){return this._apiService.get(`my/chat/${r}`).pipe((0,i.T)(s=>Array.isArray(s)?s[0]:s),(0,i.T)(s=>({...s,offer:Array.isArray(s.offer)?s.offer[0]:s.offer})))}static#t=this.\u0275fac=function(s){return new(s||o)(d.KVO(c.G))};static#e=this.\u0275prov=d.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},13065:(O,p,t)=>{t.d(p,{i:()=>o});var i=t(84412),d=t(7673),c=t(54438),n=t(40735);let o=(()=>{class l{constructor(s){this._apiService=s,this._articlesBehaviourSubject=new i.t([]),this._articles$=this._articlesBehaviourSubject.asObservable(),this._endpoint="posts/"}getTags(s){return this._apiService.get(`tags?q=${s}`)}createArticle(s){return this._apiService.post("post/create",s)}getComments(s){return this._apiService.get(`comment/${s}`)}updateArticle(s,_){return this._apiService.put(`post/${s}/update`,_)}createComment(s,_){return this._apiService.post("comment/create",{post:s,text:_})}getArticleById(s){const b=this._articlesBehaviourSubject.getValue().find(v=>v.id===s);return b?(0,d.of)(b):this._apiService.get(`post/${s}`)}getArticles(s){return this._apiService.get(`posts${s}`)}deleteArticleById(s){return this._apiService.delete(`post/${s}/delete`)}static#t=this.\u0275fac=function(_){return new(_||l)(c.KVO(n.G))};static#e=this.\u0275prov=c.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},13879:(O,p,t)=>{t.d(p,{z:()=>c});var i=t(54438),d=t(34006);let c=(()=>{class n{constructor(l){this.matDialog=l}showExplanationModal(){this.matDialog.open(this.explanationModal)}static#t=this.\u0275fac=function(r){return new(r||n)(i.rXU(d.bZ))};static#e=this.\u0275cmp=i.VBU({type:n,selectors:[["b2b-explanation-banner"]],inputs:{title:"title",subtitle:"subtitle",explanationModal:"explanationModal"},decls:7,vars:2,consts:[[1,"banner"],[1,"banner__title"],[1,"banner__subtitle"],[1,"banner__button",3,"click"]],template:function(r,s){1&r&&(i.j41(0,"div",0)(1,"span",1),i.EFF(2),i.k0s(),i.j41(3,"span",2),i.EFF(4),i.k0s(),i.j41(5,"span",3),i.bIt("click",function(){return s.showExplanationModal()}),i.EFF(6,"Show more"),i.k0s()()),2&r&&(i.R7$(2),i.JRh(s.title),i.R7$(2),i.SpI(" ",s.subtitle," "))},styles:["[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #d3dfff;box-shadow:0 0 10px #0000001a;background:#d3dfff;max-width:1170px;margin:auto;text-align:center;padding:8px 0}@media (max-width: 75em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{background:#d3dfff;max-width:95%}}@media (max-width: 36em){[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{max-width:90%}}[_nghost-%COMP%]   .banner__title[_ngcontent-%COMP%]{color:#000;font-size:16px;font-weight:700;letter-spacing:.18px}[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{font-size:13.6px;font-weight:400;letter-spacing:.14px;margin-left:8px}@media (max-width: 75em){[_nghost-%COMP%]   .banner__subtitle[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{text-decoration:underline;color:#005dff;font-weight:400;margin-left:16px;cursor:pointer}@media (max-width: 36em){[_nghost-%COMP%]   .banner__button[_ngcontent-%COMP%]{display:block}}"]})}return n})()},14438:(O,p,t)=>{t.d(p,{q:()=>c});var i=t(60177),d=t(54438);let c=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=d.$C({type:n});static#i=this.\u0275inj=d.G2t({imports:[i.MD]})}return n})()},5019:(O,p,t)=>{t.d(p,{t:()=>c});var i=t(75575),d=function(n){return n.instagram="instagram",n.linkedin="linkedin",n.twitter="twitter",n.fb="facebook",n}(d||{});function c(n){const o=Object.values(d).filter(r=>"string"==typeof r),l=new FormData;return Object.entries(n).filter(([r,s])=>o.includes(r)?null!==s:!!s).forEach(([r,s])=>{if("documents"===r)s.forEach(_=>{l.append(r,_)});else if("uploadedDocs"===r)l.append(r,JSON.stringify(s));else if(Array.isArray(s))s.filter(_=>!!_).forEach(_=>{l.append(r,_)});else if("object"==typeof s&&s)for(const _ in s){const b=`${r}${(0,i.Z)(_)}`;l.append(b,s[_])}else l.append(r,s)}),o.forEach(r=>{null===n[r]&&l.append(r,"")}),l}},74993:(O,p,t)=>{t.d(p,{q7:()=>c});const d=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-zA-Z0-9]+([-.]{1}[a-zA-Z0-9]+)*\.[a-zA-Z]{2,}(\/.*)?$/;function c(){return n=>n.value?d.test(n.value.trim())?null:{siteError:!0}:null}},54153:(O,p,t)=>{function i(){const c=/(?:https?:)?\/\/(?:[A-z]+\.)?(twitter|linkedin|instagram|facebook)\.com/;return n=>{if(!n.value)return null;const o=n.value.replace(/\s/g,"");return c.test(String(o).toLowerCase())?null:{socialError:!0}}}function d(){return c=>c.value?/^(https?:\/\/)?(www\.youtube\.com|youtu\.?be|m\.youtube\.com)\/.+$/.test(c.value)?null:{invalidYoutubeLink:!0}:null}t.d(p,{o:()=>i,q:()=>d})},30895:(O,p,t)=>{t.d(p,{B:()=>_});var i=t(60177),d=t(52168),c=t(5964),n=t(88141),o=t(45312),l=t(84412),r=t(54438),s=t(345);let _=(()=>{class b{constructor(a,f,g,E,S,e,h){this.rendererFactory=a,this.doc=f,this.locationService=g,this.router=E,this.route=S,this.title=e,this.meta=h,this.marketListingMetaSource=new l.t(null),this.renderer2=this.rendererFactory.createRenderer(null,null)}get marketListingMetaTags$(){return this.marketListingMetaSource.asObservable()}updateMarketListingMeta(a){this.marketListingMetaSource.next(a)}addBlogMicroMarkup(a,f,g,E,S,e,h,D){const y=this.renderer2.createElement("script");y.type="application/ld+json",y.id="micro-markup",y.text=`\n            {\n\t\t\t\t\t\t\t"@context": "https://schema.org",\n\t\t\t\t\t\t\t"@type": "NewsArticle",\n\t\t\t\t\t\t\t"mainEntityOfPage": {\n\t\t\t\t\t\t\t\t"@type": "WebPage",\n\t\t\t\t\t\t\t\t"@id": "${(o.c.apiUrl.includes("dev")?o.c.devUrl:o.c.prodUrl)+this.locationService.path()}"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t"headline": "${g}",\n\t\t\t\t\t\t\t"image": "[${e}]",\n\n\t\t\t\t\t\t\t"datePublished": "${this.getDateForBlogMarkup(E)}",\n\t\t\t\t\t\t\t"dateModified": "${this.getDateForBlogMarkup(S)}",\n\t\t\t\t\t\t\t"author": {\n   \t\t\t\t\t\t"@type": "Person",\n  \t\t\t\t\t\t"name": "${h}"\n  \t\t\t\t\t},\n   \t\t\t\t\t "publisher": {\n \t\t\t\t\t\t\t"@type": "Organization",\n\t\t\t\t\t\t  "name": "",\n \t\t\t\t\t\t  "url" : "${(o.c.apiUrl.includes("dev")?o.c.devUrl:o.c.prodUrl)+this.locationService.path()}",\n \t\t\t\t\t\t\t"logo": {\n \t\t\t\t\t\t\t "@type": "ImageObject",\n \t\t\t\t\t\t   "url": "${e[2]}"\n \t\t\t\t\t\t  }\n\t\t\t\t\t\t },\n\t\t\t\t\t\t"description": "${D}"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n        `,this.renderer2.appendChild(this.doc.body,y)}addCanonicalRef(){this.initCanonicalRef(),this.router.events.pipe((0,c.p)(a=>a instanceof d.wF),(0,n.M)(()=>{this.removeCanonicalRefs(),this.initCanonicalRef()})).subscribe()}setTitle(a){this.title.setTitle(a)}setDescription(a){this.meta.updateTag({name:"description",content:a})}initRobotsMetaTag(){this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag(),this.router.events.pipe((0,c.p)(a=>a instanceof d.wF),(0,n.M)(()=>{this.removeRobotsMetaTag(),this.isNoIndexUrl(this.router.url)?this.addRobotsMetaTag(!1):this.addRobotsMetaTag()})).subscribe()}isNoIndexUrl(a){return/sourcing-request\/listing\/.+/i.test(a)}addRobotsMetaTag(a=!0,f=!0){const g=this.doc.createElement("meta");g.setAttribute("name","robots"),g.setAttribute("content",`${a?"index":"noindex"}, ${f?"follow":"nofollow"}`),this.doc.head.appendChild(g)}removeRobotsMetaTag(){const a=this.doc.querySelector('meta[name="robots"]');a&&a.remove()}initCanonicalRef(){let a=this.doc.createElement("link");const f=this.doc.URL.indexOf("?");let g=-1!==f?this.doc.URL.substring(0,f):this.doc.URL;a.setAttribute("rel","canonical"),this.doc.head.appendChild(a),a.setAttribute("href",this.replaceCanonicalLink(g))}replaceCanonicalLink(a){switch(o.c.apiUrl){case"https://api.globy.com/":return a.replace(`http://${o.c.baseUrl}/`,o.c.prodUrl);case"https://api-dev.globy.com/":return a.replace(`http://${o.c.baseUrl}/`,o.c.devUrl);case"https://api-staging.globy.com/":return a.replace(`http://${o.c.baseUrl}/`,o.c.stagingUrl);default:return a}}removeCanonicalRefs(){const a=this.doc.getElementsByTagName("head")[0],f=a.getElementsByTagName("link");for(let g=0;g<f.length;g++){const E=f[g];"canonical"===E.rel&&this.renderer2.removeChild(a,E)}}getDateForBlogMarkup(a){"string"==typeof a&&(a=new Date);const f=a.toISOString();return f.slice(0,10)+"T"+f.slice(11,19)+"+08:00"}static#t=this.\u0275fac=function(f){return new(f||b)(r.KVO(r._9s),r.KVO(i.qQ),r.KVO(i.aZ),r.KVO(d.Ix),r.KVO(d.nX),r.KVO(s.hE),r.KVO(s.W8))};static#e=this.\u0275prov=r.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})()},64508:(O,p,t)=>{t.d(p,{S:()=>d});var i=t(54438);const d=new i.nKC("REQUEST");new i.nKC("RESPONSE")}}]);