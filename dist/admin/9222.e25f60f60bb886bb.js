"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[9222],{49222:(U,A,m)=>{m.r(A),m.d(A,{AdminManagerModule:()=>I});var x=m(60177),T=m(52168),R=m(85623),S=m(51809),N=m(79601),C=m(89417),F=m(49894),v=m(55383),E=m(65892),t=m(54438),h=m(83801),O=m(72558),G=m(40735);let B=(()=>{class i{constructor(s){this.apiService=s}addManager(s,g,f){return this.apiService.post("managers/add-new-manager",{firstName:s,lastName:g,url:f})}getUsersByRefId(s){return this.apiService.get(`statistics/get-users-list?refId=${s}`)}deleteManagerById(s){return this.apiService.delete(`managers/delete-manager?refId=${s}`)}getManagers(s){return this.apiService.get(s?`managers/get-managers?refId=${s}`:"managers/get-managers")}static#t=this.\u0275fac=function(g){return new(g||i)(t.KVO(G.G))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Y=m(36529),L=m(81953),M=m(9159),K=m(46635),V=m(3997);function H(i,d){1&i&&(t.j41(0,"th",24),t.EFF(1,"Ref Id"),t.k0s())}function k(i,d){if(1&i){const s=t.RV6();t.j41(0,"td",25),t.bIt("click",function(){const f=t.eBV(s).$implicit,P=t.XpG();return t.Njj(P.copyLink(f.link))}),t.EFF(1),t.k0s()}if(2&i){const s=d.$implicit;t.R7$(),t.SpI(" ",s.refId," ")}}function X(i,d){1&i&&(t.j41(0,"th",26),t.EFF(1,"First Name"),t.k0s())}function W(i,d){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&i){const s=d.$implicit;t.R7$(),t.JRh(s.firstName)}}function z(i,d){1&i&&(t.j41(0,"th",28),t.EFF(1,"Last Name"),t.k0s())}function Z(i,d){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&i){const s=d.$implicit;t.R7$(),t.JRh(s.lastName)}}function J(i,d){1&i&&t.nrm(0,"th",26)}function Q(i,d){if(1&i){const s=t.RV6();t.j41(0,"td",27)(1,"button",29),t.bIt("click",function(){const f=t.eBV(s).$implicit,P=t.XpG();return t.Njj(P.deleteManager(f.refId))}),t.EFF(2," Delete "),t.k0s()()}if(2&i){const s=t.XpG();t.R7$(),t.Y8G("theme",s.b2bNgxButtonThemeEnum.BACKGROUND_RED)}}function q(i,d){1&i&&t.nrm(0,"tr",30)}function tt(i,d){1&i&&t.nrm(0,"tr",31)}function et(i,d){1&i&&(t.j41(0,"th",26),t.EFF(1,"Email"),t.k0s())}function nt(i,d){1&i&&t.nrm(0,"img",40),2&i&&t.Y8G("name","check-blue")}function rt(i,d){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.DNE(2,nt,1,1,"img",39),t.k0s()),2&i){const s=d.$implicit,g=t.XpG(2);t.R7$(),t.SpI(" ",s.email," "),t.R7$(),t.Y8G("ngIf",(null==s.products?null:s.products.length)&&g.isApproved(s.products))}}function ot(i,d){1&i&&(t.j41(0,"th",26),t.EFF(1," Registration type "),t.k0s())}function it(i,d){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&i){const s=d.$implicit;t.R7$(),t.SpI(" ",s.typeRegistration," ")}}function st(i,d){1&i&&(t.j41(0,"th",26),t.EFF(1,"Country"),t.k0s())}function e(i,d){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&i){const s=d.$implicit,g=t.XpG(2);t.R7$(),t.SpI(" ",g.getCountryNameByCode(null==s.userData[0]||null==s.userData[0].phone?null:s.userData[0].phone.countryCode)," ")}}function n(i,d){1&i&&(t.j41(0,"th",26),t.EFF(1," Registration date "),t.k0s())}function o(i,d){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const s=d.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,null==s.userData[0]?null:s.userData[0].createdAt,"MM/d/yy")," ")}}function r(i,d){1&i&&(t.j41(0,"th",26),t.EFF(1," Company name "),t.k0s())}function l(i,d){if(1&i&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&i){const s=d.$implicit;t.R7$(),t.SpI(" ",null==s||null==s.userData[0]?null:s.userData[0].company," ")}}function a(i,d){1&i&&t.nrm(0,"tr",30)}function c(i,d){1&i&&t.nrm(0,"tr",31)}function p(i,d){if(1&i){const s=t.RV6();t.j41(0,"div"),t.EFF(1),t.k0s(),t.j41(2,"div")(3,"table",32),t.qex(4,33),t.DNE(5,et,2,0,"th",15)(6,rt,3,2,"td",16),t.bVm(),t.qex(7,34),t.DNE(8,ot,2,0,"th",15)(9,it,2,1,"td",16),t.bVm(),t.qex(10,35),t.DNE(11,st,2,0,"th",15)(12,e,2,1,"td",16),t.bVm(),t.qex(13,36),t.DNE(14,n,2,0,"th",15)(15,o,3,4,"td",16),t.bVm(),t.qex(16,37),t.DNE(17,r,2,0,"th",15)(18,l,2,1,"td",16),t.bVm(),t.DNE(19,a,1,0,"tr",20)(20,c,1,0,"tr",21),t.k0s(),t.j41(21,"b2b-pagination",38),t.bIt("togglePageNumber",function(f){t.eBV(s);const P=t.XpG();return t.Njj(P.togglePage(f))}),t.k0s()()}if(2&i){const s=t.XpG();t.R7$(),t.SpI("Total count: ",s.userList.length,""),t.R7$(2),t.Y8G("dataSource",s.userListByPage),t.R7$(16),t.Y8G("matHeaderRowDef",s.displayedColumnsUsers),t.R7$(),t.Y8G("matRowDefColumns",s.displayedColumnsUsers),t.R7$(),t.Y8G("length",null==s.userList?null:s.userList.length)("perPage",s.pageSize)("shouldScroll",!1)("currentPage",s.currentPage)}}const u=[{path:"",component:(()=>{let i=class at{constructor(s,g,f,P,$){this.formBuilder=s,this.clipboard=g,this.hotToastService=f,this.adminManagerService=P,this.changeDetectionRef=$,this.pageSize=25,this.currentPage=1,this.b2bNgxInputThemeEnum=N.Q,this.b2bNgxButtonThemeEnum=S.a,this.managersList=[],this.userList=[],this.userListByPage=[],this.displayedColumnsManagers=["refId","firstName","lastName","delete"],this.displayedColumnsUsers=["email","registrationType","country","registrationDate","company"],this.generatedLink="",this.formGroup=this.formBuilder.group({firstName:[null,C.k0.required],lastName:[null,C.k0.required],url:[null,C.k0.required]}),this.usersByRefIdGroup=this.formBuilder.group({refId:[null,[C.k0.required,(0,v._)()]]})}ngOnInit(){this.updateManagerList()}generateLink(s){s.valid&&(this.adminManagerService.addManager(s.value.firstName,s.value.lastName,s.value.url).pipe((0,F.s)(this)).subscribe(g=>{this.generatedLink=g.link,this.updateManagerList(),this.changeDetectionRef.detectChanges()}),this.formGroup.reset(),this.updateManagerList())}getUsersByRefId(s){s.valid&&this.adminManagerService.getUsersByRefId(parseInt(s.value.refId)).subscribe(g=>{g.length||this.hotToastService.show("There's no users found with current refId",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0}),this.userList=g[0].users,this.togglePage(1),this.changeDetectionRef.detectChanges()})}isApproved(s){return s.some(g=>g.productApproved)}copyLink(s=this.generatedLink){this.clipboard.copy(s),this.hotToastService.show("Link copied to clipboard",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0})}deleteManager(s){this.adminManagerService.deleteManagerById(s).subscribe(()=>this.updateManagerList())}getCountryNameByCode(s){return s?(0,E.mG)(s):""}togglePage(s){this.currentPage=s,this.userListByPage=this.userList.slice((this.currentPage-1)*this.pageSize,this.pageSize*this.currentPage)}updateManagerList(){this.adminManagerService.getManagers().subscribe(s=>{this.managersList=s,this.changeDetectionRef.detectChanges()})}static#t=this.\u0275fac=function(g){return new(g||at)(t.rXU(C.ok),t.rXU(h.B0),t.rXU(O.U_),t.rXU(B),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:at,selectors:[["b2b-admin-manager"]],decls:34,vars:16,consts:[[1,"admin-manager"],[1,"admin-manager__form-group",3,"ngSubmit","formGroup"],[1,"admin-manager__form-group__container"],["type","text","b2bNgxInput","","formControlName","firstName","placeholder","First name","label","Enter first name",3,"theme"],["type","text","b2bNgxInput","","formControlName","lastName","placeholder","Second name","label","Enter second name",3,"theme"],["type","text","b2bNgxInput","","formControlName","url","placeholder","https://b2b.discount/blog","label","Enter the link for which the ref will be generated",1,"mb-3",3,"theme"],["b2bNgxButton","",3,"theme"],[1,"admin-manager__generated-link"],["b2bNgxInput","","disabled","","placeholder","Here will be generated link",3,"ngModelChange","ngModel","theme"],["b2bNgxButton","",3,"click","theme","disabled"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","refId"],["class","th-id","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","firstName"],["class","th-firstName","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["class","th-lastName","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"admin-manager__generated-link",3,"ngSubmit","formGroup"],["type","text","b2bNgxInput","","formControlName","refId","placeholder","Ref id",3,"theme"],["mat-header-cell","",1,"th-id"],["mat-cell","",3,"click"],["mat-header-cell","",1,"th-firstName"],["mat-cell",""],["mat-header-cell","",1,"th-lastName"],["b2bNgxButton","",1,"delete-btn",3,"click","theme"],["mat-header-row",""],["mat-row",""],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","email"],["matColumnDef","registrationType"],["matColumnDef","country"],["matColumnDef","registrationDate"],["matColumnDef","company"],[3,"togglePageNumber","length","perPage","shouldScroll","currentPage"],["b2bNgxIcon","",3,"name",4,"ngIf"],["b2bNgxIcon","",3,"name"]],template:function(g,f){1&g&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return f.generateLink(f.formGroup)}),t.j41(2,"div",2)(3,"div"),t.nrm(4,"input",3),t.k0s(),t.j41(5,"div"),t.nrm(6,"input",4),t.k0s()(),t.nrm(7,"input",5),t.j41(8,"button",6),t.EFF(9," Generate Link "),t.k0s()(),t.j41(10,"div",7)(11,"input",8),t.mxI("ngModelChange",function($){return t.DH7(f.generatedLink,$)||(f.generatedLink=$),$}),t.k0s(),t.j41(12,"button",9),t.bIt("click",function(){return f.copyLink()}),t.EFF(13," Copy URL "),t.k0s()(),t.j41(14,"table",10),t.qex(15,11),t.DNE(16,H,2,0,"th",12)(17,k,2,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,X,2,0,"th",15)(20,W,2,1,"td",16),t.bVm(),t.qex(21,17),t.DNE(22,z,2,0,"th",18)(23,Z,2,1,"td",16),t.bVm(),t.qex(24,19),t.DNE(25,J,1,0,"th",15)(26,Q,3,1,"td",16),t.bVm(),t.DNE(27,q,1,0,"tr",20)(28,tt,1,0,"tr",21),t.k0s(),t.j41(29,"form",22),t.bIt("ngSubmit",function(){return f.getUsersByRefId(f.usersByRefIdGroup)}),t.nrm(30,"input",23),t.j41(31,"button",6),t.EFF(32," Submit "),t.k0s()(),t.DNE(33,p,22,8),t.k0s()),2&g&&(t.R7$(),t.Y8G("formGroup",f.formGroup),t.R7$(3),t.Y8G("theme",f.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(2),t.Y8G("theme",f.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",f.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",f.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.R7$(3),t.R50("ngModel",f.generatedLink),t.Y8G("theme",f.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",f.b2bNgxButtonThemeEnum.BACKGROUND_BLACK)("disabled",!f.generatedLink),t.R7$(2),t.Y8G("dataSource",f.managersList),t.R7$(13),t.Y8G("matHeaderRowDef",f.displayedColumnsManagers),t.R7$(),t.Y8G("matRowDefColumns",f.displayedColumnsManagers),t.R7$(),t.Y8G("formGroup",f.usersByRefIdGroup),t.R7$(),t.Y8G("theme",f.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.R7$(),t.Y8G("theme",f.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.R7$(2),t.vxM(33,null!=f.userList&&f.userList.length?33:-1))},dependencies:[x.bT,Y.b,C.qT,C.me,C.BC,C.cb,C.j4,C.JD,L.Z,C.vS,M.Zl,M.tL,M.ji,M.cC,M.YV,M.iL,M.KS,M.$R,M.YZ,M.NB,K.i,V.e,x.vh],styles:[".admin-manager[_ngcontent-%COMP%]{padding:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:49%}.admin-manager__form-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px}.admin-manager__generated-link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-manager__generated-link[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%}.admin-manager__generated-link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:15%}[_nghost-%COMP%]  table{width:65%;margin-top:50px;background-color:#fff}[_nghost-%COMP%]  th.mat-mdc-header-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  th.mat-mdc-header-cell:last-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:last-of-type{padding-right:0}[_nghost-%COMP%]  .th-id{width:10%;text-align:center;background-color:#000;color:#fff;padding-top:18px}[_nghost-%COMP%]  .th-firstName{text-align:center;padding-left:0}[_nghost-%COMP%]  .th-lastName{text-align:center;padding-left:0}[_nghost-%COMP%]  .cdk-column-refId{text-align:center;background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:10%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8;cursor:pointer}[_nghost-%COMP%]  .cdk-column-lastName, [_nghost-%COMP%]  .cdk-column-email, [_nghost-%COMP%]  .cdk-column-registrationType, [_nghost-%COMP%]  .cdk-column-firstName, [_nghost-%COMP%]  .cdk-column-registrationDate, [_nghost-%COMP%]  .cdk-column-country, [_nghost-%COMP%]  .cdk-column-company{background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:40%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .cdk-column-email>img{width:20px}[_nghost-%COMP%]  .cdk-column-company{width:50%;padding:5px}[_nghost-%COMP%]  .cdk-column-delete{background-color:#fff;height:65px;width:10%;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .delete-btn{width:100%;height:100%;transform:translateY(-17%)}"]})};return i=(0,R.Cg)([(0,F.d)()],i),i})()}];let _=(()=>{class i{static#t=this.\u0275fac=function(g){return new(g||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[T.iI.forChild(u),T.iI]})}return i})();var b=m(42944),y=m(41820),D=m(24318),j=m(18560);let I=(()=>{class i{static#t=this.\u0275fac=function(g){return new(g||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[x.MD,_,b.E,C.X1,y.i,C.YN,b.E,M.tP,D.F,j.x]})}return i})()},18560:(U,A,m)=>{m.d(A,{x:()=>S});var x=m(60177),T=m(24318),R=m(54438);let S=(()=>{class N{static#t=this.\u0275fac=function(v){return new(v||N)};static#e=this.\u0275mod=R.$C({type:N});static#n=this.\u0275inj=R.G2t({imports:[x.MD,T.F]})}return N})()},85623:(U,A,m)=>{function N(e,n,o,r){var c,l=arguments.length,a=l<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,o,r);else for(var p=e.length-1;p>=0;p--)(c=e[p])&&(a=(l<3?c(a):l>3?c(n,o,a):c(n,o))||a);return l>3&&a&&Object.defineProperty(n,o,a),a}m.d(A,{Cg:()=>N}),"function"==typeof SuppressedError&&SuppressedError},83801:(U,A,m)=>{m.d(A,{B0:()=>S,FQ:()=>F});var x=m(60177),T=m(54438);class R{constructor(E,t){this._document=t;const h=this._textarea=this._document.createElement("textarea"),O=h.style;O.position="fixed",O.top=O.opacity="0",O.left="-999em",h.setAttribute("aria-hidden","true"),h.value=E,h.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(h)}copy(){const E=this._textarea;let t=!1;try{if(E){const h=this._document.activeElement;E.select(),E.setSelectionRange(0,E.value.length),t=this._document.execCommand("copy"),h&&h.focus()}}catch{}return t}destroy(){const E=this._textarea;E&&(E.remove(),this._textarea=void 0)}}let S=(()=>{class v{constructor(t){this._document=t}copy(t){const h=this.beginCopy(t),O=h.copy();return h.destroy(),O}beginCopy(t){return new R(t,this._document)}static#t=this.\u0275fac=function(h){return new(h||v)(T.KVO(x.qQ))};static#e=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),F=(()=>{class v{static#t=this.\u0275fac=function(h){return new(h||v)};static#e=this.\u0275mod=T.$C({type:v});static#n=this.\u0275inj=T.G2t({})}return v})()}}]);