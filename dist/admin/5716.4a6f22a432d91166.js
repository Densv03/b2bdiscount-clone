"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[5716],{35716:(A,C,i)=>{i.r(C),i.d(C,{AdminManagerModule:()=>rt});var h=i(96814),p=i(44112),x=i(97582),y=i(48530),_=i(66027),l=i(56223),b=i(78791),d=i(24411),m=i(67028),t=i(19212),s=i(70342),c=i(58133),M=i(87588);let v=(()=>{class n{constructor(e){this.apiService=e}addManager(e,r,a){return this.apiService.post("managers/add-new-manager",{firstName:e,lastName:r,url:a})}getUsersByRefId(e){return this.apiService.get(`statistics/get-users-list?refId=${e}`)}deleteManagerById(e){return this.apiService.delete(`managers/delete-manager?refId=${e}`)}getManagers(e){return this.apiService.get(e?`managers/get-managers?refId=${e}`:"managers/get-managers")}static#t=this.\u0275fac=function(r){return new(r||n)(t.LFG(M.s))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var D=i(17856),O=i(83498),u=i(25313),Z=i(53803),P=i(79645);function I(n,o){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Ref Id"),t.qZA())}function B(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",25),t.NdJ("click",function(){const g=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.copyLink(g.link))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(),t.hij(" ",e.refId," ")}}function k(n,o){1&n&&(t.TgZ(0,"th",26),t._uU(1,"First Name"),t.qZA())}function U(n,o){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(),t.Oqu(e.firstName)}}function L(n,o){1&n&&(t.TgZ(0,"th",28),t._uU(1,"Last Name"),t.qZA())}function E(n,o){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(),t.Oqu(e.lastName)}}function R(n,o){1&n&&t._UZ(0,"th",26)}function S(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",27)(1,"button",29),t.NdJ("click",function(){const g=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.deleteManager(g.refId))}),t._uU(2," Delete "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(),t.Q6J("theme",e.b2bNgxButtonThemeEnum.BACKGROUND_RED)}}function J(n,o){1&n&&t._UZ(0,"tr",30)}function w(n,o){1&n&&t._UZ(0,"tr",31)}function Q(n,o){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Email"),t.qZA())}function G(n,o){1&n&&t._UZ(0,"img",40),2&n&&t.Q6J("name","check-blue")}function Y(n,o){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.YNc(2,G,1,1,"img",39),t.qZA()),2&n){const e=o.$implicit,r=t.oxw(2);t.xp6(),t.hij(" ",e.email," "),t.xp6(),t.Q6J("ngIf",(null==e.products?null:e.products.length)&&r.isApproved(e.products))}}function K(n,o){1&n&&(t.TgZ(0,"th",26),t._uU(1," Registration type "),t.qZA())}function F(n,o){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(),t.hij(" ",e.typeRegistration," ")}}function j(n,o){1&n&&(t.TgZ(0,"th",26),t._uU(1,"Country"),t.qZA())}function H(n,o){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=o.$implicit,r=t.oxw(2);t.xp6(),t.hij(" ",r.getCountryNameByCode(null==e.userData[0]||null==e.userData[0].phone?null:e.userData[0].phone.countryCode)," ")}}function z(n,o){1&n&&(t.TgZ(0,"th",26),t._uU(1," Registration date "),t.qZA())}function $(n,o){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=o.$implicit;t.xp6(),t.hij(" ",t.xi3(2,1,null==e.userData[0]?null:e.userData[0].createdAt,"MM/d/yy")," ")}}function W(n,o){1&n&&(t.TgZ(0,"th",26),t._uU(1," Company name "),t.qZA())}function q(n,o){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(),t.hij(" ",null==e||null==e.userData[0]?null:e.userData[0].company," ")}}function X(n,o){1&n&&t._UZ(0,"tr",30)}function V(n,o){1&n&&t._UZ(0,"tr",31)}function tt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t._uU(1),t.qZA(),t.TgZ(2,"div")(3,"table",32),t.ynx(4,33),t.YNc(5,Q,2,0,"th",15)(6,Y,3,2,"td",16),t.BQk(),t.ynx(7,34),t.YNc(8,K,2,0,"th",15)(9,F,2,1,"td",16),t.BQk(),t.ynx(10,35),t.YNc(11,j,2,0,"th",15)(12,H,2,1,"td",16),t.BQk(),t.ynx(13,36),t.YNc(14,z,2,0,"th",15)(15,$,3,4,"td",16),t.BQk(),t.ynx(16,37),t.YNc(17,W,2,0,"th",15)(18,q,2,1,"td",16),t.BQk(),t.YNc(19,X,1,0,"tr",20)(20,V,1,0,"tr",21),t.qZA(),t.TgZ(21,"b2b-pagination",38),t.NdJ("togglePageNumber",function(a){t.CHM(e);const g=t.oxw();return t.KtG(g.togglePage(a))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(),t.hij("Total count: ",e.userList.length,""),t.xp6(2),t.Q6J("dataSource",e.userListByPage),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumnsUsers),t.xp6(),t.Q6J("matRowDefColumns",e.displayedColumnsUsers),t.xp6(),t.Q6J("length",null==e.userList?null:e.userList.length)("perPage",e.pageSize)("shouldScroll",!1)("currentPage",e.currentPage)}}const et=[{path:"",component:(()=>{let n=class T{constructor(e,r,a,g,f){this.formBuilder=e,this.clipboard=r,this.hotToastService=a,this.adminManagerService=g,this.changeDetectionRef=f,this.pageSize=25,this.currentPage=1,this.b2bNgxInputThemeEnum=_.T,this.b2bNgxButtonThemeEnum=y.n,this.managersList=[],this.userList=[],this.userListByPage=[],this.displayedColumnsManagers=["refId","firstName","lastName","delete"],this.displayedColumnsUsers=["email","registrationType","country","registrationDate","company"],this.generatedLink="",this.formGroup=this.formBuilder.group({firstName:[null,l.kI.required],lastName:[null,l.kI.required],url:[null,l.kI.required]}),this.usersByRefIdGroup=this.formBuilder.group({refId:[null,[l.kI.required,(0,d.X)()]]})}ngOnInit(){this.updateManagerList()}generateLink(e){e.valid&&(this.adminManagerService.addManager(e.value.firstName,e.value.lastName,e.value.url).pipe((0,b.t)(this)).subscribe(r=>{this.generatedLink=r.link,this.updateManagerList(),this.changeDetectionRef.detectChanges()}),this.formGroup.reset(),this.updateManagerList())}getUsersByRefId(e){e.valid&&this.adminManagerService.getUsersByRefId(parseInt(e.value.refId)).subscribe(r=>{r.length||this.hotToastService.show("There's no users found with current refId",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0}),this.userList=r[0].users,this.togglePage(1),this.changeDetectionRef.detectChanges()})}isApproved(e){return e.some(r=>r.productApproved)}copyLink(e=this.generatedLink){this.clipboard.copy(e),this.hotToastService.show("Link copied to clipboard",{dismissible:!0,style:{border:"1px solid #3D48E6"},autoClose:!0})}deleteManager(e){this.adminManagerService.deleteManagerById(e).subscribe(()=>this.updateManagerList())}getCountryNameByCode(e){return e?(0,m.oY)(e):""}togglePage(e){this.currentPage=e,this.userListByPage=this.userList.slice((this.currentPage-1)*this.pageSize,this.pageSize*this.currentPage)}updateManagerList(){this.adminManagerService.getManagers().subscribe(e=>{this.managersList=e,this.changeDetectionRef.detectChanges()})}static#t=this.\u0275fac=function(r){return new(r||T)(t.Y36(l.qu),t.Y36(s.TU),t.Y36(c.jE),t.Y36(v),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:T,selectors:[["b2b-admin-manager"]],decls:34,vars:16,consts:[[1,"admin-manager"],[1,"admin-manager__form-group",3,"formGroup","ngSubmit"],[1,"admin-manager__form-group__container"],["type","text","b2bNgxInput","","formControlName","firstName","placeholder","First name","label","Enter first name",3,"theme"],["type","text","b2bNgxInput","","formControlName","lastName","placeholder","Second name","label","Enter second name",3,"theme"],["type","text","b2bNgxInput","","formControlName","url","placeholder","https://b2b.discount/blog","label","Enter the link for which the ref will be generated",1,"mb-3",3,"theme"],["b2bNgxButton","",3,"theme"],[1,"admin-manager__generated-link"],["b2bNgxInput","","disabled","","placeholder","Here will be generated link",3,"ngModel","theme","ngModelChange"],["b2bNgxButton","",3,"theme","disabled","click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","refId"],["class","th-id","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","firstName"],["class","th-firstName","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastName"],["class","th-lastName","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"admin-manager__generated-link",3,"formGroup","ngSubmit"],["type","text","b2bNgxInput","","formControlName","refId","placeholder","Ref id",3,"theme"],["mat-header-cell","",1,"th-id"],["mat-cell","",3,"click"],["mat-header-cell","",1,"th-firstName"],["mat-cell",""],["mat-header-cell","",1,"th-lastName"],["b2bNgxButton","",1,"delete-btn",3,"theme","click"],["mat-header-row",""],["mat-row",""],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","email"],["matColumnDef","registrationType"],["matColumnDef","country"],["matColumnDef","registrationDate"],["matColumnDef","company"],[3,"length","perPage","shouldScroll","currentPage","togglePageNumber"],["b2bNgxIcon","",3,"name",4,"ngIf"],["b2bNgxIcon","",3,"name"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return a.generateLink(a.formGroup)}),t.TgZ(2,"div",2)(3,"div"),t._UZ(4,"input",3),t.qZA(),t.TgZ(5,"div"),t._UZ(6,"input",4),t.qZA()(),t._UZ(7,"input",5),t.TgZ(8,"button",6),t._uU(9," Generate Link "),t.qZA()(),t.TgZ(10,"div",7)(11,"input",8),t.NdJ("ngModelChange",function(f){return a.generatedLink=f}),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return a.copyLink()}),t._uU(13," Copy URL "),t.qZA()(),t.TgZ(14,"table",10),t.ynx(15,11),t.YNc(16,I,2,0,"th",12)(17,B,2,1,"td",13),t.BQk(),t.ynx(18,14),t.YNc(19,k,2,0,"th",15)(20,U,2,1,"td",16),t.BQk(),t.ynx(21,17),t.YNc(22,L,2,0,"th",18)(23,E,2,1,"td",16),t.BQk(),t.ynx(24,19),t.YNc(25,R,1,0,"th",15)(26,S,3,1,"td",16),t.BQk(),t.YNc(27,J,1,0,"tr",20)(28,w,1,0,"tr",21),t.qZA(),t.TgZ(29,"form",22),t.NdJ("ngSubmit",function(){return a.getUsersByRefId(a.usersByRefIdGroup)}),t._UZ(30,"input",23),t.TgZ(31,"button",6),t._uU(32," Submit "),t.qZA()(),t.YNc(33,tt,22,8),t.qZA()),2&r&&(t.xp6(),t.Q6J("formGroup",a.formGroup),t.xp6(3),t.Q6J("theme",a.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(2),t.Q6J("theme",a.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(),t.Q6J("theme",a.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(),t.Q6J("theme",a.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.xp6(3),t.Q6J("ngModel",a.generatedLink)("theme",a.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(),t.Q6J("theme",a.b2bNgxButtonThemeEnum.BACKGROUND_BLACK)("disabled",!a.generatedLink),t.xp6(2),t.Q6J("dataSource",a.managersList),t.xp6(13),t.Q6J("matHeaderRowDef",a.displayedColumnsManagers),t.xp6(),t.Q6J("matRowDefColumns",a.displayedColumnsManagers),t.xp6(),t.Q6J("formGroup",a.usersByRefIdGroup),t.xp6(),t.Q6J("theme",a.b2bNgxInputThemeEnum.BACKGROUND_WHITE),t.xp6(),t.Q6J("theme",a.b2bNgxButtonThemeEnum.BACKGROUND_BLACK),t.xp6(2),t.um2(33,null!=a.userList&&a.userList.length?33:-1))},dependencies:[h.O5,D.k,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,O.f,l.On,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,Z.p,P.Q,h.uU],styles:[".admin-manager[_ngcontent-%COMP%]{padding:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:30px}.admin-manager__form-group__container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:49%}.admin-manager__form-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px}.admin-manager__generated-link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px}.admin-manager__generated-link[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%}.admin-manager__generated-link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:15%}[_nghost-%COMP%]  table{width:65%;margin-top:50px;background-color:#fff}[_nghost-%COMP%]  th.mat-mdc-header-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:first-of-type{padding-left:0}[_nghost-%COMP%]  th.mat-mdc-header-cell:last-of-type{padding-left:0}[_nghost-%COMP%]  td.mat-cell:last-of-type{padding-right:0}[_nghost-%COMP%]  .th-id{width:10%;text-align:center;background-color:#000;color:#fff;padding-top:18px}[_nghost-%COMP%]  .th-firstName{text-align:center;padding-left:0}[_nghost-%COMP%]  .th-lastName{text-align:center;padding-left:0}[_nghost-%COMP%]  .cdk-column-refId{text-align:center;background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:10%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8;cursor:pointer}[_nghost-%COMP%]  .cdk-column-lastName, [_nghost-%COMP%]  .cdk-column-email, [_nghost-%COMP%]  .cdk-column-registrationType, [_nghost-%COMP%]  .cdk-column-firstName, [_nghost-%COMP%]  .cdk-column-registrationDate, [_nghost-%COMP%]  .cdk-column-country, [_nghost-%COMP%]  .cdk-column-company{background-color:#fff;color:#000;padding-top:22px;padding-left:45px;font-size:20px;height:65px;width:40%;border-right:15px solid #f3f6f8;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .cdk-column-email>img{width:20px}[_nghost-%COMP%]  .cdk-column-company{width:50%;padding:5px}[_nghost-%COMP%]  .cdk-column-delete{background-color:#fff;height:65px;width:10%;border-bottom:15px solid #f3f6f8}[_nghost-%COMP%]  .delete-btn{width:100%;height:100%;transform:translateY(-17%)}"]})};return n=(0,x.gn)([(0,b.c)()],n),n})()}];let nt=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(et),p.Bz]})}return n})();var N=i(82242),it=i(43377),ot=i(98653),at=i(75870);let rt=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[h.ez,nt,N.r,l.UX,it.l,l.u5,N.r,u.p0,ot.w,at.u]})}return n})()},75870:(A,C,i)=>{i.d(C,{u:()=>y});var h=i(96814),p=i(98653),x=i(19212);let y=(()=>{class _{static#t=this.\u0275fac=function(d){return new(d||_)};static#e=this.\u0275mod=x.oAB({type:_});static#n=this.\u0275inj=x.cJS({imports:[h.ez,p.w]})}return _})()},70342:(A,C,i)=>{i.d(C,{Iq:()=>b,TU:()=>y});var h=i(96814),p=i(19212);class x{constructor(m,t){this._document=t;const s=this._textarea=this._document.createElement("textarea"),c=s.style;c.position="fixed",c.top=c.opacity="0",c.left="-999em",s.setAttribute("aria-hidden","true"),s.value=m,s.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(s)}copy(){const m=this._textarea;let t=!1;try{if(m){const s=this._document.activeElement;m.select(),m.setSelectionRange(0,m.value.length),t=this._document.execCommand("copy"),s&&s.focus()}}catch{}return t}destroy(){const m=this._textarea;m&&(m.remove(),this._textarea=void 0)}}let y=(()=>{class d{constructor(t){this._document=t}copy(t){const s=this.beginCopy(t),c=s.copy();return s.destroy(),c}beginCopy(t){return new x(t,this._document)}static#t=this.\u0275fac=function(s){return new(s||d)(p.LFG(h.K0))};static#e=this.\u0275prov=p.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),b=(()=>{class d{static#t=this.\u0275fac=function(s){return new(s||d)};static#e=this.\u0275mod=p.oAB({type:d});static#n=this.\u0275inj=p.cJS({})}return d})()}}]);