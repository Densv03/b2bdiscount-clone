"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[3877],{13877:(T,C,c)=>{c.r(C),c.d(C,{AdminLogisticModule:()=>Zt});var d=c(96814),h=c(44112),f=c(97582),r=c(56223),p=c(19347),t=c(19212),m=c(62033),y=c(32296),b=c(30617),w=c(94546),L=c(64024),I=c(89515);function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.removeEmail(a))}),t.TgZ(1,"div",19),t._uU(2),t.qZA(),t.TgZ(3,"button",20),t._uU(4,"Delete"),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e)}}function U(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"b2b-ngx-checkbox",21),t.NdJ("checkboxChange",function(o){const l=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.setTransportType(o,l.value))}),t._uU(2),t.qZA()()}if(2&n){const e=s.$implicit;t.xp6(),t.Q6J("checked",e.checked),t.xp6(),t.hij(" ",e.label," ")}}let S=(()=>{class n{constructor(e,i){this.dialogData=e,this.dialogRef=i,this.transportTypes=["Sea","Air"].map(o=>({value:o,label:o,checked:!1})),this.selectedTransportTypes=[],this.emailsList=[]}ngOnInit(){this.setFormGroup(),this.emailsList=this.dialogData.email instanceof Array?this.dialogData.email:[this.dialogData.email]}addEmail(){this.profileForm.get("email").valid&&this.profileForm.get("email").value.trim()&&(this.emailsList.push(this.profileForm.value.email),this.profileForm.get("email").reset())}removeEmail(e){this.emailsList=this.emailsList.filter(i=>i!==e)}save(){this.dialogRef.close({...this.profileForm.value,email:this.emailsList})}setTransportType(e,i){if(e.target.checked)this.selectedTransportTypes.push(i);else{const o=this.selectedTransportTypes.indexOf(i);this.selectedTransportTypes.splice(o,1)}this.profileForm.patchValue({transportType:this.selectedTransportTypes},{emitEvent:!1})}setFormGroup(){this.profileForm=new r.cw({name:new r.NI(this.dialogData?.name||null,r.kI.required),country:new r.NI(this.dialogData?.country?.toLowerCase()||null,r.kI.required),email:new r.NI(null,[r.kI.required,r.kI.email]),phone:new r.NI(this.dialogData?.phone||null,r.kI.required),transportType:new r.NI(this.dialogData?.transportType||null,r.kI.required)}),this.dialogData?.transportType&&(this.transportTypes.map(e=>e.checked=this.dialogData.transportType.includes(e.value)),this.selectedTransportTypes=[...this.dialogData.transportType])}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(p.WI),t.Y36(p.so))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["b2b-add-logistic-profile-dialog"]],decls:32,vars:13,consts:[[1,"dialog-wrapper"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-close","","mat-icon-button","",1,"close-button"],[1,"close-icon"],[3,"formGroup"],["type","text","placeholder","Enter company name","label","Company name","formControlName","name",1,"b2b-ngx-input","background","background-gray"],[1,"two-in-row","mt-16"],["formControlName","country","placeholder","Select Country"],[1,"mt-16","d-flex","email-wrapper"],["for","email",1,"b2b-ngx-input-label"],["id","email","autocomplete","new-email","formControlName","email",1,"b2b-ngx-input","background","background-gray","grow-1",3,"placeholder"],["mat-raised-button","","color","primary",3,"click"],[1,"mt-16","emails-list"],[1,"mt-16"],["formControlName","phone",3,"errors"],[4,"ngFor","ngForOf"],[1,"button-wrapper","mt-16"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"d-flex","list-item","justify-between",3,"click"],[1,"email"],["mat-raised-button","","color","warn"],[3,"checked","checkboxChange"],["class","d-flex list-item justify-between"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"section",4),t._UZ(7,"input",5),t.TgZ(8,"div",6)(9,"div"),t._UZ(10,"b2b-ngx-country-select",7),t.qZA()(),t.TgZ(11,"div",8)(12,"div")(13,"label",9),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",10),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",11),t.NdJ("click",function(){return o.addEmail()}),t._uU(19,"Add Email"),t.qZA()(),t.TgZ(20,"div",12),t.SjG(21,J,5,1,"div",22,t.x6l),t.qZA(),t.TgZ(23,"div",13)(24,"b2b-ngx-tel",14),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t.TgZ(27,"div",6),t.YNc(28,U,3,2,"div",15),t.qZA()(),t.TgZ(29,"div",16)(30,"button",17),t.NdJ("click",function(){return o.save()}),t._uU(31," Save "),t.qZA()()()),2&i&&(t.xp6(2),t.hij(" ",o.dialogData?"Edit "+o.dialogData.name:"Add profile"," "),t.xp6(4),t.Q6J("formGroup",o.profileForm),t.xp6(8),t.hij(" ",t.lcZ(15,7,"LABELS.EMAIL")," "),t.xp6(2),t.Q6J("placeholder",t.lcZ(17,9,"PLACEHOLDERS.YOUR_EMAIL")),t.xp6(5),t.wJu(o.emailsList),t.xp6(3),t.Q6J("errors",null==o.profileForm.controls.phone?null:o.profileForm.controls.phone.errors),t.xp6(),t.hij(" ",t.lcZ(26,11,"LABELS.PHONE")," "),t.xp6(3),t.Q6J("ngForOf",o.transportTypes))},dependencies:[d.sg,m.V,r.Fj,r.JJ,r.JL,r.sg,r.u,p.ZT,p.uh,y.lW,y.RK,b.Hw,w.Z,L.a,I.X$],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}section[_ngcontent-%COMP%]   .two-in-row[_ngcontent-%COMP%]{display:flex;align-items:end;gap:16px}section[_ngcontent-%COMP%]   .two-in-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 50%}.mt-16[_ngcontent-%COMP%]{margin-top:16px}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7.5px 15px}.email-wrapper[_ngcontent-%COMP%]{align-items:flex-end;justify-content:space-between;gap:10px}.email-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-grow:1}.emails-list[_ngcontent-%COMP%]{max-height:200px;overflow:auto;display:flex;flex-direction:column;gap:10px}.emails-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;align-items:center}.emails-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{width:80%}"]})}return n})();var g=c(78791),v=c(65619),M=c(94664),O=c(67028),P=c(32181),k=c(87046),x=c(86825);const A=(n,s=!1)=>e=>e.value&&n.some(o=>(s?o?.toLowerCase():o.name?.toLowerCase())===e.value.toLowerCase())?{cityExists:!0}:null;var F=c(71042),E=c(88657),G=c(53803);function j(n,s){if(1&n&&(t.TgZ(0,"p",17),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);t.Q6J("@fadeInOut",void 0),t.xp6(),t.hij(" This ",e.directionForm.controls.type.value," already exist ")}}function Q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",18),t._UZ(1,"input",19),t.TgZ(2,"img",20),t.NdJ("click",function(){const a=t.CHM(e).$index,l=t.oxw(3);return t.KtG(l.deleteAlternativeName(a))}),t.qZA()()}if(2&n){const e=s.$index;t.xp6(),t.Q6J("formControlName",e)}}function B(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",11),t._UZ(1,"b2b-ngx-country-select",12),t.qZA(),t.YNc(2,j,2,2,"p",13),t.TgZ(3,"div",14),t.SjG(4,Q,3,1,"div",21,t.x6l),t.qZA(),t.TgZ(6,"div",15)(7,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addField())}),t._uU(8," + Add more "),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",null==e.directionForm.get("country").errors?null:e.directionForm.get("country").errors.cityExists),t.xp6(2),t.wJu(e.countryNames.controls)}}const R=(n,s)=>({value:n,length:s});function V(n,s){if(1&n&&t._UZ(0,"b2b-ngx-country-select",22),2&n){const e=t.oxw(2);t.Q6J("customOptions",t.WLB(1,R,e.cityOptions,null==e.cityOptions.value?null:e.cityOptions.value.length))}}function Y(n,s){if(1&n&&(t.TgZ(0,"div",5),t.YNc(1,B,9,1)(2,V,1,4),t.qZA()),2&n){const e=t.oxw();t.xp6(),t.um2(1,"country"===e.directionForm.controls.type.value?1:2)}}function q(n,s){if(1&n&&(t.TgZ(0,"p",17),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("@fadeInOut",void 0),t.xp6(),t.hij(" This ",e.directionForm.controls.type.value," already exist ")}}function H(n,s){if(1&n&&(t.TgZ(0,"div",5),t._UZ(1,"input",23),t.YNc(2,q,2,2,"p",13),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",null==e.directionForm.get("name").errors?null:e.directionForm.get("name").errors.cityExists)}}function K(n,s){1&n&&(t.TgZ(0,"b2b-ngx-checkbox",24),t._uU(1," Active "),t.qZA())}let $=(()=>{let n=class N{constructor(e,i,o){this.dialogRef=e,this.adminLogisticService=i,this.changeDetectorRef=o,this.types=["Country","City","Port","Airport"].map(a=>({type:a.toLowerCase(),name:a})),this.showNameInput=!1,this.b2bNgxSelectThemeEnum=k.B,this.directionCountryOptions=new v.X(null),this.countryOptions=new v.X(null)}get countryNames(){return this.directionForm?.get("countryNames")}ngOnInit(){this.setForm()}deleteAlternativeName(e){this.countryNames.removeAt(e)}addField(){this.countryNames.push(new r.NI(null))}save(){if(this.directionForm.invalid)return void this.directionForm.markAllAsTouched();const{type:e,country:i,active:a}=this.directionForm.value,l={type:e,name:"country"!==e?this.directionForm.value.name:(0,O.oY)(i),active:a};"city"===e&&(l.countryId=i),("port"===e||"airport"===e)&&(l.cityId=i),"country"===e&&this.countryNames.length>0&&(l.countryNames=this.countryNames.value),this.dialogRef.close(l)}setForm(){this.directionForm=new r.cw({type:new r.NI(null,r.kI.required),country:new r.NI(null),name:new r.NI(null),city:new r.NI(null),active:new r.NI(!1),countryNames:new r.Oe([new r.NI(null)])});const e=this.directionForm.get("country"),i=this.directionForm.get("name"),o=this.directionForm.get("city");this.directionForm.controls.type.valueChanges.pipe((0,g.t)(this)).subscribe(a=>{i.reset(),e.reset(),i.clearValidators(),e.clearValidators(),o.clearValidators(),i.setErrors(null),e.setErrors(null),o.setErrors(null),"country"!==a?(this.countryOptions=this.directionCountryOptions,e.setValidators([r.kI.required]),i.setValidators([r.kI.required]),this.showNameInput=!0,"port"===a||"airport"===a?o.setValidators([r.kI.required]):i.disable()):(this.countryOptions=null,this.showNameInput=!1,e.setValidators(A(this.directions.map(l=>(0,O.Cq)(l.name)),!0))),this.directionForm.updateValueAndValidity(),this.changeDetectorRef.detectChanges()}),e.valueChanges.pipe((0,P.h)(a=>!!a),(0,g.t)(this)).subscribe(a=>{if("city"===this.directionForm.controls.type.value)i.enable(),i.setValidators(A(this.directions.find(l=>l._id===a).cities)),this.directionForm.updateValueAndValidity(),this.changeDetectorRef.detectChanges();else{let l=null;this.directions.some(_=>_.cities.some(Z=>Z._id===a&&(l="port"===this.directionForm.controls.type.value?Z.ports:Z.airports,!0))),i.enable(),i.setValidators(A(l)),this.directionForm.updateValueAndValidity(),this.changeDetectorRef.detectChanges()}})}static#t=this.\u0275fac=function(i){return new(i||N)(t.Y36(p.so),t.Y36(F.d),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:N,selectors:[["b2b-create-direction-dialog"]],decls:15,vars:6,consts:[[1,"dialog-wrapper"],["mat-dialog-title","",1,"dialog-title"],["mat-dialog-close","","mat-icon-button","",1,"close-button"],[1,"close-icon"],[3,"formGroup"],[1,"search-wrapper"],["formControlName","type","bindValue","type","bindLabel","name","placeholder","Select direction type",3,"options","theme"],["class","search-wrapper",4,"ngIf"],["formControlName","active",4,"ngIf"],[1,"button-wrapper","mt-16"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"pt-2"],["formControlName","country","placeholder","Select Country",1,"admin-article__country"],["class","error",4,"ngIf"],["formArrayName","countryNames"],[1,"d-flex","justify-content-end","w-100"],["type","button",1,"add-more","bg-white",3,"click"],[1,"error"],[1,"d-flex","gap-1","pt-4"],["placeholder","Input alternative country name",1,"b2b-ngx-input","background","background-gray",3,"formControlName"],["b2bNgxIcon","","name","delete",3,"click"],["class","d-flex gap-1 pt-4"],["formControlName","country","placeholder","Select city",1,"admin-article__country",3,"customOptions"],["formControlName","name","placeholder","Input name of direction",1,"b2b-ngx-input","background","background-gray"],["formControlName","active"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2," Create direction "),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"section",4)(7,"div",5),t._UZ(8,"b2b-ngx-select",6),t.qZA(),t.YNc(9,Y,3,1,"div",7)(10,H,3,1,"div",7)(11,K,2,0,"b2b-ngx-checkbox",8),t.TgZ(12,"div",9)(13,"button",10),t.NdJ("click",function(){return o.save()}),t._uU(14," Save "),t.qZA()()()()),2&i&&(t.xp6(6),t.Q6J("formGroup",o.directionForm),t.xp6(2),t.Q6J("options",o.types)("theme",o.b2bNgxSelectThemeEnum.BACKGROUND_GRAY),t.xp6(),t.Q6J("ngIf",o.directionForm.controls.type.value),t.xp6(),t.Q6J("ngIf",o.showNameInput),t.xp6(),t.Q6J("ngIf",o.directionForm.controls.type.value))},dependencies:[d.O5,m.V,r.Fj,r.JJ,r.JL,r.sg,r.u,r.CE,p.ZT,p.uh,y.RK,b.Hw,L.a,E.B,G.p],styles:[".dialog-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mt-16[_ngcontent-%COMP%]{margin-top:16px}section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;min-height:300px}section[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}section[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7.5px 15px}.add-more[_ngcontent-%COMP%]{margin-top:24px;border-radius:4px;padding:8px 18px;border:1px solid black}.error[_ngcontent-%COMP%]{font-size:14px;color:#e63d3d;margin-top:7px;margin-bottom:0}"],data:{animation:[(0,x.X$)("fadeInOut",[(0,x.eR)(":enter",[(0,x.oB)({opacity:0}),(0,x.jt)(500,(0,x.oB)({opacity:1}))]),(0,x.eR)(":leave",[(0,x.jt)(500,(0,x.oB)({opacity:0}))])])]}})};return n=(0,f.gn)([(0,g.c)()],n),n})();var z=c(58133),u=c(25313),W=c(25819),X=c(79645);function tt(n,s){if(1&n&&(t.TgZ(0,"div",11)(1,"b2b-ngx-select",18),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(),t.Q6J("placeholder","Port"===e.pointsGroup.controls.type.value?"Select port":"Select airport")("options",e.itemOptions)("theme",e.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.xp6(),t.hij(" ","Port"===e.pointsGroup.controls.type.value?"Select port":"Select airport"," ")}}function et(n,s){1&n&&(t.TgZ(0,"th",31),t._uU(1,"Name"),t.qZA())}function nt(n,s){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(),t.Oqu(e.name)}}function ot(n,s){1&n&&(t.TgZ(0,"th",31),t._uU(1,"Country"),t.qZA())}function it(n,s){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(),t.hij(" ",i.getName(e.country)," ")}}function rt(n,s){1&n&&(t.TgZ(0,"th",31),t._uU(1,"Email"),t.qZA())}function ct(n,s){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(),t.Oqu(e.email)}}function at(n,s){1&n&&(t.TgZ(0,"th",31),t._uU(1,"Phone"),t.qZA())}function st(n,s){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(),t.hij(" ",e.phone.internationalNumber," ")}}function lt(n,s){1&n&&(t.TgZ(0,"th",31),t._uU(1,"Transport type"),t.qZA())}function pt(n,s){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(),t.Oqu(e.transportType)}}function dt(n,s){1&n&&(t.TgZ(0,"th",31),t._uU(1,"Actions"),t.qZA())}function mt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",32)(1,"div",33)(2,"button",34),t.NdJ("click",function(o){const l=t.CHM(e).$implicit,_=t.oxw(2);return o.stopPropagation(),t.KtG(_.addLogisticProfile(l))}),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA()(),t.TgZ(5,"button",34),t.NdJ("click",function(o){const l=t.CHM(e).$implicit,_=t.oxw(2);return o.stopPropagation(),t.KtG(_.deleteLogisticProfile(l))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()()()}}function gt(n,s){1&n&&t._UZ(0,"tr",35)}function ut(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr",36),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.openProfileDetails(a._id))}),t.qZA()}}function ht(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",19),t.ynx(2,20),t.YNc(3,et,2,0,"th",21)(4,nt,2,1,"td",22),t.BQk(),t.ynx(5,23),t.YNc(6,ot,2,0,"th",21)(7,it,2,1,"td",22),t.BQk(),t.ynx(8,24),t.YNc(9,rt,2,0,"th",21)(10,ct,2,1,"td",22),t.BQk(),t.ynx(11,25),t.YNc(12,at,2,0,"th",21)(13,st,2,1,"td",22),t.BQk(),t.ynx(14,26),t.YNc(15,lt,2,0,"th",21)(16,pt,2,1,"td",22),t.BQk(),t.ynx(17,27),t.YNc(18,dt,2,0,"th",21)(19,mt,8,0,"td",22),t.BQk(),t.YNc(20,gt,1,0,"tr",28)(21,ut,1,0,"tr",29),t.qZA(),t.TgZ(22,"b2b-pagination",30),t.NdJ("togglePageNumber",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.togglePage(o))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(),t.Q6J("dataSource",e.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(),t.Q6J("currentPage",e.currentPage)("length",e.totalCount)("perPage",e.productsLimit)}}function _t(n,s){1&n&&(t.TgZ(0,"h3"),t._uU(1,"No companies found"),t.qZA())}const ft=()=>["Port","Airport"],Ct=(n,s)=>({value:n,length:s}),xt=[{path:"",component:(()=>{let n=class D{constructor(e,i,o,a,l){this.dialog=e,this.router=i,this.adminLogisticService=o,this.hotToastService=a,this.changeDetectorRef=l,this.displayedColumns=["name","country","email","phone","transportType","actions"],this.transportTypes=["Sea","Air"].map(_=>({_id:_.toLowerCase(),name:_})),this.b2bNgxSelectThemeEnum=k.B,this.productsLimit=20,this.currentPage=1,this.countryOptions=new v.X(null),this.cityOptions=new v.X(null),this.filteredQueryObj={limit:this.productsLimit,offset:0},this.getName=O.oY}ngOnInit(){this.getDirectionOptions(),this.fetchData(),this.setFormGroup()}addLogisticProfile(e){this.dialog.open(S,{width:"500px",data:e}).afterClosed().pipe((0,P.h)(o=>!!o),(0,M.w)(o=>{const a={...o,contactPhoneNumber:o.phone.number,contactPhoneInternationalNumber:o.phone.internationalNumber,contactPhoneNationalNumber:o.phone.nationalNumber,contactPhoneE164Number:o.phone.e164Number,contactPhoneCountryCode:o.phone.countryCode,contactPhoneDialCode:o.phone.dialCode};return e?this.adminLogisticService.updateCompanyProfile(a,e._id):this.adminLogisticService.createCompanyProfile(a)}),(0,g.t)(this)).subscribe(()=>{this.fetchData(),this.hotToastService.success(e?"Profile was successfully updated":"New profile was successfully created")})}createDirection(){const e=this.dialog.open($,{width:"500px",minHeight:"400px"});e.componentInstance.directionCountryOptions=this.countryOptions,e.componentInstance.cityOptions=this.cityOptions,e.componentInstance.directions=this.directions,e.afterClosed().pipe((0,P.h)(i=>!!i),(0,M.w)(i=>this.adminLogisticService.createDirection(i)),(0,g.t)(this)).subscribe(()=>{this.countryOptions.next(null),this.getDirectionOptions(),this.hotToastService.success("Direction was successfully created")})}deleteLogisticProfile(e){this.adminLogisticService.deleteCompanyProfile(e._id).pipe((0,g.t)(this)).subscribe(()=>{this.hotToastService.success("Profile was successfully deleted"),this.fetchData()})}togglePage(e){this.filteredQueryObj={...this.filteredQueryObj,offset:(e-1)*this.productsLimit},this.currentPage=e,this.fetchData()}openProfileDetails(e){this.router.navigate(["/logistic",e])}setNullableValue(e,i){"searchGroup"===e?this.searchGroup.patchValue(i&&"type"===i?{type:null}:{country:null},{emitEvent:!1}):this.pointsGroup.patchValue({countryId:null},{emitEvent:!1})}radioDisable(e){e.target.id.slice(0,-1)===this.pointsGroup.controls.type.value&&this.pointsGroup.controls.type.reset()}fetchData(e){this.adminLogisticService.getCompanies(this.filteredQueryObj.limit,this.filteredQueryObj.offset,e).pipe((0,g.t)(this)).subscribe(i=>{this.totalCount=i.totalCount,this.dataSource=i.companies,this.changeDetectorRef.detectChanges()},i=>this.hotToastService.error(i.error.message))}setFormGroup(){this.searchGroup=new r.cw({name:new r.NI(null),country:new r.NI(null),type:new r.NI(null),q:new r.NI(null)}),this.pointsGroup=new r.cw({countryId:new r.NI(null),items:new r.NI(null),type:new r.NI(null)}),this.searchGroup.valueChanges.pipe((0,g.t)(this)).subscribe(e=>{const i={};for(const o in e)null!=e[o]&&(i[o]=e[o]);this.fetchData(i),this.changeDetectorRef.detectChanges()}),this.pointsGroup.valueChanges.pipe((0,P.h)(e=>!!e.countryId),(0,M.w)(e=>this.adminLogisticService.getDirection(e.countryId)),(0,g.t)(this)).subscribe(e=>{const i=e.data.map("Port"===this.pointsGroup.controls.type.value?o=>o.cities.filter(a=>!!a.ports&&a.ports.length>0).map(a=>a.ports):o=>o.cities.filter(a=>!!a.airports&&a.airports.length>0).map(a=>a.airports));this.itemOptions=i.flatMap(o=>o.flat())})}getDirectionOptions(){this.adminLogisticService.getDirection().pipe((0,g.t)(this)).subscribe(e=>{this.countryOptions.next(e.data.map(i=>({label:i.name,icon:(0,O.Cq)(i.name),code:i._id}))),this.directions=e.data,this.cityOptions.next(e.data.map(i=>i.cities.map(o=>({label:o.name,code:o._id,icon:(0,O.Cq)(i.name)}))).flatMap(i=>i.flat()))})}static#t=this.\u0275fac=function(i){return new(i||D)(t.Y36(p.uw),t.Y36(h.F0),t.Y36(F.d),t.Y36(z.jE),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:D,selectors:[["b2b-admin-logistic"]],decls:30,vars:24,consts:[[1,"logistic-wrapper"],[1,"point-actions",3,"formGroup"],[1,"logistic-header-wrapper"],["formControlName","type",3,"options","click"],[1,"search-wrapper","country-wrapper"],["formControlName","countryId","placeholder","Select Country",3,"customOptions","theme"],[3,"click"],["class","search-wrapper",4,"ngIf"],[1,"logistic-header-wrapper",3,"formGroup"],[1,"b2b-ngx-button","background","background-black",3,"click"],[1,"b2b-ngx-button","background","background-black",3,"disabled","click"],[1,"search-wrapper"],["formControlName","name","placeholder","Search by name",1,"b2b-ngx-input","background","background-white"],["formControlName","country","placeholder","Select Country",3,"theme"],["formControlName","type","placeholder","Search by transport type","bindValue","_id","bindLabel","name",3,"options","theme"],["formControlName","q","label","Search","placeholder","Search",1,"b2b-ngx-input","background","background-white"],[4,"ngIf","ngIfElse"],["noProfiles",""],["formControlName","items","bindValue","_id","bindLabel","name",3,"placeholder","options","theme"],["mat-table","",1,"mat-elevation-z8","w-100","mt-4",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","country"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","transportType"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"currentPage","length","perPage","togglePageNumber"],["mat-header-cell",""],["mat-cell",""],[1,"actions-block"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,o){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"b2b-ngx-radio",3),t.NdJ("click",function(l){return o.radioDisable(l)}),t.qZA(),t.TgZ(4,"div",4)(5,"b2b-ngx-country-select",5),t._uU(6,"Select country for ports or airports"),t.qZA(),t.TgZ(7,"mat-icon",6),t.NdJ("click",function(){return o.setNullableValue("pointsGroup")}),t._uU(8,"close"),t.qZA()(),t.YNc(9,tt,3,4,"div",7),t.qZA()(),t.TgZ(10,"div",8)(11,"button",9),t.NdJ("click",function(){return o.addLogisticProfile()}),t._uU(12," Add logistic profile "),t.qZA(),t.TgZ(13,"button",10),t.NdJ("click",function(){return o.createDirection()}),t.ALo(14,"async"),t._uU(15," Create direction "),t.qZA(),t.TgZ(16,"div",11),t._UZ(17,"input",12),t.qZA(),t.TgZ(18,"div",4),t._UZ(19,"b2b-ngx-country-select",13),t.TgZ(20,"mat-icon",6),t.NdJ("click",function(){return o.setNullableValue("searchGroup")}),t._uU(21,"close"),t.qZA()(),t.TgZ(22,"div",4),t._UZ(23,"b2b-ngx-select",14),t.TgZ(24,"mat-icon",6),t.NdJ("click",function(){return o.setNullableValue("searchGroup","type")}),t._uU(25,"close"),t.qZA()(),t._UZ(26,"input",15),t.qZA(),t.YNc(27,ht,23,6,"ng-container",16)(28,_t,2,0,"ng-template",null,17,t.W1O),t.qZA()),2&i){const a=t.MAs(29);t.xp6(),t.Q6J("formGroup",o.pointsGroup),t.xp6(2),t.Q6J("options",t.DdM(20,ft)),t.xp6(2),t.Q6J("customOptions",t.WLB(21,Ct,o.countryOptions,null==o.countryOptions.value?null:o.countryOptions.value.length))("theme",o.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.xp6(2),t.ekj("show",null==o.pointsGroup?null:o.pointsGroup.controls.countryId.value),t.xp6(2),t.Q6J("ngIf",o.pointsGroup.controls.countryId.value&&o.pointsGroup.controls.type.value),t.xp6(),t.Q6J("formGroup",o.searchGroup),t.xp6(3),t.Q6J("disabled",!t.lcZ(14,18,o.countryOptions)),t.xp6(6),t.Q6J("theme",o.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.xp6(),t.ekj("show",o.searchGroup.controls.country.value),t.xp6(3),t.Q6J("options",o.transportTypes)("theme",o.b2bNgxSelectThemeEnum.BACKGROUND_WHITE),t.xp6(),t.ekj("show",o.searchGroup.controls.type.value),t.xp6(3),t.Q6J("ngIf",o.totalCount)("ngIfElse",a)}},dependencies:[d.O5,m.V,r.Fj,r.JJ,r.JL,r.sg,r.u,y.RK,b.Hw,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,E.B,W.Z,X.Q,d.Ov],styles:[".logistic-wrapper[_ngcontent-%COMP%]{padding:30px}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]{padding-bottom:24px;margin-bottom:24px;border-bottom:1px solid lightgray}.logistic-wrapper[_ngcontent-%COMP%]   .point-actions[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{align-items:center}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:24px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .b2b-ngx-button[_ngcontent-%COMP%]{padding:7.5px 15px}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:48%}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]{position:relative}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}.logistic-wrapper[_ngcontent-%COMP%]   .logistic-header-wrapper[_ngcontent-%COMP%]   .country-wrapper[_ngcontent-%COMP%]   mat-icon.show[_ngcontent-%COMP%]{display:initial;position:absolute;top:16px;left:-19px;color:gray;font-size:15px;width:12px;height:12px;cursor:pointer}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%], .logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{height:max-content}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:16px;padding:12px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#add8e6}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%]{padding-left:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{text-align:end;padding-right:24px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:8px;padding:5px 0}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;background:#add8e6;border-radius:5px}.logistic-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   .actions-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;line-height:13px;color:#fff}.logistic-wrapper[_ngcontent-%COMP%]   table.no-background[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{cursor:initial;background:transparent}.logistic-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}  input.datepicker{height:64px;border:none;border-radius:14px;padding:0 16px;width:100%;max-width:191px}  input.datepicker::placeholder{padding-left:20px}.error-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:500px;padding:16px;border-radius:8px;background:#fff;max-width:50%;margin-top:24px}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:15px;line-height:22px;padding-bottom:12px;font-weight:400}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]:first-of-type{color:gray}.error-list[_ngcontent-%COMP%]   .error-field[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{min-width:50%;font-weight:600}"]})};return n=(0,f.gn)([(0,g.c)()],n),n})()}];let yt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(xt),h.Bz]})}return n})();var bt=c(80150),Ot=c(23031),vt=c(47981),Pt=c(89611),Tt=c(74027),wt=c(34067),Mt=c(75870),At=c(98653);let Zt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.ez,yt,bt.N,r.UX,p.Is,y.ot,b.Ps,I.aw,Ot.c,vt.T,Pt.z,u.p0,Tt.F,wt.I,Mt.u,At.w]})}return n})()},89611:(T,C,c)=>{c.d(C,{z:()=>f});var d=c(96814),h=c(19212);let f=(()=>{class r{static#t=this.\u0275fac=function(m){return new(m||r)};static#e=this.\u0275mod=h.oAB({type:r});static#n=this.\u0275inj=h.cJS({imports:[d.ez]})}return r})()},34067:(T,C,c)=>{c.d(C,{I:()=>p});var d=c(96814),h=c(56223),f=c(98653),r=c(19212);let p=(()=>{class m{static#t=this.\u0275fac=function(w){return new(w||m)};static#e=this.\u0275mod=r.oAB({type:m});static#n=this.\u0275inj=r.cJS({imports:[d.ez,h.UX,f.w]})}return m})();c(25819)},75870:(T,C,c)=>{c.d(C,{u:()=>r});var d=c(96814),h=c(98653),f=c(19212);let r=(()=>{class p{static#t=this.\u0275fac=function(y){return new(y||p)};static#e=this.\u0275mod=f.oAB({type:p});static#n=this.\u0275inj=f.cJS({imports:[d.ez,h.w]})}return p})()}}]);